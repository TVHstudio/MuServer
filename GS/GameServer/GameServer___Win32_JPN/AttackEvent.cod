; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\AttackEvent.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	?SetMenualStart@CAttackEvent@@QAEXH@Z		; CAttackEvent::SetMenualStart
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\attackevent.h
;	COMDAT ?SetMenualStart@CAttackEvent@@QAEXH@Z
_TEXT	SEGMENT
_bMenualStart$ = 8					; size = 4
?SetMenualStart@CAttackEvent@@QAEXH@Z PROC		; CAttackEvent::SetMenualStart, COMDAT
; _this$ = ecx

; 22   : 	void SetMenualStart(BOOL bMenualStart){this->m_bMenualStart = bMenualStart;};

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8b 45 08	 mov	 eax, DWORD PTR _bMenualStart$[ebp]
  00006	89 41 28	 mov	 DWORD PTR [ecx+40], eax
  00009	5d		 pop	 ebp
  0000a	c2 04 00	 ret	 4
?SetMenualStart@CAttackEvent@@QAEXH@Z ENDP		; CAttackEvent::SetMenualStart
_TEXT	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_7CAttackEvent@@6B@				; CAttackEvent::`vftable'
PUBLIC	??1CAttackEvent@@UAE@XZ				; CAttackEvent::~CAttackEvent
PUBLIC	??_R4CAttackEvent@@6B@				; CAttackEvent::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCAttackEvent@@@8			; CAttackEvent `RTTI Type Descriptor'
PUBLIC	??_R3CAttackEvent@@8				; CAttackEvent::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CAttackEvent@@8				; CAttackEvent::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CAttackEvent@@8			; CAttackEvent::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECAttackEvent@@UAEPAXI@Z:PROC		; CAttackEvent::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CAttackEvent@@8
; File e:\work\tranet_version\gs\gameserver\attackevent.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CAttackEvent@@8 DD FLAT:??_R0?AVCAttackEvent@@@8 ; CAttackEvent::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CAttackEvent@@8
rdata$r	ENDS
;	COMDAT ??_R2CAttackEvent@@8
rdata$r	SEGMENT
??_R2CAttackEvent@@8 DD FLAT:??_R1A@?0A@EA@CAttackEvent@@8 ; CAttackEvent::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CAttackEvent@@8
rdata$r	SEGMENT
??_R3CAttackEvent@@8 DD 00H				; CAttackEvent::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CAttackEvent@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCAttackEvent@@@8
_DATA	SEGMENT
??_R0?AVCAttackEvent@@@8 DD FLAT:??_7type_info@@6B@	; CAttackEvent `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCAttackEvent@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CAttackEvent@@6B@
rdata$r	SEGMENT
??_R4CAttackEvent@@6B@ DD 00H				; CAttackEvent::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCAttackEvent@@@8
	DD	FLAT:??_R3CAttackEvent@@8
rdata$r	ENDS
;	COMDAT ??_7CAttackEvent@@6B@
CONST	SEGMENT
??_7CAttackEvent@@6B@ DD FLAT:??_R4CAttackEvent@@6B@	; CAttackEvent::`vftable'
	DD	FLAT:??_ECAttackEvent@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??1CAttackEvent@@UAE@XZ
_TEXT	SEGMENT
??1CAttackEvent@@UAE@XZ PROC				; CAttackEvent::~CAttackEvent, COMDAT
; _this$ = ecx

; 13   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CAttackEvent@@6B@

; 14   : 	return;
; 15   : }

  00006	c3		 ret	 0
??1CAttackEvent@@UAE@XZ ENDP				; CAttackEvent::~CAttackEvent
_TEXT	ENDS
PUBLIC	?Init@CAttackEvent@@QAEXXZ			; CAttackEvent::Init
EXTRN	__imp__GetTickCount@0:PROC
; Function compile flags: /Ogtp
;	COMDAT ?Init@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?Init@CAttackEvent@@QAEXXZ PROC				; CAttackEvent::Init, COMDAT
; _this$ = ecx

; 18   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 19   : 	this->EventState = false;

  00003	c6 46 04 00	 mov	 BYTE PTR [esi+4], 0

; 20   : 	this->EventStartTime = GetTickCount();

  00007	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0000d	89 46 08	 mov	 DWORD PTR [esi+8], eax

; 21   : 	this->m_MapNumber = MAP_INDEX_RORENCIA;

  00010	c6 46 0c 00	 mov	 BYTE PTR [esi+12], 0
  00014	5e		 pop	 esi

; 22   : }

  00015	c3		 ret	 0
?Init@CAttackEvent@@QAEXXZ ENDP				; CAttackEvent::Init
_TEXT	ENDS
PUBLIC	?Start@CAttackEvent@@QAEXXZ			; CAttackEvent::Start
; Function compile flags: /Ogtp
;	COMDAT ?Start@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?Start@CAttackEvent@@QAEXXZ PROC			; CAttackEvent::Start, COMDAT
; _this$ = ecx

; 25   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 26   : 	this->EventState = true;

  00003	c6 46 04 01	 mov	 BYTE PTR [esi+4], 1

; 27   : 	this->EventStartTime = GetTickCount();

  00007	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0000d	89 46 08	 mov	 DWORD PTR [esi+8], eax
  00010	5e		 pop	 esi

; 28   : }

  00011	c3		 ret	 0
?Start@CAttackEvent@@QAEXXZ ENDP			; CAttackEvent::Start
_TEXT	ENDS
PUBLIC	?End@CAttackEvent@@QAEXXZ			; CAttackEvent::End
; Function compile flags: /Ogtp
;	COMDAT ?End@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?End@CAttackEvent@@QAEXXZ PROC				; CAttackEvent::End, COMDAT
; _this$ = ecx

; 32   : 	return;
; 33   : }

  00000	c3		 ret	 0
?End@CAttackEvent@@QAEXXZ ENDP				; CAttackEvent::End
_TEXT	ENDS
PUBLIC	?Run@CAttackEvent@@QAEXXZ			; CAttackEvent::Run
; Function compile flags: /Ogtp
;	COMDAT ?Run@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?Run@CAttackEvent@@QAEXXZ PROC				; CAttackEvent::Run, COMDAT
; _this$ = ecx

; 37   : 	return;
; 38   : }

  00000	c3		 ret	 0
?Run@CAttackEvent@@QAEXXZ ENDP				; CAttackEvent::Run
_TEXT	ENDS
PUBLIC	??_C@_0BH@PHJBIBLO@event?5?$CFd?5?$CFd?5?$CFd?5create?5?$AA@ ; `string'
PUBLIC	?Active@CAttackEvent@@QAEXXZ			; CAttackEvent::Active
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z:PROC ; CMonsterSetBase::GetBoxPosition
EXTRN	?gMSetBase@@3VCMonsterSetBase@@A:BYTE		; gMSetBase
EXTRN	_rand:PROC
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
;	COMDAT ??_C@_0BH@PHJBIBLO@event?5?$CFd?5?$CFd?5?$CFd?5create?5?$AA@
CONST	SEGMENT
??_C@_0BH@PHJBIBLO@event?5?$CFd?5?$CFd?5?$CFd?5create?5?$AA@ DB 'event %d'
	DB	' %d %d create ', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Active@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?Active@CAttackEvent@@QAEXXZ PROC			; CAttackEvent::Active, COMDAT
; _this$ = ecx

; 41   : {

  00000	53		 push	 ebx
  00001	56		 push	 esi
  00002	57		 push	 edi

; 42   : 	for ( int n = 0; n < OBJ_MAXMONSTER ; n++ )

  00003	33 f6		 xor	 esi, esi
  00005	8b f9		 mov	 edi, ecx
  00007	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0000d	8d 5e 01	 lea	 ebx, DWORD PTR [esi+1]
$LL22@Active:

; 43   : 	{
; 44   : 		if ( gObj[n].Class == 53 || gObj[n].Class == 54 )

  00010	0f b7 84 0e b8
	00 00 00	 movzx	 eax, WORD PTR [esi+ecx+184]
  00018	83 f8 35	 cmp	 eax, 53			; 00000035H
  0001b	0f 84 37 01 00
	00		 je	 $LN18@Active
  00021	83 f8 36	 cmp	 eax, 54			; 00000036H
  00024	0f 84 2e 01 00
	00		 je	 $LN18@Active

; 83   : 			
; 84   : 		}
; 85   : 		else if ( gObj[n].Class == 55 || gObj[n].Class == 56 )

  0002a	83 f8 37	 cmp	 eax, 55			; 00000037H
  0002d	74 09		 je	 SHORT $LN9@Active
  0002f	83 f8 38	 cmp	 eax, 56			; 00000038H
  00032	0f 85 ac 02 00
	00		 jne	 $LN21@Active
$LN9@Active:

; 86   : 		{
; 87   : 			gObj[n].Live = TRUE;

  00038	88 5c 0e 6a	 mov	 BYTE PTR [esi+ecx+106], bl

; 88   : 
; 89   : 			if ( gObj[n].Class == 55 )

  0003c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00041	66 83 bc 06 b8
	00 00 00 37	 cmp	 WORD PTR [esi+eax+184], 55 ; 00000037H
  0004a	0f 85 b1 00 00
	00		 jne	 $LN8@Active

; 90   : 			{
; 91   : 				if ( (rand() % 2 ) == 0 )

  00050	e8 00 00 00 00	 call	 _rand
  00055	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0005a	79 05		 jns	 SHORT $LN31@Active
  0005c	48		 dec	 eax
  0005d	83 c8 fe	 or	 eax, -2			; fffffffeH
  00060	40		 inc	 eax
$LN31@Active:
  00061	75 06		 jne	 SHORT $LN7@Active

; 92   : 				{
; 93   : 					this->m_MapNumber = MAP_INDEX_RORENCIA;

  00063	c6 47 0c 00	 mov	 BYTE PTR [edi+12], 0

; 94   : 				}
; 95   : 				else

  00067	eb 04		 jmp	 SHORT $LN6@Active
$LN7@Active:

; 96   : 				{
; 97   : 					this->m_MapNumber = MAP_INDEX_NORIA;

  00069	c6 47 0c 03	 mov	 BYTE PTR [edi+12], 3
$LN6@Active:

; 98   : 				}
; 99   : 
; 100  : 				gObj[n].MapNumber = this->m_MapNumber;

  0006d	8a 4f 0c	 mov	 cl, BYTE PTR [edi+12]
  00070	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00076	88 8c 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], cl
  0007d	8d 49 00	 npad	 3
$LL5@Active:

; 101  : 
; 102  : 
; 103  : 				while ( gMSetBase.GetBoxPosition(this->m_MapNumber, 10, 10, 240, 240, gObj[n].X, gObj[n].Y) == 0 )

  00080	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00085	8d 8c 06 46 01
	00 00		 lea	 ecx, DWORD PTR [esi+eax+326]
  0008c	51		 push	 ecx
  0008d	8d 94 06 44 01
	00 00		 lea	 edx, DWORD PTR [esi+eax+324]
  00094	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  00098	52		 push	 edx
  00099	68 f0 00 00 00	 push	 240			; 000000f0H
  0009e	68 f0 00 00 00	 push	 240			; 000000f0H
  000a3	6a 0a		 push	 10			; 0000000aH
  000a5	6a 0a		 push	 10			; 0000000aH
  000a7	50		 push	 eax
  000a8	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  000ad	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
  000b2	85 c0		 test	 eax, eax
  000b4	74 ca		 je	 SHORT $LL5@Active

; 104  : 				{
; 105  : 
; 106  : 				}
; 107  : 
; 108  : 				this->m_BossMap55 = gObj[n].MapNumber;

  000b6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000bc	0f b6 94 0e 49
	01 00 00	 movzx	 edx, BYTE PTR [esi+ecx+329]
  000c4	89 57 10	 mov	 DWORD PTR [edi+16], edx

; 109  : 				this->m_BossMapX55 = gObj[n].X;

  000c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000cc	0f bf 8c 06 44
	01 00 00	 movsx	 ecx, WORD PTR [esi+eax+324]
  000d4	89 4f 14	 mov	 DWORD PTR [edi+20], ecx

; 110  : 				this->m_BossMapY55 = gObj[n].Y;

  000d7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000dd	0f bf 84 16 46
	01 00 00	 movsx	 eax, WORD PTR [esi+edx+326]

; 111  : 				LogAdd("event %d %d %d create ", this->m_BossMap55, this->m_BossMapX55, this->m_BossMapY55 );

  000e5	50		 push	 eax
  000e6	51		 push	 ecx
  000e7	8b 4f 10	 mov	 ecx, DWORD PTR [edi+16]
  000ea	51		 push	 ecx
  000eb	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@PHJBIBLO@event?5?$CFd?5?$CFd?5?$CFd?5create?5?$AA@
  000f0	89 47 18	 mov	 DWORD PTR [edi+24], eax
  000f3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000f9	83 c4 10	 add	 esp, 16			; 00000010H

; 112  : 			}
; 113  : 			else

  000fc	e9 57 01 00 00	 jmp	 $LN12@Active
$LN8@Active:

; 114  : 			{
; 115  : 				this->m_MapNumber = this->m_BossMap55;

  00101	8a 47 10	 mov	 al, BYTE PTR [edi+16]
  00104	88 47 0c	 mov	 BYTE PTR [edi+12], al

; 116  : 				gObj[n].MapNumber = this->m_MapNumber;

  00107	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0010d	88 84 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], al
$LL2@Active:

; 117  : 
; 118  : 
; 119  : 				while (	gMSetBase.GetBoxPosition(this->m_MapNumber, this->m_BossMapX55 -4, this->m_BossMapY55-4, this->m_BossMapX55+4, this->m_BossMapY55+4, gObj[n].X, gObj[n].Y) == 0 )

  00114	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0011a	8b 47 18	 mov	 eax, DWORD PTR [edi+24]
  0011d	8b 4f 14	 mov	 ecx, DWORD PTR [edi+20]
  00120	8d 9c 16 46 01
	00 00		 lea	 ebx, DWORD PTR [esi+edx+326]
  00127	53		 push	 ebx
  00128	8d 94 16 44 01
	00 00		 lea	 edx, DWORD PTR [esi+edx+324]
  0012f	52		 push	 edx
  00130	8d 50 04	 lea	 edx, DWORD PTR [eax+4]
  00133	52		 push	 edx
  00134	8d 51 04	 lea	 edx, DWORD PTR [ecx+4]
  00137	52		 push	 edx
  00138	83 c0 fc	 add	 eax, -4			; fffffffcH
  0013b	50		 push	 eax
  0013c	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  00140	83 c1 fc	 add	 ecx, -4			; fffffffcH
  00143	51		 push	 ecx
  00144	50		 push	 eax
  00145	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  0014a	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
  0014f	85 c0		 test	 eax, eax
  00151	74 c1		 je	 SHORT $LL2@Active

; 120  : 				{
; 121  : 
; 122  : 				}
; 123  : 			}
; 124  : 
; 125  : 			gObj[n].TX = gObj[n].X;
; 126  : 			gObj[n].TY = gObj[n].Y;
; 127  : 			gObj[n].MTX = gObj[n].X;
; 128  : 			gObj[n].MTY = gObj[n].Y;
; 129  : 			gObj[n].StartX = gObj[n].X;
; 130  : 			gObj[n].StartY = gObj[n].Y;
; 131  : 			gObj[n].m_State = 1;

  00153	e9 fb 00 00 00	 jmp	 $LN32@Active
$LN18@Active:

; 45   : 		{
; 46   : 			gObj[n].Live = true;

  00158	88 5c 0e 6a	 mov	 BYTE PTR [esi+ecx+106], bl

; 47   : 
; 48   : 			if ( gObj[n].Class == 53 )

  0015c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00162	66 83 bc 0e b8
	00 00 00 35	 cmp	 WORD PTR [esi+ecx+184], 53 ; 00000035H
  0016b	0f 85 90 00 00
	00		 jne	 $LN17@Active

; 49   : 			{
; 50   : 				this->m_MapNumber = MAP_INDEX_DEVIAS;

  00171	c6 47 0c 02	 mov	 BYTE PTR [edi+12], 2

; 51   : 				gObj[n].MapNumber = this->m_MapNumber;

  00175	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0017b	c6 84 16 49 01
	00 00 02	 mov	 BYTE PTR [esi+edx+329], 2
$LL16@Active:

; 52   : 
; 53   : 				while (	gMSetBase.GetBoxPosition(this->m_MapNumber, 10, 10, 240, 240, gObj[n].X, gObj[n].Y) == 0 )

  00183	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00188	8d 8c 06 46 01
	00 00		 lea	 ecx, DWORD PTR [esi+eax+326]
  0018f	51		 push	 ecx
  00190	8d 94 06 44 01
	00 00		 lea	 edx, DWORD PTR [esi+eax+324]
  00197	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  0019b	52		 push	 edx
  0019c	68 f0 00 00 00	 push	 240			; 000000f0H
  001a1	68 f0 00 00 00	 push	 240			; 000000f0H
  001a6	6a 0a		 push	 10			; 0000000aH
  001a8	6a 0a		 push	 10			; 0000000aH
  001aa	50		 push	 eax
  001ab	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  001b0	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
  001b5	85 c0		 test	 eax, eax
  001b7	74 ca		 je	 SHORT $LL16@Active

; 54   : 				{
; 55   : 
; 56   : 				}
; 57   : 
; 58   : 				this->m_BossMap53 = gObj[n].MapNumber;

  001b9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001bf	0f b6 94 0e 49
	01 00 00	 movzx	 edx, BYTE PTR [esi+ecx+329]
  001c7	89 57 1c	 mov	 DWORD PTR [edi+28], edx

; 59   : 				this->m_BossMapX53 = gObj[n].X;

  001ca	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001cf	0f bf 8c 06 44
	01 00 00	 movsx	 ecx, WORD PTR [esi+eax+324]
  001d7	89 4f 20	 mov	 DWORD PTR [edi+32], ecx

; 60   : 				this->m_BossMapY53 = gObj[n].Y;

  001da	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001e0	0f bf 84 16 46
	01 00 00	 movsx	 eax, WORD PTR [esi+edx+326]

; 61   : 
; 62   : 				LogAdd("event %d %d %d create ", this->m_BossMap53, this->m_BossMapX53, this->m_BossMapY53);

  001e8	50		 push	 eax
  001e9	51		 push	 ecx
  001ea	8b 4f 1c	 mov	 ecx, DWORD PTR [edi+28]
  001ed	51		 push	 ecx
  001ee	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@PHJBIBLO@event?5?$CFd?5?$CFd?5?$CFd?5create?5?$AA@
  001f3	89 47 24	 mov	 DWORD PTR [edi+36], eax
  001f6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  001fc	83 c4 10	 add	 esp, 16			; 00000010H

; 63   : 
; 64   : 			}
; 65   : 			else

  001ff	eb 57		 jmp	 SHORT $LN12@Active
$LN17@Active:

; 66   : 			{
; 67   : 				this->m_MapNumber = this->m_BossMap53;

  00201	8a 47 1c	 mov	 al, BYTE PTR [edi+28]
  00204	88 47 0c	 mov	 BYTE PTR [edi+12], al

; 68   : 				gObj[n].MapNumber = this->m_MapNumber;

  00207	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0020d	88 84 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], al
$LL13@Active:

; 69   : 
; 70   : 				while (	gMSetBase.GetBoxPosition(this->m_MapNumber, this->m_BossMapX53 -4, this->m_BossMapY53-4, this->m_BossMapX53+4, this->m_BossMapY53+4, gObj[n].X, gObj[n].Y) == 0 )

  00214	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0021a	8b 47 24	 mov	 eax, DWORD PTR [edi+36]
  0021d	8b 4f 20	 mov	 ecx, DWORD PTR [edi+32]
  00220	8d 9c 16 46 01
	00 00		 lea	 ebx, DWORD PTR [esi+edx+326]
  00227	53		 push	 ebx
  00228	8d 94 16 44 01
	00 00		 lea	 edx, DWORD PTR [esi+edx+324]
  0022f	52		 push	 edx
  00230	8d 50 04	 lea	 edx, DWORD PTR [eax+4]
  00233	52		 push	 edx
  00234	8d 51 04	 lea	 edx, DWORD PTR [ecx+4]
  00237	52		 push	 edx
  00238	83 c0 fc	 add	 eax, -4			; fffffffcH
  0023b	50		 push	 eax
  0023c	0f b6 47 0c	 movzx	 eax, BYTE PTR [edi+12]
  00240	83 c1 fc	 add	 ecx, -4			; fffffffcH
  00243	51		 push	 ecx
  00244	50		 push	 eax
  00245	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMSetBase@@3VCMonsterSetBase@@A ; gMSetBase
  0024a	e8 00 00 00 00	 call	 ?GetBoxPosition@CMonsterSetBase@@QAEHHHHHHAAF0@Z ; CMonsterSetBase::GetBoxPosition
  0024f	85 c0		 test	 eax, eax
  00251	74 c1		 je	 SHORT $LL13@Active
$LN32@Active:
  00253	bb 01 00 00 00	 mov	 ebx, 1
$LN12@Active:

; 71   : 				{
; 72   : 
; 73   : 				}
; 74   : 			}
; 75   : 				
; 76   : 			gObj[n].TX = gObj[n].X;

  00258	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0025d	0f b7 8c 06 44
	01 00 00	 movzx	 ecx, WORD PTR [esi+eax+324]
  00265	66 89 8c 06 7c
	01 00 00	 mov	 WORD PTR [esi+eax+380], cx

; 77   : 			gObj[n].TY = gObj[n].Y;

  0026d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00272	0f b7 94 06 46
	01 00 00	 movzx	 edx, WORD PTR [esi+eax+326]
  0027a	66 89 94 06 7e
	01 00 00	 mov	 WORD PTR [esi+eax+382], dx

; 78   : 			gObj[n].MTX = gObj[n].X;

  00282	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00287	0f b7 8c 06 44
	01 00 00	 movzx	 ecx, WORD PTR [esi+eax+324]
  0028f	66 89 8c 06 80
	01 00 00	 mov	 WORD PTR [esi+eax+384], cx

; 79   : 			gObj[n].MTY = gObj[n].Y;

  00297	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0029c	0f b7 94 06 46
	01 00 00	 movzx	 edx, WORD PTR [esi+eax+326]
  002a4	66 89 94 06 82
	01 00 00	 mov	 WORD PTR [esi+eax+386], dx

; 80   : 			gObj[n].StartX = gObj[n].X;

  002ac	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002b1	8a 8c 06 44 01
	00 00		 mov	 cl, BYTE PTR [esi+eax+324]
  002b8	88 8c 06 76 01
	00 00		 mov	 BYTE PTR [esi+eax+374], cl

; 81   : 			gObj[n].StartY = gObj[n].Y;

  002bf	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002c4	8a 94 06 46 01
	00 00		 mov	 dl, BYTE PTR [esi+eax+326]
  002cb	88 94 06 77 01
	00 00		 mov	 BYTE PTR [esi+eax+375], dl

; 82   : 			gObj[n].m_State = 1;

  002d2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002d7	89 9c 06 20 02
	00 00		 mov	 DWORD PTR [esi+eax+544], ebx
  002de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN21@Active:

; 42   : 	for ( int n = 0; n < OBJ_MAXMONSTER ; n++ )

  002e4	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  002ea	81 fe 80 76 97
	08		 cmp	 esi, 144144000		; 08977680H
  002f0	0f 8c 1a fd ff
	ff		 jl	 $LL22@Active

; 132  : 			
; 133  : 		}
; 134  : 	}
; 135  : }

  002f6	5f		 pop	 edi
  002f7	5e		 pop	 esi
  002f8	5b		 pop	 ebx
  002f9	c3		 ret	 0
?Active@CAttackEvent@@QAEXXZ ENDP			; CAttackEvent::Active
_TEXT	ENDS
PUBLIC	??_C@_0CN@HDIFLHJI@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5A@ ; `string'
PUBLIC	?Start_Menual@CAttackEvent@@QAEXXZ		; CAttackEvent::Start_Menual
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
;	COMDAT ??_C@_0CN@HDIFLHJI@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5A@
; File e:\work\tranet_version\gs\gameserver\attackevent.h
CONST	SEGMENT
??_C@_0CN@HDIFLHJI@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5A@ DB 0a1H
	DB	0dbH, 0a1H, 0dcH, '[Event Management] [Start] Attack Event!', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\attackevent.cpp
CONST	ENDS
;	COMDAT ?Start_Menual@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?Start_Menual@CAttackEvent@@QAEXXZ PROC			; CAttackEvent::Start_Menual, COMDAT
; _this$ = ecx

; 138  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 139  : 	this->SetMenualStart(TRUE);
; 140  : 
; 141  : 	LogAddTD("¡Û¡Ü[Event Management] [Start] Attack Event!");

  00003	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@HDIFLHJI@?$KB?$NL?$KB?$NM?$FLEvent?5Management?$FN?5?$FLStart?$FN?5A@
  00008	c7 46 28 01 00
	00 00		 mov	 DWORD PTR [esi+40], 1
  0000f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00015	83 c4 04	 add	 esp, 4

; 142  : 	this->EventState= false;
; 143  : 	this->Start();

  00018	8b ce		 mov	 ecx, esi
  0001a	c6 46 04 00	 mov	 BYTE PTR [esi+4], 0
  0001e	e8 00 00 00 00	 call	 ?Start@CAttackEvent@@QAEXXZ ; CAttackEvent::Start

; 144  : 	this->Active();

  00023	8b ce		 mov	 ecx, esi
  00025	5e		 pop	 esi
  00026	e9 00 00 00 00	 jmp	 ?Active@CAttackEvent@@QAEXXZ ; CAttackEvent::Active
?Start_Menual@CAttackEvent@@QAEXXZ ENDP			; CAttackEvent::Start_Menual
_TEXT	ENDS
PUBLIC	?End_Menual@CAttackEvent@@QAEXXZ		; CAttackEvent::End_Menual
; Function compile flags: /Ogtp
;	COMDAT ?End_Menual@CAttackEvent@@QAEXXZ
_TEXT	SEGMENT
?End_Menual@CAttackEvent@@QAEXXZ PROC			; CAttackEvent::End_Menual, COMDAT
; _this$ = ecx

; 149  : 	this->SetMenualStart(FALSE);

  00000	c7 41 28 00 00
	00 00		 mov	 DWORD PTR [ecx+40], 0

; 150  : 	this->End();
; 151  : }

  00007	c3		 ret	 0
?End_Menual@CAttackEvent@@QAEXXZ ENDP			; CAttackEvent::End_Menual
_TEXT	ENDS
PUBLIC	??0CAttackEvent@@QAE@XZ				; CAttackEvent::CAttackEvent
; Function compile flags: /Ogtp
;	COMDAT ??0CAttackEvent@@QAE@XZ
_TEXT	SEGMENT
??0CAttackEvent@@QAE@XZ PROC				; CAttackEvent::CAttackEvent, COMDAT
; _this$ = ecx

; 8    : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx
  00003	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7CAttackEvent@@6B@

; 9    : 	this->Init();

  00009	e8 00 00 00 00	 call	 ?Init@CAttackEvent@@QAEXXZ ; CAttackEvent::Init

; 10   : }

  0000e	8b c6		 mov	 eax, esi
  00010	5e		 pop	 esi
  00011	c3		 ret	 0
??0CAttackEvent@@QAE@XZ ENDP				; CAttackEvent::CAttackEvent
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCAttackEvent@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCAttackEvent@@UAEPAXI@Z PROC			; CAttackEvent::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CAttackEvent@@UAE@XZ	; CAttackEvent::~CAttackEvent
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCAttackEvent@@UAEPAXI@Z ENDP			; CAttackEvent::`scalar deleting destructor'
_TEXT	ENDS
END
