; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\Event.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?pEventObj@@3PAUOBJECTSTRUCT@@A			; pEventObj
PUBLIC	?g_sz2ANV_GIFT_NAME@@3PAY0EA@DA			; g_sz2ANV_GIFT_NAME
PUBLIC	?g_bRingEventItemTextLoad@@3HA			; g_bRingEventItemTextLoad
_BSS	SEGMENT
?pEventObj@@3PAUOBJECTSTRUCT@@A DD 01H DUP (?)		; pEventObj
?g_sz2ANV_GIFT_NAME@@3PAY0EA@DA DB 0c80H DUP (?)	; g_sz2ANV_GIFT_NAME
?g_bRingEventItemTextLoad@@3HA DD 01H DUP (?)		; g_bRingEventItemTextLoad
_BSS	ENDS
CONST	SEGMENT
_g_szRingEventOfflineGift DB '100', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH
	DB	0c1H, 0f6H, 00H
	ORG $+19
	DB	'10', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH, 0c1H, 0f6H
	DB	00H
	ORG $+20
	DB	'5', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH, 0c1H, 0f6H, 00H
	ORG $+21
	DB	'2', 0b5H, 0b7H, ' ', 0b9H, 0c2H, 0b9H, 0ddH, 0c1H, 0f6H, 00H
	ORG $+21
CONST	ENDS
_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?GetBagCount@CItemBag@@QAEHXZ			; CItemBag::GetBagCount
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\itembag.h
;	COMDAT ?GetBagCount@CItemBag@@QAEHXZ
_TEXT	SEGMENT
?GetBagCount@CItemBag@@QAEHXZ PROC			; CItemBag::GetBagCount, COMDAT
; _this$ = ecx

; 49   : 		return this->BagObjectCount;

  00000	8b 81 88 03 00
	00		 mov	 eax, DWORD PTR [ecx+904]

; 50   : 	};	// line : 64

  00006	c3		 ret	 0
?GetBagCount@CItemBag@@QAEHXZ ENDP			; CItemBag::GetBagCount
_TEXT	ENDS
PUBLIC	??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@ ; `string'
PUBLIC	?DataSendEventChip@@YAXPADH@Z			; DataSendEventChip
EXTRN	?DataSend@wsJoinServerCli@@QAEHPADH@Z:PROC	; wsJoinServerCli::DataSend
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?GMEventChipServerConnect@@YAHPADK@Z:PROC	; GMEventChipServerConnect
EXTRN	?gEventChipServerIp@@3PADA:BYTE			; gEventChipServerIp
EXTRN	?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z:PROC ; MyWinsockBase::CreateSocket
EXTRN	?ghWnd@@3PAUHWND__@@A:DWORD			; ghWnd
EXTRN	?Close@MyWinsockBase@@QAEHXZ:PROC		; MyWinsockBase::Close
EXTRN	?wsEvenChipServerCli@@3VwsJoinServerCli@@A:BYTE	; wsEvenChipServerCli
EXTRN	?EventChipServerConnect@@3HA:DWORD		; EventChipServerConnect
EXTRN	?IsEventChipServerConnected@@3HA:DWORD		; IsEventChipServerConnected
;	COMDAT ??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	SEGMENT
??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@ DB 'Can not conn'
	DB	'ect EventChip Server', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DataSendEventChip@@YAXPADH@Z
_TEXT	SEGMENT
_pMsg$ = 8						; size = 4
_size$ = 12						; size = 4
?DataSendEventChip@@YAXPADH@Z PROC			; DataSendEventChip, COMDAT

; 96   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 97   : 	if ( IsEventChipServerConnected == FALSE && ::EventChipServerConnect != FALSE )

  00003	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?IsEventChipServerConnected@@3HA, 0 ; IsEventChipServerConnected
  0000a	75 58		 jne	 SHORT $LN6@DataSendEv
  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?EventChipServerConnect@@3HA, 0 ; EventChipServerConnect
  00013	74 6a		 je	 SHORT $LN1@DataSendEv

; 98   : 	{
; 99   : 		wsEvenChipServerCli.Close();

  00015	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsEvenChipServerCli@@3VwsJoinServerCli@@A+4
  0001a	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close

; 100  : 		wsEvenChipServerCli.CreateSocket(ghWnd);

  0001f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ghWnd@@3PAUHWND__@@A ; ghWnd
  00024	50		 push	 eax
  00025	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsEvenChipServerCli@@3VwsJoinServerCli@@A+4
  0002a	e8 00 00 00 00	 call	 ?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z ; MyWinsockBase::CreateSocket

; 101  : 		if ( GMEventChipServerConnect(::gEventChipServerIp, WM_GM_EVENTCHIP_CLIENT_MSG_PROC) == FALSE )

  0002f	68 0d 04 00 00	 push	 1037			; 0000040dH
  00034	68 00 00 00 00	 push	 OFFSET ?gEventChipServerIp@@3PADA ; gEventChipServerIp
  00039	e8 00 00 00 00	 call	 ?GMEventChipServerConnect@@YAHPADK@Z ; GMEventChipServerConnect
  0003e	83 c4 08	 add	 esp, 8
  00041	85 c0		 test	 eax, eax
  00043	75 15		 jne	 SHORT $LN2@DataSendEv

; 102  : 		{
; 103  : 			IsEventChipServerConnected = FALSE;
; 104  : 			LogAddTD("Can not connect EventChip Server");

  00045	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@JKOKDAGE@Can?5not?5connect?5EventChip?5Server@
  0004a	a3 00 00 00 00	 mov	 DWORD PTR ?IsEventChipServerConnected@@3HA, eax ; IsEventChipServerConnected
  0004f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00055	83 c4 04	 add	 esp, 4

; 116  : 	}
; 117  : }

  00058	5d		 pop	 ebp
  00059	c3		 ret	 0
$LN2@DataSendEv:

; 105  : 
; 106  : 			return;
; 107  : 		}
; 108  : 
; 109  : 		::IsEventChipServerConnected = TRUE;

  0005a	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?IsEventChipServerConnected@@3HA, 1 ; IsEventChipServerConnected
$LN6@DataSendEv:

; 110  : 
; 111  : 	}
; 112  : 
; 113  : 	if ( ::IsEventChipServerConnected != FALSE && ::EventChipServerConnect != FALSE )

  00064	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?EventChipServerConnect@@3HA, 0 ; EventChipServerConnect
  0006b	74 12		 je	 SHORT $LN1@DataSendEv

; 114  : 	{
; 115  : 		::wsEvenChipServerCli.DataSend((char *)pMsg, size);

  0006d	8b 4d 0c	 mov	 ecx, DWORD PTR _size$[ebp]
  00070	8b 55 08	 mov	 edx, DWORD PTR _pMsg$[ebp]
  00073	51		 push	 ecx
  00074	52		 push	 edx
  00075	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsEvenChipServerCli@@3VwsJoinServerCli@@A ; wsEvenChipServerCli
  0007a	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN1@DataSendEv:

; 116  : 	}
; 117  : }

  0007f	5d		 pop	 ebp
  00080	c3		 ret	 0
?DataSendEventChip@@YAXPADH@Z ENDP			; DataSendEventChip
_TEXT	ENDS
PUBLIC	?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z ; EledoradoBoxOpenEven
EXTRN	?DropItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC	; CProbabilityItemBag::DropItem
EXTRN	?KanturItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; KanturItemBag
EXTRN	?DevilLizardKingItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; DevilLizardKingItemBag
EXTRN	?GoldDerconItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GoldDerconItemBag
EXTRN	?TitanItemBag@@3PAVCProbabilityItemBag@@A:DWORD	; TitanItemBag
EXTRN	?GoldGoblenItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GoldGoblenItemBag
; Function compile flags: /Ogtp
;	COMDAT ?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_boxtype$ = 12						; size = 4
_addlevel$ = 16						; size = 4
_money$ = 20						; size = 4
?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z PROC	; EledoradoBoxOpenEven, COMDAT

; 120  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 121  : 	CProbabilityItemBag * EledoradoBox = NULL;
; 122  : 
; 123  : 	switch ( boxtype )

  00003	8b 45 0c	 mov	 eax, DWORD PTR _boxtype$[ebp]
  00006	83 c0 f8	 add	 eax, -8			; fffffff8H
  00009	83 f8 04	 cmp	 eax, 4
  0000c	77 54		 ja	 SHORT $LN9@EledoradoB
  0000e	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN11@EledoradoB[eax*4]
$LN6@EledoradoB:

; 124  : 	{
; 125  : 		case 8:
; 126  : 			EledoradoBox = ::GoldGoblenItemBag;

  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldGoblenItemBag@@3PAVCProbabilityItemBag@@A ; GoldGoblenItemBag

; 127  : 			break;

  0001b	eb 1e		 jmp	 SHORT $LN7@EledoradoB
$LN5@EledoradoB:

; 128  : 		case 9:
; 129  : 			EledoradoBox = ::TitanItemBag;

  0001d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?TitanItemBag@@3PAVCProbabilityItemBag@@A ; TitanItemBag

; 130  : 			break;

  00023	eb 16		 jmp	 SHORT $LN7@EledoradoB
$LN4@EledoradoB:

; 131  : 		case 10:
; 132  : 			EledoradoBox = ::GoldDerconItemBag;

  00025	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldDerconItemBag@@3PAVCProbabilityItemBag@@A ; GoldDerconItemBag

; 133  : 			break;

  0002b	eb 0e		 jmp	 SHORT $LN7@EledoradoB
$LN3@EledoradoB:

; 134  : 		case 11:
; 135  : 			EledoradoBox = ::DevilLizardKingItemBag;

  0002d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DevilLizardKingItemBag@@3PAVCProbabilityItemBag@@A ; DevilLizardKingItemBag

; 136  : 			break;

  00033	eb 06		 jmp	 SHORT $LN7@EledoradoB
$LN2@EledoradoB:

; 137  : 		case 12:
; 138  : 			EledoradoBox = ::KanturItemBag;

  00035	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KanturItemBag@@3PAVCProbabilityItemBag@@A ; KanturItemBag
$LN7@EledoradoB:

; 139  : 			break;
; 140  : 	}
; 141  : 
; 142  : 	if ( EledoradoBox == NULL )

  0003b	85 c9		 test	 ecx, ecx
  0003d	74 23		 je	 SHORT $LN9@EledoradoB

; 143  : 	{
; 144  : 		return;
; 145  : 	}
; 146  : 
; 147  : 	EledoradoBox->DropItem(lpObj->m_Index,lpObj->MapNumber,lpObj->X, lpObj->Y);

  0003f	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00042	0f b6 90 46 01
	00 00		 movzx	 edx, BYTE PTR [eax+326]
  00049	52		 push	 edx
  0004a	0f b6 90 44 01
	00 00		 movzx	 edx, BYTE PTR [eax+324]
  00051	52		 push	 edx
  00052	0f b6 90 49 01
	00 00		 movzx	 edx, BYTE PTR [eax+329]
  00059	8b 00		 mov	 eax, DWORD PTR [eax]
  0005b	52		 push	 edx
  0005c	50		 push	 eax
  0005d	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem
$LN9@EledoradoB:

; 148  : }

  00062	5d		 pop	 ebp
  00063	c3		 ret	 0
$LN11@EledoradoB:
  00064	00 00 00 00	 DD	 $LN6@EledoradoB
  00068	00 00 00 00	 DD	 $LN5@EledoradoB
  0006c	00 00 00 00	 DD	 $LN4@EledoradoB
  00070	00 00 00 00	 DD	 $LN3@EledoradoB
  00074	00 00 00 00	 DD	 $LN2@EledoradoB
?EledoradoBoxOpenEven@@YAXPAUOBJECTSTRUCT@@HHH@Z ENDP	; EledoradoBoxOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@ ; `string'
PUBLIC	??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; EventChipOpenEven
EXTRN	?MoneyItemDrop@MapClass@@QAEHHHH@Z:PROC		; MapClass::MoneyItemDrop
EXTRN	?MapC@@3PAVMapClass@@A:BYTE			; MapC
EXTRN	?GetName@CItem@@QAEPADXZ:PROC			; CItem::GetName
EXTRN	?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z:PROC	; CItem::Convert
EXTRN	??0CItem@@QAE@XZ:PROC				; CItem::CItem
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z:PROC	; MsgSendV2
EXTRN	?PHeadSubSetB@@YAXPAEEEH@Z:PROC			; PHeadSubSetB
EXTRN	?GetType@CItemBag@@QAEEH@Z:PROC			; CItemBag::GetType
EXTRN	?GetIndex@CItemBag@@QAEEH@Z:PROC		; CItemBag::GetIndex
EXTRN	?GetLevel@CItemBag@@QAEEH@Z:PROC		; CItemBag::GetLevel
EXTRN	?g_ItemDropRateForBoxOfGold@@3HA:DWORD		; g_ItemDropRateForBoxOfGold
EXTRN	?LuckboxItemBag@@3PAVCItemBag@@A:DWORD		; LuckboxItemBag
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z:PROC	; ItemSerialCreateSend
EXTRN	?ItemGetNumberMake@@YAHHH@Z:PROC		; ItemGetNumberMake
EXTRN	?g_EventChipDropRateForBoxOfGold@@3HA:DWORD	; g_EventChipDropRateForBoxOfGold
EXTRN	_rand:PROC
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Event Chip] : (%d)(X:%d/Y:%d) It'
	DB	'em:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@
CONST	SEGMENT
??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@ DB 'EventChip Ev'
	DB	'ent ItemDrop Rena', 00H			; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_DropItemNum$ = -248					; size = 4
_y$ = -244						; size = 4
_x$ = -240						; size = 4
_pMsg$215241 = -236					; size = 7
_Option1$ = -228					; size = 4
_Option3$ = -224					; size = 4
tv551 = -220						; size = 4
_Option2$ = -220					; size = 4
_NewItem$215245 = -216					; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC		; EventChipOpenEven, COMDAT

; 151  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f8 00 00
	00		 sub	 esp, 248		; 000000f8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00018	57		 push	 edi

; 152  : 	float dur;
; 153  : 	int type;
; 154  : 	int level;
; 155  : 	int x;
; 156  : 	int y;
; 157  : 	int Option1 = 0;
; 158  : 	int Option2 = 0;
; 159  : 	int Option3 = 0;

  00019	c7 85 20 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 0

; 160  : 	int DropItemNum;
; 161  : 	int ExOption = 0;
; 162  : 
; 163  : 	if ( (rand()%100) < ::g_EventChipDropRateForBoxOfGold )

  00023	e8 00 00 00 00	 call	 _rand
  00028	99		 cdq
  00029	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0002e	f7 f9		 idiv	 ecx
  00030	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_EventChipDropRateForBoxOfGold@@3HA ; g_EventChipDropRateForBoxOfGold
  00036	7d 5b		 jge	 SHORT $LN14@EventChipO

; 164  : 	{
; 165  : 		dur = 255.0f;
; 166  : 		x = lpObj->X;

  00038	0f bf be 44 01
	00 00		 movsx	 edi, WORD PTR [esi+324]

; 167  : 		y = lpObj->Y;

  0003f	0f bf 9e 46 01
	00 00		 movsx	 ebx, WORD PTR [esi+326]

; 168  : 		level = 0;
; 169  : 		type = ItemGetNumberMake(14, 21);

  00046	6a 15		 push	 21			; 00000015H
  00048	6a 0e		 push	 14			; 0000000eH
  0004a	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake

; 170  : 		::ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0004f	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00051	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  00058	6a 00		 push	 0
  0005a	6a 00		 push	 0
  0005c	51		 push	 ecx
  0005d	6a 00		 push	 0
  0005f	6a 00		 push	 0
  00061	6a 00		 push	 0
  00063	68 ff 00 00 00	 push	 255			; 000000ffH
  00068	6a 00		 push	 0
  0006a	50		 push	 eax
  0006b	53		 push	 ebx
  0006c	57		 push	 edi
  0006d	52		 push	 edx
  0006e	51		 push	 ecx
  0006f	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 171  : 		LogAdd("EventChip Event ItemDrop Rena");

  00074	68 00 00 00 00	 push	 OFFSET ??_C@_0BO@CCIJBOCK@EventChip?5Event?5ItemDrop?5Rena?$AA@
  00079	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0007f	83 c4 40	 add	 esp, 64			; 00000040H
  00082	5f		 pop	 edi
  00083	5e		 pop	 esi
  00084	5b		 pop	 ebx

; 294  : }

  00085	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00088	33 cd		 xor	 ecx, ebp
  0008a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0008f	8b e5		 mov	 esp, ebp
  00091	5d		 pop	 ebp
  00092	c3		 ret	 0
$LN14@EventChipO:

; 172  : 
; 173  : 		return;
; 174  : 	}
; 175  : 
; 176  : 	if ( LuckboxItemBag == NULL )

  00093	a1 00 00 00 00	 mov	 eax, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00098	85 c0		 test	 eax, eax
  0009a	0f 84 ec 03 00
	00		 je	 $LN15@EventChipO

; 177  : 	{
; 178  : 		return;
; 179  : 	}
; 180  : 
; 181  : 	if ( LuckboxItemBag->GetBagCount() > 0 )

  000a0	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  000a7	0f 8e b2 03 00
	00		 jle	 $LN11@EventChipO

; 182  : 	{
; 183  : 		if ( (rand()%20) < ::g_ItemDropRateForBoxOfGold )

  000ad	e8 00 00 00 00	 call	 _rand
  000b2	99		 cdq
  000b3	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  000b8	f7 f9		 idiv	 ecx
  000ba	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForBoxOfGold@@3HA ; g_ItemDropRateForBoxOfGold
  000c0	0f 8d 99 03 00
	00		 jge	 $LN11@EventChipO

; 184  : 		{
; 185  : 			DropItemNum = rand() % LuckboxItemBag->GetBagCount();

  000c6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  000cc	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  000d2	e8 00 00 00 00	 call	 _rand
  000d7	99		 cdq
  000d8	f7 ff		 idiv	 edi

; 186  : 			dur = 0;
; 187  : 			x = lpObj->X;
; 188  : 			y = lpObj->Y;

  000da	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  000e1	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  000e8	89 8d 0c ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 189  : 			level = LuckboxItemBag->GetLevel(DropItemNum) + rand() % 2;

  000ee	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  000f4	89 85 10 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  000fa	8b da		 mov	 ebx, edx
  000fc	53		 push	 ebx
  000fd	89 9d 08 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], ebx
  00103	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00108	0f b6 d0	 movzx	 edx, al
  0010b	89 95 24 ff ff
	ff		 mov	 DWORD PTR tv551[ebp], edx
  00111	e8 00 00 00 00	 call	 _rand
  00116	8b f8		 mov	 edi, eax
  00118	81 e7 01 00 00
	80		 and	 edi, -2147483647	; 80000001H
  0011e	79 05		 jns	 SHORT $LN23@EventChipO
  00120	4f		 dec	 edi
  00121	83 cf fe	 or	 edi, -2			; fffffffeH
  00124	47		 inc	 edi
$LN23@EventChipO:

; 190  : 
; 191  : 			type = ItemGetNumberMake(LuckboxItemBag->GetType(DropItemNum), LuckboxItemBag->GetIndex(DropItemNum));

  00125	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0012b	03 bd 24 ff ff
	ff		 add	 edi, DWORD PTR tv551[ebp]
  00131	53		 push	 ebx
  00132	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  00137	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0013d	0f b6 c0	 movzx	 eax, al
  00140	50		 push	 eax
  00141	53		 push	 ebx
  00142	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  00147	0f b6 c8	 movzx	 ecx, al
  0014a	51		 push	 ecx
  0014b	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00150	83 c4 08	 add	 esp, 8
  00153	8b d8		 mov	 ebx, eax

; 192  : 
; 193  : 			Option1 = rand() % 2;

  00155	e8 00 00 00 00	 call	 _rand
  0015a	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0015f	79 05		 jns	 SHORT $LN24@EventChipO
  00161	48		 dec	 eax
  00162	83 c8 fe	 or	 eax, -2			; fffffffeH
  00165	40		 inc	 eax
$LN24@EventChipO:
  00166	89 85 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], eax

; 194  : 			Option2 = rand() % 2;

  0016c	e8 00 00 00 00	 call	 _rand
  00171	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00176	79 05		 jns	 SHORT $LN25@EventChipO
  00178	48		 dec	 eax
  00179	83 c8 fe	 or	 eax, -2			; fffffffeH
  0017c	40		 inc	 eax
$LN25@EventChipO:
  0017d	89 85 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 195  : 
; 196  : 			if ( Option2 == 0 || Option1  == 0 )

  00183	74 0a		 je	 SHORT $LN9@EventChipO
  00185	33 c9		 xor	 ecx, ecx
  00187	39 8d 1c ff ff
	ff		 cmp	 DWORD PTR _Option1$[ebp], ecx
  0018d	75 33		 jne	 SHORT $LN22@EventChipO
$LN9@EventChipO:

; 197  : 			{
; 198  : 				if ( (rand() % 5 ) < 1 )

  0018f	e8 00 00 00 00	 call	 _rand
  00194	99		 cdq
  00195	b9 05 00 00 00	 mov	 ecx, 5
  0019a	f7 f9		 idiv	 ecx
  0019c	83 fa 01	 cmp	 edx, 1
  0019f	7d 0c		 jge	 SHORT $LN8@EventChipO

; 199  : 				{
; 200  : 					Option3 = 3;

  001a1	c7 85 20 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 201  : 				}
; 202  : 				else

  001ab	eb 13		 jmp	 SHORT $LN26@EventChipO
$LN8@EventChipO:

; 203  : 				{
; 204  : 					Option3 = rand() % 3;

  001ad	e8 00 00 00 00	 call	 _rand
  001b2	99		 cdq
  001b3	b9 03 00 00 00	 mov	 ecx, 3
  001b8	f7 f9		 idiv	 ecx
  001ba	89 95 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN26@EventChipO:
  001c0	33 c9		 xor	 ecx, ecx
$LN22@EventChipO:

; 205  : 				}
; 206  : 			}
; 207  : 
; 208  : 			if ( type == ITEMGET(12,15) ||
; 209  : 				 type == ITEMGET(14,13) ||
; 210  : 				 type == ITEMGET(14,14) ||
; 211  : 				 type == ITEMGET(14,14) ||
; 212  : 				 type == ITEMGET(14,16)	||
; 213  : 				 type == ITEMGET(14,22)	||
; 214  : 				 type == ITEMGET(14,31)	||
; 215  : 				 type == ITEMGET(14,41)	||
; 216  : 				 type == ITEMGET(14,42)	||
; 217  : 				 type == ITEMGET(14,180)||
; 218  : 				 type == ITEMGET(14,181)||
; 219  : 				 type == ITEMGET(14,182)||
; 220  : 				 type == ITEMGET(14,183)||
; 221  : 				 type == ITEMGET(14,184)||
; 222  : 				 type == ITEMGET(14,185)||
; 223  : 				 type == ITEMGET(14,186)||
; 224  : 				 type == ITEMGET(14,187)||
; 225  : 				 type == ITEMGET(14,190)||
; 226  : 				 type == ITEMGET(14,43) ||
; 227  : 				 type == ITEMGET(14,44) )

  001c2	81 fb 0f 18 00
	00		 cmp	 ebx, 6159		; 0000180fH
  001c8	0f 84 98 00 00
	00		 je	 $LN5@EventChipO
  001ce	81 fb 0d 1c 00
	00		 cmp	 ebx, 7181		; 00001c0dH
  001d4	0f 84 8c 00 00
	00		 je	 $LN5@EventChipO
  001da	81 fb 0e 1c 00
	00		 cmp	 ebx, 7182		; 00001c0eH
  001e0	0f 84 80 00 00
	00		 je	 $LN5@EventChipO
  001e6	81 fb 10 1c 00
	00		 cmp	 ebx, 7184		; 00001c10H
  001ec	74 78		 je	 SHORT $LN5@EventChipO
  001ee	81 fb 16 1c 00
	00		 cmp	 ebx, 7190		; 00001c16H
  001f4	74 70		 je	 SHORT $LN5@EventChipO
  001f6	81 fb 1f 1c 00
	00		 cmp	 ebx, 7199		; 00001c1fH
  001fc	74 68		 je	 SHORT $LN5@EventChipO
  001fe	81 fb 29 1c 00
	00		 cmp	 ebx, 7209		; 00001c29H
  00204	74 60		 je	 SHORT $LN5@EventChipO
  00206	81 fb 2a 1c 00
	00		 cmp	 ebx, 7210		; 00001c2aH
  0020c	74 58		 je	 SHORT $LN5@EventChipO
  0020e	81 fb b4 1c 00
	00		 cmp	 ebx, 7348		; 00001cb4H
  00214	74 50		 je	 SHORT $LN5@EventChipO
  00216	81 fb b5 1c 00
	00		 cmp	 ebx, 7349		; 00001cb5H
  0021c	74 48		 je	 SHORT $LN5@EventChipO
  0021e	81 fb b6 1c 00
	00		 cmp	 ebx, 7350		; 00001cb6H
  00224	74 40		 je	 SHORT $LN5@EventChipO
  00226	81 fb b7 1c 00
	00		 cmp	 ebx, 7351		; 00001cb7H
  0022c	74 38		 je	 SHORT $LN5@EventChipO
  0022e	81 fb b8 1c 00
	00		 cmp	 ebx, 7352		; 00001cb8H
  00234	74 30		 je	 SHORT $LN5@EventChipO
  00236	81 fb b9 1c 00
	00		 cmp	 ebx, 7353		; 00001cb9H
  0023c	74 28		 je	 SHORT $LN5@EventChipO
  0023e	81 fb ba 1c 00
	00		 cmp	 ebx, 7354		; 00001cbaH
  00244	74 20		 je	 SHORT $LN5@EventChipO
  00246	81 fb bb 1c 00
	00		 cmp	 ebx, 7355		; 00001cbbH
  0024c	74 18		 je	 SHORT $LN5@EventChipO
  0024e	81 fb be 1c 00
	00		 cmp	 ebx, 7358		; 00001cbeH
  00254	74 10		 je	 SHORT $LN5@EventChipO
  00256	81 fb 2b 1c 00
	00		 cmp	 ebx, 7211		; 00001c2bH
  0025c	74 08		 je	 SHORT $LN5@EventChipO
  0025e	81 fb 2c 1c 00
	00		 cmp	 ebx, 7212		; 00001c2cH
  00264	75 14		 jne	 SHORT $LN6@EventChipO
$LN5@EventChipO:

; 228  : 			{
; 229  : 				Option1 = 0;

  00266	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 230  : 				Option2 = 0;

  0026c	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 231  : 				Option3 = 0;

  00272	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 232  : 				level = 0;

  00278	33 ff		 xor	 edi, edi
$LN6@EventChipO:

; 233  : 				ExOption = 0;
; 234  : 			}
; 235  : 
; 236  : 			if ( type == ITEMGET(12,30)	||
; 237  : 				 type == ITEMGET(12,31)	||
; 238  : 				 type == ITEMGET(12,136)||
; 239  : 				 type == ITEMGET(12,137)||
; 240  : 				 type == ITEMGET(12,138)||
; 241  : 				 type == ITEMGET(12,139)||
; 242  : 				 type == ITEMGET(12,140)||
; 243  : 				 type == ITEMGET(12,141)||
; 244  : 				 type == ITEMGET(12,142)||
; 245  : 				 type == ITEMGET(12,143))

  0027a	81 fb 1e 18 00
	00		 cmp	 ebx, 6174		; 0000181eH
  00280	74 48		 je	 SHORT $LN3@EventChipO
  00282	81 fb 1f 18 00
	00		 cmp	 ebx, 6175		; 0000181fH
  00288	74 40		 je	 SHORT $LN3@EventChipO
  0028a	81 fb 88 18 00
	00		 cmp	 ebx, 6280		; 00001888H
  00290	74 38		 je	 SHORT $LN3@EventChipO
  00292	81 fb 89 18 00
	00		 cmp	 ebx, 6281		; 00001889H
  00298	74 30		 je	 SHORT $LN3@EventChipO
  0029a	81 fb 8a 18 00
	00		 cmp	 ebx, 6282		; 0000188aH
  002a0	74 28		 je	 SHORT $LN3@EventChipO
  002a2	81 fb 8b 18 00
	00		 cmp	 ebx, 6283		; 0000188bH
  002a8	74 20		 je	 SHORT $LN3@EventChipO
  002aa	81 fb 8c 18 00
	00		 cmp	 ebx, 6284		; 0000188cH
  002b0	74 18		 je	 SHORT $LN3@EventChipO
  002b2	81 fb 8d 18 00
	00		 cmp	 ebx, 6285		; 0000188dH
  002b8	74 10		 je	 SHORT $LN3@EventChipO
  002ba	81 fb 8e 18 00
	00		 cmp	 ebx, 6286		; 0000188eH
  002c0	74 08		 je	 SHORT $LN3@EventChipO
  002c2	81 fb 8f 18 00
	00		 cmp	 ebx, 6287		; 0000188fH
  002c8	75 29		 jne	 SHORT $LN4@EventChipO
$LN3@EventChipO:

; 246  : 			{
; 247  : 				Option1 = 0;
; 248  : 				Option2 = 0;
; 249  : 				Option3 = 0;
; 250  : 				level = LuckboxItemBag->GetLevel(DropItemNum);

  002ca	8b 95 08 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  002d0	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  002d6	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx
  002dc	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  002e2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  002e8	52		 push	 edx
  002e9	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  002ee	0f b6 f8	 movzx	 edi, al
  002f1	33 c9		 xor	 ecx, ecx
$LN4@EventChipO:

; 251  : 				ExOption = 0;
; 252  : 			}
; 253  : 
; 254  : 			if ( type == ITEMGET(13,0) ||
; 255  : 				 type == ITEMGET(13,1) ||
; 256  : 				 type == ITEMGET(13,2) ||
; 257  : 				 type == ITEMGET(13,8) ||
; 258  : 				 type == ITEMGET(13,9) ||
; 259  : 				 type == ITEMGET(13,12) ||
; 260  : 				 type == ITEMGET(13,13) )

  002f3	81 fb 00 1a 00
	00		 cmp	 ebx, 6656		; 00001a00H
  002f9	74 30		 je	 SHORT $LN1@EventChipO
  002fb	81 fb 01 1a 00
	00		 cmp	 ebx, 6657		; 00001a01H
  00301	74 28		 je	 SHORT $LN1@EventChipO
  00303	81 fb 02 1a 00
	00		 cmp	 ebx, 6658		; 00001a02H
  00309	74 20		 je	 SHORT $LN1@EventChipO
  0030b	81 fb 08 1a 00
	00		 cmp	 ebx, 6664		; 00001a08H
  00311	74 18		 je	 SHORT $LN1@EventChipO
  00313	81 fb 09 1a 00
	00		 cmp	 ebx, 6665		; 00001a09H
  00319	74 10		 je	 SHORT $LN1@EventChipO
  0031b	81 fb 0c 1a 00
	00		 cmp	 ebx, 6668		; 00001a0cH
  00321	74 08		 je	 SHORT $LN1@EventChipO
  00323	81 fb 0d 1a 00
	00		 cmp	 ebx, 6669		; 00001a0dH
  00329	75 02		 jne	 SHORT $LN2@EventChipO
$LN1@EventChipO:

; 261  : 			{
; 262  : 				level = 0;

  0032b	33 ff		 xor	 edi, edi
$LN2@EventChipO:

; 263  : 			}
; 264  : 
; 265  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y,
; 266  : 				type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, (BYTE)ExOption, 0);

  0032d	8b 06		 mov	 eax, DWORD PTR [esi]
  0032f	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00335	51		 push	 ecx
  00336	51		 push	 ecx
  00337	50		 push	 eax
  00338	52		 push	 edx
  00339	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  0033f	52		 push	 edx
  00340	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  00346	52		 push	 edx
  00347	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _x$[ebp]
  0034d	51		 push	 ecx
  0034e	8b 8d 0c ff ff
	ff		 mov	 ecx, DWORD PTR _y$[ebp]
  00354	57		 push	 edi
  00355	53		 push	 ebx
  00356	51		 push	 ecx
  00357	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0035e	52		 push	 edx
  0035f	51		 push	 ecx
  00360	50		 push	 eax
  00361	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 267  : 
; 268  : 			PMSG_SERVERCMD pMsg;
; 269  : 
; 270  : 			PHeadSubSetB((LPBYTE)&pMsg, 0xF3, 0x40, sizeof(pMsg));

  00366	6a 07		 push	 7
  00368	6a 40		 push	 64			; 00000040H
  0036a	8d 95 14 ff ff
	ff		 lea	 edx, DWORD PTR _pMsg$215241[ebp]
  00370	68 f3 00 00 00	 push	 243			; 000000f3H
  00375	52		 push	 edx
  00376	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 271  : 			pMsg.CmdType = 2;
; 272  : 			pMsg.X = x;

  0037b	8a 85 10 ff ff
	ff		 mov	 al, BYTE PTR _x$[ebp]

; 273  : 			pMsg.Y = y;

  00381	8a 8d 0c ff ff
	ff		 mov	 cl, BYTE PTR _y$[ebp]
  00387	83 c4 44	 add	 esp, 68			; 00000044H

; 274  : 
; 275  : 			MsgSendV2(lpObj, (LPBYTE)&pMsg, sizeof(pMsg));

  0038a	6a 07		 push	 7
  0038c	8d 95 14 ff ff
	ff		 lea	 edx, DWORD PTR _pMsg$215241[ebp]
  00392	52		 push	 edx
  00393	56		 push	 esi
  00394	c6 85 18 ff ff
	ff 02		 mov	 BYTE PTR _pMsg$215241[ebp+4], 2
  0039b	88 85 19 ff ff
	ff		 mov	 BYTE PTR _pMsg$215241[ebp+5], al
  003a1	88 8d 1a ff ff
	ff		 mov	 BYTE PTR _pMsg$215241[ebp+6], cl
  003a7	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 276  : 			DataSend(lpObj->m_Index, (LPBYTE)&pMsg, sizeof(pMsg));

  003ac	8b 0e		 mov	 ecx, DWORD PTR [esi]
  003ae	6a 07		 push	 7
  003b0	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _pMsg$215241[ebp]
  003b6	50		 push	 eax
  003b7	51		 push	 ecx
  003b8	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  003bd	83 c4 18	 add	 esp, 24			; 00000018H

; 277  : 
; 278  : 			CItem NewItem;

  003c0	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$215245[ebp]
  003c6	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 279  : 			NewItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, CURRENT_DB_VERSION);

  003cb	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  003d1	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  003d7	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  003dd	6a 03		 push	 3
  003df	6a 00		 push	 0
  003e1	68 ff 00 00 00	 push	 255			; 000000ffH
  003e6	6a 00		 push	 0
  003e8	6a 00		 push	 0
  003ea	6a 01		 push	 1
  003ec	6a 00		 push	 0
  003ee	52		 push	 edx
  003ef	50		 push	 eax
  003f0	51		 push	 ecx
  003f1	53		 push	 ebx
  003f2	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$215245[ebp]
  003f8	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 280  : 
; 281  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Event Chip] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 282  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, NewItem.GetName(),
; 283  : 				type, level, Option1, Option2, Option3);

  003fd	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00403	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00409	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  0040f	52		 push	 edx
  00410	50		 push	 eax
  00411	51		 push	 ecx
  00412	57		 push	 edi
  00413	53		 push	 ebx
  00414	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$215245[ebp]
  0041a	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  0041f	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  00426	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0042d	50		 push	 eax
  0042e	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00435	52		 push	 edx
  00436	50		 push	 eax
  00437	51		 push	 ecx
  00438	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0043b	52		 push	 edx
  0043c	83 c6 6c	 add	 esi, 108		; 0000006cH
  0043f	56		 push	 esi
  00440	68 00 00 00 00	 push	 OFFSET ??_C@_0GG@LLIIPLAL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLEv@
  00445	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0044b	83 c4 30	 add	 esp, 48			; 00000030H
  0044e	5f		 pop	 edi
  0044f	5e		 pop	 esi
  00450	5b		 pop	 ebx

; 294  : }

  00451	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00454	33 cd		 xor	 ecx, ebp
  00456	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0045b	8b e5		 mov	 esp, ebp
  0045d	5d		 pop	 ebp
  0045e	c3		 ret	 0
$LN11@EventChipO:

; 284  : 
; 285  : 			return;
; 286  : 
; 287  : 
; 288  : 		}
; 289  : 	}
; 290  : 
; 291  : 	x = lpObj->X;
; 292  : 	y = lpObj->Y;
; 293  : 	MapC[lpObj->MapNumber].MoneyItemDrop(1000, x, y);

  0045f	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00466	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  0046d	50		 push	 eax
  0046e	51		 push	 ecx
  0046f	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00476	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  0047c	68 e8 03 00 00	 push	 1000			; 000003e8H
  00481	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00487	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN15@EventChipO:

; 294  : }

  0048c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0048f	5f		 pop	 edi
  00490	5e		 pop	 esi
  00491	33 cd		 xor	 ecx, ebp
  00493	5b		 pop	 ebx
  00494	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00499	8b e5		 mov	 esp, ebp
  0049b	5d		 pop	 ebp
  0049c	c3		 ret	 0
?EventChipOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; EventChipOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; GoldMedalOpenEven
EXTRN	?g_ItemDropRateForGoldMedal@@3HA:DWORD		; g_ItemDropRateForGoldMedal
EXTRN	?GoldMedalItemBag@@3PAVCItemBag@@A:DWORD	; GoldMedalItemBag
;	COMDAT ??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Gold Medal] : (%d)(X:%d/Y:%d) It'
	DB	'em:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_DropItemNum$ = -248					; size = 4
_y$ = -244						; size = 4
_x$ = -240						; size = 4
_ServerCmd$215282 = -236				; size = 7
_Option1$ = -228					; size = 4
_Option3$ = -224					; size = 4
tv529 = -220						; size = 4
_Option2$ = -220					; size = 4
_EventItem$215286 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC		; GoldMedalOpenEven, COMDAT

; 297  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f8 00 00
	00		 sub	 esp, 248		; 000000f8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 298  : 	float dur;
; 299  : 	int type;
; 300  : 	int level;
; 301  : 	int x;
; 302  : 	int y;
; 303  : 	int Option1=0;
; 304  : 	int Option2=0;
; 305  : 	int Option3=0;
; 306  : 	int DropItemNum;
; 307  : 	int ExOption=0;
; 308  : 
; 309  : 	if ( !GoldMedalItemBag )

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00018	56		 push	 esi
  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	c7 85 20 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 0
  00026	85 c0		 test	 eax, eax
  00028	0f 84 ee 03 00
	00		 je	 $LN14@GoldMedalO

; 310  : 		return;
; 311  : 
; 312  : 	if ( GoldMedalItemBag->GetBagCount() > 0 )

  0002e	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  00035	0f 8e b4 03 00
	00		 jle	 $LN11@GoldMedalO

; 313  : 	{
; 314  : 		if ( (rand()%20) < g_ItemDropRateForGoldMedal )

  0003b	e8 00 00 00 00	 call	 _rand
  00040	99		 cdq
  00041	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00046	f7 f9		 idiv	 ecx
  00048	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForGoldMedal@@3HA ; g_ItemDropRateForGoldMedal
  0004e	0f 8d 9b 03 00
	00		 jge	 $LN11@GoldMedalO

; 315  : 		{
; 316  : 			DropItemNum = rand()%GoldMedalItemBag->GetBagCount();

  00054	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  0005a	53		 push	 ebx
  0005b	57		 push	 edi
  0005c	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  00062	e8 00 00 00 00	 call	 _rand
  00067	99		 cdq
  00068	f7 ff		 idiv	 edi

; 317  : 			dur=0;
; 318  : 			x = lpObj->X;
; 319  : 			y = lpObj->Y;

  0006a	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00071	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00078	89 8d 0c ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 320  : 			level = GoldMedalItemBag->GetLevel(DropItemNum) + rand()%4;

  0007e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00084	89 85 10 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  0008a	8b da		 mov	 ebx, edx
  0008c	53		 push	 ebx
  0008d	89 9d 08 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], ebx
  00093	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00098	0f b6 d0	 movzx	 edx, al
  0009b	89 95 24 ff ff
	ff		 mov	 DWORD PTR tv529[ebp], edx
  000a1	e8 00 00 00 00	 call	 _rand
  000a6	8b f8		 mov	 edi, eax
  000a8	81 e7 03 00 00
	80		 and	 edi, -2147483645	; 80000003H
  000ae	79 05		 jns	 SHORT $LN22@GoldMedalO
  000b0	4f		 dec	 edi
  000b1	83 cf fc	 or	 edi, -4			; fffffffcH
  000b4	47		 inc	 edi
$LN22@GoldMedalO:

; 321  : 			type = ItemGetNumberMake(GoldMedalItemBag->GetType(DropItemNum), GoldMedalItemBag->GetIndex(DropItemNum));

  000b5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  000bb	03 bd 24 ff ff
	ff		 add	 edi, DWORD PTR tv529[ebp]
  000c1	53		 push	 ebx
  000c2	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000c7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  000cd	0f b6 c0	 movzx	 eax, al
  000d0	50		 push	 eax
  000d1	53		 push	 ebx
  000d2	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000d7	0f b6 c8	 movzx	 ecx, al
  000da	51		 push	 ecx
  000db	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000e0	83 c4 08	 add	 esp, 8
  000e3	8b d8		 mov	 ebx, eax

; 322  : 			Option1 = rand()%2;

  000e5	e8 00 00 00 00	 call	 _rand
  000ea	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000ef	79 05		 jns	 SHORT $LN23@GoldMedalO
  000f1	48		 dec	 eax
  000f2	83 c8 fe	 or	 eax, -2			; fffffffeH
  000f5	40		 inc	 eax
$LN23@GoldMedalO:
  000f6	89 85 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], eax

; 323  : 			Option2 = rand()%2;

  000fc	e8 00 00 00 00	 call	 _rand
  00101	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00106	79 05		 jns	 SHORT $LN24@GoldMedalO
  00108	48		 dec	 eax
  00109	83 c8 fe	 or	 eax, -2			; fffffffeH
  0010c	40		 inc	 eax
$LN24@GoldMedalO:
  0010d	89 85 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 324  : 
; 325  : 			if ( !Option2 || !Option1 )

  00113	74 0a		 je	 SHORT $LN9@GoldMedalO
  00115	33 c9		 xor	 ecx, ecx
  00117	39 8d 1c ff ff
	ff		 cmp	 DWORD PTR _Option1$[ebp], ecx
  0011d	75 33		 jne	 SHORT $LN21@GoldMedalO
$LN9@GoldMedalO:

; 326  : 			{
; 327  : 				if ( (rand()%5) <1 )

  0011f	e8 00 00 00 00	 call	 _rand
  00124	99		 cdq
  00125	b9 05 00 00 00	 mov	 ecx, 5
  0012a	f7 f9		 idiv	 ecx
  0012c	83 fa 01	 cmp	 edx, 1
  0012f	7d 0c		 jge	 SHORT $LN8@GoldMedalO

; 328  : 					Option3 = 3;

  00131	c7 85 20 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 329  : 				else

  0013b	eb 13		 jmp	 SHORT $LN25@GoldMedalO
$LN8@GoldMedalO:

; 330  : 					Option3 = rand()%3;

  0013d	e8 00 00 00 00	 call	 _rand
  00142	99		 cdq
  00143	b9 03 00 00 00	 mov	 ecx, 3
  00148	f7 f9		 idiv	 ecx
  0014a	89 95 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN25@GoldMedalO:
  00150	33 c9		 xor	 ecx, ecx
$LN21@GoldMedalO:

; 331  : 			}
; 332  : 
; 333  : 			if ( type == ITEMGET(12,15) ||
; 334  : 				 type == ITEMGET(14,13) ||
; 335  : 				 type == ITEMGET(14,14) ||
; 336  : 				 type == ITEMGET(14,14) ||
; 337  : 				 type == ITEMGET(14,16)	||
; 338  : 				 type == ITEMGET(14,22)	||
; 339  : 				 type == ITEMGET(14,31)	||
; 340  : 				 type == ITEMGET(14,41)	||
; 341  : 				 type == ITEMGET(14,42)	||
; 342  : 				 type == ITEMGET(14,180)||
; 343  : 				 type == ITEMGET(14,181)||
; 344  : 				 type == ITEMGET(14,182)||
; 345  : 				 type == ITEMGET(14,183)||
; 346  : 				 type == ITEMGET(14,184)||
; 347  : 				 type == ITEMGET(14,185)||
; 348  : 				 type == ITEMGET(14,186)||
; 349  : 				 type == ITEMGET(14,187)||
; 350  : 				 type == ITEMGET(14,190)||
; 351  : 				 type == ITEMGET(14,43) ||
; 352  : 				 type == ITEMGET(14,44) )

  00152	81 fb 0f 18 00
	00		 cmp	 ebx, 6159		; 0000180fH
  00158	0f 84 98 00 00
	00		 je	 $LN5@GoldMedalO
  0015e	81 fb 0d 1c 00
	00		 cmp	 ebx, 7181		; 00001c0dH
  00164	0f 84 8c 00 00
	00		 je	 $LN5@GoldMedalO
  0016a	81 fb 0e 1c 00
	00		 cmp	 ebx, 7182		; 00001c0eH
  00170	0f 84 80 00 00
	00		 je	 $LN5@GoldMedalO
  00176	81 fb 10 1c 00
	00		 cmp	 ebx, 7184		; 00001c10H
  0017c	74 78		 je	 SHORT $LN5@GoldMedalO
  0017e	81 fb 16 1c 00
	00		 cmp	 ebx, 7190		; 00001c16H
  00184	74 70		 je	 SHORT $LN5@GoldMedalO
  00186	81 fb 1f 1c 00
	00		 cmp	 ebx, 7199		; 00001c1fH
  0018c	74 68		 je	 SHORT $LN5@GoldMedalO
  0018e	81 fb 29 1c 00
	00		 cmp	 ebx, 7209		; 00001c29H
  00194	74 60		 je	 SHORT $LN5@GoldMedalO
  00196	81 fb 2a 1c 00
	00		 cmp	 ebx, 7210		; 00001c2aH
  0019c	74 58		 je	 SHORT $LN5@GoldMedalO
  0019e	81 fb b4 1c 00
	00		 cmp	 ebx, 7348		; 00001cb4H
  001a4	74 50		 je	 SHORT $LN5@GoldMedalO
  001a6	81 fb b5 1c 00
	00		 cmp	 ebx, 7349		; 00001cb5H
  001ac	74 48		 je	 SHORT $LN5@GoldMedalO
  001ae	81 fb b6 1c 00
	00		 cmp	 ebx, 7350		; 00001cb6H
  001b4	74 40		 je	 SHORT $LN5@GoldMedalO
  001b6	81 fb b7 1c 00
	00		 cmp	 ebx, 7351		; 00001cb7H
  001bc	74 38		 je	 SHORT $LN5@GoldMedalO
  001be	81 fb b8 1c 00
	00		 cmp	 ebx, 7352		; 00001cb8H
  001c4	74 30		 je	 SHORT $LN5@GoldMedalO
  001c6	81 fb b9 1c 00
	00		 cmp	 ebx, 7353		; 00001cb9H
  001cc	74 28		 je	 SHORT $LN5@GoldMedalO
  001ce	81 fb ba 1c 00
	00		 cmp	 ebx, 7354		; 00001cbaH
  001d4	74 20		 je	 SHORT $LN5@GoldMedalO
  001d6	81 fb bb 1c 00
	00		 cmp	 ebx, 7355		; 00001cbbH
  001dc	74 18		 je	 SHORT $LN5@GoldMedalO
  001de	81 fb be 1c 00
	00		 cmp	 ebx, 7358		; 00001cbeH
  001e4	74 10		 je	 SHORT $LN5@GoldMedalO
  001e6	81 fb 2b 1c 00
	00		 cmp	 ebx, 7211		; 00001c2bH
  001ec	74 08		 je	 SHORT $LN5@GoldMedalO
  001ee	81 fb 2c 1c 00
	00		 cmp	 ebx, 7212		; 00001c2cH
  001f4	75 14		 jne	 SHORT $LN6@GoldMedalO
$LN5@GoldMedalO:

; 353  : 			{
; 354  : 				Option1 = 0;

  001f6	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 355  : 				Option2 = 0;

  001fc	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 356  : 				Option3 = 0;

  00202	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 357  : 				level = 0;

  00208	33 ff		 xor	 edi, edi
$LN6@GoldMedalO:

; 358  : 				ExOption = 0;
; 359  : 			}
; 360  : 
; 361  : 			if ( type == ITEMGET(12,30)	||
; 362  : 				 type == ITEMGET(12,31)	||
; 363  : 				 type == ITEMGET(12,136)||
; 364  : 				 type == ITEMGET(12,137)||
; 365  : 				 type == ITEMGET(12,138)||
; 366  : 				 type == ITEMGET(12,139)||
; 367  : 				 type == ITEMGET(12,140)||
; 368  : 				 type == ITEMGET(12,141)||
; 369  : 				 type == ITEMGET(12,142)||
; 370  : 				 type == ITEMGET(12,143))

  0020a	81 fb 1e 18 00
	00		 cmp	 ebx, 6174		; 0000181eH
  00210	74 48		 je	 SHORT $LN3@GoldMedalO
  00212	81 fb 1f 18 00
	00		 cmp	 ebx, 6175		; 0000181fH
  00218	74 40		 je	 SHORT $LN3@GoldMedalO
  0021a	81 fb 88 18 00
	00		 cmp	 ebx, 6280		; 00001888H
  00220	74 38		 je	 SHORT $LN3@GoldMedalO
  00222	81 fb 89 18 00
	00		 cmp	 ebx, 6281		; 00001889H
  00228	74 30		 je	 SHORT $LN3@GoldMedalO
  0022a	81 fb 8a 18 00
	00		 cmp	 ebx, 6282		; 0000188aH
  00230	74 28		 je	 SHORT $LN3@GoldMedalO
  00232	81 fb 8b 18 00
	00		 cmp	 ebx, 6283		; 0000188bH
  00238	74 20		 je	 SHORT $LN3@GoldMedalO
  0023a	81 fb 8c 18 00
	00		 cmp	 ebx, 6284		; 0000188cH
  00240	74 18		 je	 SHORT $LN3@GoldMedalO
  00242	81 fb 8d 18 00
	00		 cmp	 ebx, 6285		; 0000188dH
  00248	74 10		 je	 SHORT $LN3@GoldMedalO
  0024a	81 fb 8e 18 00
	00		 cmp	 ebx, 6286		; 0000188eH
  00250	74 08		 je	 SHORT $LN3@GoldMedalO
  00252	81 fb 8f 18 00
	00		 cmp	 ebx, 6287		; 0000188fH
  00258	75 29		 jne	 SHORT $LN4@GoldMedalO
$LN3@GoldMedalO:

; 371  : 			{
; 372  : 				Option1 = 0;
; 373  : 				Option2 = 0;
; 374  : 				Option3 = 0;
; 375  : 				level = GoldMedalItemBag->GetLevel(DropItemNum);

  0025a	8b 95 08 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00260	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  00266	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx
  0026c	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00272	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldMedalItemBag@@3PAVCItemBag@@A ; GoldMedalItemBag
  00278	52		 push	 edx
  00279	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0027e	0f b6 f8	 movzx	 edi, al
  00281	33 c9		 xor	 ecx, ecx
$LN4@GoldMedalO:

; 376  : 				ExOption = 0;
; 377  : 			}
; 378  : 
; 379  : 			if ( type == ITEMGET(13,0) ||
; 380  : 				 type == ITEMGET(13,1) ||
; 381  : 				 type == ITEMGET(13,2) ||
; 382  : 				 type == ITEMGET(13,8) ||
; 383  : 				 type == ITEMGET(13,9) ||
; 384  : 				 type == ITEMGET(13,12) ||
; 385  : 				 type == ITEMGET(13,13) )

  00283	81 fb 00 1a 00
	00		 cmp	 ebx, 6656		; 00001a00H
  00289	74 30		 je	 SHORT $LN1@GoldMedalO
  0028b	81 fb 01 1a 00
	00		 cmp	 ebx, 6657		; 00001a01H
  00291	74 28		 je	 SHORT $LN1@GoldMedalO
  00293	81 fb 02 1a 00
	00		 cmp	 ebx, 6658		; 00001a02H
  00299	74 20		 je	 SHORT $LN1@GoldMedalO
  0029b	81 fb 08 1a 00
	00		 cmp	 ebx, 6664		; 00001a08H
  002a1	74 18		 je	 SHORT $LN1@GoldMedalO
  002a3	81 fb 09 1a 00
	00		 cmp	 ebx, 6665		; 00001a09H
  002a9	74 10		 je	 SHORT $LN1@GoldMedalO
  002ab	81 fb 0c 1a 00
	00		 cmp	 ebx, 6668		; 00001a0cH
  002b1	74 08		 je	 SHORT $LN1@GoldMedalO
  002b3	81 fb 0d 1a 00
	00		 cmp	 ebx, 6669		; 00001a0dH
  002b9	75 02		 jne	 SHORT $LN2@GoldMedalO
$LN1@GoldMedalO:

; 386  : 			{
; 387  : 				level = 0;

  002bb	33 ff		 xor	 edi, edi
$LN2@GoldMedalO:

; 388  : 			}
; 389  : 
; 390  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 391  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, (BYTE)ExOption, 0);

  002bd	8b 06		 mov	 eax, DWORD PTR [esi]
  002bf	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002c5	51		 push	 ecx
  002c6	51		 push	 ecx
  002c7	50		 push	 eax
  002c8	52		 push	 edx
  002c9	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  002cf	52		 push	 edx
  002d0	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  002d6	52		 push	 edx
  002d7	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _x$[ebp]
  002dd	51		 push	 ecx
  002de	8b 8d 0c ff ff
	ff		 mov	 ecx, DWORD PTR _y$[ebp]
  002e4	57		 push	 edi
  002e5	53		 push	 ebx
  002e6	51		 push	 ecx
  002e7	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  002ee	52		 push	 edx
  002ef	51		 push	 ecx
  002f0	50		 push	 eax
  002f1	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 392  : 
; 393  : 			PMSG_SERVERCMD ServerCmd;
; 394  : 
; 395  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  002f6	6a 07		 push	 7
  002f8	6a 40		 push	 64			; 00000040H
  002fa	8d 95 14 ff ff
	ff		 lea	 edx, DWORD PTR _ServerCmd$215282[ebp]
  00300	68 f3 00 00 00	 push	 243			; 000000f3H
  00305	52		 push	 edx
  00306	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 396  : 			ServerCmd.CmdType = 2;
; 397  : 			ServerCmd.X = x;

  0030b	8a 85 10 ff ff
	ff		 mov	 al, BYTE PTR _x$[ebp]

; 398  : 			ServerCmd.Y = y;

  00311	8a 8d 0c ff ff
	ff		 mov	 cl, BYTE PTR _y$[ebp]
  00317	83 c4 44	 add	 esp, 68			; 00000044H

; 399  : 
; 400  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0031a	6a 07		 push	 7
  0031c	8d 95 14 ff ff
	ff		 lea	 edx, DWORD PTR _ServerCmd$215282[ebp]
  00322	52		 push	 edx
  00323	56		 push	 esi
  00324	c6 85 18 ff ff
	ff 02		 mov	 BYTE PTR _ServerCmd$215282[ebp+4], 2
  0032b	88 85 19 ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215282[ebp+5], al
  00331	88 8d 1a ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215282[ebp+6], cl
  00337	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 401  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0033c	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0033e	6a 07		 push	 7
  00340	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215282[ebp]
  00346	50		 push	 eax
  00347	51		 push	 ecx
  00348	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0034d	83 c4 18	 add	 esp, 24			; 00000018H

; 402  : 
; 403  : 			CItem EventItem;

  00350	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215286[ebp]
  00356	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 404  : 
; 405  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  0035b	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00361	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00367	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  0036d	6a 03		 push	 3
  0036f	6a 00		 push	 0
  00371	68 ff 00 00 00	 push	 255			; 000000ffH
  00376	6a 00		 push	 0
  00378	6a 00		 push	 0
  0037a	6a 01		 push	 1
  0037c	6a 00		 push	 0
  0037e	52		 push	 edx
  0037f	50		 push	 eax
  00380	51		 push	 ecx
  00381	53		 push	 ebx
  00382	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215286[ebp]
  00388	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 406  : 
; 407  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Gold Medal] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 408  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 409  : 				type, level, Option1, Option2, Option3);

  0038d	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00393	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00399	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  0039f	52		 push	 edx
  003a0	50		 push	 eax
  003a1	51		 push	 ecx
  003a2	57		 push	 edi
  003a3	53		 push	 ebx
  003a4	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215286[ebp]
  003aa	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  003af	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  003b6	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  003bd	50		 push	 eax
  003be	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  003c5	52		 push	 edx
  003c6	50		 push	 eax
  003c7	51		 push	 ecx
  003c8	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  003cb	52		 push	 edx
  003cc	83 c6 6c	 add	 esi, 108		; 0000006cH
  003cf	56		 push	 esi
  003d0	68 00 00 00 00	 push	 OFFSET ??_C@_0GG@JMHMGOHL@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLGo@
  003d5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003db	83 c4 30	 add	 esp, 48			; 00000030H
  003de	5f		 pop	 edi
  003df	5b		 pop	 ebx
  003e0	5e		 pop	 esi

; 418  : }

  003e1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003e4	33 cd		 xor	 ecx, ebp
  003e6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  003eb	8b e5		 mov	 esp, ebp
  003ed	5d		 pop	 ebp
  003ee	c3		 ret	 0
$LN11@GoldMedalO:

; 410  : 
; 411  : 			return;
; 412  : 		}
; 413  : 	}
; 414  : 
; 415  : 	x = lpObj->X;
; 416  : 	y = lpObj->Y;
; 417  : 	MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  003ef	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  003f6	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  003fd	50		 push	 eax
  003fe	51		 push	 ecx
  003ff	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00406	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  0040c	68 a0 86 01 00	 push	 100000			; 000186a0H
  00411	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00417	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN14@GoldMedalO:

; 418  : }

  0041c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0041f	33 cd		 xor	 ecx, ebp
  00421	5e		 pop	 esi
  00422	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00427	8b e5		 mov	 esp, ebp
  00429	5d		 pop	 ebp
  0042a	c3		 ret	 0
?GoldMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; GoldMedalOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; SilverMedalOpenEven
EXTRN	?g_ItemDropRateForSilverMedal@@3HA:DWORD	; g_ItemDropRateForSilverMedal
EXTRN	?SilverMedalItemBag@@3PAVCItemBag@@A:DWORD	; SilverMedalItemBag
;	COMDAT ??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Silver Medal] : (%d)(X:%d/Y:%d) '
	DB	'Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_DropItemNum$ = -248					; size = 4
_y$ = -244						; size = 4
_x$ = -240						; size = 4
_ServerCmd$215322 = -236				; size = 7
_Option1$ = -228					; size = 4
_Option3$ = -224					; size = 4
tv529 = -220						; size = 4
_Option2$ = -220					; size = 4
_EventItem$215326 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; SilverMedalOpenEven, COMDAT

; 421  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f8 00 00
	00		 sub	 esp, 248		; 000000f8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 422  : 	float dur;
; 423  : 	int type;
; 424  : 	int level;
; 425  : 	int x;
; 426  : 	int y;
; 427  : 	int Option1=0;
; 428  : 	int Option2=0;
; 429  : 	int Option3=0;
; 430  : 	int DropItemNum;
; 431  : 	int ExOption=0;
; 432  : 
; 433  : 	if ( !SilverMedalItemBag )

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00018	56		 push	 esi
  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	c7 85 20 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 0
  00026	85 c0		 test	 eax, eax
  00028	0f 84 ee 03 00
	00		 je	 $LN14@SilverMeda

; 434  : 		return;
; 435  : 
; 436  : 	if ( SilverMedalItemBag->GetBagCount() > 0 )

  0002e	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  00035	0f 8e b4 03 00
	00		 jle	 $LN11@SilverMeda

; 437  : 	{
; 438  : 		if ( (rand()%20) < g_ItemDropRateForSilverMedal )

  0003b	e8 00 00 00 00	 call	 _rand
  00040	99		 cdq
  00041	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00046	f7 f9		 idiv	 ecx
  00048	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForSilverMedal@@3HA ; g_ItemDropRateForSilverMedal
  0004e	0f 8d 9b 03 00
	00		 jge	 $LN11@SilverMeda

; 439  : 		{
; 440  : 			DropItemNum = rand()%SilverMedalItemBag->GetBagCount();

  00054	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  0005a	53		 push	 ebx
  0005b	57		 push	 edi
  0005c	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  00062	e8 00 00 00 00	 call	 _rand
  00067	99		 cdq
  00068	f7 ff		 idiv	 edi

; 441  : 			dur=0;
; 442  : 			x = lpObj->X;
; 443  : 			y = lpObj->Y;

  0006a	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00071	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00078	89 8d 0c ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 444  : 			level = SilverMedalItemBag->GetLevel(DropItemNum) + rand()%4;

  0007e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00084	89 85 10 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  0008a	8b da		 mov	 ebx, edx
  0008c	53		 push	 ebx
  0008d	89 9d 08 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], ebx
  00093	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00098	0f b6 d0	 movzx	 edx, al
  0009b	89 95 24 ff ff
	ff		 mov	 DWORD PTR tv529[ebp], edx
  000a1	e8 00 00 00 00	 call	 _rand
  000a6	8b f8		 mov	 edi, eax
  000a8	81 e7 03 00 00
	80		 and	 edi, -2147483645	; 80000003H
  000ae	79 05		 jns	 SHORT $LN22@SilverMeda
  000b0	4f		 dec	 edi
  000b1	83 cf fc	 or	 edi, -4			; fffffffcH
  000b4	47		 inc	 edi
$LN22@SilverMeda:

; 445  : 			type = ItemGetNumberMake(SilverMedalItemBag->GetType(DropItemNum), SilverMedalItemBag->GetIndex(DropItemNum));

  000b5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  000bb	03 bd 24 ff ff
	ff		 add	 edi, DWORD PTR tv529[ebp]
  000c1	53		 push	 ebx
  000c2	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000c7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  000cd	0f b6 c0	 movzx	 eax, al
  000d0	50		 push	 eax
  000d1	53		 push	 ebx
  000d2	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000d7	0f b6 c8	 movzx	 ecx, al
  000da	51		 push	 ecx
  000db	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000e0	83 c4 08	 add	 esp, 8
  000e3	8b d8		 mov	 ebx, eax

; 446  : 			Option1 = rand()%2;

  000e5	e8 00 00 00 00	 call	 _rand
  000ea	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000ef	79 05		 jns	 SHORT $LN23@SilverMeda
  000f1	48		 dec	 eax
  000f2	83 c8 fe	 or	 eax, -2			; fffffffeH
  000f5	40		 inc	 eax
$LN23@SilverMeda:
  000f6	89 85 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], eax

; 447  : 			Option2 = rand()%2;

  000fc	e8 00 00 00 00	 call	 _rand
  00101	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00106	79 05		 jns	 SHORT $LN24@SilverMeda
  00108	48		 dec	 eax
  00109	83 c8 fe	 or	 eax, -2			; fffffffeH
  0010c	40		 inc	 eax
$LN24@SilverMeda:
  0010d	89 85 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 448  : 
; 449  : 			if ( !Option2 || !Option1 )

  00113	74 0a		 je	 SHORT $LN9@SilverMeda
  00115	33 c9		 xor	 ecx, ecx
  00117	39 8d 1c ff ff
	ff		 cmp	 DWORD PTR _Option1$[ebp], ecx
  0011d	75 33		 jne	 SHORT $LN21@SilverMeda
$LN9@SilverMeda:

; 450  : 			{
; 451  : 				if ( (rand()%5) <1 )

  0011f	e8 00 00 00 00	 call	 _rand
  00124	99		 cdq
  00125	b9 05 00 00 00	 mov	 ecx, 5
  0012a	f7 f9		 idiv	 ecx
  0012c	83 fa 01	 cmp	 edx, 1
  0012f	7d 0c		 jge	 SHORT $LN8@SilverMeda

; 452  : 					Option3 = 3;

  00131	c7 85 20 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 453  : 				else

  0013b	eb 13		 jmp	 SHORT $LN25@SilverMeda
$LN8@SilverMeda:

; 454  : 					Option3 = rand()%3;

  0013d	e8 00 00 00 00	 call	 _rand
  00142	99		 cdq
  00143	b9 03 00 00 00	 mov	 ecx, 3
  00148	f7 f9		 idiv	 ecx
  0014a	89 95 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN25@SilverMeda:
  00150	33 c9		 xor	 ecx, ecx
$LN21@SilverMeda:

; 455  : 			}
; 456  : 
; 457  : 			if ( type == ITEMGET(12,15) ||
; 458  : 				 type == ITEMGET(14,13) ||
; 459  : 				 type == ITEMGET(14,14) ||
; 460  : 				 type == ITEMGET(14,14) ||
; 461  : 				 type == ITEMGET(14,16)	||
; 462  : 				 type == ITEMGET(14,22)	||
; 463  : 				 type == ITEMGET(14,31)	||
; 464  : 				 type == ITEMGET(14,41)	||
; 465  : 				 type == ITEMGET(14,42)	||
; 466  : 				 type == ITEMGET(14,180)||
; 467  : 				 type == ITEMGET(14,181)||
; 468  : 				 type == ITEMGET(14,182)||
; 469  : 				 type == ITEMGET(14,183)||
; 470  : 				 type == ITEMGET(14,184)||
; 471  : 				 type == ITEMGET(14,185)||
; 472  : 				 type == ITEMGET(14,186)||
; 473  : 				 type == ITEMGET(14,187)||
; 474  : 				 type == ITEMGET(14,190)||
; 475  : 				 type == ITEMGET(14,43) ||
; 476  : 				 type == ITEMGET(14,44) )

  00152	81 fb 0f 18 00
	00		 cmp	 ebx, 6159		; 0000180fH
  00158	0f 84 98 00 00
	00		 je	 $LN5@SilverMeda
  0015e	81 fb 0d 1c 00
	00		 cmp	 ebx, 7181		; 00001c0dH
  00164	0f 84 8c 00 00
	00		 je	 $LN5@SilverMeda
  0016a	81 fb 0e 1c 00
	00		 cmp	 ebx, 7182		; 00001c0eH
  00170	0f 84 80 00 00
	00		 je	 $LN5@SilverMeda
  00176	81 fb 10 1c 00
	00		 cmp	 ebx, 7184		; 00001c10H
  0017c	74 78		 je	 SHORT $LN5@SilverMeda
  0017e	81 fb 16 1c 00
	00		 cmp	 ebx, 7190		; 00001c16H
  00184	74 70		 je	 SHORT $LN5@SilverMeda
  00186	81 fb 1f 1c 00
	00		 cmp	 ebx, 7199		; 00001c1fH
  0018c	74 68		 je	 SHORT $LN5@SilverMeda
  0018e	81 fb 29 1c 00
	00		 cmp	 ebx, 7209		; 00001c29H
  00194	74 60		 je	 SHORT $LN5@SilverMeda
  00196	81 fb 2a 1c 00
	00		 cmp	 ebx, 7210		; 00001c2aH
  0019c	74 58		 je	 SHORT $LN5@SilverMeda
  0019e	81 fb b4 1c 00
	00		 cmp	 ebx, 7348		; 00001cb4H
  001a4	74 50		 je	 SHORT $LN5@SilverMeda
  001a6	81 fb b5 1c 00
	00		 cmp	 ebx, 7349		; 00001cb5H
  001ac	74 48		 je	 SHORT $LN5@SilverMeda
  001ae	81 fb b6 1c 00
	00		 cmp	 ebx, 7350		; 00001cb6H
  001b4	74 40		 je	 SHORT $LN5@SilverMeda
  001b6	81 fb b7 1c 00
	00		 cmp	 ebx, 7351		; 00001cb7H
  001bc	74 38		 je	 SHORT $LN5@SilverMeda
  001be	81 fb b8 1c 00
	00		 cmp	 ebx, 7352		; 00001cb8H
  001c4	74 30		 je	 SHORT $LN5@SilverMeda
  001c6	81 fb b9 1c 00
	00		 cmp	 ebx, 7353		; 00001cb9H
  001cc	74 28		 je	 SHORT $LN5@SilverMeda
  001ce	81 fb ba 1c 00
	00		 cmp	 ebx, 7354		; 00001cbaH
  001d4	74 20		 je	 SHORT $LN5@SilverMeda
  001d6	81 fb bb 1c 00
	00		 cmp	 ebx, 7355		; 00001cbbH
  001dc	74 18		 je	 SHORT $LN5@SilverMeda
  001de	81 fb be 1c 00
	00		 cmp	 ebx, 7358		; 00001cbeH
  001e4	74 10		 je	 SHORT $LN5@SilverMeda
  001e6	81 fb 2b 1c 00
	00		 cmp	 ebx, 7211		; 00001c2bH
  001ec	74 08		 je	 SHORT $LN5@SilverMeda
  001ee	81 fb 2c 1c 00
	00		 cmp	 ebx, 7212		; 00001c2cH
  001f4	75 14		 jne	 SHORT $LN6@SilverMeda
$LN5@SilverMeda:

; 477  : 			{
; 478  : 				Option1 = 0;

  001f6	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 479  : 				Option2 = 0;

  001fc	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 480  : 				Option3 = 0;

  00202	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 481  : 				level = 0;

  00208	33 ff		 xor	 edi, edi
$LN6@SilverMeda:

; 482  : 				ExOption = 0;
; 483  : 			}
; 484  : 
; 485  : 			if ( type == ITEMGET(12,30)	||
; 486  : 				 type == ITEMGET(12,31)	||
; 487  : 				 type == ITEMGET(12,136)||
; 488  : 				 type == ITEMGET(12,137)||
; 489  : 				 type == ITEMGET(12,138)||
; 490  : 				 type == ITEMGET(12,139)||
; 491  : 				 type == ITEMGET(12,140)||
; 492  : 				 type == ITEMGET(12,141)||
; 493  : 				 type == ITEMGET(12,142)||
; 494  : 				 type == ITEMGET(12,143))

  0020a	81 fb 1e 18 00
	00		 cmp	 ebx, 6174		; 0000181eH
  00210	74 48		 je	 SHORT $LN3@SilverMeda
  00212	81 fb 1f 18 00
	00		 cmp	 ebx, 6175		; 0000181fH
  00218	74 40		 je	 SHORT $LN3@SilverMeda
  0021a	81 fb 88 18 00
	00		 cmp	 ebx, 6280		; 00001888H
  00220	74 38		 je	 SHORT $LN3@SilverMeda
  00222	81 fb 89 18 00
	00		 cmp	 ebx, 6281		; 00001889H
  00228	74 30		 je	 SHORT $LN3@SilverMeda
  0022a	81 fb 8a 18 00
	00		 cmp	 ebx, 6282		; 0000188aH
  00230	74 28		 je	 SHORT $LN3@SilverMeda
  00232	81 fb 8b 18 00
	00		 cmp	 ebx, 6283		; 0000188bH
  00238	74 20		 je	 SHORT $LN3@SilverMeda
  0023a	81 fb 8c 18 00
	00		 cmp	 ebx, 6284		; 0000188cH
  00240	74 18		 je	 SHORT $LN3@SilverMeda
  00242	81 fb 8d 18 00
	00		 cmp	 ebx, 6285		; 0000188dH
  00248	74 10		 je	 SHORT $LN3@SilverMeda
  0024a	81 fb 8e 18 00
	00		 cmp	 ebx, 6286		; 0000188eH
  00250	74 08		 je	 SHORT $LN3@SilverMeda
  00252	81 fb 8f 18 00
	00		 cmp	 ebx, 6287		; 0000188fH
  00258	75 29		 jne	 SHORT $LN4@SilverMeda
$LN3@SilverMeda:

; 495  : 			{
; 496  : 				Option1 = 0;
; 497  : 				Option2 = 0;
; 498  : 				Option3 = 0;
; 499  : 				level = SilverMedalItemBag->GetLevel(DropItemNum);

  0025a	8b 95 08 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00260	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  00266	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx
  0026c	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00272	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverMedalItemBag@@3PAVCItemBag@@A ; SilverMedalItemBag
  00278	52		 push	 edx
  00279	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0027e	0f b6 f8	 movzx	 edi, al
  00281	33 c9		 xor	 ecx, ecx
$LN4@SilverMeda:

; 500  : 				ExOption = 0;
; 501  : 			}
; 502  : 
; 503  : 			if ( type == ITEMGET(13,0) ||
; 504  : 				 type == ITEMGET(13,1) ||
; 505  : 				 type == ITEMGET(13,2) ||
; 506  : 				 type == ITEMGET(13,8) ||
; 507  : 				 type == ITEMGET(13,9) ||
; 508  : 				 type == ITEMGET(13,12) ||
; 509  : 				 type == ITEMGET(13,13) )

  00283	81 fb 00 1a 00
	00		 cmp	 ebx, 6656		; 00001a00H
  00289	74 30		 je	 SHORT $LN1@SilverMeda
  0028b	81 fb 01 1a 00
	00		 cmp	 ebx, 6657		; 00001a01H
  00291	74 28		 je	 SHORT $LN1@SilverMeda
  00293	81 fb 02 1a 00
	00		 cmp	 ebx, 6658		; 00001a02H
  00299	74 20		 je	 SHORT $LN1@SilverMeda
  0029b	81 fb 08 1a 00
	00		 cmp	 ebx, 6664		; 00001a08H
  002a1	74 18		 je	 SHORT $LN1@SilverMeda
  002a3	81 fb 09 1a 00
	00		 cmp	 ebx, 6665		; 00001a09H
  002a9	74 10		 je	 SHORT $LN1@SilverMeda
  002ab	81 fb 0c 1a 00
	00		 cmp	 ebx, 6668		; 00001a0cH
  002b1	74 08		 je	 SHORT $LN1@SilverMeda
  002b3	81 fb 0d 1a 00
	00		 cmp	 ebx, 6669		; 00001a0dH
  002b9	75 02		 jne	 SHORT $LN2@SilverMeda
$LN1@SilverMeda:

; 510  : 			{
; 511  : 				level = 0;

  002bb	33 ff		 xor	 edi, edi
$LN2@SilverMeda:

; 512  : 			}
; 513  : 
; 514  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 515  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  002bd	8b 06		 mov	 eax, DWORD PTR [esi]
  002bf	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002c5	51		 push	 ecx
  002c6	51		 push	 ecx
  002c7	50		 push	 eax
  002c8	52		 push	 edx
  002c9	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  002cf	52		 push	 edx
  002d0	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  002d6	52		 push	 edx
  002d7	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _x$[ebp]
  002dd	51		 push	 ecx
  002de	8b 8d 0c ff ff
	ff		 mov	 ecx, DWORD PTR _y$[ebp]
  002e4	57		 push	 edi
  002e5	53		 push	 ebx
  002e6	51		 push	 ecx
  002e7	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  002ee	52		 push	 edx
  002ef	51		 push	 ecx
  002f0	50		 push	 eax
  002f1	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 516  : 
; 517  : 			PMSG_SERVERCMD ServerCmd;
; 518  : 
; 519  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  002f6	6a 07		 push	 7
  002f8	6a 40		 push	 64			; 00000040H
  002fa	8d 95 14 ff ff
	ff		 lea	 edx, DWORD PTR _ServerCmd$215322[ebp]
  00300	68 f3 00 00 00	 push	 243			; 000000f3H
  00305	52		 push	 edx
  00306	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 520  : 			ServerCmd.CmdType = 2;
; 521  : 			ServerCmd.X = x;

  0030b	8a 85 10 ff ff
	ff		 mov	 al, BYTE PTR _x$[ebp]

; 522  : 			ServerCmd.Y = y;

  00311	8a 8d 0c ff ff
	ff		 mov	 cl, BYTE PTR _y$[ebp]
  00317	83 c4 44	 add	 esp, 68			; 00000044H

; 523  : 
; 524  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0031a	6a 07		 push	 7
  0031c	8d 95 14 ff ff
	ff		 lea	 edx, DWORD PTR _ServerCmd$215322[ebp]
  00322	52		 push	 edx
  00323	56		 push	 esi
  00324	c6 85 18 ff ff
	ff 02		 mov	 BYTE PTR _ServerCmd$215322[ebp+4], 2
  0032b	88 85 19 ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215322[ebp+5], al
  00331	88 8d 1a ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215322[ebp+6], cl
  00337	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 525  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0033c	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0033e	6a 07		 push	 7
  00340	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215322[ebp]
  00346	50		 push	 eax
  00347	51		 push	 ecx
  00348	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0034d	83 c4 18	 add	 esp, 24			; 00000018H

; 526  : 
; 527  : 			CItem EventItem;

  00350	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215326[ebp]
  00356	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 528  : 
; 529  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  0035b	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00361	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00367	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  0036d	6a 03		 push	 3
  0036f	6a 00		 push	 0
  00371	68 ff 00 00 00	 push	 255			; 000000ffH
  00376	6a 00		 push	 0
  00378	6a 00		 push	 0
  0037a	6a 01		 push	 1
  0037c	6a 00		 push	 0
  0037e	52		 push	 edx
  0037f	50		 push	 eax
  00380	51		 push	 ecx
  00381	53		 push	 ebx
  00382	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215326[ebp]
  00388	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 530  : 
; 531  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Silver Medal] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 532  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 533  : 				type, level, Option1, Option2, Option3);

  0038d	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00393	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00399	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  0039f	52		 push	 edx
  003a0	50		 push	 eax
  003a1	51		 push	 ecx
  003a2	57		 push	 edi
  003a3	53		 push	 ebx
  003a4	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215326[ebp]
  003aa	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  003af	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  003b6	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  003bd	50		 push	 eax
  003be	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  003c5	52		 push	 edx
  003c6	50		 push	 eax
  003c7	51		 push	 ecx
  003c8	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  003cb	52		 push	 edx
  003cc	83 c6 6c	 add	 esi, 108		; 0000006cH
  003cf	56		 push	 esi
  003d0	68 00 00 00 00	 push	 OFFSET ??_C@_0GI@IEKACMEE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLSi@
  003d5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003db	83 c4 30	 add	 esp, 48			; 00000030H
  003de	5f		 pop	 edi
  003df	5b		 pop	 ebx
  003e0	5e		 pop	 esi

; 542  : }

  003e1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003e4	33 cd		 xor	 ecx, ebp
  003e6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  003eb	8b e5		 mov	 esp, ebp
  003ed	5d		 pop	 ebp
  003ee	c3		 ret	 0
$LN11@SilverMeda:

; 534  : 
; 535  : 			return;
; 536  : 		}
; 537  : 	}
; 538  : 
; 539  : 	x = lpObj->X;
; 540  : 	y = lpObj->Y;
; 541  : 	MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  003ef	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  003f6	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  003fd	50		 push	 eax
  003fe	51		 push	 ecx
  003ff	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00406	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  0040c	68 a0 86 01 00	 push	 100000			; 000186a0H
  00411	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00417	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN14@SilverMeda:

; 542  : }

  0041c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0041f	33 cd		 xor	 ecx, ebp
  00421	5e		 pop	 esi
  00422	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00427	8b e5		 mov	 esp, ebp
  00429	5d		 pop	 ebp
  0042a	c3		 ret	 0
?SilverMedalOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; SilverMedalOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; HeartOfLoveOpenEven
EXTRN	?gLanguage@@3HA:DWORD				; gLanguage
EXTRN	?g_ItemDropRateForgHeartOfLove@@3HA:DWORD	; g_ItemDropRateForgHeartOfLove
EXTRN	?HeartOfLoveItemBag@@3PAVCItemBag@@A:DWORD	; HeartOfLoveItemBag
;	COMDAT ??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Heart Of Love] : (%d)(X:%d/Y:%d)'
	DB	' Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_DropItemNum$ = -248					; size = 4
_y$ = -244						; size = 4
_x$ = -240						; size = 4
_ServerCmd$215363 = -236				; size = 7
_Option2$ = -228					; size = 4
_level$ = -224						; size = 4
_Option3$ = -220					; size = 4
_EventItem$215367 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; HeartOfLoveOpenEven, COMDAT

; 548  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f8 00 00
	00		 sub	 esp, 248		; 000000f8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 549  : 	float dur;
; 550  : 	int type;
; 551  : 	int level;
; 552  : 	int x;
; 553  : 	int y;
; 554  : 	int Option1=0;
; 555  : 	int Option2=0;
; 556  : 	int Option3=0;
; 557  : 	int DropItemNum;
; 558  : 
; 559  : 	if ( !HeartOfLoveItemBag )

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  00018	56		 push	 esi
  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	c7 85 24 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 0
  00026	85 c0		 test	 eax, eax
  00028	0f 84 08 04 00
	00		 je	 $LN16@HeartOfLov

; 560  : 		return;
; 561  : 
; 562  : 	if ( HeartOfLoveItemBag->GetBagCount() > 0 )

  0002e	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  00035	0f 8e ce 03 00
	00		 jle	 $LN13@HeartOfLov

; 563  : 	{
; 564  : 		if ( (rand()%20) < g_ItemDropRateForgHeartOfLove )

  0003b	e8 00 00 00 00	 call	 _rand
  00040	99		 cdq
  00041	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00046	f7 f9		 idiv	 ecx
  00048	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForgHeartOfLove@@3HA ; g_ItemDropRateForgHeartOfLove
  0004e	0f 8d b5 03 00
	00		 jge	 $LN13@HeartOfLov

; 565  : 		{
; 566  : 			DropItemNum = rand()%HeartOfLoveItemBag->GetBagCount();

  00054	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  0005a	53		 push	 ebx
  0005b	57		 push	 edi
  0005c	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  00062	e8 00 00 00 00	 call	 _rand
  00067	99		 cdq
  00068	f7 ff		 idiv	 edi

; 567  : 			dur=0;
; 568  : 			x = lpObj->X;
; 569  : 			y = lpObj->Y;
; 570  : 
; 571  : 			if ( gLanguage == 0 )

  0006a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  00071	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00078	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  0007f	89 8d 0c ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 572  : 			{
; 573  : 				level = HeartOfLoveItemBag->GetLevel(DropItemNum) + rand()%2;

  00085	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  0008b	89 85 10 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  00091	8b fa		 mov	 edi, edx
  00093	89 bd 08 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], edi
  00099	57		 push	 edi
  0009a	75 23		 jne	 SHORT $LN12@HeartOfLov
  0009c	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  000a1	0f b6 d8	 movzx	 ebx, al
  000a4	e8 00 00 00 00	 call	 _rand
  000a9	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000ae	79 05		 jns	 SHORT $LN25@HeartOfLov
  000b0	48		 dec	 eax
  000b1	83 c8 fe	 or	 eax, -2			; fffffffeH
  000b4	40		 inc	 eax
$LN25@HeartOfLov:
  000b5	03 c3		 add	 eax, ebx
  000b7	89 85 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax

; 574  : 			}
; 575  : 			else

  000bd	eb 1d		 jmp	 SHORT $LN11@HeartOfLov
$LN12@HeartOfLov:

; 576  : 			{
; 577  : 				level = HeartOfLoveItemBag->GetLevel(DropItemNum) + rand()%5;

  000bf	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  000c4	0f b6 d8	 movzx	 ebx, al
  000c7	e8 00 00 00 00	 call	 _rand
  000cc	99		 cdq
  000cd	b9 05 00 00 00	 mov	 ecx, 5
  000d2	f7 f9		 idiv	 ecx
  000d4	03 d3		 add	 edx, ebx
  000d6	89 95 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], edx
$LN11@HeartOfLov:

; 578  : 			}
; 579  : 
; 580  : 			type = ItemGetNumberMake(HeartOfLoveItemBag->GetType(DropItemNum), HeartOfLoveItemBag->GetIndex(DropItemNum));

  000dc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  000e2	57		 push	 edi
  000e3	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000e8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  000ee	0f b6 d0	 movzx	 edx, al
  000f1	52		 push	 edx
  000f2	57		 push	 edi
  000f3	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000f8	0f b6 c0	 movzx	 eax, al
  000fb	50		 push	 eax
  000fc	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00101	83 c4 08	 add	 esp, 8
  00104	8b f8		 mov	 edi, eax

; 581  : 			Option1 = rand()%2;

  00106	e8 00 00 00 00	 call	 _rand
  0010b	8b d8		 mov	 ebx, eax
  0010d	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  00113	79 05		 jns	 SHORT $LN26@HeartOfLov
  00115	4b		 dec	 ebx
  00116	83 cb fe	 or	 ebx, -2			; fffffffeH
  00119	43		 inc	 ebx
$LN26@HeartOfLov:

; 582  : 			Option2 = rand()%2;

  0011a	e8 00 00 00 00	 call	 _rand
  0011f	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00124	79 05		 jns	 SHORT $LN27@HeartOfLov
  00126	48		 dec	 eax
  00127	83 c8 fe	 or	 eax, -2			; fffffffeH
  0012a	40		 inc	 eax
$LN27@HeartOfLov:
  0012b	89 85 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 583  : 
; 584  : 			if ( !Option2 || !Option1 )

  00131	74 06		 je	 SHORT $LN9@HeartOfLov
  00133	33 c9		 xor	 ecx, ecx
  00135	3b d9		 cmp	 ebx, ecx
  00137	75 33		 jne	 SHORT $LN23@HeartOfLov
$LN9@HeartOfLov:

; 585  : 			{
; 586  : 				if ( (rand()%5) <1 )

  00139	e8 00 00 00 00	 call	 _rand
  0013e	99		 cdq
  0013f	b9 05 00 00 00	 mov	 ecx, 5
  00144	f7 f9		 idiv	 ecx
  00146	83 fa 01	 cmp	 edx, 1
  00149	7d 0c		 jge	 SHORT $LN8@HeartOfLov

; 587  : 					Option3 = 3;

  0014b	c7 85 24 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 588  : 				else

  00155	eb 13		 jmp	 SHORT $LN28@HeartOfLov
$LN8@HeartOfLov:

; 589  : 					Option3 = rand()%3;

  00157	e8 00 00 00 00	 call	 _rand
  0015c	99		 cdq
  0015d	b9 03 00 00 00	 mov	 ecx, 3
  00162	f7 f9		 idiv	 ecx
  00164	89 95 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN28@HeartOfLov:
  0016a	33 c9		 xor	 ecx, ecx
$LN23@HeartOfLov:

; 590  : 			}
; 591  : 
; 592  : 			if ( type == ITEMGET(12,15) ||
; 593  : 				 type == ITEMGET(14,13) ||
; 594  : 				 type == ITEMGET(14,14) ||
; 595  : 				 type == ITEMGET(14,14) ||
; 596  : 				 type == ITEMGET(14,16)	||
; 597  : 				 type == ITEMGET(14,22)	||
; 598  : 				 type == ITEMGET(14,31)	||
; 599  : 				 type == ITEMGET(14,41)	||
; 600  : 				 type == ITEMGET(14,42)	||
; 601  : 				 type == ITEMGET(14,180)||
; 602  : 				 type == ITEMGET(14,181)||
; 603  : 				 type == ITEMGET(14,182)||
; 604  : 				 type == ITEMGET(14,183)||
; 605  : 				 type == ITEMGET(14,184)||
; 606  : 				 type == ITEMGET(14,185)||
; 607  : 				 type == ITEMGET(14,186)||
; 608  : 				 type == ITEMGET(14,187)||
; 609  : 				 type == ITEMGET(14,190)||
; 610  : 				 type == ITEMGET(14,43) ||
; 611  : 				 type == ITEMGET(14,44) )

  0016c	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  00172	0f 84 98 00 00
	00		 je	 $LN5@HeartOfLov
  00178	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  0017e	0f 84 8c 00 00
	00		 je	 $LN5@HeartOfLov
  00184	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  0018a	0f 84 80 00 00
	00		 je	 $LN5@HeartOfLov
  00190	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  00196	74 78		 je	 SHORT $LN5@HeartOfLov
  00198	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  0019e	74 70		 je	 SHORT $LN5@HeartOfLov
  001a0	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  001a6	74 68		 je	 SHORT $LN5@HeartOfLov
  001a8	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  001ae	74 60		 je	 SHORT $LN5@HeartOfLov
  001b0	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  001b6	74 58		 je	 SHORT $LN5@HeartOfLov
  001b8	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  001be	74 50		 je	 SHORT $LN5@HeartOfLov
  001c0	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  001c6	74 48		 je	 SHORT $LN5@HeartOfLov
  001c8	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  001ce	74 40		 je	 SHORT $LN5@HeartOfLov
  001d0	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  001d6	74 38		 je	 SHORT $LN5@HeartOfLov
  001d8	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  001de	74 30		 je	 SHORT $LN5@HeartOfLov
  001e0	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  001e6	74 28		 je	 SHORT $LN5@HeartOfLov
  001e8	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  001ee	74 20		 je	 SHORT $LN5@HeartOfLov
  001f0	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  001f6	74 18		 je	 SHORT $LN5@HeartOfLov
  001f8	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  001fe	74 10		 je	 SHORT $LN5@HeartOfLov
  00200	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  00206	74 08		 je	 SHORT $LN5@HeartOfLov
  00208	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  0020e	75 14		 jne	 SHORT $LN24@HeartOfLov
$LN5@HeartOfLov:

; 612  : 			{
; 613  : 				Option1 = 0;

  00210	33 db		 xor	 ebx, ebx

; 614  : 				Option2 = 0;

  00212	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 615  : 				Option3 = 0;

  00218	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 616  : 				level = 0;

  0021e	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN24@HeartOfLov:

; 617  : 			}
; 618  : 
; 619  : 			if ( type == ITEMGET(12,30)	||
; 620  : 				 type == ITEMGET(12,31)	||
; 621  : 				 type == ITEMGET(12,136)||
; 622  : 				 type == ITEMGET(12,137)||
; 623  : 				 type == ITEMGET(12,138)||
; 624  : 				 type == ITEMGET(12,139)||
; 625  : 				 type == ITEMGET(12,140)||
; 626  : 				 type == ITEMGET(12,141)||
; 627  : 				 type == ITEMGET(12,142)||
; 628  : 				 type == ITEMGET(12,143))

  00224	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  0022a	74 48		 je	 SHORT $LN3@HeartOfLov
  0022c	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  00232	74 40		 je	 SHORT $LN3@HeartOfLov
  00234	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  0023a	74 38		 je	 SHORT $LN3@HeartOfLov
  0023c	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  00242	74 30		 je	 SHORT $LN3@HeartOfLov
  00244	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  0024a	74 28		 je	 SHORT $LN3@HeartOfLov
  0024c	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  00252	74 20		 je	 SHORT $LN3@HeartOfLov
  00254	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  0025a	74 18		 je	 SHORT $LN3@HeartOfLov
  0025c	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  00262	74 10		 je	 SHORT $LN3@HeartOfLov
  00264	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  0026a	74 08		 je	 SHORT $LN3@HeartOfLov
  0026c	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  00272	75 2b		 jne	 SHORT $LN4@HeartOfLov
$LN3@HeartOfLov:

; 629  : 			{
; 630  : 				Option1 = 0;
; 631  : 				Option2 = 0;
; 632  : 				Option3 = 0;
; 633  : 				level = HeartOfLoveItemBag->GetLevel(DropItemNum);

  00274	8b 95 08 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  0027a	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx
  00280	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00286	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HeartOfLoveItemBag@@3PAVCItemBag@@A ; HeartOfLoveItemBag
  0028c	52		 push	 edx
  0028d	33 db		 xor	 ebx, ebx
  0028f	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00294	0f b6 c0	 movzx	 eax, al
  00297	89 85 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax
  0029d	33 c9		 xor	 ecx, ecx
$LN4@HeartOfLov:

; 634  : 			}
; 635  : 
; 636  : 			if ( type == ITEMGET(13,0) ||
; 637  : 				 type == ITEMGET(13,1) ||
; 638  : 				 type == ITEMGET(13,2) ||
; 639  : 				 type == ITEMGET(13,8) ||
; 640  : 				 type == ITEMGET(13,9) ||
; 641  : 				 type == ITEMGET(13,12) ||
; 642  : 				 type == ITEMGET(13,13) )

  0029f	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  002a5	74 30		 je	 SHORT $LN1@HeartOfLov
  002a7	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  002ad	74 28		 je	 SHORT $LN1@HeartOfLov
  002af	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  002b5	74 20		 je	 SHORT $LN1@HeartOfLov
  002b7	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  002bd	74 18		 je	 SHORT $LN1@HeartOfLov
  002bf	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  002c5	74 10		 je	 SHORT $LN1@HeartOfLov
  002c7	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  002cd	74 08		 je	 SHORT $LN1@HeartOfLov
  002cf	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  002d5	75 06		 jne	 SHORT $LN2@HeartOfLov
$LN1@HeartOfLov:

; 643  : 			{
; 644  : 				level = 0;

  002d7	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN2@HeartOfLov:

; 645  : 			}
; 646  : 
; 647  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 648  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  002dd	8b 06		 mov	 eax, DWORD PTR [esi]
  002df	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002e5	51		 push	 ecx
  002e6	51		 push	 ecx
  002e7	50		 push	 eax
  002e8	52		 push	 edx
  002e9	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  002ef	52		 push	 edx
  002f0	8b 95 0c ff ff
	ff		 mov	 edx, DWORD PTR _y$[ebp]
  002f6	53		 push	 ebx
  002f7	51		 push	 ecx
  002f8	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  002fe	51		 push	 ecx
  002ff	8b 8d 10 ff ff
	ff		 mov	 ecx, DWORD PTR _x$[ebp]
  00305	57		 push	 edi
  00306	52		 push	 edx
  00307	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  0030e	51		 push	 ecx
  0030f	52		 push	 edx
  00310	50		 push	 eax
  00311	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 649  : 
; 650  : 			PMSG_SERVERCMD ServerCmd;
; 651  : 
; 652  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  00316	6a 07		 push	 7
  00318	6a 40		 push	 64			; 00000040H
  0031a	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215363[ebp]
  00320	68 f3 00 00 00	 push	 243			; 000000f3H
  00325	50		 push	 eax
  00326	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 653  : 			ServerCmd.CmdType = 0;
; 654  : 			ServerCmd.X = x;

  0032b	8a 8d 10 ff ff
	ff		 mov	 cl, BYTE PTR _x$[ebp]

; 655  : 			ServerCmd.Y = y;

  00331	8a 95 0c ff ff
	ff		 mov	 dl, BYTE PTR _y$[ebp]
  00337	83 c4 44	 add	 esp, 68			; 00000044H

; 656  : 
; 657  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0033a	6a 07		 push	 7
  0033c	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215363[ebp]
  00342	50		 push	 eax
  00343	56		 push	 esi
  00344	c6 85 18 ff ff
	ff 00		 mov	 BYTE PTR _ServerCmd$215363[ebp+4], 0
  0034b	88 8d 19 ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215363[ebp+5], cl
  00351	88 95 1a ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215363[ebp+6], dl
  00357	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 658  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0035c	8b 16		 mov	 edx, DWORD PTR [esi]
  0035e	6a 07		 push	 7
  00360	8d 8d 14 ff ff
	ff		 lea	 ecx, DWORD PTR _ServerCmd$215363[ebp]
  00366	51		 push	 ecx
  00367	52		 push	 edx
  00368	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0036d	83 c4 18	 add	 esp, 24			; 00000018H

; 659  : 
; 660  : 			CItem EventItem;

  00370	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215367[ebp]
  00376	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 661  : 
; 662  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  0037b	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option3$[ebp]
  00381	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option2$[ebp]
  00387	6a 03		 push	 3
  00389	6a 00		 push	 0
  0038b	68 ff 00 00 00	 push	 255			; 000000ffH
  00390	6a 00		 push	 0
  00392	6a 00		 push	 0
  00394	6a 01		 push	 1
  00396	6a 00		 push	 0
  00398	50		 push	 eax
  00399	51		 push	 ecx
  0039a	53		 push	 ebx
  0039b	57		 push	 edi
  0039c	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215367[ebp]
  003a2	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 663  : 
; 664  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Heart Of Love] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 665  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 666  : 				type, level, Option1, Option2, Option3);

  003a7	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  003ad	8b 85 1c ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  003b3	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  003b9	52		 push	 edx
  003ba	50		 push	 eax
  003bb	53		 push	 ebx
  003bc	51		 push	 ecx
  003bd	57		 push	 edi
  003be	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215367[ebp]
  003c4	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  003c9	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  003d0	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  003d7	50		 push	 eax
  003d8	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  003df	52		 push	 edx
  003e0	50		 push	 eax
  003e1	51		 push	 ecx
  003e2	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  003e5	52		 push	 edx
  003e6	83 c6 6c	 add	 esi, 108		; 0000006cH
  003e9	56		 push	 esi
  003ea	68 00 00 00 00	 push	 OFFSET ??_C@_0GJ@EIOJOOBH@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLHe@
  003ef	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003f5	83 c4 30	 add	 esp, 48			; 00000030H
  003f8	5f		 pop	 edi
  003f9	5b		 pop	 ebx
  003fa	5e		 pop	 esi

; 675  : }

  003fb	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003fe	33 cd		 xor	 ecx, ebp
  00400	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00405	8b e5		 mov	 esp, ebp
  00407	5d		 pop	 ebp
  00408	c3		 ret	 0
$LN13@HeartOfLov:

; 667  : 
; 668  : 			return;
; 669  : 		}
; 670  : 	}
; 671  : 
; 672  : 	x = lpObj->X;
; 673  : 	y = lpObj->Y;
; 674  : 	MapC[lpObj->MapNumber].MoneyItemDrop(1004, x, y);

  00409	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00410	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  00417	50		 push	 eax
  00418	51		 push	 ecx
  00419	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00420	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00426	68 ec 03 00 00	 push	 1004			; 000003ecH
  0042b	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00431	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN16@HeartOfLov:

; 675  : }

  00436	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00439	33 cd		 xor	 ecx, ebp
  0043b	5e		 pop	 esi
  0043c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00441	8b e5		 mov	 esp, ebp
  00443	5d		 pop	 ebp
  00444	c3		 ret	 0
?HeartOfLoveOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; HeartOfLoveOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; FireCrackerOpenEven
EXTRN	?g_ItemDropRateForgFireCracker@@3HA:DWORD	; g_ItemDropRateForgFireCracker
EXTRN	?FireCrackerItemBag@@3PAVCItemBag@@A:DWORD	; FireCrackerItemBag
EXTRN	?gOnlyFireCrackerEffectUse@@3HA:DWORD		; gOnlyFireCrackerEffectUse
;	COMDAT ??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Fire Cracker] : (%d)(X:%d/Y:%d) '
	DB	'Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_y$ = -252						; size = 4
_x$ = -248						; size = 4
_ServerCmd$215409 = -244				; size = 7
_DropItemNum$ = -236					; size = 4
_ServerCmd$215382 = -236				; size = 7
_Option2$ = -228					; size = 4
_level$ = -224						; size = 4
_Option3$ = -220					; size = 4
_EventItem$215413 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; FireCrackerOpenEven, COMDAT

; 678  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec fc 00 00
	00		 sub	 esp, 252		; 000000fcH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 679  : 	float dur;
; 680  : 	int type;
; 681  : 	int level;
; 682  : 	int x;
; 683  : 	int y;
; 684  : 	int Option1=0;
; 685  : 	int Option2=0;
; 686  : 	int Option3=0;
; 687  : 	int DropItemNum;
; 688  : 
; 689  : 	if ( gOnlyFireCrackerEffectUse )

  00013	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gOnlyFireCrackerEffectUse@@3HA, 0 ; gOnlyFireCrackerEffectUse
  0001a	56		 push	 esi
  0001b	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001e	c7 85 24 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 0
  00028	74 66		 je	 SHORT $LN16@FireCracke

; 690  : 	{
; 691  : 		PMSG_SERVERCMD ServerCmd;
; 692  : 
; 693  : 		PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  0002a	6a 07		 push	 7
  0002c	6a 40		 push	 64			; 00000040H
  0002e	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215382[ebp]
  00034	68 f3 00 00 00	 push	 243			; 000000f3H
  00039	50		 push	 eax
  0003a	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 694  : 		ServerCmd.CmdType = 0;
; 695  : 		ServerCmd.X = lpObj->X;

  0003f	8a 8e 44 01 00
	00		 mov	 cl, BYTE PTR [esi+324]

; 696  : 		ServerCmd.Y = lpObj->Y;

  00045	8a 96 46 01 00
	00		 mov	 dl, BYTE PTR [esi+326]

; 697  : 
; 698  : 		MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0004b	6a 07		 push	 7
  0004d	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215382[ebp]
  00053	50		 push	 eax
  00054	56		 push	 esi
  00055	c6 85 18 ff ff
	ff 00		 mov	 BYTE PTR _ServerCmd$215382[ebp+4], 0
  0005c	88 8d 19 ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215382[ebp+5], cl
  00062	88 95 1a ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215382[ebp+6], dl
  00068	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 699  : 		DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0006d	8b 16		 mov	 edx, DWORD PTR [esi]
  0006f	6a 07		 push	 7
  00071	8d 8d 14 ff ff
	ff		 lea	 ecx, DWORD PTR _ServerCmd$215382[ebp]
  00077	51		 push	 ecx
  00078	52		 push	 edx
  00079	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0007e	83 c4 28	 add	 esp, 40			; 00000028H
  00081	5e		 pop	 esi

; 820  : }

  00082	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00085	33 cd		 xor	 ecx, ebp
  00087	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0008c	8b e5		 mov	 esp, ebp
  0008e	5d		 pop	 ebp
  0008f	c3		 ret	 0
$LN16@FireCracke:

; 700  : 
; 701  : 		return;
; 702  : 	}
; 703  : 
; 704  : 	if ( !FireCrackerItemBag )

  00090	a1 00 00 00 00	 mov	 eax, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  00095	85 c0		 test	 eax, eax
  00097	0f 84 08 04 00
	00		 je	 $LN17@FireCracke

; 705  : 		return;
; 706  : 
; 707  : 	if ( FireCrackerItemBag->GetBagCount() > 0 )

  0009d	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  000a4	0f 8e ce 03 00
	00		 jle	 $LN13@FireCracke

; 708  : 	{
; 709  : 		if ( (rand()%10) < g_ItemDropRateForgFireCracker )

  000aa	e8 00 00 00 00	 call	 _rand
  000af	99		 cdq
  000b0	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  000b5	f7 f9		 idiv	 ecx
  000b7	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_ItemDropRateForgFireCracker@@3HA ; g_ItemDropRateForgFireCracker
  000bd	0f 8d b5 03 00
	00		 jge	 $LN13@FireCracke

; 710  : 		{
; 711  : 			DropItemNum = rand()%FireCrackerItemBag->GetBagCount();

  000c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  000c9	53		 push	 ebx
  000ca	57		 push	 edi
  000cb	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  000d1	e8 00 00 00 00	 call	 _rand
  000d6	99		 cdq
  000d7	f7 ff		 idiv	 edi

; 712  : 			dur=0;
; 713  : 			x = lpObj->X;
; 714  : 			y = lpObj->Y;
; 715  : 			
; 716  : 			if ( gLanguage == 0 )

  000d9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gLanguage@@3HA, 0 ; gLanguage
  000e0	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  000e7	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  000ee	89 8d 04 ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 717  : 			{
; 718  : 				level = FireCrackerItemBag->GetLevel(DropItemNum) + rand()%2;

  000f4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  000fa	89 85 08 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  00100	8b fa		 mov	 edi, edx
  00102	89 bd 14 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], edi
  00108	57		 push	 edi
  00109	75 23		 jne	 SHORT $LN12@FireCracke
  0010b	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00110	0f b6 d8	 movzx	 ebx, al
  00113	e8 00 00 00 00	 call	 _rand
  00118	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0011d	79 05		 jns	 SHORT $LN26@FireCracke
  0011f	48		 dec	 eax
  00120	83 c8 fe	 or	 eax, -2			; fffffffeH
  00123	40		 inc	 eax
$LN26@FireCracke:
  00124	03 c3		 add	 eax, ebx
  00126	89 85 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax

; 719  : 			}
; 720  : 			else

  0012c	eb 1d		 jmp	 SHORT $LN11@FireCracke
$LN12@FireCracke:

; 721  : 			{
; 722  : 				level = FireCrackerItemBag->GetLevel(DropItemNum) + rand()%5;

  0012e	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00133	0f b6 d8	 movzx	 ebx, al
  00136	e8 00 00 00 00	 call	 _rand
  0013b	99		 cdq
  0013c	b9 05 00 00 00	 mov	 ecx, 5
  00141	f7 f9		 idiv	 ecx
  00143	03 d3		 add	 edx, ebx
  00145	89 95 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], edx
$LN11@FireCracke:

; 723  : 			}
; 724  : 			
; 725  : 			type = ItemGetNumberMake(FireCrackerItemBag->GetType(DropItemNum), FireCrackerItemBag->GetIndex(DropItemNum));

  0014b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  00151	57		 push	 edi
  00152	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  00157	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  0015d	0f b6 d0	 movzx	 edx, al
  00160	52		 push	 edx
  00161	57		 push	 edi
  00162	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  00167	0f b6 c0	 movzx	 eax, al
  0016a	50		 push	 eax
  0016b	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00170	83 c4 08	 add	 esp, 8
  00173	8b f8		 mov	 edi, eax

; 726  : 			Option1 = rand()%2;

  00175	e8 00 00 00 00	 call	 _rand
  0017a	8b d8		 mov	 ebx, eax
  0017c	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  00182	79 05		 jns	 SHORT $LN27@FireCracke
  00184	4b		 dec	 ebx
  00185	83 cb fe	 or	 ebx, -2			; fffffffeH
  00188	43		 inc	 ebx
$LN27@FireCracke:

; 727  : 			Option2 = rand()%2;

  00189	e8 00 00 00 00	 call	 _rand
  0018e	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00193	79 05		 jns	 SHORT $LN28@FireCracke
  00195	48		 dec	 eax
  00196	83 c8 fe	 or	 eax, -2			; fffffffeH
  00199	40		 inc	 eax
$LN28@FireCracke:
  0019a	89 85 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 728  : 
; 729  : 			if ( !Option2 || !Option1 )

  001a0	74 06		 je	 SHORT $LN9@FireCracke
  001a2	33 c9		 xor	 ecx, ecx
  001a4	3b d9		 cmp	 ebx, ecx
  001a6	75 33		 jne	 SHORT $LN24@FireCracke
$LN9@FireCracke:

; 730  : 			{
; 731  : 				if ( (rand()%5) <1 )

  001a8	e8 00 00 00 00	 call	 _rand
  001ad	99		 cdq
  001ae	b9 05 00 00 00	 mov	 ecx, 5
  001b3	f7 f9		 idiv	 ecx
  001b5	83 fa 01	 cmp	 edx, 1
  001b8	7d 0c		 jge	 SHORT $LN8@FireCracke

; 732  : 					Option3 = 3;

  001ba	c7 85 24 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 733  : 				else

  001c4	eb 13		 jmp	 SHORT $LN29@FireCracke
$LN8@FireCracke:

; 734  : 					Option3 = rand()%3;

  001c6	e8 00 00 00 00	 call	 _rand
  001cb	99		 cdq
  001cc	b9 03 00 00 00	 mov	 ecx, 3
  001d1	f7 f9		 idiv	 ecx
  001d3	89 95 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN29@FireCracke:
  001d9	33 c9		 xor	 ecx, ecx
$LN24@FireCracke:

; 735  : 			}
; 736  : 
; 737  : 			if ( type == ITEMGET(12,15) ||
; 738  : 				 type == ITEMGET(14,13) ||
; 739  : 				 type == ITEMGET(14,14) ||
; 740  : 				 type == ITEMGET(14,14) ||
; 741  : 				 type == ITEMGET(14,16)	||
; 742  : 				 type == ITEMGET(14,22)	||
; 743  : 				 type == ITEMGET(14,31)	||
; 744  : 				 type == ITEMGET(14,41)	||
; 745  : 				 type == ITEMGET(14,42)	||
; 746  : 				 type == ITEMGET(14,180)||
; 747  : 				 type == ITEMGET(14,181)||
; 748  : 				 type == ITEMGET(14,182)||
; 749  : 				 type == ITEMGET(14,183)||
; 750  : 				 type == ITEMGET(14,184)||
; 751  : 				 type == ITEMGET(14,185)||
; 752  : 				 type == ITEMGET(14,186)||
; 753  : 				 type == ITEMGET(14,187)||
; 754  : 				 type == ITEMGET(14,190)||
; 755  : 				 type == ITEMGET(14,43) ||
; 756  : 				 type == ITEMGET(14,44) )

  001db	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  001e1	0f 84 98 00 00
	00		 je	 $LN5@FireCracke
  001e7	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  001ed	0f 84 8c 00 00
	00		 je	 $LN5@FireCracke
  001f3	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  001f9	0f 84 80 00 00
	00		 je	 $LN5@FireCracke
  001ff	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  00205	74 78		 je	 SHORT $LN5@FireCracke
  00207	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  0020d	74 70		 je	 SHORT $LN5@FireCracke
  0020f	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  00215	74 68		 je	 SHORT $LN5@FireCracke
  00217	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  0021d	74 60		 je	 SHORT $LN5@FireCracke
  0021f	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  00225	74 58		 je	 SHORT $LN5@FireCracke
  00227	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  0022d	74 50		 je	 SHORT $LN5@FireCracke
  0022f	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  00235	74 48		 je	 SHORT $LN5@FireCracke
  00237	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  0023d	74 40		 je	 SHORT $LN5@FireCracke
  0023f	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  00245	74 38		 je	 SHORT $LN5@FireCracke
  00247	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  0024d	74 30		 je	 SHORT $LN5@FireCracke
  0024f	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  00255	74 28		 je	 SHORT $LN5@FireCracke
  00257	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  0025d	74 20		 je	 SHORT $LN5@FireCracke
  0025f	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  00265	74 18		 je	 SHORT $LN5@FireCracke
  00267	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  0026d	74 10		 je	 SHORT $LN5@FireCracke
  0026f	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  00275	74 08		 je	 SHORT $LN5@FireCracke
  00277	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  0027d	75 14		 jne	 SHORT $LN25@FireCracke
$LN5@FireCracke:

; 757  : 			{
; 758  : 				Option1 = 0;

  0027f	33 db		 xor	 ebx, ebx

; 759  : 				Option2 = 0;

  00281	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 760  : 				Option3 = 0;

  00287	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 761  : 				level = 0;

  0028d	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN25@FireCracke:

; 762  : 			}
; 763  : 
; 764  : 			if ( type == ITEMGET(12,30)	||
; 765  : 				 type == ITEMGET(12,31)	||
; 766  : 				 type == ITEMGET(12,136)||
; 767  : 				 type == ITEMGET(12,137)||
; 768  : 				 type == ITEMGET(12,138)||
; 769  : 				 type == ITEMGET(12,139)||
; 770  : 				 type == ITEMGET(12,140)||
; 771  : 				 type == ITEMGET(12,141)||
; 772  : 				 type == ITEMGET(12,142)||
; 773  : 				 type == ITEMGET(12,143))

  00293	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  00299	74 48		 je	 SHORT $LN3@FireCracke
  0029b	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  002a1	74 40		 je	 SHORT $LN3@FireCracke
  002a3	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  002a9	74 38		 je	 SHORT $LN3@FireCracke
  002ab	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  002b1	74 30		 je	 SHORT $LN3@FireCracke
  002b3	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  002b9	74 28		 je	 SHORT $LN3@FireCracke
  002bb	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  002c1	74 20		 je	 SHORT $LN3@FireCracke
  002c3	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  002c9	74 18		 je	 SHORT $LN3@FireCracke
  002cb	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  002d1	74 10		 je	 SHORT $LN3@FireCracke
  002d3	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  002d9	74 08		 je	 SHORT $LN3@FireCracke
  002db	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  002e1	75 2b		 jne	 SHORT $LN4@FireCracke
$LN3@FireCracke:

; 774  : 			{
; 775  : 				Option1 = 0;
; 776  : 				Option2 = 0;
; 777  : 				Option3 = 0;
; 778  : 				level = FireCrackerItemBag->GetLevel(DropItemNum);

  002e3	8b 95 14 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  002e9	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx
  002ef	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  002f5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FireCrackerItemBag@@3PAVCItemBag@@A ; FireCrackerItemBag
  002fb	52		 push	 edx
  002fc	33 db		 xor	 ebx, ebx
  002fe	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00303	0f b6 c0	 movzx	 eax, al
  00306	89 85 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax
  0030c	33 c9		 xor	 ecx, ecx
$LN4@FireCracke:

; 779  : 			}
; 780  : 
; 781  : 			if ( type == ITEMGET(13,0) ||
; 782  : 				 type == ITEMGET(13,1) ||
; 783  : 				 type == ITEMGET(13,2) ||
; 784  : 				 type == ITEMGET(13,8) ||
; 785  : 				 type == ITEMGET(13,9) ||
; 786  : 				 type == ITEMGET(13,12) ||
; 787  : 				 type == ITEMGET(13,13) )

  0030e	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  00314	74 30		 je	 SHORT $LN1@FireCracke
  00316	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  0031c	74 28		 je	 SHORT $LN1@FireCracke
  0031e	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  00324	74 20		 je	 SHORT $LN1@FireCracke
  00326	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  0032c	74 18		 je	 SHORT $LN1@FireCracke
  0032e	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  00334	74 10		 je	 SHORT $LN1@FireCracke
  00336	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  0033c	74 08		 je	 SHORT $LN1@FireCracke
  0033e	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  00344	75 06		 jne	 SHORT $LN2@FireCracke
$LN1@FireCracke:

; 788  : 			{
; 789  : 				level = 0;

  00346	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN2@FireCracke:

; 790  : 			}
; 791  : 
; 792  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 793  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0034c	8b 06		 mov	 eax, DWORD PTR [esi]
  0034e	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00354	51		 push	 ecx
  00355	51		 push	 ecx
  00356	50		 push	 eax
  00357	52		 push	 edx
  00358	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  0035e	52		 push	 edx
  0035f	8b 95 04 ff ff
	ff		 mov	 edx, DWORD PTR _y$[ebp]
  00365	53		 push	 ebx
  00366	51		 push	 ecx
  00367	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  0036d	51		 push	 ecx
  0036e	8b 8d 08 ff ff
	ff		 mov	 ecx, DWORD PTR _x$[ebp]
  00374	57		 push	 edi
  00375	52		 push	 edx
  00376	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  0037d	51		 push	 ecx
  0037e	52		 push	 edx
  0037f	50		 push	 eax
  00380	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 794  : 
; 795  : 			PMSG_SERVERCMD ServerCmd;
; 796  : 
; 797  : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  00385	6a 07		 push	 7
  00387	6a 40		 push	 64			; 00000040H
  00389	8d 85 0c ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215409[ebp]
  0038f	68 f3 00 00 00	 push	 243			; 000000f3H
  00394	50		 push	 eax
  00395	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 798  : 			ServerCmd.CmdType = 0;
; 799  : 			ServerCmd.X = x;

  0039a	8a 8d 08 ff ff
	ff		 mov	 cl, BYTE PTR _x$[ebp]

; 800  : 			ServerCmd.Y = y;

  003a0	8a 95 04 ff ff
	ff		 mov	 dl, BYTE PTR _y$[ebp]
  003a6	83 c4 44	 add	 esp, 68			; 00000044H

; 801  : 
; 802  : 			MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  003a9	6a 07		 push	 7
  003ab	8d 85 0c ff ff
	ff		 lea	 eax, DWORD PTR _ServerCmd$215409[ebp]
  003b1	50		 push	 eax
  003b2	56		 push	 esi
  003b3	c6 85 10 ff ff
	ff 00		 mov	 BYTE PTR _ServerCmd$215409[ebp+4], 0
  003ba	88 8d 11 ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215409[ebp+5], cl
  003c0	88 95 12 ff ff
	ff		 mov	 BYTE PTR _ServerCmd$215409[ebp+6], dl
  003c6	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 803  : 			DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  003cb	8b 16		 mov	 edx, DWORD PTR [esi]
  003cd	6a 07		 push	 7
  003cf	8d 8d 0c ff ff
	ff		 lea	 ecx, DWORD PTR _ServerCmd$215409[ebp]
  003d5	51		 push	 ecx
  003d6	52		 push	 edx
  003d7	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  003dc	83 c4 18	 add	 esp, 24			; 00000018H

; 804  : 
; 805  : 			CItem EventItem;

  003df	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215413[ebp]
  003e5	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 806  : 
; 807  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  003ea	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option3$[ebp]
  003f0	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option2$[ebp]
  003f6	6a 03		 push	 3
  003f8	6a 00		 push	 0
  003fa	68 ff 00 00 00	 push	 255			; 000000ffH
  003ff	6a 00		 push	 0
  00401	6a 00		 push	 0
  00403	6a 01		 push	 1
  00405	6a 00		 push	 0
  00407	50		 push	 eax
  00408	51		 push	 ecx
  00409	53		 push	 ebx
  0040a	57		 push	 edi
  0040b	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215413[ebp]
  00411	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 808  : 
; 809  : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Fire Cracker] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 810  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 811  : 				type, level, Option1, Option2, Option3);

  00416	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  0041c	8b 85 1c ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00422	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  00428	52		 push	 edx
  00429	50		 push	 eax
  0042a	53		 push	 ebx
  0042b	51		 push	 ecx
  0042c	57		 push	 edi
  0042d	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215413[ebp]
  00433	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00438	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  0043f	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00446	50		 push	 eax
  00447	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  0044e	52		 push	 edx
  0044f	50		 push	 eax
  00450	51		 push	 ecx
  00451	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00454	52		 push	 edx
  00455	83 c6 6c	 add	 esi, 108		; 0000006cH
  00458	56		 push	 esi
  00459	68 00 00 00 00	 push	 OFFSET ??_C@_0GI@FPPGAGOE@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLFi@
  0045e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00464	83 c4 30	 add	 esp, 48			; 00000030H
  00467	5f		 pop	 edi
  00468	5b		 pop	 ebx
  00469	5e		 pop	 esi

; 820  : }

  0046a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0046d	33 cd		 xor	 ecx, ebp
  0046f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00474	8b e5		 mov	 esp, ebp
  00476	5d		 pop	 ebp
  00477	c3		 ret	 0
$LN13@FireCracke:

; 812  : 
; 813  : 			return;
; 814  : 		}
; 815  : 	}
; 816  : 
; 817  : 	x = lpObj->X;
; 818  : 	y = lpObj->Y;
; 819  : 	MapC[lpObj->MapNumber].MoneyItemDrop(2004, x, y);

  00478	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  0047f	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  00486	50		 push	 eax
  00487	51		 push	 ecx
  00488	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0048f	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00495	68 d4 07 00 00	 push	 2004			; 000007d4H
  0049a	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  004a0	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN17@FireCracke:

; 820  : }

  004a5	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004a8	33 cd		 xor	 ecx, ebp
  004aa	5e		 pop	 esi
  004ab	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004b0	8b e5		 mov	 esp, ebp
  004b2	5d		 pop	 ebp
  004b3	c3		 ret	 0
?FireCrackerOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; FireCrackerOpenEven
_TEXT	ENDS
PUBLIC	?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; StarOfXMasOpenEven
EXTRN	?DropItem@CItemBagZt@@QAEHH@Z:PROC		; CItemBagZt::DropItem
EXTRN	?StarOfXMasItemBag@@3PAVCItemBagZt@@A:DWORD	; StarOfXMasItemBag
; Function compile flags: /Ogtp
;	COMDAT ?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC	; StarOfXMasOpenEven, COMDAT

; 823  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 824  : 	StarOfXMasItemBag->DropItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?StarOfXMasItemBag@@3PAVCItemBagZt@@A ; StarOfXMasItemBag
  0000f	e8 00 00 00 00	 call	 ?DropItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropItem

; 825  : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?StarOfXMasOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; StarOfXMasOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RingEventItemBoxOpen
EXTRN	?RingEventItemBag@@3PAVCItemBag@@A:DWORD	; RingEventItemBag
;	COMDAT ??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@ DB '['
	DB	'%s][%s][Ring Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d '
	DB	'op1:%d op2:%d op3:%d', 00H			; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_y$ = -240						; size = 4
_x$ = -236						; size = 4
_DropItemNum$ = -232					; size = 4
_Option1$ = -228					; size = 4
_Option3$ = -224					; size = 4
_level$ = -220						; size = 4
_EventItem$215455 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; RingEventItemBoxOpen, COMDAT

; 828  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 829  : 	float dur;
; 830  : 	int type;
; 831  : 	int level;
; 832  : 	int x;
; 833  : 	int y;
; 834  : 	int Option1=0;
; 835  : 	int Option2=0;
; 836  : 	int Option3=0;
; 837  : 	int DropItemNum;
; 838  : 
; 839  : 	if ( RingEventItemBag->GetBagCount() > 0 )

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  00018	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  0001f	56		 push	 esi
  00020	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00023	0f 8e 53 03 00
	00		 jle	 $LN15@RingEventI

; 840  : 	{
; 841  : 		if ( (rand()%10) < 9 )

  00029	e8 00 00 00 00	 call	 _rand
  0002e	99		 cdq
  0002f	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  00034	f7 f9		 idiv	 ecx
  00036	83 fa 09	 cmp	 edx, 9
  00039	0f 8d 3d 03 00
	00		 jge	 $LN15@RingEventI

; 842  : 		{
; 843  : 			DropItemNum = rand()%RingEventItemBag->GetBagCount();

  0003f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  00045	53		 push	 ebx
  00046	57		 push	 edi
  00047	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  0004d	e8 00 00 00 00	 call	 _rand
  00052	99		 cdq
  00053	f7 ff		 idiv	 edi

; 844  : 			dur=0;
; 845  : 			x = lpObj->X;

  00055	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]

; 846  : 			y = lpObj->Y;

  0005c	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00063	89 85 14 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  00069	89 8d 10 ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx
  0006f	8b fa		 mov	 edi, edx
  00071	89 bd 18 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], edi

; 847  : 
; 848  : 			int rnd = rand() % 100;

  00077	e8 00 00 00 00	 call	 _rand
  0007c	99		 cdq
  0007d	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00082	f7 f9		 idiv	 ecx

; 849  : 
; 850  : 			if ( rnd < 5 )

  00084	83 fa 05	 cmp	 edx, 5
  00087	7d 0c		 jge	 SHORT $LN14@RingEventI

; 851  : 				level = 9;

  00089	c7 85 24 ff ff
	ff 09 00 00 00	 mov	 DWORD PTR _level$[ebp], 9
  00093	eb 22		 jmp	 SHORT $LN10@RingEventI
$LN14@RingEventI:

; 852  : 			else if ( rnd < 20 )

  00095	83 fa 14	 cmp	 edx, 20			; 00000014H
  00098	7d 0c		 jge	 SHORT $LN12@RingEventI

; 853  : 				level = 8;

  0009a	c7 85 24 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR _level$[ebp], 8
  000a4	eb 11		 jmp	 SHORT $LN10@RingEventI
$LN12@RingEventI:

; 854  : 			else if ( rnd < 50 )

  000a6	33 c0		 xor	 eax, eax
  000a8	83 fa 32	 cmp	 edx, 50			; 00000032H
  000ab	0f 9c c0	 setl	 al
  000ae	83 c0 06	 add	 eax, 6
  000b1	89 85 24 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax
$LN10@RingEventI:

; 855  : 				level = 7;
; 856  : 			else 
; 857  : 				level = 6;
; 858  : 
; 859  : 			type = ItemGetNumberMake(RingEventItemBag->GetType(DropItemNum), RingEventItemBag->GetIndex(DropItemNum));

  000b7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  000bd	57		 push	 edi
  000be	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000c3	0f b6 c8	 movzx	 ecx, al
  000c6	51		 push	 ecx
  000c7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  000cd	57		 push	 edi
  000ce	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000d3	0f b6 d0	 movzx	 edx, al
  000d6	52		 push	 edx
  000d7	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000dc	83 c4 08	 add	 esp, 8
  000df	8b f8		 mov	 edi, eax

; 860  : 			Option1 = 1;

  000e1	c7 85 1c ff ff
	ff 01 00 00 00	 mov	 DWORD PTR _Option1$[ebp], 1

; 861  : 			Option2 = rand()%2;

  000eb	e8 00 00 00 00	 call	 _rand
  000f0	8b d8		 mov	 ebx, eax
  000f2	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  000f8	79 05		 jns	 SHORT $LN25@RingEventI
  000fa	4b		 dec	 ebx
  000fb	83 cb fe	 or	 ebx, -2			; fffffffeH
  000fe	43		 inc	 ebx
$LN25@RingEventI:

; 862  : 
; 863  : 			if ( (rand()%5) <1 )

  000ff	e8 00 00 00 00	 call	 _rand
  00104	99		 cdq
  00105	b9 05 00 00 00	 mov	 ecx, 5
  0010a	f7 f9		 idiv	 ecx
  0010c	83 fa 01	 cmp	 edx, 1
  0010f	7d 0c		 jge	 SHORT $LN8@RingEventI

; 864  : 				Option3 = 3;

  00111	c7 85 20 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 865  : 			else

  0011b	eb 13		 jmp	 SHORT $LN7@RingEventI
$LN8@RingEventI:

; 866  : 				Option3 = rand()%3;

  0011d	e8 00 00 00 00	 call	 _rand
  00122	99		 cdq
  00123	b9 03 00 00 00	 mov	 ecx, 3
  00128	f7 f9		 idiv	 ecx
  0012a	89 95 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@RingEventI:

; 867  : 
; 868  : 			if ( type == ITEMGET(12,15) ||
; 869  : 				 type == ITEMGET(14,13) ||
; 870  : 				 type == ITEMGET(14,14) ||
; 871  : 				 type == ITEMGET(14,14) ||
; 872  : 				 type == ITEMGET(14,16)	||
; 873  : 				 type == ITEMGET(14,22)	||
; 874  : 				 type == ITEMGET(14,31)	||
; 875  : 				 type == ITEMGET(14,41)	||
; 876  : 				 type == ITEMGET(14,42)	||
; 877  : 				 type == ITEMGET(14,180)||
; 878  : 				 type == ITEMGET(14,181)||
; 879  : 				 type == ITEMGET(14,182)||
; 880  : 				 type == ITEMGET(14,183)||
; 881  : 				 type == ITEMGET(14,184)||
; 882  : 				 type == ITEMGET(14,185)||
; 883  : 				 type == ITEMGET(14,186)||
; 884  : 				 type == ITEMGET(14,187)||
; 885  : 				 type == ITEMGET(14,190)||
; 886  : 				 type == ITEMGET(14,43) ||
; 887  : 				 type == ITEMGET(14,44) )

  00130	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  00136	0f 84 98 00 00
	00		 je	 $LN5@RingEventI
  0013c	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  00142	0f 84 8c 00 00
	00		 je	 $LN5@RingEventI
  00148	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  0014e	0f 84 80 00 00
	00		 je	 $LN5@RingEventI
  00154	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  0015a	74 78		 je	 SHORT $LN5@RingEventI
  0015c	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  00162	74 70		 je	 SHORT $LN5@RingEventI
  00164	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  0016a	74 68		 je	 SHORT $LN5@RingEventI
  0016c	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  00172	74 60		 je	 SHORT $LN5@RingEventI
  00174	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  0017a	74 58		 je	 SHORT $LN5@RingEventI
  0017c	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  00182	74 50		 je	 SHORT $LN5@RingEventI
  00184	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  0018a	74 48		 je	 SHORT $LN5@RingEventI
  0018c	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  00192	74 40		 je	 SHORT $LN5@RingEventI
  00194	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  0019a	74 38		 je	 SHORT $LN5@RingEventI
  0019c	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  001a2	74 30		 je	 SHORT $LN5@RingEventI
  001a4	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  001aa	74 28		 je	 SHORT $LN5@RingEventI
  001ac	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  001b2	74 20		 je	 SHORT $LN5@RingEventI
  001b4	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  001ba	74 18		 je	 SHORT $LN5@RingEventI
  001bc	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  001c2	74 10		 je	 SHORT $LN5@RingEventI
  001c4	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  001ca	74 08		 je	 SHORT $LN5@RingEventI
  001cc	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  001d2	75 18		 jne	 SHORT $LN24@RingEventI
$LN5@RingEventI:

; 888  : 			{
; 889  : 				Option1 = 0;

  001d4	33 c9		 xor	 ecx, ecx
  001d6	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 890  : 				Option2 = 0;

  001dc	33 db		 xor	 ebx, ebx

; 891  : 				Option3 = 0;

  001de	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 892  : 				level = 0;

  001e4	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
  001ea	eb 02		 jmp	 SHORT $LN6@RingEventI
$LN24@RingEventI:
  001ec	33 c9		 xor	 ecx, ecx
$LN6@RingEventI:

; 893  : 			}
; 894  : 
; 895  : 			if ( type == ITEMGET(12,30)	||
; 896  : 				 type == ITEMGET(12,31)	||
; 897  : 				 type == ITEMGET(12,136)||
; 898  : 				 type == ITEMGET(12,137)||
; 899  : 				 type == ITEMGET(12,138)||
; 900  : 				 type == ITEMGET(12,139)||
; 901  : 				 type == ITEMGET(12,140)||
; 902  : 				 type == ITEMGET(12,141)||
; 903  : 				 type == ITEMGET(12,142)||
; 904  : 				 type == ITEMGET(12,143))

  001ee	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  001f4	74 48		 je	 SHORT $LN3@RingEventI
  001f6	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  001fc	74 40		 je	 SHORT $LN3@RingEventI
  001fe	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  00204	74 38		 je	 SHORT $LN3@RingEventI
  00206	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  0020c	74 30		 je	 SHORT $LN3@RingEventI
  0020e	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  00214	74 28		 je	 SHORT $LN3@RingEventI
  00216	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  0021c	74 20		 je	 SHORT $LN3@RingEventI
  0021e	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  00224	74 18		 je	 SHORT $LN3@RingEventI
  00226	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  0022c	74 10		 je	 SHORT $LN3@RingEventI
  0022e	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  00234	74 08		 je	 SHORT $LN3@RingEventI
  00236	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  0023c	75 2b		 jne	 SHORT $LN4@RingEventI
$LN3@RingEventI:

; 905  : 			{
; 906  : 				Option1 = 0;
; 907  : 				Option2 = 0;
; 908  : 				Option3 = 0;
; 909  : 				level = RingEventItemBag->GetLevel(DropItemNum);

  0023e	8b 95 18 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00244	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  0024a	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00250	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingEventItemBag@@3PAVCItemBag@@A ; RingEventItemBag
  00256	52		 push	 edx
  00257	33 db		 xor	 ebx, ebx
  00259	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0025e	0f b6 c0	 movzx	 eax, al
  00261	89 85 24 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax
  00267	33 c9		 xor	 ecx, ecx
$LN4@RingEventI:

; 910  : 			}
; 911  : 
; 912  : 			if ( type == ITEMGET(13,0) ||
; 913  : 				 type == ITEMGET(13,1) ||
; 914  : 				 type == ITEMGET(13,2) ||
; 915  : 				 type == ITEMGET(13,8) ||
; 916  : 				 type == ITEMGET(13,9) ||
; 917  : 				 type == ITEMGET(13,12) ||
; 918  : 				 type == ITEMGET(13,13) )

  00269	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  0026f	74 30		 je	 SHORT $LN1@RingEventI
  00271	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  00277	74 28		 je	 SHORT $LN1@RingEventI
  00279	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  0027f	74 20		 je	 SHORT $LN1@RingEventI
  00281	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  00287	74 18		 je	 SHORT $LN1@RingEventI
  00289	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  0028f	74 10		 je	 SHORT $LN1@RingEventI
  00291	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  00297	74 08		 je	 SHORT $LN1@RingEventI
  00299	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  0029f	75 06		 jne	 SHORT $LN2@RingEventI
$LN1@RingEventI:

; 919  : 			{
; 920  : 				level = 0;

  002a1	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN2@RingEventI:

; 921  : 			}
; 922  : 
; 923  : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 924  : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  002a7	8b 06		 mov	 eax, DWORD PTR [esi]
  002a9	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002af	51		 push	 ecx
  002b0	51		 push	 ecx
  002b1	50		 push	 eax
  002b2	52		 push	 edx
  002b3	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  002b9	53		 push	 ebx
  002ba	52		 push	 edx
  002bb	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _y$[ebp]
  002c1	51		 push	 ecx
  002c2	8b 8d 24 ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  002c8	51		 push	 ecx
  002c9	8b 8d 14 ff ff
	ff		 mov	 ecx, DWORD PTR _x$[ebp]
  002cf	57		 push	 edi
  002d0	52		 push	 edx
  002d1	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  002d8	51		 push	 ecx
  002d9	52		 push	 edx
  002da	50		 push	 eax
  002db	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  002e0	83 c4 34	 add	 esp, 52			; 00000034H

; 925  : 
; 926  : 			CItem EventItem;

  002e3	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215455[ebp]
  002e9	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 927  : 
; 928  : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  002ee	8b 85 20 ff ff
	ff		 mov	 eax, DWORD PTR _Option3$[ebp]
  002f4	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  002fa	6a 03		 push	 3
  002fc	6a 00		 push	 0
  002fe	68 ff 00 00 00	 push	 255			; 000000ffH
  00303	6a 00		 push	 0
  00305	6a 00		 push	 0
  00307	6a 01		 push	 1
  00309	6a 00		 push	 0
  0030b	50		 push	 eax
  0030c	53		 push	 ebx
  0030d	51		 push	 ecx
  0030e	57		 push	 edi
  0030f	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215455[ebp]
  00315	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 929  : 
; 930  : 			LogAddTD("[%s][%s][Ring Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d op1:%d op2:%d op3:%d",
; 931  : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 932  : 				type, level, Option1, Option2, Option3);

  0031a	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00320	8b 85 1c ff ff
	ff		 mov	 eax, DWORD PTR _Option1$[ebp]
  00326	8b 8d 24 ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  0032c	52		 push	 edx
  0032d	53		 push	 ebx
  0032e	50		 push	 eax
  0032f	51		 push	 ecx
  00330	57		 push	 edi
  00331	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215455[ebp]
  00337	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  0033c	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  00343	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0034a	50		 push	 eax
  0034b	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00352	52		 push	 edx
  00353	50		 push	 eax
  00354	51		 push	 ecx
  00355	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00358	52		 push	 edx
  00359	83 c6 6c	 add	 esi, 108		; 0000006cH
  0035c	56		 push	 esi
  0035d	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@OFINJAAJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRing?5Event?$FN?$CI?$CFd?0?$CFd?0?$CFd?$CJ?5I@
  00362	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00368	83 c4 30	 add	 esp, 48			; 00000030H
  0036b	5f		 pop	 edi
  0036c	5b		 pop	 ebx
  0036d	5e		 pop	 esi

; 941  : }

  0036e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00371	33 cd		 xor	 ecx, ebp
  00373	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00378	8b e5		 mov	 esp, ebp
  0037a	5d		 pop	 ebp
  0037b	c3		 ret	 0
$LN15@RingEventI:

; 933  : 
; 934  : 			return;
; 935  : 		}
; 936  : 	}
; 937  : 
; 938  : 	x = lpObj->X;
; 939  : 	y = lpObj->Y;
; 940  : 	MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  0037c	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00383	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  0038a	50		 push	 eax
  0038b	51		 push	 ecx
  0038c	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00393	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00399	68 a0 86 01 00	 push	 100000			; 000186a0H
  0039e	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  003a4	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 941  : }

  003a9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003ac	33 cd		 xor	 ecx, ebp
  003ae	5e		 pop	 esi
  003af	e8 00 00 00 00	 call	 @__security_check_cookie@4
  003b4	8b e5		 mov	 esp, ebp
  003b6	5d		 pop	 ebp
  003b7	c3		 ret	 0
?RingEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; RingEventItemBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; FriendShipItemBoxOpen
EXTRN	?FriendShipItemBag@@3PAVCItemBag@@A:DWORD	; FriendShipItemBag
;	COMDAT ??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@ DB '['
	DB	'%s][%s][FriendShip Ring Event](%d,%d,%d) ItemDrop : Item:%s %'
	DB	'd Level:%d op1:%d op2:%d op3:%d', 00H	; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_y$ = -240						; size = 4
_x$ = -236						; size = 4
_DropItemNum$ = -232					; size = 4
_level$ = -228						; size = 4
_Option1$ = -224					; size = 4
_Option3$ = -220					; size = 4
_EventItem$215487 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; FriendShipItemBoxOpen, COMDAT

; 944  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 945  : 	float dur;
; 946  : 	int type;
; 947  : 	int level;
; 948  : 	int x;
; 949  : 	int y;
; 950  : 	int Option1=0;
; 951  : 	int Option2=0;
; 952  : 	int Option3=0;
; 953  : 	int DropItemNum;
; 954  : 
; 955  : 	if ( FriendShipItemBag->GetBagCount() > 0 ) //season 3.0 fixed

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  00018	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  0001f	56		 push	 esi
  00020	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00023	0f 8e 0c 03 00
	00		 jle	 $LN9@FriendShip

; 956  : 	{
; 957  : 		if ( true )
; 958  : 		{
; 959  : 			DropItemNum = rand()%FriendShipItemBag->GetBagCount(); //season 3.0 fixed

  00029	53		 push	 ebx
  0002a	57		 push	 edi
  0002b	8b b8 88 03 00
	00		 mov	 edi, DWORD PTR [eax+904]
  00031	e8 00 00 00 00	 call	 _rand
  00036	99		 cdq
  00037	f7 ff		 idiv	 edi

; 960  : 			dur=0;
; 961  : 			x = lpObj->X;
; 962  : 			y = lpObj->Y;

  00039	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00040	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00047	89 8d 10 ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 963  : 
; 964  : 			level = FriendShipItemBag->GetLevel(DropItemNum) + rand()%3; //season 3.0 fixed and changed

  0004d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  00053	89 85 14 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  00059	8b fa		 mov	 edi, edx
  0005b	57		 push	 edi
  0005c	89 bd 18 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], edi
  00062	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00067	0f b6 d8	 movzx	 ebx, al
  0006a	e8 00 00 00 00	 call	 _rand
  0006f	99		 cdq
  00070	b9 03 00 00 00	 mov	 ecx, 3
  00075	f7 f9		 idiv	 ecx

; 965  : 
; 966  : 			type = ItemGetNumberMake(FriendShipItemBag->GetType(DropItemNum), FriendShipItemBag->GetIndex(DropItemNum)); //season 3.0 fixed

  00077	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  0007d	57		 push	 edi
  0007e	03 d3		 add	 edx, ebx
  00080	89 95 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], edx
  00086	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  0008b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  00091	0f b6 d0	 movzx	 edx, al
  00094	52		 push	 edx
  00095	57		 push	 edi
  00096	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  0009b	0f b6 c0	 movzx	 eax, al
  0009e	50		 push	 eax
  0009f	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000a4	83 c4 08	 add	 esp, 8
  000a7	8b f8		 mov	 edi, eax

; 967  : 			Option1 = 1;

  000a9	c7 85 20 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR _Option1$[ebp], 1

; 968  : 			Option2 = rand()%2;

  000b3	e8 00 00 00 00	 call	 _rand
  000b8	8b d8		 mov	 ebx, eax
  000ba	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  000c0	79 05		 jns	 SHORT $LN19@FriendShip
  000c2	4b		 dec	 ebx
  000c3	83 cb fe	 or	 ebx, -2			; fffffffeH
  000c6	43		 inc	 ebx
$LN19@FriendShip:

; 969  : 
; 970  : 			if ( (rand()%5) <1 )

  000c7	e8 00 00 00 00	 call	 _rand
  000cc	99		 cdq
  000cd	b9 05 00 00 00	 mov	 ecx, 5
  000d2	f7 f9		 idiv	 ecx
  000d4	83 fa 01	 cmp	 edx, 1
  000d7	7d 0c		 jge	 SHORT $LN8@FriendShip

; 971  : 				Option3 = 3;

  000d9	c7 85 24 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 972  : 			else

  000e3	eb 13		 jmp	 SHORT $LN7@FriendShip
$LN8@FriendShip:

; 973  : 				Option3 = rand()%3;

  000e5	e8 00 00 00 00	 call	 _rand
  000ea	99		 cdq
  000eb	b9 03 00 00 00	 mov	 ecx, 3
  000f0	f7 f9		 idiv	 ecx
  000f2	89 95 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN7@FriendShip:

; 974  : 
; 975  : 			if ( type == ITEMGET(12,15) ||
; 976  : 				 type == ITEMGET(14,13) ||
; 977  : 				 type == ITEMGET(14,14) ||
; 978  : 				 type == ITEMGET(14,14) ||
; 979  : 				 type == ITEMGET(14,16)	||
; 980  : 				 type == ITEMGET(14,22)	||
; 981  : 				 type == ITEMGET(14,31)	||
; 982  : 				 type == ITEMGET(14,41)	||
; 983  : 				 type == ITEMGET(14,42)	||
; 984  : 				 type == ITEMGET(14,180)||
; 985  : 				 type == ITEMGET(14,181)||
; 986  : 				 type == ITEMGET(14,182)||
; 987  : 				 type == ITEMGET(14,183)||
; 988  : 				 type == ITEMGET(14,184)||
; 989  : 				 type == ITEMGET(14,185)||
; 990  : 				 type == ITEMGET(14,186)||
; 991  : 				 type == ITEMGET(14,187)||
; 992  : 				 type == ITEMGET(14,190)||
; 993  : 				 type == ITEMGET(14,43) ||
; 994  : 				 type == ITEMGET(14,44) )

  000f8	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  000fe	0f 84 98 00 00
	00		 je	 $LN5@FriendShip
  00104	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  0010a	0f 84 8c 00 00
	00		 je	 $LN5@FriendShip
  00110	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  00116	0f 84 80 00 00
	00		 je	 $LN5@FriendShip
  0011c	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  00122	74 78		 je	 SHORT $LN5@FriendShip
  00124	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  0012a	74 70		 je	 SHORT $LN5@FriendShip
  0012c	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  00132	74 68		 je	 SHORT $LN5@FriendShip
  00134	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  0013a	74 60		 je	 SHORT $LN5@FriendShip
  0013c	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  00142	74 58		 je	 SHORT $LN5@FriendShip
  00144	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  0014a	74 50		 je	 SHORT $LN5@FriendShip
  0014c	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  00152	74 48		 je	 SHORT $LN5@FriendShip
  00154	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  0015a	74 40		 je	 SHORT $LN5@FriendShip
  0015c	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  00162	74 38		 je	 SHORT $LN5@FriendShip
  00164	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  0016a	74 30		 je	 SHORT $LN5@FriendShip
  0016c	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  00172	74 28		 je	 SHORT $LN5@FriendShip
  00174	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  0017a	74 20		 je	 SHORT $LN5@FriendShip
  0017c	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  00182	74 18		 je	 SHORT $LN5@FriendShip
  00184	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  0018a	74 10		 je	 SHORT $LN5@FriendShip
  0018c	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  00192	74 08		 je	 SHORT $LN5@FriendShip
  00194	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  0019a	75 18		 jne	 SHORT $LN18@FriendShip
$LN5@FriendShip:

; 995  : 			{
; 996  : 				Option1 = 0;

  0019c	33 c9		 xor	 ecx, ecx
  0019e	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 997  : 				Option2 = 0;

  001a4	33 db		 xor	 ebx, ebx

; 998  : 				Option3 = 0;

  001a6	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 999  : 				level = 0;

  001ac	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
  001b2	eb 02		 jmp	 SHORT $LN6@FriendShip
$LN18@FriendShip:
  001b4	33 c9		 xor	 ecx, ecx
$LN6@FriendShip:

; 1000 : 			}
; 1001 : 
; 1002 : 			if ( type == ITEMGET(12,30)	||
; 1003 : 				 type == ITEMGET(12,31)	||
; 1004 : 				 type == ITEMGET(12,136)||
; 1005 : 				 type == ITEMGET(12,137)||
; 1006 : 				 type == ITEMGET(12,138)||
; 1007 : 				 type == ITEMGET(12,139)||
; 1008 : 				 type == ITEMGET(12,140)||
; 1009 : 				 type == ITEMGET(12,141)||
; 1010 : 				 type == ITEMGET(12,142)||
; 1011 : 				 type == ITEMGET(12,143))

  001b6	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  001bc	74 48		 je	 SHORT $LN3@FriendShip
  001be	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  001c4	74 40		 je	 SHORT $LN3@FriendShip
  001c6	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  001cc	74 38		 je	 SHORT $LN3@FriendShip
  001ce	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  001d4	74 30		 je	 SHORT $LN3@FriendShip
  001d6	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  001dc	74 28		 je	 SHORT $LN3@FriendShip
  001de	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  001e4	74 20		 je	 SHORT $LN3@FriendShip
  001e6	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  001ec	74 18		 je	 SHORT $LN3@FriendShip
  001ee	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  001f4	74 10		 je	 SHORT $LN3@FriendShip
  001f6	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  001fc	74 08		 je	 SHORT $LN3@FriendShip
  001fe	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  00204	75 2b		 jne	 SHORT $LN4@FriendShip
$LN3@FriendShip:

; 1012 : 			{
; 1013 : 				Option1 = 0;
; 1014 : 				Option2 = 0;
; 1015 : 				Option3 = 0;
; 1016 : 				level = FriendShipItemBag->GetLevel(DropItemNum);

  00206	8b 95 18 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  0020c	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  00212	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00218	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?FriendShipItemBag@@3PAVCItemBag@@A ; FriendShipItemBag
  0021e	52		 push	 edx
  0021f	33 db		 xor	 ebx, ebx
  00221	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00226	0f b6 c0	 movzx	 eax, al
  00229	89 85 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax
  0022f	33 c9		 xor	 ecx, ecx
$LN4@FriendShip:

; 1017 : 			}
; 1018 : 
; 1019 : 			if ( type == ITEMGET(13,0) ||
; 1020 : 				 type == ITEMGET(13,1) ||
; 1021 : 				 type == ITEMGET(13,2) ||
; 1022 : 				 type == ITEMGET(13,8) ||
; 1023 : 				 type == ITEMGET(13,9) ||
; 1024 : 				 type == ITEMGET(13,12) ||
; 1025 : 				 type == ITEMGET(13,13) )

  00231	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  00237	74 30		 je	 SHORT $LN1@FriendShip
  00239	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  0023f	74 28		 je	 SHORT $LN1@FriendShip
  00241	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  00247	74 20		 je	 SHORT $LN1@FriendShip
  00249	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  0024f	74 18		 je	 SHORT $LN1@FriendShip
  00251	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  00257	74 10		 je	 SHORT $LN1@FriendShip
  00259	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  0025f	74 08		 je	 SHORT $LN1@FriendShip
  00261	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  00267	75 06		 jne	 SHORT $LN2@FriendShip
$LN1@FriendShip:

; 1026 : 			{
; 1027 : 				level = 0;

  00269	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN2@FriendShip:

; 1028 : 			}
; 1029 : 
; 1030 : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0026f	8b 06		 mov	 eax, DWORD PTR [esi]
  00271	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00277	51		 push	 ecx
  00278	51		 push	 ecx
  00279	50		 push	 eax
  0027a	52		 push	 edx
  0027b	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  00281	53		 push	 ebx
  00282	52		 push	 edx
  00283	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _y$[ebp]
  00289	51		 push	 ecx
  0028a	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  00290	51		 push	 ecx
  00291	8b 8d 14 ff ff
	ff		 mov	 ecx, DWORD PTR _x$[ebp]
  00297	57		 push	 edi
  00298	52		 push	 edx
  00299	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  002a0	51		 push	 ecx
  002a1	52		 push	 edx
  002a2	50		 push	 eax
  002a3	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  002a8	83 c4 34	 add	 esp, 52			; 00000034H

; 1031 : 
; 1032 : 			CItem EventItem;

  002ab	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215487[ebp]
  002b1	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1033 : 
; 1034 : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  002b6	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option3$[ebp]
  002bc	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  002c2	6a 03		 push	 3
  002c4	6a 00		 push	 0
  002c6	68 ff 00 00 00	 push	 255			; 000000ffH
  002cb	6a 00		 push	 0
  002cd	6a 00		 push	 0
  002cf	6a 01		 push	 1
  002d1	6a 00		 push	 0
  002d3	50		 push	 eax
  002d4	53		 push	 ebx
  002d5	51		 push	 ecx
  002d6	57		 push	 edi
  002d7	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215487[ebp]
  002dd	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 1035 : 
; 1036 : 			LogAddTD("[%s][%s][FriendShip Ring Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d op1:%d op2:%d op3:%d", lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(), type, level, Option1, Option2, Option3);

  002e2	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002e8	8b 85 20 ff ff
	ff		 mov	 eax, DWORD PTR _Option1$[ebp]
  002ee	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  002f4	52		 push	 edx
  002f5	53		 push	 ebx
  002f6	50		 push	 eax
  002f7	51		 push	 ecx
  002f8	57		 push	 edi
  002f9	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215487[ebp]
  002ff	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00304	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  0030b	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00312	50		 push	 eax
  00313	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  0031a	52		 push	 edx
  0031b	50		 push	 eax
  0031c	51		 push	 ecx
  0031d	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00320	52		 push	 edx
  00321	83 c6 6c	 add	 esi, 108		; 0000006cH
  00324	56		 push	 esi
  00325	68 00 00 00 00	 push	 OFFSET ??_C@_0FO@DJNJBHEF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLFriendShip?5Ring?5Event?$FN?$CI@
  0032a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00330	83 c4 30	 add	 esp, 48			; 00000030H
  00333	5f		 pop	 edi
  00334	5b		 pop	 ebx
$LN9@FriendShip:

; 1037 : 			return;
; 1038 : 		}
; 1039 : 	}
; 1040 : }

  00335	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00338	33 cd		 xor	 ecx, ebp
  0033a	5e		 pop	 esi
  0033b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00340	8b e5		 mov	 esp, ebp
  00342	5d		 pop	 ebp
  00343	c3		 ret	 0
?FriendShipItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; FriendShipItemBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; HiddenTreasureBoxItemBoxOpen
EXTRN	?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A:BYTE	; ItemAttribute
EXTRN	?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z:PROC	; ItemIsBufExOption
EXTRN	?NewOptionRand@@YAEH@Z:PROC			; NewOptionRand
EXTRN	?GetMinLevel@CItemBagZt@@QAEEH@Z:PROC		; CItemBagZt::GetMinLevel
EXTRN	?PickItem@CItemBagZt@@QAEHAAVCItem@@AAH@Z:PROC	; CItemBagZt::PickItem
EXTRN	?HiddenTreasureBoxItemBag@@3PAVCItemBagZt@@A:DWORD ; HiddenTreasureBoxItemBag
;	COMDAT ??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Event ZenDrop : %d : (%d)('
	DB	'%d/%d)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Event ItemDrop : (%d)(%d/%'
	DB	'd) Item:(%s)%d Level:%d op1:%d op2:%d op3:%d exop:[%d,%d,%d,%'
	DB	'd,%d,%d]', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Item Pick Failed - Data Er'
	DB	'ror', 00H					; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_nItemIndex$ = -236					; size = 4
tv259 = -232						; size = 4
tv257 = -232						; size = 4
tv288 = -226						; size = 2
_objTempItem$ = -224					; size = 212
_NewOption$215555 = -12					; size = 8
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC ; HiddenTreasureBoxItemBoxOpen, COMDAT

; 1171 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec ec 00 00
	00		 sub	 esp, 236		; 000000ecH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]

; 1172 : 	CItem objTempItem;

  00017	8d 8d 20 ff ff
	ff		 lea	 ecx, DWORD PTR _objTempItem$[ebp]
  0001d	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1173 : 	int nItemIndex;
; 1174 : 
; 1175 : 	if ( HiddenTreasureBoxItemBag->PickItem(objTempItem, nItemIndex) == FALSE )

  00022	8d 85 14 ff ff
	ff		 lea	 eax, DWORD PTR _nItemIndex$[ebp]
  00028	50		 push	 eax
  00029	8d 8d 20 ff ff
	ff		 lea	 ecx, DWORD PTR _objTempItem$[ebp]
  0002f	51		 push	 ecx
  00030	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HiddenTreasureBoxItemBag@@3PAVCItemBagZt@@A ; HiddenTreasureBoxItemBag
  00036	e8 00 00 00 00	 call	 ?PickItem@CItemBagZt@@QAEHAAVCItem@@AAH@Z ; CItemBagZt::PickItem
  0003b	85 c0		 test	 eax, eax
  0003d	75 52		 jne	 SHORT $LN9@HiddenTrea

; 1176 : 	{
; 1177 : 		LogAddTD("[Hidden TreasureBox Event] [%s][%s] Item Pick Failed - Data Error",
; 1178 : 			lpObj->AccountID, lpObj->Name);

  0003f	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00042	52		 push	 edx
  00043	8d 46 6c	 lea	 eax, DWORD PTR [esi+108]
  00046	50		 push	 eax
  00047	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@IBKHHAK@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  0004c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 1179 : 
; 1180 : 		MapC[lpObj->MapNumber].MoneyItemDrop(200000, lpObj->X, lpObj->Y);

  00052	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00059	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  00060	83 c4 0c	 add	 esp, 12			; 0000000cH
  00063	51		 push	 ecx
  00064	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0006b	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00071	52		 push	 edx
  00072	68 40 0d 03 00	 push	 200000			; 00030d40H
  00077	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  0007d	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
  00082	5e		 pop	 esi

; 1229 : 	}
; 1230 : }

  00083	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00086	33 cd		 xor	 ecx, ebp
  00088	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0008d	8b e5		 mov	 esp, ebp
  0008f	5d		 pop	 ebp
  00090	c3		 ret	 0
$LN9@HiddenTrea:

; 1181 : 		return;
; 1182 : 	}
; 1183 : 
; 1184 : 	int iItemSuccessRate = HiddenTreasureBoxItemBag->GetMinLevel(nItemIndex);

  00091	8b 85 14 ff ff
	ff		 mov	 eax, DWORD PTR _nItemIndex$[ebp]
  00097	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HiddenTreasureBoxItemBag@@3PAVCItemBagZt@@A ; HiddenTreasureBoxItemBag
  0009d	57		 push	 edi
  0009e	50		 push	 eax
  0009f	e8 00 00 00 00	 call	 ?GetMinLevel@CItemBagZt@@QAEEH@Z ; CItemBagZt::GetMinLevel
  000a4	0f b6 f8	 movzx	 edi, al

; 1185 : 
; 1186 : 	if ( (rand()%100) < iItemSuccessRate )

  000a7	e8 00 00 00 00	 call	 _rand
  000ac	99		 cdq
  000ad	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000b2	f7 f9		 idiv	 ecx
  000b4	3b d7		 cmp	 edx, edi
  000b6	5f		 pop	 edi
  000b7	0f 8d 9b 01 00
	00		 jge	 $LN8@HiddenTrea

; 1187 : 	{
; 1188 : 		objTempItem.m_Level = 0;

  000bd	33 d2		 xor	 edx, edx
  000bf	66 89 95 28 ff
	ff ff		 mov	 WORD PTR _objTempItem$[ebp+8], dx

; 1189 : 
; 1190 : 		if ( objTempItem.m_Option1 )

  000c6	38 55 b4	 cmp	 BYTE PTR _objTempItem$[ebp+148], dl
  000c9	74 14		 je	 SHORT $LN7@HiddenTrea

; 1191 : 			objTempItem.m_Option1 = rand()%2;

  000cb	e8 00 00 00 00	 call	 _rand
  000d0	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000d5	79 05		 jns	 SHORT $LN12@HiddenTrea
  000d7	48		 dec	 eax
  000d8	83 c8 fe	 or	 eax, -2			; fffffffeH
  000db	40		 inc	 eax
$LN12@HiddenTrea:
  000dc	88 45 b4	 mov	 BYTE PTR _objTempItem$[ebp+148], al
$LN7@HiddenTrea:

; 1192 : 
; 1193 : 		if ( objTempItem.m_Option2 )

  000df	80 7d b5 00	 cmp	 BYTE PTR _objTempItem$[ebp+149], 0
  000e3	74 14		 je	 SHORT $LN6@HiddenTrea

; 1194 : 			objTempItem.m_Option2 = rand()%2;

  000e5	e8 00 00 00 00	 call	 _rand
  000ea	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000ef	79 05		 jns	 SHORT $LN13@HiddenTrea
  000f1	48		 dec	 eax
  000f2	83 c8 fe	 or	 eax, -2			; fffffffeH
  000f5	40		 inc	 eax
$LN13@HiddenTrea:
  000f6	88 45 b5	 mov	 BYTE PTR _objTempItem$[ebp+149], al
$LN6@HiddenTrea:

; 1195 : 
; 1196 : 		if ( objTempItem.m_Option3 )

  000f9	80 7d b6 00	 cmp	 BYTE PTR _objTempItem$[ebp+150], 0
  000fd	74 28		 je	 SHORT $LN3@HiddenTrea

; 1197 : 			if ( (rand()%5) <1 )

  000ff	e8 00 00 00 00	 call	 _rand
  00104	99		 cdq
  00105	b9 05 00 00 00	 mov	 ecx, 5
  0010a	f7 f9		 idiv	 ecx
  0010c	83 fa 01	 cmp	 edx, 1
  0010f	7d 06		 jge	 SHORT $LN4@HiddenTrea

; 1198 : 				objTempItem.m_Option3 = 3;

  00111	c6 45 b6 03	 mov	 BYTE PTR _objTempItem$[ebp+150], 3

; 1199 : 			else

  00115	eb 10		 jmp	 SHORT $LN3@HiddenTrea
$LN4@HiddenTrea:

; 1200 : 				objTempItem.m_Option3 = rand()%3;

  00117	e8 00 00 00 00	 call	 _rand
  0011c	99		 cdq
  0011d	b9 03 00 00 00	 mov	 ecx, 3
  00122	f7 f9		 idiv	 ecx
  00124	88 55 b6	 mov	 BYTE PTR _objTempItem$[ebp+150], dl
$LN3@HiddenTrea:

; 1201 : 
; 1202 : 		if ( objTempItem.m_NewOption )

  00127	80 7d b7 00	 cmp	 BYTE PTR _objTempItem$[ebp+151], 0
  0012b	74 19		 je	 SHORT $LN2@HiddenTrea

; 1203 : 		{
; 1204 : 			objTempItem.m_NewOption = NewOptionRand(objTempItem.m_Level);

  0012d	0f bf 95 28 ff
	ff ff		 movsx	 edx, WORD PTR _objTempItem$[ebp+8]
  00134	52		 push	 edx
  00135	e8 00 00 00 00	 call	 ?NewOptionRand@@YAEH@Z	; NewOptionRand
  0013a	83 c4 04	 add	 esp, 4
  0013d	88 45 b7	 mov	 BYTE PTR _objTempItem$[ebp+151], al

; 1205 : 			objTempItem.m_Option1 = 1;

  00140	66 c7 45 b4 01
	00		 mov	 WORD PTR _objTempItem$[ebp+148], 1
$LN2@HiddenTrea:

; 1206 : 			objTempItem.m_Option2 = 0;
; 1207 : 		}
; 1208 : 
; 1209 : 
; 1210 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)lpObj->X, (BYTE)lpObj->Y, objTempItem.m_Type, (BYTE)objTempItem.m_Level, (BYTE)objTempItem.m_Durability,
; 1211 : 			(BYTE)objTempItem.m_Option1, (BYTE)objTempItem.m_Option2, (BYTE)objTempItem.m_Option3, lpObj->m_Index, (BYTE)objTempItem.m_NewOption, 0);

  00146	8b 45 b7	 mov	 eax, DWORD PTR _objTempItem$[ebp+151]
  00149	d9 85 44 ff ff
	ff		 fld	 DWORD PTR _objTempItem$[ebp+36]
  0014f	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00151	d9 bd 1e ff ff
	ff		 fnstcw	 WORD PTR tv288[ebp]
  00157	8b 55 b6	 mov	 edx, DWORD PTR _objTempItem$[ebp+150]
  0015a	6a 00		 push	 0
  0015c	50		 push	 eax
  0015d	8b 45 b5	 mov	 eax, DWORD PTR _objTempItem$[ebp+149]
  00160	51		 push	 ecx
  00161	52		 push	 edx
  00162	8b 55 b4	 mov	 edx, DWORD PTR _objTempItem$[ebp+148]
  00165	50		 push	 eax
  00166	0f b7 85 1e ff
	ff ff		 movzx	 eax, WORD PTR tv288[ebp]
  0016d	0d 00 0c 00 00	 or	 eax, 3072		; 00000c00H
  00172	89 85 18 ff ff
	ff		 mov	 DWORD PTR tv259[ebp], eax
  00178	52		 push	 edx
  00179	d9 ad 18 ff ff
	ff		 fldcw	 WORD PTR tv259[ebp]
  0017f	db 9d 18 ff ff
	ff		 fistp	 DWORD PTR tv257[ebp]
  00185	8a 85 18 ff ff
	ff		 mov	 al, BYTE PTR tv257[ebp]
  0018b	0f b6 d0	 movzx	 edx, al
  0018e	8b 85 28 ff ff
	ff		 mov	 eax, DWORD PTR _objTempItem$[ebp+8]
  00194	d9 ad 1e ff ff
	ff		 fldcw	 WORD PTR tv288[ebp]
  0019a	52		 push	 edx
  0019b	0f bf 95 26 ff
	ff ff		 movsx	 edx, WORD PTR _objTempItem$[ebp+6]
  001a2	50		 push	 eax
  001a3	0f b6 86 46 01
	00 00		 movzx	 eax, BYTE PTR [esi+326]
  001aa	52		 push	 edx
  001ab	0f b6 96 44 01
	00 00		 movzx	 edx, BYTE PTR [esi+324]
  001b2	50		 push	 eax
  001b3	0f b6 86 49 01
	00 00		 movzx	 eax, BYTE PTR [esi+329]
  001ba	52		 push	 edx
  001bb	50		 push	 eax
  001bc	51		 push	 ecx
  001bd	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 1212 : 
; 1213 : 		BYTE NewOption[MAX_EXOPTION_SIZE];
; 1214 : 		ItemIsBufExOption(NewOption, &objTempItem);

  001c2	8d 8d 20 ff ff
	ff		 lea	 ecx, DWORD PTR _objTempItem$[ebp]
  001c8	51		 push	 ecx
  001c9	8d 55 f4	 lea	 edx, DWORD PTR _NewOption$215555[ebp]
  001cc	52		 push	 edx
  001cd	e8 00 00 00 00	 call	 ?ItemIsBufExOption@@YAXPAEPAVCItem@@@Z ; ItemIsBufExOption

; 1215 : 
; 1216 : 		LogAddTD("[Hidden TreasureBox Event] [%s][%s] Event ItemDrop : (%d)(%d/%d) Item:(%s)%d Level:%d op1:%d op2:%d op3:%d exop:[%d,%d,%d,%d,%d,%d]",
; 1217 : 			lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y,
; 1218 : 			ItemAttribute[objTempItem.m_Type].Name, objTempItem.m_Type,
; 1219 : 			objTempItem.m_Level, objTempItem.m_Option1, objTempItem.m_Option2,
; 1220 : 			objTempItem.m_Option3, NewOption[0], NewOption[1], NewOption[2], NewOption[3], NewOption[4], NewOption[5]);

  001d2	0f b6 4d f9	 movzx	 ecx, BYTE PTR _NewOption$215555[ebp+5]
  001d6	0f b6 55 f8	 movzx	 edx, BYTE PTR _NewOption$215555[ebp+4]
  001da	51		 push	 ecx
  001db	0f b6 4d f7	 movzx	 ecx, BYTE PTR _NewOption$215555[ebp+3]
  001df	52		 push	 edx
  001e0	0f b6 55 f6	 movzx	 edx, BYTE PTR _NewOption$215555[ebp+2]
  001e4	0f bf 85 26 ff
	ff ff		 movsx	 eax, WORD PTR _objTempItem$[ebp+6]
  001eb	51		 push	 ecx
  001ec	0f b6 4d f5	 movzx	 ecx, BYTE PTR _NewOption$215555[ebp+1]
  001f0	52		 push	 edx
  001f1	0f b6 55 f4	 movzx	 edx, BYTE PTR _NewOption$215555[ebp]
  001f5	51		 push	 ecx
  001f6	0f b6 4d b6	 movzx	 ecx, BYTE PTR _objTempItem$[ebp+150]
  001fa	52		 push	 edx
  001fb	0f b6 55 b5	 movzx	 edx, BYTE PTR _objTempItem$[ebp+149]
  001ff	51		 push	 ecx
  00200	0f b6 4d b4	 movzx	 ecx, BYTE PTR _objTempItem$[ebp+148]
  00204	52		 push	 edx
  00205	0f bf 95 28 ff
	ff ff		 movsx	 edx, WORD PTR _objTempItem$[ebp+8]
  0020c	51		 push	 ecx
  0020d	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  00214	52		 push	 edx
  00215	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  0021c	50		 push	 eax
  0021d	6b c0 70	 imul	 eax, 112		; 00000070H
  00220	05 00 00 00 00	 add	 eax, OFFSET ?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A ; ItemAttribute
  00225	50		 push	 eax
  00226	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  0022d	50		 push	 eax
  0022e	51		 push	 ecx
  0022f	52		 push	 edx
  00230	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  00233	50		 push	 eax
  00234	83 c6 6c	 add	 esi, 108		; 0000006cH
  00237	56		 push	 esi
  00238	68 00 00 00 00	 push	 OFFSET ??_C@_0IE@EJGNIEKI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  0023d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00243	81 c4 84 00 00
	00		 add	 esp, 132		; 00000084H
  00249	5e		 pop	 esi

; 1229 : 	}
; 1230 : }

  0024a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0024d	33 cd		 xor	 ecx, ebp
  0024f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00254	8b e5		 mov	 esp, ebp
  00256	5d		 pop	 ebp
  00257	c3		 ret	 0
$LN8@HiddenTrea:

; 1221 : 	}
; 1222 : 	else
; 1223 : 	{
; 1224 : 		int money = 200000;
; 1225 : 		MapC[lpObj->MapNumber].MoneyItemDrop(money, lpObj->X, lpObj->Y);

  00258	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  0025f	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  00266	51		 push	 ecx
  00267	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0026e	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00274	52		 push	 edx
  00275	68 40 0d 03 00	 push	 200000			; 00030d40H
  0027a	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00280	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 1226 : 
; 1227 : 		LogAddTD("[Hidden TreasureBox Event] [%s][%s] Event ZenDrop : %d : (%d)(%d/%d)",
; 1228 : 			lpObj->AccountID, lpObj->Name, money, lpObj->MapNumber, lpObj->X, lpObj->Y);

  00285	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  0028c	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  00293	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  0029a	50		 push	 eax
  0029b	51		 push	 ecx
  0029c	52		 push	 edx
  0029d	68 40 0d 03 00	 push	 200000			; 00030d40H
  002a2	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  002a5	50		 push	 eax
  002a6	83 c6 6c	 add	 esi, 108		; 0000006cH
  002a9	56		 push	 esi
  002aa	68 00 00 00 00	 push	 OFFSET ??_C@_0EF@GOCIBGLO@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  002af	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 1229 : 	}
; 1230 : }

  002b5	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002b8	83 c4 1c	 add	 esp, 28			; 0000001cH
  002bb	33 cd		 xor	 ecx, ebp
  002bd	5e		 pop	 esi
  002be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002c3	8b e5		 mov	 esp, ebp
  002c5	5d		 pop	 ebp
  002c6	c3		 ret	 0
?HiddenTreasureBoxItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP ; HiddenTreasureBoxItemBoxOpen
_TEXT	ENDS
PUBLIC	?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RedRibbonBoxOpen
EXTRN	?DropRedRibbonBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropRedRibbonBoxEventItem
EXTRN	?RedRibbonBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; RedRibbonBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC		; RedRibbonBoxOpen, COMDAT

; 1234 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1235 : 	RedRibbonBoxEventItemBag->DropRedRibbonBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RedRibbonBoxEventItemBag@@3PAVCItemBagZt@@A ; RedRibbonBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropRedRibbonBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropRedRibbonBoxEventItem

; 1236 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?RedRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; RedRibbonBoxOpen
_TEXT	ENDS
PUBLIC	?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; GreenRibbonBoxOpen
EXTRN	?DropGreenRibbonBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropGreenRibbonBoxEventItem
EXTRN	?GreenRibbonBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; GreenRibbonBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; GreenRibbonBoxOpen, COMDAT

; 1240 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1241 : 	GreenRibbonBoxEventItemBag->DropGreenRibbonBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GreenRibbonBoxEventItemBag@@3PAVCItemBagZt@@A ; GreenRibbonBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropGreenRibbonBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropGreenRibbonBoxEventItem

; 1242 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?GreenRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; GreenRibbonBoxOpen
_TEXT	ENDS
PUBLIC	?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; BlueRibbonBoxOpen
EXTRN	?DropBlueRibbonBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropBlueRibbonBoxEventItem
EXTRN	?BlueRibbonBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; BlueRibbonBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC		; BlueRibbonBoxOpen, COMDAT

; 1246 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1247 : 	BlueRibbonBoxEventItemBag->DropBlueRibbonBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlueRibbonBoxEventItemBag@@3PAVCItemBagZt@@A ; BlueRibbonBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropBlueRibbonBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropBlueRibbonBoxEventItem

; 1248 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?BlueRibbonBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; BlueRibbonBoxOpen
_TEXT	ENDS
PUBLIC	?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; PinkChocolateBoxOpen
EXTRN	?DropPinkChocolateBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropPinkChocolateBoxEventItem
EXTRN	?PinkChocolateBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; PinkChocolateBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; PinkChocolateBoxOpen, COMDAT

; 1252 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1253 : 	PinkChocolateBoxEventItemBag->DropPinkChocolateBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PinkChocolateBoxEventItemBag@@3PAVCItemBagZt@@A ; PinkChocolateBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropPinkChocolateBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropPinkChocolateBoxEventItem

; 1254 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?PinkChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; PinkChocolateBoxOpen
_TEXT	ENDS
PUBLIC	?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RedChocolateBoxOpen
EXTRN	?DropRedChocolateBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropRedChocolateBoxEventItem
EXTRN	?RedChocolateBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; RedChocolateBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; RedChocolateBoxOpen, COMDAT

; 1258 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1259 : 	RedChocolateBoxEventItemBag->DropRedChocolateBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RedChocolateBoxEventItemBag@@3PAVCItemBagZt@@A ; RedChocolateBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropRedChocolateBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropRedChocolateBoxEventItem

; 1260 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?RedChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; RedChocolateBoxOpen
_TEXT	ENDS
PUBLIC	?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; BlueChocolateBoxOpen
EXTRN	?DropBlueChocolateBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropBlueChocolateBoxEventItem
EXTRN	?BlueChocolateBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; BlueChocolateBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; BlueChocolateBoxOpen, COMDAT

; 1264 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1265 : 	BlueChocolateBoxEventItemBag->DropBlueChocolateBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BlueChocolateBoxEventItemBag@@3PAVCItemBagZt@@A ; BlueChocolateBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropBlueChocolateBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropBlueChocolateBoxEventItem

; 1266 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?BlueChocolateBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; BlueChocolateBoxOpen
_TEXT	ENDS
PUBLIC	?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; LightPurpleCandyBoxOpen
EXTRN	?DropLightPurpleCandyBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropLightPurpleCandyBoxEventItem
EXTRN	?LightPurpleCandyBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; LightPurpleCandyBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; LightPurpleCandyBoxOpen, COMDAT

; 1270 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1271 : 	LightPurpleCandyBoxEventItemBag->DropLightPurpleCandyBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LightPurpleCandyBoxEventItemBag@@3PAVCItemBagZt@@A ; LightPurpleCandyBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropLightPurpleCandyBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropLightPurpleCandyBoxEventItem

; 1272 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?LightPurpleCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; LightPurpleCandyBoxOpen
_TEXT	ENDS
PUBLIC	?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; VermilionCandyBoxOpen
EXTRN	?DropVermilionCandyBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropVermilionCandyBoxEventItem
EXTRN	?VermilionCandyBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; VermilionCandyBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; VermilionCandyBoxOpen, COMDAT

; 1276 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1277 : 	VermilionCandyBoxEventItemBag->DropVermilionCandyBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?VermilionCandyBoxEventItemBag@@3PAVCItemBagZt@@A ; VermilionCandyBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropVermilionCandyBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropVermilionCandyBoxEventItem

; 1278 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?VermilionCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; VermilionCandyBoxOpen
_TEXT	ENDS
PUBLIC	?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; DeepBlueCandyBoxOpen
EXTRN	?DropDeepBlueCandyBoxEventItem@CItemBagZt@@QAEHH@Z:PROC ; CItemBagZt::DropDeepBlueCandyBoxEventItem
EXTRN	?DeepBlueCandyBoxEventItemBag@@3PAVCItemBagZt@@A:DWORD ; DeepBlueCandyBoxEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; DeepBlueCandyBoxOpen, COMDAT

; 1282 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1283 : 	DeepBlueCandyBoxEventItemBag->DropDeepBlueCandyBoxEventItem(lpObj->m_Index);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 08		 mov	 ecx, DWORD PTR [eax]
  00008	51		 push	 ecx
  00009	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DeepBlueCandyBoxEventItemBag@@3PAVCItemBagZt@@A ; DeepBlueCandyBoxEventItemBag
  0000f	e8 00 00 00 00	 call	 ?DropDeepBlueCandyBoxEventItem@CItemBagZt@@QAEHH@Z ; CItemBagZt::DropDeepBlueCandyBoxEventItem

; 1284 : }

  00014	5d		 pop	 ebp
  00015	c3		 ret	 0
?DeepBlueCandyBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; DeepBlueCandyBoxOpen
_TEXT	ENDS
PUBLIC	?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; KundunEventItemBoxOpen
EXTRN	?DropKundunEventItem@CItemBagZt@@QAEHHEEE@Z:PROC ; CItemBagZt::DropKundunEventItem
EXTRN	?KundunEventItemBag@@3PAVCItemBagZt@@A:DWORD	; KundunEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; KundunEventItemBoxOpen, COMDAT

; 1288 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1289 : 	KundunEventItemBag->DropKundunEventItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KundunEventItemBag@@3PAVCItemBagZt@@A ; KundunEventItemBag
  0001b	e8 00 00 00 00	 call	 ?DropKundunEventItem@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropKundunEventItem

; 1290 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?KundunEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; KundunEventItemBoxOpen
_TEXT	ENDS
PUBLIC	?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; HallowinDayEventItemBoxOpen
EXTRN	?DropHallowinEventItem@CItemBagZt@@QAEHPAUOBJECTSTRUCT@@@Z:PROC ; CItemBagZt::DropHallowinEventItem
EXTRN	?HallowinDayEventItemBag@@3PAVCItemBagZt@@A:DWORD ; HallowinDayEventItemBag
; Function compile flags: /Ogtp
;	COMDAT ?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC ; HallowinDayEventItemBoxOpen, COMDAT

; 1294 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1295 : 	HallowinDayEventItemBag->DropHallowinEventItem(lpObj);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?HallowinDayEventItemBag@@3PAVCItemBagZt@@A ; HallowinDayEventItemBag
  0000c	50		 push	 eax
  0000d	e8 00 00 00 00	 call	 ?DropHallowinEventItem@CItemBagZt@@QAEHPAUOBJECTSTRUCT@@@Z ; CItemBagZt::DropHallowinEventItem

; 1296 : }

  00012	5d		 pop	 ebp
  00013	c3		 ret	 0
?HallowinDayEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP ; HallowinDayEventItemBoxOpen
_TEXT	ENDS
PUBLIC	?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z	; ChristmasStarDrop
; Function compile flags: /Ogtp
;	COMDAT ?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_ServerCmd$ = -8					; size = 7
_lpObj$ = 8						; size = 4
?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z PROC		; ChristmasStarDrop, COMDAT

; 1300 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	56		 push	 esi

; 1301 : 	PMSG_SERVERCMD ServerCmd;
; 1302 : 
; 1303 : 	PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  00007	6a 07		 push	 7
  00009	6a 40		 push	 64			; 00000040H
  0000b	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0000e	68 f3 00 00 00	 push	 243			; 000000f3H
  00013	50		 push	 eax
  00014	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 1304 : 	ServerCmd.CmdType = 0;
; 1305 : 	ServerCmd.X = lpObj->X;

  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	8a 8e 44 01 00
	00		 mov	 cl, BYTE PTR [esi+324]

; 1306 : 	ServerCmd.Y = lpObj->Y;

  00022	8a 96 46 01 00
	00		 mov	 dl, BYTE PTR [esi+326]

; 1307 : 	MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00028	6a 07		 push	 7
  0002a	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0002d	50		 push	 eax
  0002e	56		 push	 esi
  0002f	c6 45 fc 00	 mov	 BYTE PTR _ServerCmd$[ebp+4], 0
  00033	88 4d fd	 mov	 BYTE PTR _ServerCmd$[ebp+5], cl
  00036	88 55 fe	 mov	 BYTE PTR _ServerCmd$[ebp+6], dl
  00039	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 1308 : 	DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0003e	8b 16		 mov	 edx, DWORD PTR [esi]
  00040	6a 07		 push	 7
  00042	8d 4d f8	 lea	 ecx, DWORD PTR _ServerCmd$[ebp]
  00045	51		 push	 ecx
  00046	52		 push	 edx
  00047	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0004c	83 c4 28	 add	 esp, 40			; 00000028H
  0004f	5e		 pop	 esi

; 1309 : }

  00050	8b e5		 mov	 esp, ebp
  00052	5d		 pop	 ebp
  00053	c3		 ret	 0
?ChristmasStarDrop@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; ChristmasStarDrop
_TEXT	ENDS
PUBLIC	?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z	; ChristmasFireCrackDrop
; Function compile flags: /Ogtp
;	COMDAT ?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_ServerCmd$ = -8					; size = 7
_lpObj$ = 8						; size = 4
?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z PROC	; ChristmasFireCrackDrop, COMDAT

; 1312 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	56		 push	 esi

; 1313 : 	PMSG_SERVERCMD ServerCmd;
; 1314 : 
; 1315 : 	PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  00007	6a 07		 push	 7
  00009	6a 40		 push	 64			; 00000040H
  0000b	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0000e	68 f3 00 00 00	 push	 243			; 000000f3H
  00013	50		 push	 eax
  00014	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 1316 : 	ServerCmd.CmdType = 59;
; 1317 : 	ServerCmd.X = lpObj->X;

  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	8a 8e 44 01 00
	00		 mov	 cl, BYTE PTR [esi+324]

; 1318 : 	ServerCmd.Y = lpObj->Y;

  00022	8a 96 46 01 00
	00		 mov	 dl, BYTE PTR [esi+326]

; 1319 : 	MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00028	6a 07		 push	 7
  0002a	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0002d	50		 push	 eax
  0002e	56		 push	 esi
  0002f	c6 45 fc 3b	 mov	 BYTE PTR _ServerCmd$[ebp+4], 59 ; 0000003bH
  00033	88 4d fd	 mov	 BYTE PTR _ServerCmd$[ebp+5], cl
  00036	88 55 fe	 mov	 BYTE PTR _ServerCmd$[ebp+6], dl
  00039	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 1320 : 	DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0003e	8b 16		 mov	 edx, DWORD PTR [esi]
  00040	6a 07		 push	 7
  00042	8d 4d f8	 lea	 ecx, DWORD PTR _ServerCmd$[ebp]
  00045	51		 push	 ecx
  00046	52		 push	 edx
  00047	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0004c	83 c4 28	 add	 esp, 40			; 00000028H
  0004f	5e		 pop	 esi

; 1321 : }

  00050	8b e5		 mov	 esp, ebp
  00052	5d		 pop	 ebp
  00053	c3		 ret	 0
?ChristmasFireCrackDrop@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; ChristmasFireCrackDrop
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CherryBlossomEventItemBoxOpen
EXTRN	?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z:PROC ; CProbabilityItemBag::DropItem
EXTRN	?CherryBlossom1@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom1
; Function compile flags: /Ogtp
;	COMDAT ?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_ServerCmd$215617 = -8					; size = 7
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CherryBlossomEventItemBoxOpen, COMDAT

; 1324 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1325 : 	if(CherryBlossom1->DropItem(lpObj->m_Index, btMapNumber, cX, cY, 0) != 0)

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	83 ec 08	 sub	 esp, 8
  0000f	56		 push	 esi
  00010	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00013	6a 00		 push	 0
  00015	50		 push	 eax
  00016	8b 06		 mov	 eax, DWORD PTR [esi]
  00018	51		 push	 ecx
  00019	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom1@@3PAVCProbabilityItemBag@@A ; CherryBlossom1
  0001f	52		 push	 edx
  00020	50		 push	 eax
  00021	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem
  00026	85 c0		 test	 eax, eax
  00028	74 40		 je	 SHORT $LN1@CherryBlos

; 1326 : 	{
; 1327 : 		PMSG_SERVERCMD ServerCmd;
; 1328 : 
; 1329 : 		PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  0002a	6a 07		 push	 7
  0002c	6a 40		 push	 64			; 00000040H
  0002e	8d 4d f8	 lea	 ecx, DWORD PTR _ServerCmd$215617[ebp]
  00031	68 f3 00 00 00	 push	 243			; 000000f3H
  00036	51		 push	 ecx
  00037	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 1330 : 		ServerCmd.CmdType = 58;
; 1331 : 		ServerCmd.X = SET_NUMBERH(lpObj->m_Index);

  0003c	8b 16		 mov	 edx, DWORD PTR [esi]

; 1332 : 		ServerCmd.Y = SET_NUMBERL(lpObj->m_Index);

  0003e	8a 06		 mov	 al, BYTE PTR [esi]

; 1333 : 		MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00040	6a 07		 push	 7
  00042	8d 4d f8	 lea	 ecx, DWORD PTR _ServerCmd$215617[ebp]
  00045	51		 push	 ecx
  00046	c1 ea 08	 shr	 edx, 8
  00049	56		 push	 esi
  0004a	c6 45 fc 3a	 mov	 BYTE PTR _ServerCmd$215617[ebp+4], 58 ; 0000003aH
  0004e	88 55 fd	 mov	 BYTE PTR _ServerCmd$215617[ebp+5], dl
  00051	88 45 fe	 mov	 BYTE PTR _ServerCmd$215617[ebp+6], al
  00054	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 1334 : 		DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00059	8b 06		 mov	 eax, DWORD PTR [esi]
  0005b	6a 07		 push	 7
  0005d	8d 55 f8	 lea	 edx, DWORD PTR _ServerCmd$215617[ebp]
  00060	52		 push	 edx
  00061	50		 push	 eax
  00062	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00067	83 c4 28	 add	 esp, 40			; 00000028H
$LN1@CherryBlos:
  0006a	5e		 pop	 esi

; 1335 : 	}
; 1336 : }

  0006b	8b e5		 mov	 esp, ebp
  0006d	5d		 pop	 ebp
  0006e	c3		 ret	 0
?CherryBlossomEventItemBoxOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CherryBlossomEventItemBoxOpen
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ; CherryBlossomEventItemBoxAOpen
EXTRN	?CherryBlossom2@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom2
; Function compile flags: /Ogtp
;	COMDAT ?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_iDropZen$ = 24						; size = 4
?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z PROC ; CherryBlossomEventItemBoxAOpen, COMDAT

; 1339 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1340 : 	return CherryBlossom2->DropItem(lpObj->m_Index, btMapNumber, cX, cY, iDropZen);

  00003	8b 45 18	 mov	 eax, DWORD PTR _iDropZen$[ebp]
  00006	8b 4d 14	 mov	 ecx, DWORD PTR _cY$[ebp]
  00009	8b 55 10	 mov	 edx, DWORD PTR _cX$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 0c	 mov	 eax, DWORD PTR _btMapNumber$[ebp]
  00010	51		 push	 ecx
  00011	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00014	52		 push	 edx
  00015	8b 11		 mov	 edx, DWORD PTR [ecx]
  00017	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom2@@3PAVCProbabilityItemBag@@A ; CherryBlossom2
  0001d	50		 push	 eax
  0001e	52		 push	 edx
  0001f	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem

; 1341 : }

  00024	5d		 pop	 ebp
  00025	c3		 ret	 0
?CherryBlossomEventItemBoxAOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ENDP ; CherryBlossomEventItemBoxAOpen
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ; CherryBlossomEventItemBoxBOpen
EXTRN	?CherryBlossom3@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom3
; Function compile flags: /Ogtp
;	COMDAT ?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_iDropZen$ = 24						; size = 4
?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z PROC ; CherryBlossomEventItemBoxBOpen, COMDAT

; 1344 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1345 : 	return CherryBlossom3->DropItem(lpObj->m_Index, btMapNumber, cX, cY, iDropZen);

  00003	8b 45 18	 mov	 eax, DWORD PTR _iDropZen$[ebp]
  00006	8b 4d 14	 mov	 ecx, DWORD PTR _cY$[ebp]
  00009	8b 55 10	 mov	 edx, DWORD PTR _cX$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 0c	 mov	 eax, DWORD PTR _btMapNumber$[ebp]
  00010	51		 push	 ecx
  00011	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00014	52		 push	 edx
  00015	8b 11		 mov	 edx, DWORD PTR [ecx]
  00017	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom3@@3PAVCProbabilityItemBag@@A ; CherryBlossom3
  0001d	50		 push	 eax
  0001e	52		 push	 edx
  0001f	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem

; 1346 : }

  00024	5d		 pop	 ebp
  00025	c3		 ret	 0
?CherryBlossomEventItemBoxBOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ENDP ; CherryBlossomEventItemBoxBOpen
_TEXT	ENDS
PUBLIC	?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ; CherryBlossomEventItemBoxCOpen
EXTRN	?CherryBlossom4@@3PAVCProbabilityItemBag@@A:DWORD ; CherryBlossom4
; Function compile flags: /Ogtp
;	COMDAT ?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_iDropZen$ = 24						; size = 4
?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z PROC ; CherryBlossomEventItemBoxCOpen, COMDAT

; 1349 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1350 : 	return CherryBlossom4->DropItem(lpObj->m_Index, btMapNumber, cX, cY, iDropZen);

  00003	8b 45 18	 mov	 eax, DWORD PTR _iDropZen$[ebp]
  00006	8b 4d 14	 mov	 ecx, DWORD PTR _cY$[ebp]
  00009	8b 55 10	 mov	 edx, DWORD PTR _cX$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 0c	 mov	 eax, DWORD PTR _btMapNumber$[ebp]
  00010	51		 push	 ecx
  00011	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00014	52		 push	 edx
  00015	8b 11		 mov	 edx, DWORD PTR [ecx]
  00017	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CherryBlossom4@@3PAVCProbabilityItemBag@@A ; CherryBlossom4
  0001d	50		 push	 eax
  0001e	52		 push	 edx
  0001f	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEEPAH@Z ; CProbabilityItemBag::DropItem

; 1351 : }

  00024	5d		 pop	 ebp
  00025	c3		 ret	 0
?CherryBlossomEventItemBoxCOpen@@YAHPAUOBJECTSTRUCT@@EEEPAH@Z ENDP ; CherryBlossomEventItemBoxCOpen
_TEXT	ENDS
PUBLIC	?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CastleHuntZoneBossRewardOpen
EXTRN	?DropCastleHuntZoneBossReward@CItemBagZt@@QAEHHEEE@Z:PROC ; CItemBagZt::DropCastleHuntZoneBossReward
EXTRN	?CastleHuntZoneBossItemBag@@3PAVCItemBagZt@@A:DWORD ; CastleHuntZoneBossItemBag
; Function compile flags: /Ogtp
;	COMDAT ?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CastleHuntZoneBossRewardOpen, COMDAT

; 1355 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1356 : 	CastleHuntZoneBossItemBag->DropCastleHuntZoneBossReward(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CastleHuntZoneBossItemBag@@3PAVCItemBagZt@@A ; CastleHuntZoneBossItemBag
  0001b	e8 00 00 00 00	 call	 ?DropCastleHuntZoneBossReward@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropCastleHuntZoneBossReward

; 1357 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?CastleHuntZoneBossRewardOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CastleHuntZoneBossRewardOpen
_TEXT	ENDS
PUBLIC	?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CrywolfDarkElfItemBagOpen
EXTRN	?DropCrywolfDarkElfItem@CItemBagZt@@QAEHHEEE@Z:PROC ; CItemBagZt::DropCrywolfDarkElfItem
EXTRN	?CrywolfDarkElfItemBag@@3PAVCItemBagZt@@A:DWORD	; CrywolfDarkElfItemBag
; Function compile flags: /Ogtp
;	COMDAT ?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CrywolfDarkElfItemBagOpen, COMDAT

; 1361 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1362 : 	CrywolfDarkElfItemBag->DropCrywolfDarkElfItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CrywolfDarkElfItemBag@@3PAVCItemBagZt@@A ; CrywolfDarkElfItemBag
  0001b	e8 00 00 00 00	 call	 ?DropCrywolfDarkElfItem@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropCrywolfDarkElfItem

; 1363 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?CrywolfDarkElfItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CrywolfDarkElfItemBagOpen
_TEXT	ENDS
PUBLIC	?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; CrywolfBossMonsterItemBagOpen
EXTRN	?DropCrywolfBossMonsterItem@CItemBagZt@@QAEHHEEE@Z:PROC ; CItemBagZt::DropCrywolfBossMonsterItem
EXTRN	?CrywolfBossMonsterItemBag@@3PAVCItemBagZt@@A:DWORD ; CrywolfBossMonsterItemBag
EXTRN	?CheckUser@CZtLicense@@QAE_NH@Z:PROC		; CZtLicense::CheckUser
EXTRN	?g_ZtLicense@@3VCZtLicense@@A:BYTE		; g_ZtLicense
; Function compile flags: /Ogtp
;	COMDAT ?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
tv162 = -4						; size = 4
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; CrywolfBossMonsterItemBagOpen, COMDAT

; 1366 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 1367 : 	if(g_ZtLicense.CheckUser(eZtUB::NSGames))

  00004	6a 51		 push	 81			; 00000051H
  00006	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0000b	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00010	84 c0		 test	 al, al
  00012	74 33		 je	 SHORT $LN5@CrywolfBos

; 1368 : 	{
; 1369 : 		for(int i = 0; i < 3; i++)

  00014	53		 push	 ebx
  00015	8b 5d 10	 mov	 ebx, DWORD PTR _cX$[ebp]
  00018	56		 push	 esi
  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	57		 push	 edi
  0001d	8b 7d 0c	 mov	 edi, DWORD PTR _btMapNumber$[ebp]
  00020	c7 45 fc 03 00
	00 00		 mov	 DWORD PTR tv162[ebp], 3
$LL4@CrywolfBos:

; 1370 : 		{
; 1371 : 			CrywolfBossMonsterItemBag->DropCrywolfBossMonsterItem(lpObj->m_Index, btMapNumber, cX, cY);

  00027	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  0002a	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0002c	50		 push	 eax
  0002d	53		 push	 ebx
  0002e	57		 push	 edi
  0002f	51		 push	 ecx
  00030	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CrywolfBossMonsterItemBag@@3PAVCItemBagZt@@A ; CrywolfBossMonsterItemBag
  00036	e8 00 00 00 00	 call	 ?DropCrywolfBossMonsterItem@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropCrywolfBossMonsterItem
  0003b	ff 4d fc	 dec	 DWORD PTR tv162[ebp]
  0003e	75 e7		 jne	 SHORT $LL4@CrywolfBos
  00040	5f		 pop	 edi
  00041	5e		 pop	 esi
  00042	5b		 pop	 ebx

; 1377 : 	}	
; 1378 : }

  00043	8b e5		 mov	 esp, ebp
  00045	5d		 pop	 ebp
  00046	c3		 ret	 0
$LN5@CrywolfBos:

; 1372 : 		}
; 1373 : 	}
; 1374 : 	else
; 1375 : 	{
; 1376 : 		CrywolfBossMonsterItemBag->DropCrywolfBossMonsterItem(lpObj->m_Index, btMapNumber, cX, cY);

  00047	8b 55 14	 mov	 edx, DWORD PTR _cY$[ebp]
  0004a	8b 45 10	 mov	 eax, DWORD PTR _cX$[ebp]
  0004d	8b 4d 0c	 mov	 ecx, DWORD PTR _btMapNumber$[ebp]
  00050	52		 push	 edx
  00051	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00054	50		 push	 eax
  00055	8b 02		 mov	 eax, DWORD PTR [edx]
  00057	51		 push	 ecx
  00058	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?CrywolfBossMonsterItemBag@@3PAVCItemBagZt@@A ; CrywolfBossMonsterItemBag
  0005e	50		 push	 eax
  0005f	e8 00 00 00 00	 call	 ?DropCrywolfBossMonsterItem@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropCrywolfBossMonsterItem

; 1377 : 	}	
; 1378 : }

  00064	8b e5		 mov	 esp, ebp
  00066	5d		 pop	 ebp
  00067	c3		 ret	 0
?CrywolfBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; CrywolfBossMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; RaklionBossMonsterItemBagOpen
EXTRN	?DropRaklionSelupanMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropRaklionSelupanMonsterReward
EXTRN	?RaklionSelupanItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; RaklionSelupanItemBag
; Function compile flags: /Ogtp
;	COMDAT ?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; RaklionBossMonsterItemBagOpen, COMDAT

; 1382 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1383 : 	RaklionSelupanItemBag->DropRaklionSelupanMonsterReward(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RaklionSelupanItemBag@@3PAVCProbabilityItemBag@@A ; RaklionSelupanItemBag
  0001b	e8 00 00 00 00	 call	 ?DropRaklionSelupanMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropRaklionSelupanMonsterReward

; 1384 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?RaklionBossMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; RaklionBossMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; LuckyCoint10ItemBagOpen
EXTRN	?LuckyCoin10@@3PAVCProbabilityItemBag@@A:DWORD	; LuckyCoin10
; Function compile flags: /Ogtp
;	COMDAT ?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; LuckyCoint10ItemBagOpen, COMDAT

; 1388 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1389 : 	LuckyCoin10->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckyCoin10@@3PAVCProbabilityItemBag@@A ; LuckyCoin10
  0001b	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 1390 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?LuckyCoint10ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; LuckyCoint10ItemBagOpen
_TEXT	ENDS
PUBLIC	?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; LuckyCoint20ItemBagOpen
EXTRN	?LuckyCoin20@@3PAVCProbabilityItemBag@@A:DWORD	; LuckyCoin20
; Function compile flags: /Ogtp
;	COMDAT ?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; LuckyCoint20ItemBagOpen, COMDAT

; 1394 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1395 : 	LuckyCoin20->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckyCoin20@@3PAVCProbabilityItemBag@@A ; LuckyCoin20
  0001b	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 1396 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?LuckyCoint20ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; LuckyCoint20ItemBagOpen
_TEXT	ENDS
PUBLIC	?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; LuckyCoint30ItemBagOpen
EXTRN	?LuckyCoin30@@3PAVCProbabilityItemBag@@A:DWORD	; LuckyCoin30
; Function compile flags: /Ogtp
;	COMDAT ?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; LuckyCoint30ItemBagOpen, COMDAT

; 1400 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1401 : 	LuckyCoin30->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckyCoin30@@3PAVCProbabilityItemBag@@A ; LuckyCoin30
  0001b	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 1402 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?LuckyCoint30ItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; LuckyCoint30ItemBagOpen
_TEXT	ENDS
PUBLIC	?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; KanturuMayaHandItemBagOpen
EXTRN	?DropKanturuMayaHandItem@CItemBagZt@@QAEHHEEE@Z:PROC ; CItemBagZt::DropKanturuMayaHandItem
EXTRN	?KanturuMayaHandItemBag@@3PAVCItemBagZt@@A:DWORD ; KanturuMayaHandItemBag
; Function compile flags: /Ogtp
;	COMDAT ?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; KanturuMayaHandItemBagOpen, COMDAT

; 1406 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1407 : 	KanturuMayaHandItemBag->DropKanturuMayaHandItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KanturuMayaHandItemBag@@3PAVCItemBagZt@@A ; KanturuMayaHandItemBag
  0001b	e8 00 00 00 00	 call	 ?DropKanturuMayaHandItem@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropKanturuMayaHandItem

; 1408 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?KanturuMayaHandItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; KanturuMayaHandItemBagOpen
_TEXT	ENDS
PUBLIC	?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; KanturuNightmareItemBagOpen
EXTRN	?DropKanturuNightmareItem@CItemBagZt@@QAEHHEEE@Z:PROC ; CItemBagZt::DropKanturuNightmareItem
EXTRN	?KanturuNightmareItemBag@@3PAVCItemBagZt@@A:DWORD ; KanturuNightmareItemBag
; Function compile flags: /Ogtp
;	COMDAT ?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; KanturuNightmareItemBagOpen, COMDAT

; 1412 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1413 : 	KanturuNightmareItemBag->DropKanturuNightmareItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KanturuNightmareItemBag@@3PAVCItemBagZt@@A ; KanturuNightmareItemBag
  0001b	e8 00 00 00 00	 call	 ?DropKanturuNightmareItem@CItemBagZt@@QAEHHEEE@Z ; CItemBagZt::DropKanturuNightmareItem

; 1414 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?KanturuNightmareItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; KanturuNightmareItemBagOpen
_TEXT	ENDS
PUBLIC	??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z	; LuckyBoxOpenEven
;	COMDAT ??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@ DB '['
	DB	'%s][%s][Lucky Box Item Drop] : (%d)(X:%d/Y:%d) Item:%s(%d) Le'
	DB	'vel:%d Op1:%d Op2:%d Op3:%d', 00H		; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_y$ = -240						; size = 4
_x$ = -236						; size = 4
_DropItemNum$ = -232					; size = 4
_Option2$ = -228					; size = 4
_Option3$ = -224					; size = 4
tv555 = -220						; size = 4
_n$215740 = -220					; size = 4
_Option1$ = -220					; size = 4
_EventItem$215738 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z PROC		; LuckyBoxOpenEven, COMDAT

; 1422 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 1423 : 	float dur;
; 1424 : 	int type;
; 1425 : 	int level;
; 1426 : 	int x;
; 1427 : 	int y;
; 1428 : 	int Option1=0;
; 1429 : 	int Option2=0;
; 1430 : 	int Option3=0;
; 1431 : 	int DropItemNum;
; 1432 : 
; 1433 : 
; 1434 : 	if ( !LuckboxItemBag )

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00018	56		 push	 esi
  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	85 c0		 test	 eax, eax
  0001e	0f 84 04 04 00
	00		 je	 $LN1@LuckyBoxOp

; 1435 : 		return;
; 1436 : 
; 1437 : 	if ( LuckboxItemBag->GetBagCount() > 0 )

  00024	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  0002b	53		 push	 ebx
  0002c	57		 push	 edi
  0002d	0f 8e 55 03 00
	00		 jle	 $LN24@LuckyBoxOp

; 1438 : 	{
; 1439 : 		if ( (rand()%10)<2 )

  00033	e8 00 00 00 00	 call	 _rand
  00038	99		 cdq
  00039	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  0003e	f7 f9		 idiv	 ecx
  00040	83 fa 02	 cmp	 edx, 2
  00043	0f 8d 3f 03 00
	00		 jge	 $LN24@LuckyBoxOp

; 1440 : 		{
; 1441 : 			DropItemNum = rand()%LuckboxItemBag->GetBagCount();

  00049	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  0004f	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  00055	e8 00 00 00 00	 call	 _rand
  0005a	99		 cdq
  0005b	f7 ff		 idiv	 edi

; 1442 : 			dur=0;
; 1443 : 			x = lpObj->X;
; 1444 : 			y = lpObj->Y;

  0005d	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00064	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  0006b	89 8d 10 ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 1445 : 			level = LuckboxItemBag->GetLevel(DropItemNum) + rand()%2;

  00071	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00077	89 85 14 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  0007d	8b da		 mov	 ebx, edx
  0007f	53		 push	 ebx
  00080	89 9d 18 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], ebx
  00086	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0008b	0f b6 d0	 movzx	 edx, al
  0008e	89 95 24 ff ff
	ff		 mov	 DWORD PTR tv555[ebp], edx
  00094	e8 00 00 00 00	 call	 _rand
  00099	8b f8		 mov	 edi, eax
  0009b	81 e7 01 00 00
	80		 and	 edi, -2147483647	; 80000001H
  000a1	79 05		 jns	 SHORT $LN29@LuckyBoxOp
  000a3	4f		 dec	 edi
  000a4	83 cf fe	 or	 edi, -2			; fffffffeH
  000a7	47		 inc	 edi
$LN29@LuckyBoxOp:

; 1446 : 			type = ItemGetNumberMake(LuckboxItemBag->GetType(DropItemNum), LuckboxItemBag->GetIndex(DropItemNum));

  000a8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  000ae	03 bd 24 ff ff
	ff		 add	 edi, DWORD PTR tv555[ebp]
  000b4	53		 push	 ebx
  000b5	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000ba	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  000c0	0f b6 c0	 movzx	 eax, al
  000c3	50		 push	 eax
  000c4	53		 push	 ebx
  000c5	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000ca	0f b6 c8	 movzx	 ecx, al
  000cd	51		 push	 ecx
  000ce	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000d3	83 c4 08	 add	 esp, 8
  000d6	8b d8		 mov	 ebx, eax

; 1447 : 			Option1 = rand()%2;

  000d8	e8 00 00 00 00	 call	 _rand
  000dd	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000e2	79 05		 jns	 SHORT $LN30@LuckyBoxOp
  000e4	48		 dec	 eax
  000e5	83 c8 fe	 or	 eax, -2			; fffffffeH
  000e8	40		 inc	 eax
$LN30@LuckyBoxOp:
  000e9	89 85 24 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], eax

; 1448 : 			Option2 = rand()%2;

  000ef	e8 00 00 00 00	 call	 _rand
  000f4	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000f9	79 05		 jns	 SHORT $LN31@LuckyBoxOp
  000fb	48		 dec	 eax
  000fc	83 c8 fe	 or	 eax, -2			; fffffffeH
  000ff	40		 inc	 eax
$LN31@LuckyBoxOp:
  00100	89 85 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 1449 : 
; 1450 : 			if ( (rand()%5) <1 )

  00106	e8 00 00 00 00	 call	 _rand
  0010b	99		 cdq
  0010c	b9 05 00 00 00	 mov	 ecx, 5
  00111	f7 f9		 idiv	 ecx
  00113	83 fa 01	 cmp	 edx, 1
  00116	7d 0c		 jge	 SHORT $LN11@LuckyBoxOp

; 1451 : 				Option3 = 3;

  00118	c7 85 20 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 1452 : 			else

  00122	eb 18		 jmp	 SHORT $LN10@LuckyBoxOp
$LN11@LuckyBoxOp:

; 1453 : 				Option3 = rand()%2+1;

  00124	e8 00 00 00 00	 call	 _rand
  00129	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0012e	79 05		 jns	 SHORT $LN32@LuckyBoxOp
  00130	48		 dec	 eax
  00131	83 c8 fe	 or	 eax, -2			; fffffffeH
  00134	40		 inc	 eax
$LN32@LuckyBoxOp:
  00135	40		 inc	 eax
  00136	89 85 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], eax
$LN10@LuckyBoxOp:

; 1454 : 
; 1455 : 			if ( type == ITEMGET(12,15) ||
; 1456 : 				 type == ITEMGET(14,13) ||
; 1457 : 				 type == ITEMGET(14,14) ||
; 1458 : 				 type == ITEMGET(14,14) ||
; 1459 : 				 type == ITEMGET(14,16)	||
; 1460 : 				 type == ITEMGET(14,22)	||
; 1461 : 				 type == ITEMGET(14,31)	||
; 1462 : 				 type == ITEMGET(14,41)	||
; 1463 : 				 type == ITEMGET(14,42)	||
; 1464 : 				 type == ITEMGET(14,180)||
; 1465 : 				 type == ITEMGET(14,181)||
; 1466 : 				 type == ITEMGET(14,182)||
; 1467 : 				 type == ITEMGET(14,183)||
; 1468 : 				 type == ITEMGET(14,184)||
; 1469 : 				 type == ITEMGET(14,185)||
; 1470 : 				 type == ITEMGET(14,186)||
; 1471 : 				 type == ITEMGET(14,187)||
; 1472 : 				 type == ITEMGET(14,190)||
; 1473 : 				 type == ITEMGET(14,43) ||
; 1474 : 				 type == ITEMGET(14,44) )

  0013c	81 fb 0f 18 00
	00		 cmp	 ebx, 6159		; 0000180fH
  00142	0f 84 98 00 00
	00		 je	 $LN8@LuckyBoxOp
  00148	81 fb 0d 1c 00
	00		 cmp	 ebx, 7181		; 00001c0dH
  0014e	0f 84 8c 00 00
	00		 je	 $LN8@LuckyBoxOp
  00154	81 fb 0e 1c 00
	00		 cmp	 ebx, 7182		; 00001c0eH
  0015a	0f 84 80 00 00
	00		 je	 $LN8@LuckyBoxOp
  00160	81 fb 10 1c 00
	00		 cmp	 ebx, 7184		; 00001c10H
  00166	74 78		 je	 SHORT $LN8@LuckyBoxOp
  00168	81 fb 16 1c 00
	00		 cmp	 ebx, 7190		; 00001c16H
  0016e	74 70		 je	 SHORT $LN8@LuckyBoxOp
  00170	81 fb 1f 1c 00
	00		 cmp	 ebx, 7199		; 00001c1fH
  00176	74 68		 je	 SHORT $LN8@LuckyBoxOp
  00178	81 fb 29 1c 00
	00		 cmp	 ebx, 7209		; 00001c29H
  0017e	74 60		 je	 SHORT $LN8@LuckyBoxOp
  00180	81 fb 2a 1c 00
	00		 cmp	 ebx, 7210		; 00001c2aH
  00186	74 58		 je	 SHORT $LN8@LuckyBoxOp
  00188	81 fb b4 1c 00
	00		 cmp	 ebx, 7348		; 00001cb4H
  0018e	74 50		 je	 SHORT $LN8@LuckyBoxOp
  00190	81 fb b5 1c 00
	00		 cmp	 ebx, 7349		; 00001cb5H
  00196	74 48		 je	 SHORT $LN8@LuckyBoxOp
  00198	81 fb b6 1c 00
	00		 cmp	 ebx, 7350		; 00001cb6H
  0019e	74 40		 je	 SHORT $LN8@LuckyBoxOp
  001a0	81 fb b7 1c 00
	00		 cmp	 ebx, 7351		; 00001cb7H
  001a6	74 38		 je	 SHORT $LN8@LuckyBoxOp
  001a8	81 fb b8 1c 00
	00		 cmp	 ebx, 7352		; 00001cb8H
  001ae	74 30		 je	 SHORT $LN8@LuckyBoxOp
  001b0	81 fb b9 1c 00
	00		 cmp	 ebx, 7353		; 00001cb9H
  001b6	74 28		 je	 SHORT $LN8@LuckyBoxOp
  001b8	81 fb ba 1c 00
	00		 cmp	 ebx, 7354		; 00001cbaH
  001be	74 20		 je	 SHORT $LN8@LuckyBoxOp
  001c0	81 fb bb 1c 00
	00		 cmp	 ebx, 7355		; 00001cbbH
  001c6	74 18		 je	 SHORT $LN8@LuckyBoxOp
  001c8	81 fb be 1c 00
	00		 cmp	 ebx, 7358		; 00001cbeH
  001ce	74 10		 je	 SHORT $LN8@LuckyBoxOp
  001d0	81 fb 2b 1c 00
	00		 cmp	 ebx, 7211		; 00001c2bH
  001d6	74 08		 je	 SHORT $LN8@LuckyBoxOp
  001d8	81 fb 2c 1c 00
	00		 cmp	 ebx, 7212		; 00001c2cH
  001de	75 18		 jne	 SHORT $LN26@LuckyBoxOp
$LN8@LuckyBoxOp:

; 1475 : 			{
; 1476 : 				Option1 = 0;

  001e0	33 c9		 xor	 ecx, ecx
  001e2	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 1477 : 				Option2 = 0;

  001e8	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 1478 : 				Option3 = 0;

  001ee	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 1479 : 				level = 0;

  001f4	33 ff		 xor	 edi, edi
  001f6	eb 02		 jmp	 SHORT $LN9@LuckyBoxOp
$LN26@LuckyBoxOp:
  001f8	33 c9		 xor	 ecx, ecx
$LN9@LuckyBoxOp:

; 1480 : 			}
; 1481 : 
; 1482 : 			if ( type == ITEMGET(12,30)	||
; 1483 : 				 type == ITEMGET(12,31)	||
; 1484 : 				 type == ITEMGET(12,136)||
; 1485 : 				 type == ITEMGET(12,137)||
; 1486 : 				 type == ITEMGET(12,138)||
; 1487 : 				 type == ITEMGET(12,139)||
; 1488 : 				 type == ITEMGET(12,140)||
; 1489 : 				 type == ITEMGET(12,141)||
; 1490 : 				 type == ITEMGET(12,142)||
; 1491 : 				 type == ITEMGET(12,143))

  001fa	81 fb 1e 18 00
	00		 cmp	 ebx, 6174		; 0000181eH
  00200	74 48		 je	 SHORT $LN6@LuckyBoxOp
  00202	81 fb 1f 18 00
	00		 cmp	 ebx, 6175		; 0000181fH
  00208	74 40		 je	 SHORT $LN6@LuckyBoxOp
  0020a	81 fb 88 18 00
	00		 cmp	 ebx, 6280		; 00001888H
  00210	74 38		 je	 SHORT $LN6@LuckyBoxOp
  00212	81 fb 89 18 00
	00		 cmp	 ebx, 6281		; 00001889H
  00218	74 30		 je	 SHORT $LN6@LuckyBoxOp
  0021a	81 fb 8a 18 00
	00		 cmp	 ebx, 6282		; 0000188aH
  00220	74 28		 je	 SHORT $LN6@LuckyBoxOp
  00222	81 fb 8b 18 00
	00		 cmp	 ebx, 6283		; 0000188bH
  00228	74 20		 je	 SHORT $LN6@LuckyBoxOp
  0022a	81 fb 8c 18 00
	00		 cmp	 ebx, 6284		; 0000188cH
  00230	74 18		 je	 SHORT $LN6@LuckyBoxOp
  00232	81 fb 8d 18 00
	00		 cmp	 ebx, 6285		; 0000188dH
  00238	74 10		 je	 SHORT $LN6@LuckyBoxOp
  0023a	81 fb 8e 18 00
	00		 cmp	 ebx, 6286		; 0000188eH
  00240	74 08		 je	 SHORT $LN6@LuckyBoxOp
  00242	81 fb 8f 18 00
	00		 cmp	 ebx, 6287		; 0000188fH
  00248	75 29		 jne	 SHORT $LN7@LuckyBoxOp
$LN6@LuckyBoxOp:

; 1492 : 			{
; 1493 : 				Option1 = 0;
; 1494 : 				Option2 = 0;
; 1495 : 				Option3 = 0;
; 1496 : 				level = LuckboxItemBag->GetLevel(DropItemNum);

  0024a	8b 95 18 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00250	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  00256	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx
  0025c	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00262	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?LuckboxItemBag@@3PAVCItemBag@@A ; LuckboxItemBag
  00268	52		 push	 edx
  00269	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0026e	0f b6 f8	 movzx	 edi, al
  00271	33 c9		 xor	 ecx, ecx
$LN7@LuckyBoxOp:

; 1497 : 			}
; 1498 : 
; 1499 : 			if ( type == ITEMGET(13,0) ||
; 1500 : 				 type == ITEMGET(13,1) ||
; 1501 : 				 type == ITEMGET(13,2) ||
; 1502 : 				 type == ITEMGET(13,8) ||
; 1503 : 				 type == ITEMGET(13,9) ||
; 1504 : 				 type == ITEMGET(13,12) ||
; 1505 : 				 type == ITEMGET(13,13) )

  00273	81 fb 00 1a 00
	00		 cmp	 ebx, 6656		; 00001a00H
  00279	74 30		 je	 SHORT $LN4@LuckyBoxOp
  0027b	81 fb 01 1a 00
	00		 cmp	 ebx, 6657		; 00001a01H
  00281	74 28		 je	 SHORT $LN4@LuckyBoxOp
  00283	81 fb 02 1a 00
	00		 cmp	 ebx, 6658		; 00001a02H
  00289	74 20		 je	 SHORT $LN4@LuckyBoxOp
  0028b	81 fb 08 1a 00
	00		 cmp	 ebx, 6664		; 00001a08H
  00291	74 18		 je	 SHORT $LN4@LuckyBoxOp
  00293	81 fb 09 1a 00
	00		 cmp	 ebx, 6665		; 00001a09H
  00299	74 10		 je	 SHORT $LN4@LuckyBoxOp
  0029b	81 fb 0c 1a 00
	00		 cmp	 ebx, 6668		; 00001a0cH
  002a1	74 08		 je	 SHORT $LN4@LuckyBoxOp
  002a3	81 fb 0d 1a 00
	00		 cmp	 ebx, 6669		; 00001a0dH
  002a9	75 02		 jne	 SHORT $LN5@LuckyBoxOp
$LN4@LuckyBoxOp:

; 1506 : 			{
; 1507 : 				level = 0;

  002ab	33 ff		 xor	 edi, edi
$LN5@LuckyBoxOp:

; 1508 : 			}
; 1509 : 
; 1510 : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1511 : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  002ad	8b 06		 mov	 eax, DWORD PTR [esi]
  002af	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002b5	51		 push	 ecx
  002b6	51		 push	 ecx
  002b7	50		 push	 eax
  002b8	52		 push	 edx
  002b9	8b 95 1c ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  002bf	52		 push	 edx
  002c0	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  002c6	52		 push	 edx
  002c7	8b 95 14 ff ff
	ff		 mov	 edx, DWORD PTR _x$[ebp]
  002cd	51		 push	 ecx
  002ce	8b 8d 10 ff ff
	ff		 mov	 ecx, DWORD PTR _y$[ebp]
  002d4	57		 push	 edi
  002d5	53		 push	 ebx
  002d6	51		 push	 ecx
  002d7	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  002de	52		 push	 edx
  002df	51		 push	 ecx
  002e0	50		 push	 eax
  002e1	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  002e6	83 c4 34	 add	 esp, 52			; 00000034H

; 1512 : 
; 1513 : 			CItem EventItem;

  002e9	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215738[ebp]
  002ef	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1514 : 
; 1515 : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  002f4	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002fa	8b 85 1c ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00300	8b 8d 24 ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  00306	6a 03		 push	 3
  00308	6a 00		 push	 0
  0030a	68 ff 00 00 00	 push	 255			; 000000ffH
  0030f	6a 00		 push	 0
  00311	6a 00		 push	 0
  00313	6a 01		 push	 1
  00315	6a 00		 push	 0
  00317	52		 push	 edx
  00318	50		 push	 eax
  00319	51		 push	 ecx
  0031a	53		 push	 ebx
  0031b	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215738[ebp]
  00321	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 1516 : 
; 1517 : 			LogAddTD("[%s][%s][Lucky Box Item Drop] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 1518 : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 1519 : 				type, level, Option1, Option2, Option3);

  00326	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  0032c	8b 85 1c ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00332	8b 8d 24 ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  00338	52		 push	 edx
  00339	50		 push	 eax
  0033a	51		 push	 ecx
  0033b	57		 push	 edi
  0033c	53		 push	 ebx
  0033d	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215738[ebp]
  00343	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00348	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  0034f	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00356	50		 push	 eax
  00357	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  0035e	52		 push	 edx
  0035f	50		 push	 eax
  00360	51		 push	 ecx
  00361	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00364	52		 push	 edx
  00365	83 c6 6c	 add	 esi, 108		; 0000006cH
  00368	56		 push	 esi
  00369	68 00 00 00 00	 push	 OFFSET ??_C@_0FK@KOHFDIAF@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?5?3?5@
  0036e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00374	83 c4 30	 add	 esp, 48			; 00000030H
  00377	5f		 pop	 edi
  00378	5b		 pop	 ebx
  00379	5e		 pop	 esi

; 1532 : 	}
; 1533 : }

  0037a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0037d	33 cd		 xor	 ecx, ebp
  0037f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00384	8b e5		 mov	 esp, ebp
  00386	5d		 pop	 ebp
  00387	c3		 ret	 0
$LN24@LuckyBoxOp:

; 1520 : 
; 1521 : 			return;
; 1522 : 		}	
; 1523 : 	}
; 1524 : 
; 1525 : 	for(int n=0;n<(rand()%4+3);n++)

  00388	c7 85 24 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _n$215740[ebp], 0
  00392	e8 00 00 00 00	 call	 _rand
  00397	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  0039c	79 05		 jns	 SHORT $LN33@LuckyBoxOp
  0039e	48		 dec	 eax
  0039f	83 c8 fc	 or	 eax, -4			; fffffffcH
  003a2	40		 inc	 eax
$LN33@LuckyBoxOp:
  003a3	83 c0 03	 add	 eax, 3
  003a6	85 c0		 test	 eax, eax
  003a8	7e 7c		 jle	 SHORT $LN27@LuckyBoxOp
  003aa	8d 9b 00 00 00
	00		 npad	 6
$LL25@LuckyBoxOp:

; 1526 : 	{
; 1527 : 		x = lpObj->X-2;

  003b0	0f bf be 44 01
	00 00		 movsx	 edi, WORD PTR [esi+324]

; 1528 : 		y = lpObj->Y-2;

  003b7	0f bf 9e 46 01
	00 00		 movsx	 ebx, WORD PTR [esi+326]
  003be	83 ef 02	 sub	 edi, 2
  003c1	83 eb 02	 sub	 ebx, 2

; 1529 : 		x+= rand()%3;

  003c4	e8 00 00 00 00	 call	 _rand
  003c9	99		 cdq
  003ca	b9 03 00 00 00	 mov	 ecx, 3
  003cf	f7 f9		 idiv	 ecx
  003d1	03 fa		 add	 edi, edx

; 1530 : 		y+= rand()%3;

  003d3	e8 00 00 00 00	 call	 _rand
  003d8	99		 cdq
  003d9	b9 03 00 00 00	 mov	 ecx, 3
  003de	f7 f9		 idiv	 ecx

; 1531 : 		MapC[lpObj->MapNumber].MoneyItemDrop(1000, x, y);

  003e0	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  003e7	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  003ed	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  003f3	03 da		 add	 ebx, edx
  003f5	53		 push	 ebx
  003f6	57		 push	 edi
  003f7	68 e8 03 00 00	 push	 1000			; 000003e8H
  003fc	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
  00401	8b bd 24 ff ff
	ff		 mov	 edi, DWORD PTR _n$215740[ebp]
  00407	47		 inc	 edi
  00408	89 bd 24 ff ff
	ff		 mov	 DWORD PTR _n$215740[ebp], edi
  0040e	e8 00 00 00 00	 call	 _rand
  00413	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  00418	79 05		 jns	 SHORT $LN34@LuckyBoxOp

; 1520 : 
; 1521 : 			return;
; 1522 : 		}	
; 1523 : 	}
; 1524 : 
; 1525 : 	for(int n=0;n<(rand()%4+3);n++)

  0041a	48		 dec	 eax
  0041b	83 c8 fc	 or	 eax, -4			; fffffffcH
  0041e	40		 inc	 eax
$LN34@LuckyBoxOp:
  0041f	83 c0 03	 add	 eax, 3
  00422	3b f8		 cmp	 edi, eax
  00424	7c 8a		 jl	 SHORT $LL25@LuckyBoxOp
$LN27@LuckyBoxOp:
  00426	5f		 pop	 edi
  00427	5b		 pop	 ebx
$LN1@LuckyBoxOp:

; 1532 : 	}
; 1533 : }

  00428	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0042b	33 cd		 xor	 ecx, ebp
  0042d	5e		 pop	 esi
  0042e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00433	8b e5		 mov	 esp, ebp
  00435	5d		 pop	 ebp
  00436	c3		 ret	 0
?LuckyBoxOpenEven@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; LuckyBoxOpenEven
_TEXT	ENDS
PUBLIC	??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@ ; `string'
PUBLIC	?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z	; AttackEvent53BagOpen
EXTRN	?gObjMonsterTopHitDamageUser@@YAHPAUOBJECTSTRUCT@@@Z:PROC ; gObjMonsterTopHitDamageUser
EXTRN	?Mon53@@3PAVCItemBag@@A:DWORD			; Mon53
;	COMDAT ??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@ DB 'E'
	DB	'vent ItemDrop(53) : Item:%d Level:%d op1:%d op2:%d op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_x$ = -24						; size = 4
_y$ = -20						; size = 4
_rnd2$215761 = -16					; size = 4
_Option1$ = -12						; size = 4
_Option2$ = -8						; size = 4
_Option3$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z PROC	; AttackEvent53BagOpen, COMDAT

; 1538 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H

; 1539 : 	float dur;
; 1540 : 	int type;
; 1541 : 	int level;
; 1542 : 	int x;
; 1543 : 	int y;
; 1544 : 	int Option1=0;
; 1545 : 	int Option2=0;
; 1546 : 	int Option3=0;
; 1547 : 	int DropItemNum;
; 1548 : 
; 1549 : 
; 1550 : 	if ( !Mon53 )

  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  0000b	33 c9		 xor	 ecx, ecx
  0000d	89 4d f4	 mov	 DWORD PTR _Option1$[ebp], ecx
  00010	89 4d f8	 mov	 DWORD PTR _Option2$[ebp], ecx
  00013	89 4d fc	 mov	 DWORD PTR _Option3$[ebp], ecx
  00016	3b c1		 cmp	 eax, ecx
  00018	75 06		 jne	 SHORT $LN16@AttackEven

; 1551 : 		return FALSE;

  0001a	33 c0		 xor	 eax, eax

; 1622 : }

  0001c	8b e5		 mov	 esp, ebp
  0001e	5d		 pop	 ebp
  0001f	c3		 ret	 0
$LN16@AttackEven:
  00020	56		 push	 esi

; 1552 : 
; 1553 : 	if ( Mon53->GetBagCount() > 0 )

  00021	8b b0 88 03 00
	00		 mov	 esi, DWORD PTR [eax+904]
  00027	3b f1		 cmp	 esi, ecx
  00029	0f 8e 9a 01 00
	00		 jle	 $LN15@AttackEven

; 1554 : 	{
; 1555 : 	
; 1556 : 		DropItemNum = rand()%Mon53->GetBagCount();

  0002f	53		 push	 ebx
  00030	57		 push	 edi
  00031	e8 00 00 00 00	 call	 _rand
  00036	99		 cdq
  00037	f7 fe		 idiv	 esi

; 1557 : 		dur=0;
; 1558 : 		x = lpObj->X;

  00039	8b 7d 08	 mov	 edi, DWORD PTR _lpObj$[ebp]

; 1559 : 		y = lpObj->Y;

  0003c	0f bf 8f 46 01
	00 00		 movsx	 ecx, WORD PTR [edi+326]
  00043	0f bf 87 44 01
	00 00		 movsx	 eax, WORD PTR [edi+324]
  0004a	89 4d ec	 mov	 DWORD PTR _y$[ebp], ecx

; 1560 : 		level = Mon53->GetLevel(DropItemNum);

  0004d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  00053	89 45 e8	 mov	 DWORD PTR _x$[ebp], eax
  00056	8b f2		 mov	 esi, edx
  00058	56		 push	 esi
  00059	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel

; 1561 : 		type = ItemGetNumberMake(Mon53->GetType(DropItemNum), Mon53->GetIndex(DropItemNum));

  0005e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  00064	56		 push	 esi
  00065	0f b6 d8	 movzx	 ebx, al
  00068	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  0006d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon53@@3PAVCItemBag@@A ; Mon53
  00073	0f b6 d0	 movzx	 edx, al
  00076	52		 push	 edx
  00077	56		 push	 esi
  00078	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  0007d	0f b6 c0	 movzx	 eax, al
  00080	50		 push	 eax
  00081	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  00086	83 c4 08	 add	 esp, 8
  00089	8b f0		 mov	 esi, eax

; 1562 : 
; 1563 : 		if ( (rand()%100)<6)

  0008b	e8 00 00 00 00	 call	 _rand
  00090	99		 cdq
  00091	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00096	f7 f9		 idiv	 ecx
  00098	83 fa 06	 cmp	 edx, 6
  0009b	7d 07		 jge	 SHORT $LN14@AttackEven

; 1564 : 			Option1 = 1;

  0009d	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN14@AttackEven:

; 1565 : 		
; 1566 : 		if ( (rand()%100)<4)

  000a4	e8 00 00 00 00	 call	 _rand
  000a9	99		 cdq
  000aa	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000af	f7 f9		 idiv	 ecx
  000b1	83 fa 04	 cmp	 edx, 4
  000b4	7d 07		 jge	 SHORT $LN13@AttackEven

; 1567 : 			Option2 = 1;

  000b6	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 1
$LN13@AttackEven:

; 1568 : 
; 1569 : 		int rnd1;
; 1570 : 		int rnd2 = rand() % 3;

  000bd	e8 00 00 00 00	 call	 _rand
  000c2	99		 cdq
  000c3	b9 03 00 00 00	 mov	 ecx, 3
  000c8	f7 f9		 idiv	 ecx
  000ca	89 55 f0	 mov	 DWORD PTR _rnd2$215761[ebp], edx

; 1571 : 		rnd1 = rand() % 100;

  000cd	e8 00 00 00 00	 call	 _rand
  000d2	99		 cdq
  000d3	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000d8	f7 f9		 idiv	 ecx

; 1572 : 
; 1573 : 		switch ( rnd2 )

  000da	8b 45 f0	 mov	 eax, DWORD PTR _rnd2$215761[ebp]
  000dd	33 c9		 xor	 ecx, ecx
  000df	2b c1		 sub	 eax, ecx
  000e1	74 22		 je	 SHORT $LN10@AttackEven
  000e3	48		 dec	 eax
  000e4	74 11		 je	 SHORT $LN8@AttackEven
  000e6	48		 dec	 eax
  000e7	75 28		 jne	 SHORT $LN9@AttackEven

; 1583 : 			case 2:
; 1584 : 				if ( rnd1 < 12 )

  000e9	83 fa 0c	 cmp	 edx, 12			; 0000000cH
  000ec	7d 23		 jge	 SHORT $LN9@AttackEven

; 1585 : 					Option3 = 1;

  000ee	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 1

; 1586 : 				break;

  000f5	eb 1a		 jmp	 SHORT $LN9@AttackEven
$LN8@AttackEven:

; 1578 : 				break;
; 1579 : 			case 1:
; 1580 : 				if ( rnd1 < 8 )

  000f7	83 fa 08	 cmp	 edx, 8
  000fa	7d 15		 jge	 SHORT $LN9@AttackEven

; 1581 : 					Option3 = 2;

  000fc	c7 45 fc 02 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 2

; 1582 : 				break;

  00103	eb 0c		 jmp	 SHORT $LN9@AttackEven
$LN10@AttackEven:

; 1574 : 		{
; 1575 : 			case 0:
; 1576 : 				if ( rnd1 < 4 )

  00105	83 fa 04	 cmp	 edx, 4
  00108	7d 07		 jge	 SHORT $LN9@AttackEven

; 1577 : 					Option3 = 3;

  0010a	c7 45 fc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3
$LN9@AttackEven:

; 1587 : 		}
; 1588 : 
; 1589 : 		if ( type == ITEMGET(12,15) ||
; 1590 : 			 type == ITEMGET(14,13) ||
; 1591 : 			 type == ITEMGET(14,14) )

  00111	81 fe 0f 18 00
	00		 cmp	 esi, 6159		; 0000180fH
  00117	74 10		 je	 SHORT $LN3@AttackEven
  00119	81 fe 0d 1c 00
	00		 cmp	 esi, 7181		; 00001c0dH
  0011f	74 08		 je	 SHORT $LN3@AttackEven
  00121	81 fe 0e 1c 00
	00		 cmp	 esi, 7182		; 00001c0eH
  00127	75 0b		 jne	 SHORT $LN4@AttackEven
$LN3@AttackEven:

; 1592 : 		{
; 1593 : 			Option1=0;

  00129	89 4d f4	 mov	 DWORD PTR _Option1$[ebp], ecx

; 1594 : 			Option2=0;

  0012c	89 4d f8	 mov	 DWORD PTR _Option2$[ebp], ecx

; 1595 : 			Option3=0;

  0012f	89 4d fc	 mov	 DWORD PTR _Option3$[ebp], ecx

; 1596 : 			level = 0;

  00132	33 db		 xor	 ebx, ebx
$LN4@AttackEven:

; 1597 : 		}
; 1598 : 
; 1599 : 		if ( type == ITEMGET(13,0) ||
; 1600 : 			 type == ITEMGET(13,1) ||
; 1601 : 			 type == ITEMGET(13,2) ||
; 1602 : 			 type == ITEMGET(13,8) ||
; 1603 : 			 type == ITEMGET(13,9) ||
; 1604 : 			 type == ITEMGET(13,12) ||
; 1605 : 			 type == ITEMGET(13,13) )

  00134	81 fe 00 1a 00
	00		 cmp	 esi, 6656		; 00001a00H
  0013a	74 30		 je	 SHORT $LN1@AttackEven
  0013c	81 fe 01 1a 00
	00		 cmp	 esi, 6657		; 00001a01H
  00142	74 28		 je	 SHORT $LN1@AttackEven
  00144	81 fe 02 1a 00
	00		 cmp	 esi, 6658		; 00001a02H
  0014a	74 20		 je	 SHORT $LN1@AttackEven
  0014c	81 fe 08 1a 00
	00		 cmp	 esi, 6664		; 00001a08H
  00152	74 18		 je	 SHORT $LN1@AttackEven
  00154	81 fe 09 1a 00
	00		 cmp	 esi, 6665		; 00001a09H
  0015a	74 10		 je	 SHORT $LN1@AttackEven
  0015c	81 fe 0c 1a 00
	00		 cmp	 esi, 6668		; 00001a0cH
  00162	74 08		 je	 SHORT $LN1@AttackEven
  00164	81 fe 0d 1a 00
	00		 cmp	 esi, 6669		; 00001a0dH
  0016a	75 02		 jne	 SHORT $LN2@AttackEven
$LN1@AttackEven:

; 1606 : 		{
; 1607 : 			level = 0;

  0016c	33 db		 xor	 ebx, ebx
$LN2@AttackEven:

; 1608 : 		}
; 1609 : 
; 1610 : 		int iMaxHitIndex = gObjMonsterTopHitDamageUser(lpObj);

  0016e	57		 push	 edi
  0016f	e8 00 00 00 00	 call	 ?gObjMonsterTopHitDamageUser@@YAHPAUOBJECTSTRUCT@@@Z ; gObjMonsterTopHitDamageUser

; 1611 : 
; 1612 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1613 : 			(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, iMaxHitIndex, 0, 0);

  00174	8b 55 fc	 mov	 edx, DWORD PTR _Option3$[ebp]
  00177	8b 4d f4	 mov	 ecx, DWORD PTR _Option1$[ebp]
  0017a	6a 00		 push	 0
  0017c	6a 00		 push	 0
  0017e	50		 push	 eax
  0017f	8b 45 f8	 mov	 eax, DWORD PTR _Option2$[ebp]
  00182	52		 push	 edx
  00183	8b 55 ec	 mov	 edx, DWORD PTR _y$[ebp]
  00186	50		 push	 eax
  00187	8b 45 e8	 mov	 eax, DWORD PTR _x$[ebp]
  0018a	51		 push	 ecx
  0018b	0f b6 8f 49 01
	00 00		 movzx	 ecx, BYTE PTR [edi+329]
  00192	6a 00		 push	 0
  00194	53		 push	 ebx
  00195	56		 push	 esi
  00196	52		 push	 edx
  00197	8b 17		 mov	 edx, DWORD PTR [edi]
  00199	50		 push	 eax
  0019a	51		 push	 ecx
  0019b	52		 push	 edx
  0019c	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 1614 : 
; 1615 : 		LogAdd("Event ItemDrop(53) : Item:%d Level:%d op1:%d op2:%d op3:%d",
; 1616 : 			type, level, Option1, Option2, Option3);

  001a1	8b 45 fc	 mov	 eax, DWORD PTR _Option3$[ebp]
  001a4	8b 4d f8	 mov	 ecx, DWORD PTR _Option2$[ebp]
  001a7	8b 55 f4	 mov	 edx, DWORD PTR _Option1$[ebp]
  001aa	50		 push	 eax
  001ab	51		 push	 ecx
  001ac	52		 push	 edx
  001ad	53		 push	 ebx
  001ae	56		 push	 esi
  001af	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@KCOPLAHJ@Event?5ItemDrop?$CI53?$CJ?5?3?5Item?3?$CFd?5Lev@
  001b4	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  001ba	83 c4 50	 add	 esp, 80			; 00000050H
  001bd	5f		 pop	 edi
  001be	5b		 pop	 ebx

; 1617 : 
; 1618 : 		return TRUE;

  001bf	b8 01 00 00 00	 mov	 eax, 1
  001c4	5e		 pop	 esi

; 1622 : }

  001c5	8b e5		 mov	 esp, ebp
  001c7	5d		 pop	 ebp
  001c8	c3		 ret	 0
$LN15@AttackEven:

; 1619 : 	}
; 1620 : 
; 1621 : 	return FALSE;

  001c9	33 c0		 xor	 eax, eax
  001cb	5e		 pop	 esi

; 1622 : }

  001cc	8b e5		 mov	 esp, ebp
  001ce	5d		 pop	 ebp
  001cf	c3		 ret	 0
?AttackEvent53BagOpen@@YAHPAUOBJECTSTRUCT@@@Z ENDP	; AttackEvent53BagOpen
_TEXT	ENDS
PUBLIC	??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@ ; `string'
PUBLIC	?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z	; AttackEvent55BagOpen
EXTRN	?Mon55@@3PAVCItemBag@@A:DWORD			; Mon55
;	COMDAT ??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@ DB 'E'
	DB	'vent ItemDrop(55) : Item:%d Level:%d op1:%d op2:%d op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_x$ = -24						; size = 4
_y$ = -20						; size = 4
_rnd2$215803 = -16					; size = 4
_Option1$ = -12						; size = 4
_Option2$ = -8						; size = 4
_Option3$ = -4						; size = 4
_lpObj$ = 8						; size = 4
?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z PROC	; AttackEvent55BagOpen, COMDAT

; 1627 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H

; 1628 : 	float dur;
; 1629 : 	int type;
; 1630 : 	int level;
; 1631 : 	int x;
; 1632 : 	int y;
; 1633 : 	int Option1=0;
; 1634 : 	int Option2=0;
; 1635 : 	int Option3=0;
; 1636 : 	int DropItemNum;
; 1637 : 
; 1638 : 
; 1639 : 	if ( !Mon55 )

  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  0000b	33 c9		 xor	 ecx, ecx
  0000d	89 4d f4	 mov	 DWORD PTR _Option1$[ebp], ecx
  00010	89 4d f8	 mov	 DWORD PTR _Option2$[ebp], ecx
  00013	89 4d fc	 mov	 DWORD PTR _Option3$[ebp], ecx
  00016	3b c1		 cmp	 eax, ecx
  00018	75 06		 jne	 SHORT $LN18@AttackEven@2

; 1640 : 		return FALSE;

  0001a	33 c0		 xor	 eax, eax

; 1745 : }

  0001c	8b e5		 mov	 esp, ebp
  0001e	5d		 pop	 ebp
  0001f	c3		 ret	 0
$LN18@AttackEven@2:
  00020	56		 push	 esi

; 1641 : 
; 1642 : 	if ( Mon55->GetBagCount() > 0 )

  00021	8b b0 88 03 00
	00		 mov	 esi, DWORD PTR [eax+904]
  00027	3b f1		 cmp	 esi, ecx
  00029	0f 8e a9 02 00
	00		 jle	 $LN17@AttackEven@2

; 1643 : 	{
; 1644 : 	
; 1645 : 		DropItemNum = rand()%Mon55->GetBagCount();

  0002f	53		 push	 ebx
  00030	57		 push	 edi
  00031	e8 00 00 00 00	 call	 _rand
  00036	99		 cdq
  00037	f7 fe		 idiv	 esi

; 1646 : 		dur=0;
; 1647 : 		x = lpObj->X;

  00039	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003c	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00043	89 4d e8	 mov	 DWORD PTR _x$[ebp], ecx

; 1648 : 		y = lpObj->Y;
; 1649 : 		level = Mon55->GetLevel(DropItemNum) + rand() % 2;

  00046	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  0004c	8b da		 mov	 ebx, edx
  0004e	0f bf 90 46 01
	00 00		 movsx	 edx, WORD PTR [eax+326]
  00055	53		 push	 ebx
  00056	89 55 ec	 mov	 DWORD PTR _y$[ebp], edx
  00059	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0005e	0f b6 f8	 movzx	 edi, al
  00061	e8 00 00 00 00	 call	 _rand
  00066	8b f0		 mov	 esi, eax
  00068	81 e6 01 00 00
	80		 and	 esi, -2147483647	; 80000001H
  0006e	79 05		 jns	 SHORT $LN27@AttackEven@2
  00070	4e		 dec	 esi
  00071	83 ce fe	 or	 esi, -2			; fffffffeH
  00074	46		 inc	 esi
$LN27@AttackEven@2:

; 1650 : 		type = ItemGetNumberMake(Mon55->GetType(DropItemNum), Mon55->GetIndex(DropItemNum));

  00075	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  0007b	53		 push	 ebx
  0007c	03 f7		 add	 esi, edi
  0007e	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  00083	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  00089	0f b6 c0	 movzx	 eax, al
  0008c	50		 push	 eax
  0008d	53		 push	 ebx
  0008e	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  00093	0f b6 c8	 movzx	 ecx, al
  00096	51		 push	 ecx
  00097	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  0009c	83 c4 08	 add	 esp, 8
  0009f	8b f8		 mov	 edi, eax

; 1651 : 
; 1652 : 		if ( (rand()%100)<6)

  000a1	e8 00 00 00 00	 call	 _rand
  000a6	99		 cdq
  000a7	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000ac	f7 f9		 idiv	 ecx
  000ae	83 fa 06	 cmp	 edx, 6
  000b1	7d 07		 jge	 SHORT $LN16@AttackEven@2

; 1653 : 			Option1 = 1;

  000b3	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _Option1$[ebp], 1
$LN16@AttackEven@2:

; 1654 : 		
; 1655 : 		if ( (rand()%100)<4)

  000ba	e8 00 00 00 00	 call	 _rand
  000bf	99		 cdq
  000c0	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000c5	f7 f9		 idiv	 ecx
  000c7	83 fa 04	 cmp	 edx, 4
  000ca	7d 07		 jge	 SHORT $LN15@AttackEven@2

; 1656 : 			Option2 = 1;

  000cc	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _Option2$[ebp], 1
$LN15@AttackEven@2:

; 1657 : 
; 1658 : 		int rnd1;
; 1659 : 		int rnd2 = rand() % 3;

  000d3	e8 00 00 00 00	 call	 _rand
  000d8	99		 cdq
  000d9	b9 03 00 00 00	 mov	 ecx, 3
  000de	f7 f9		 idiv	 ecx
  000e0	89 55 f0	 mov	 DWORD PTR _rnd2$215803[ebp], edx

; 1660 : 		rnd1 = rand() % 100;

  000e3	e8 00 00 00 00	 call	 _rand
  000e8	99		 cdq
  000e9	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000ee	f7 f9		 idiv	 ecx

; 1661 : 
; 1662 : 		switch ( rnd2 )

  000f0	8b 45 f0	 mov	 eax, DWORD PTR _rnd2$215803[ebp]
  000f3	33 c9		 xor	 ecx, ecx
  000f5	2b c1		 sub	 eax, ecx
  000f7	74 22		 je	 SHORT $LN12@AttackEven@2
  000f9	48		 dec	 eax
  000fa	74 11		 je	 SHORT $LN10@AttackEven@2
  000fc	48		 dec	 eax
  000fd	75 28		 jne	 SHORT $LN11@AttackEven@2

; 1672 : 			case 2:
; 1673 : 				if ( rnd1 < 12 )

  000ff	83 fa 0c	 cmp	 edx, 12			; 0000000cH
  00102	7d 23		 jge	 SHORT $LN11@AttackEven@2

; 1674 : 					Option3 = 1;

  00104	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 1

; 1675 : 				break;

  0010b	eb 1a		 jmp	 SHORT $LN11@AttackEven@2
$LN10@AttackEven@2:

; 1667 : 				break;
; 1668 : 			case 1:
; 1669 : 				if ( rnd1 < 8 )

  0010d	83 fa 08	 cmp	 edx, 8
  00110	7d 15		 jge	 SHORT $LN11@AttackEven@2

; 1670 : 					Option3 = 2;

  00112	c7 45 fc 02 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 2

; 1671 : 				break;

  00119	eb 0c		 jmp	 SHORT $LN11@AttackEven@2
$LN12@AttackEven@2:

; 1663 : 		{
; 1664 : 			case 0:
; 1665 : 				if ( rnd1 < 4 )

  0011b	83 fa 04	 cmp	 edx, 4
  0011e	7d 07		 jge	 SHORT $LN11@AttackEven@2

; 1666 : 					Option3 = 3;

  00120	c7 45 fc 03 00
	00 00		 mov	 DWORD PTR _Option3$[ebp], 3
$LN11@AttackEven@2:

; 1676 : 		}
; 1677 : 
; 1678 : 		if ( type == ITEMGET(12,15) ||
; 1679 : 				type == ITEMGET(14,13) ||
; 1680 : 				type == ITEMGET(14,14) ||
; 1681 : 				type == ITEMGET(14,14) ||
; 1682 : 				type == ITEMGET(14,16)	||
; 1683 : 				type == ITEMGET(14,22)	||
; 1684 : 				type == ITEMGET(14,31)	||
; 1685 : 				type == ITEMGET(14,41)	||
; 1686 : 				type == ITEMGET(14,42)	||
; 1687 : 				type == ITEMGET(14,180)||
; 1688 : 				type == ITEMGET(14,181)||
; 1689 : 				type == ITEMGET(14,182)||
; 1690 : 				type == ITEMGET(14,183)||
; 1691 : 				type == ITEMGET(14,184)||
; 1692 : 				type == ITEMGET(14,185)||
; 1693 : 				type == ITEMGET(14,186)||
; 1694 : 				type == ITEMGET(14,187)||
; 1695 : 				type == ITEMGET(14,190)||
; 1696 : 				type == ITEMGET(14,43) ||
; 1697 : 				type == ITEMGET(14,44) )

  00127	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  0012d	0f 84 98 00 00
	00		 je	 $LN5@AttackEven@2
  00133	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  00139	0f 84 8c 00 00
	00		 je	 $LN5@AttackEven@2
  0013f	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  00145	0f 84 80 00 00
	00		 je	 $LN5@AttackEven@2
  0014b	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  00151	74 78		 je	 SHORT $LN5@AttackEven@2
  00153	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  00159	74 70		 je	 SHORT $LN5@AttackEven@2
  0015b	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  00161	74 68		 je	 SHORT $LN5@AttackEven@2
  00163	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  00169	74 60		 je	 SHORT $LN5@AttackEven@2
  0016b	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  00171	74 58		 je	 SHORT $LN5@AttackEven@2
  00173	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  00179	74 50		 je	 SHORT $LN5@AttackEven@2
  0017b	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  00181	74 48		 je	 SHORT $LN5@AttackEven@2
  00183	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  00189	74 40		 je	 SHORT $LN5@AttackEven@2
  0018b	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  00191	74 38		 je	 SHORT $LN5@AttackEven@2
  00193	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  00199	74 30		 je	 SHORT $LN5@AttackEven@2
  0019b	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  001a1	74 28		 je	 SHORT $LN5@AttackEven@2
  001a3	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  001a9	74 20		 je	 SHORT $LN5@AttackEven@2
  001ab	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  001b1	74 18		 je	 SHORT $LN5@AttackEven@2
  001b3	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  001b9	74 10		 je	 SHORT $LN5@AttackEven@2
  001bb	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  001c1	74 08		 je	 SHORT $LN5@AttackEven@2
  001c3	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  001c9	75 0b		 jne	 SHORT $LN6@AttackEven@2
$LN5@AttackEven@2:

; 1698 : 		{
; 1699 : 			Option1 = 0;

  001cb	89 4d f4	 mov	 DWORD PTR _Option1$[ebp], ecx

; 1700 : 			Option2 = 0;

  001ce	89 4d f8	 mov	 DWORD PTR _Option2$[ebp], ecx

; 1701 : 			Option3 = 0;

  001d1	89 4d fc	 mov	 DWORD PTR _Option3$[ebp], ecx

; 1702 : 			level = 0;

  001d4	33 f6		 xor	 esi, esi
$LN6@AttackEven@2:

; 1703 : 		}
; 1704 : 
; 1705 : 		if ( type == ITEMGET(12,30)	||
; 1706 : 				type == ITEMGET(12,31)	||
; 1707 : 				type == ITEMGET(12,136)||
; 1708 : 				type == ITEMGET(12,137)||
; 1709 : 				type == ITEMGET(12,138)||
; 1710 : 				type == ITEMGET(12,139)||
; 1711 : 				type == ITEMGET(12,140)||
; 1712 : 				type == ITEMGET(12,141)||
; 1713 : 				type == ITEMGET(12,142)||
; 1714 : 				type == ITEMGET(12,143))

  001d6	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  001dc	74 48		 je	 SHORT $LN3@AttackEven@2
  001de	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  001e4	74 40		 je	 SHORT $LN3@AttackEven@2
  001e6	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  001ec	74 38		 je	 SHORT $LN3@AttackEven@2
  001ee	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  001f4	74 30		 je	 SHORT $LN3@AttackEven@2
  001f6	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  001fc	74 28		 je	 SHORT $LN3@AttackEven@2
  001fe	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  00204	74 20		 je	 SHORT $LN3@AttackEven@2
  00206	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  0020c	74 18		 je	 SHORT $LN3@AttackEven@2
  0020e	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  00214	74 10		 je	 SHORT $LN3@AttackEven@2
  00216	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  0021c	74 08		 je	 SHORT $LN3@AttackEven@2
  0021e	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  00224	75 1a		 jne	 SHORT $LN4@AttackEven@2
$LN3@AttackEven@2:

; 1715 : 		{
; 1716 : 			Option1 = 0;

  00226	89 4d f4	 mov	 DWORD PTR _Option1$[ebp], ecx

; 1717 : 			Option2 = 0;

  00229	89 4d f8	 mov	 DWORD PTR _Option2$[ebp], ecx

; 1718 : 			Option3 = 0;

  0022c	89 4d fc	 mov	 DWORD PTR _Option3$[ebp], ecx

; 1719 : 			level = Mon55->GetLevel(DropItemNum);

  0022f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?Mon55@@3PAVCItemBag@@A ; Mon55
  00235	53		 push	 ebx
  00236	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  0023b	0f b6 f0	 movzx	 esi, al
  0023e	33 c9		 xor	 ecx, ecx
$LN4@AttackEven@2:

; 1720 : 		}
; 1721 : 
; 1722 : 		if ( type == ITEMGET(13,0) ||
; 1723 : 			 type == ITEMGET(13,1) ||
; 1724 : 			 type == ITEMGET(13,2) ||
; 1725 : 			 type == ITEMGET(13,8) ||
; 1726 : 			 type == ITEMGET(13,9) ||
; 1727 : 			 type == ITEMGET(13,12) ||
; 1728 : 			 type == ITEMGET(13,13) )

  00240	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  00246	74 30		 je	 SHORT $LN1@AttackEven@2
  00248	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  0024e	74 28		 je	 SHORT $LN1@AttackEven@2
  00250	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  00256	74 20		 je	 SHORT $LN1@AttackEven@2
  00258	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  0025e	74 18		 je	 SHORT $LN1@AttackEven@2
  00260	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  00266	74 10		 je	 SHORT $LN1@AttackEven@2
  00268	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  0026e	74 08		 je	 SHORT $LN1@AttackEven@2
  00270	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  00276	75 02		 jne	 SHORT $LN2@AttackEven@2
$LN1@AttackEven@2:

; 1729 : 		{
; 1730 : 			level = 0;

  00278	33 f6		 xor	 esi, esi
$LN2@AttackEven@2:

; 1731 : 		}
; 1732 : 
; 1733 : 		int iMaxHitIndex = gObjMonsterTopHitDamageUser(lpObj);

  0027a	8b 5d 08	 mov	 ebx, DWORD PTR _lpObj$[ebp]
  0027d	53		 push	 ebx
  0027e	e8 00 00 00 00	 call	 ?gObjMonsterTopHitDamageUser@@YAHPAUOBJECTSTRUCT@@@Z ; gObjMonsterTopHitDamageUser

; 1734 : 
; 1735 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1736 : 			(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, iMaxHitIndex, 0, 0);

  00283	8b 55 fc	 mov	 edx, DWORD PTR _Option3$[ebp]
  00286	8b 4d f4	 mov	 ecx, DWORD PTR _Option1$[ebp]
  00289	6a 00		 push	 0
  0028b	6a 00		 push	 0
  0028d	50		 push	 eax
  0028e	8b 45 f8	 mov	 eax, DWORD PTR _Option2$[ebp]
  00291	52		 push	 edx
  00292	8b 55 ec	 mov	 edx, DWORD PTR _y$[ebp]
  00295	50		 push	 eax
  00296	8b 45 e8	 mov	 eax, DWORD PTR _x$[ebp]
  00299	51		 push	 ecx
  0029a	0f b6 8b 49 01
	00 00		 movzx	 ecx, BYTE PTR [ebx+329]
  002a1	6a 00		 push	 0
  002a3	56		 push	 esi
  002a4	57		 push	 edi
  002a5	52		 push	 edx
  002a6	8b 13		 mov	 edx, DWORD PTR [ebx]
  002a8	50		 push	 eax
  002a9	51		 push	 ecx
  002aa	52		 push	 edx
  002ab	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend

; 1737 : 
; 1738 : 		LogAdd("Event ItemDrop(55) : Item:%d Level:%d op1:%d op2:%d op3:%d",
; 1739 : 			type, level, Option1, Option2, Option3);

  002b0	8b 45 fc	 mov	 eax, DWORD PTR _Option3$[ebp]
  002b3	8b 4d f8	 mov	 ecx, DWORD PTR _Option2$[ebp]
  002b6	8b 55 f4	 mov	 edx, DWORD PTR _Option1$[ebp]
  002b9	50		 push	 eax
  002ba	51		 push	 ecx
  002bb	52		 push	 edx
  002bc	56		 push	 esi
  002bd	57		 push	 edi
  002be	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@OLPGIACC@Event?5ItemDrop?$CI55?$CJ?5?3?5Item?3?$CFd?5Lev@
  002c3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  002c9	83 c4 50	 add	 esp, 80			; 00000050H
  002cc	5f		 pop	 edi
  002cd	5b		 pop	 ebx

; 1740 : 
; 1741 : 		return TRUE;

  002ce	b8 01 00 00 00	 mov	 eax, 1
  002d3	5e		 pop	 esi

; 1745 : }

  002d4	8b e5		 mov	 esp, ebp
  002d6	5d		 pop	 ebp
  002d7	c3		 ret	 0
$LN17@AttackEven@2:

; 1742 : 	}
; 1743 : 
; 1744 : 	return FALSE;

  002d8	33 c0		 xor	 eax, eax
  002da	5e		 pop	 esi

; 1745 : }

  002db	8b e5		 mov	 esp, ebp
  002dd	5d		 pop	 ebp
  002de	c3		 ret	 0
?AttackEvent55BagOpen@@YAHPAUOBJECTSTRUCT@@@Z ENDP	; AttackEvent55BagOpen
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z ; EGRecvEventChipInfo
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
; Function compile flags: /Ogtp
;	COMDAT ?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z
_TEXT	SEGMENT
_eventchipeventinfo$ = -20				; size = 16
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z PROC ; EGRecvEventChipInfo, COMDAT

; 1749 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	57		 push	 edi
  00012	8b 7d 08	 mov	 edi, DWORD PTR _aRecv$[ebp]

; 1750 : 	LPOBJ lpObj = &gObj[aRecv->iINDEX];

  00015	8b 77 04	 mov	 esi, DWORD PTR [edi+4]
  00018	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0001e	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 1751 : 
; 1752 : 	PMSG_EVENTCHIPINFO eventchipeventinfo;
; 1753 : 	char msg[255];
; 1754 : 
; 1755 : 	PHeadSetB((LPBYTE)&eventchipeventinfo, 0x94, sizeof(eventchipeventinfo));

  00024	6a 10		 push	 16			; 00000010H
  00026	8d 45 ec	 lea	 eax, DWORD PTR _eventchipeventinfo$[ebp]
  00029	68 94 00 00 00	 push	 148			; 00000094H
  0002e	50		 push	 eax
  0002f	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1756 : 	eventchipeventinfo.Type = 0;
; 1757 : 	eventchipeventinfo.ChipCount = aRecv->nEVENT_CHIPS;

  00034	8b 4f 14	 mov	 ecx, DWORD PTR [edi+20]
  00037	89 4d f0	 mov	 DWORD PTR _eventchipeventinfo$[ebp+4], ecx

; 1758 : 	lpObj->EventChipCount = aRecv->nEVENT_CHIPS;

  0003a	66 8b d1	 mov	 dx, cx
  0003d	c6 45 ef 00	 mov	 BYTE PTR _eventchipeventinfo$[ebp+3], 0
  00041	66 89 96 48 10
	00 00		 mov	 WORD PTR [esi+4168], dx

; 1759 : 	lpObj->MutoNumber = aRecv->iMUTO_NUM;

  00048	8b 47 18	 mov	 eax, DWORD PTR [edi+24]
  0004b	89 86 4c 10 00
	00		 mov	 DWORD PTR [esi+4172], eax

; 1760 : 
; 1761 : 	DataSend(lpObj->m_Index, (LPBYTE)&eventchipeventinfo, eventchipeventinfo.h.size);

  00051	0f b6 4d ed	 movzx	 ecx, BYTE PTR _eventchipeventinfo$[ebp+1]
  00055	8b 06		 mov	 eax, DWORD PTR [esi]
  00057	51		 push	 ecx
  00058	8d 55 ec	 lea	 edx, DWORD PTR _eventchipeventinfo$[ebp]
  0005b	52		 push	 edx
  0005c	50		 push	 eax
  0005d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 1762 : 
; 1763 : 	lpObj->UseEventServer = FALSE;
; 1764 : }

  00062	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00065	83 c4 18	 add	 esp, 24			; 00000018H
  00068	5f		 pop	 edi
  00069	c7 86 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4176], 0
  00073	33 cd		 xor	 ecx, ebp
  00075	5e		 pop	 esi
  00076	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007b	8b e5		 mov	 esp, ebp
  0007d	5d		 pop	 ebp
  0007e	c3		 ret	 0
?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z ENDP ; EGRecvEventChipInfo
_TEXT	ENDS
PUBLIC	??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@ ; `string'
PUBLIC	??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@ ; `string'
PUBLIC	?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z ; EGResultRegEventChip
EXTRN	?GCInventoryItemDeleteSend@@YAXHEE@Z:PROC	; GCInventoryItemDeleteSend
EXTRN	?gObjInventoryDeleteItem@@YAEHH@Z:PROC		; gObjInventoryDeleteItem
;	COMDAT ??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@
CONST	SEGMENT
??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@ DB '['
	DB	'EventChip] [%s][%s] Delete EventChip (%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@
CONST	SEGMENT
??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@ DB '['
	DB	'EventChip] [%s][%s] RegEventServer Fail (RegEventchip) %d', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z
_TEXT	SEGMENT
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z PROC ; EGResultRegEventChip, COMDAT

; 1768 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1769 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1770 : 	LPOBJ lpObj;
; 1771 : 	int aIndex;
; 1772 : 
; 1773 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  00009	6a 08		 push	 8
  0000b	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  0000e	68 95 00 00 00	 push	 149			; 00000095H
  00013	50		 push	 eax
  00014	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1774 : 	lpObj = &gObj[aRecv->iINDEX];

  00019	8b 7d 08	 mov	 edi, DWORD PTR _aRecv$[ebp]
  0001c	8b 5f 04	 mov	 ebx, DWORD PTR [edi+4]
  0001f	8b f3		 mov	 esi, ebx
  00021	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00027	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1775 : 	aIndex = aRecv->iINDEX;
; 1776 : 
; 1777 : 	if ( aRecv->bSUCCESS == FALSE )

  00030	80 7f 14 00	 cmp	 BYTE PTR [edi+20], 0
  00034	75 24		 jne	 SHORT $LN2@EGResultRe

; 1778 : 	{
; 1779 : 		Result.ChipCount = -1;
; 1780 : 		LogAddTD("[EventChip] [%s][%s] RegEventServer Fail (RegEventchip) %d",
; 1781 : 			lpObj->AccountID, lpObj->Name, aRecv->Pos);

  00036	0f b6 4f 08	 movzx	 ecx, BYTE PTR [edi+8]
  0003a	51		 push	 ecx
  0003b	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0003e	52		 push	 edx
  0003f	8d 46 6c	 lea	 eax, DWORD PTR [esi+108]
  00042	50		 push	 eax
  00043	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@NPJNKEPH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventSer@
  00048	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR _Result$[ebp+4], -1
  0004f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00055	83 c4 10	 add	 esp, 16			; 00000010H

; 1782 : 
; 1783 : 	}
; 1784 : 	else

  00058	eb 39		 jmp	 SHORT $LN1@EGResultRe
$LN2@EGResultRe:

; 1785 : 	{
; 1786 : 		Result.ChipCount = aRecv->nEVENT_CHIPS;
; 1787 : 		gObjInventoryDeleteItem(aIndex, aRecv->Pos);

  0005a	0f b6 57 08	 movzx	 edx, BYTE PTR [edi+8]
  0005e	8b 4f 18	 mov	 ecx, DWORD PTR [edi+24]
  00061	52		 push	 edx
  00062	53		 push	 ebx
  00063	89 4d fc	 mov	 DWORD PTR _Result$[ebp+4], ecx
  00066	e8 00 00 00 00	 call	 ?gObjInventoryDeleteItem@@YAEHH@Z ; gObjInventoryDeleteItem

; 1788 : 		GCInventoryItemDeleteSend(aIndex, aRecv->Pos, 1);

  0006b	0f b6 47 08	 movzx	 eax, BYTE PTR [edi+8]
  0006f	6a 01		 push	 1
  00071	50		 push	 eax
  00072	53		 push	 ebx
  00073	e8 00 00 00 00	 call	 ?GCInventoryItemDeleteSend@@YAXHEE@Z ; GCInventoryItemDeleteSend

; 1789 : 
; 1790 : 		LogAddTD("[EventChip] [%s][%s] Delete EventChip (%d)",
; 1791 : 			lpObj->AccountID, lpObj->Name, aRecv->Pos);

  00078	0f b6 4f 08	 movzx	 ecx, BYTE PTR [edi+8]
  0007c	51		 push	 ecx
  0007d	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00080	52		 push	 edx
  00081	8d 46 6c	 lea	 eax, DWORD PTR [esi+108]
  00084	50		 push	 eax
  00085	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@GENGFGNN@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Even@
  0008a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00090	83 c4 24	 add	 esp, 36			; 00000024H
$LN1@EGResultRe:

; 1792 : 	}
; 1793 : 
; 1794 : 	Result.Type = 0;
; 1795 : 
; 1796 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  00093	0f b6 4d f9	 movzx	 ecx, BYTE PTR _Result$[ebp+1]
  00097	51		 push	 ecx
  00098	8d 55 f8	 lea	 edx, DWORD PTR _Result$[ebp]
  0009b	52		 push	 edx
  0009c	53		 push	 ebx
  0009d	c6 45 fb 00	 mov	 BYTE PTR _Result$[ebp+3], 0
  000a1	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000a6	83 c4 0c	 add	 esp, 12			; 0000000cH
  000a9	5f		 pop	 edi

; 1797 : 
; 1798 : 	lpObj->UseEventServer = FALSE;

  000aa	c7 86 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4176], 0
  000b4	5e		 pop	 esi
  000b5	5b		 pop	 ebx

; 1799 : }

  000b6	8b e5		 mov	 esp, ebp
  000b8	5d		 pop	 ebp
  000b9	c3		 ret	 0
?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z ENDP ; EGResultRegEventChip
_TEXT	ENDS
PUBLIC	??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z ; EGRecvRegMutoNum
EXTRN	?gObjDelete10EventChip@@YAHH@Z:PROC		; gObjDelete10EventChip
EXTRN	?gObjFind10EventChip@@YAHH@Z:PROC		; gObjFind10EventChip
;	COMDAT ??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@
CONST	SEGMENT
??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@ DB '['
	DB	'EventChip] [%s][%s] Make MutoNumber %d,%d,%d', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z
_TEXT	SEGMENT
tv194 = -20						; size = 4
_Result$ = -16						; size = 10
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z PROC ; EGRecvRegMutoNum, COMDAT

; 1802 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	8b 5d 08	 mov	 ebx, DWORD PTR _aRecv$[ebp]
  00014	56		 push	 esi
  00015	57		 push	 edi

; 1803 : 	LPOBJ lpObj;
; 1804 : 	int aIndex;
; 1805 : 	
; 1806 : 
; 1807 : 	lpObj = &gObj[aRecv->iINDEX];

  00016	8b 7b 04	 mov	 edi, DWORD PTR [ebx+4]
  00019	8b f7		 mov	 esi, edi
  0001b	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00021	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 1808 : 	aIndex = aRecv->iINDEX;
; 1809 : 
; 1810 : 	PMSG_GETMUTONUMBER_RESULT Result;
; 1811 : 
; 1812 : 	PHeadSetB((LPBYTE)&Result, 0x96, sizeof(Result));

  00027	6a 0a		 push	 10			; 0000000aH
  00029	8d 45 f0	 lea	 eax, DWORD PTR _Result$[ebp]
  0002c	68 96 00 00 00	 push	 150			; 00000096H
  00031	50		 push	 eax
  00032	89 7d ec	 mov	 DWORD PTR tv194[ebp], edi
  00035	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1813 : 	
; 1814 : 	if ( gObjFind10EventChip(aIndex) == FALSE )

  0003a	57		 push	 edi
  0003b	e8 00 00 00 00	 call	 ?gObjFind10EventChip@@YAHH@Z ; gObjFind10EventChip
  00040	83 c4 10	 add	 esp, 16			; 00000010H
  00043	85 c0		 test	 eax, eax
  00045	75 20		 jne	 SHORT $LN1@EGRecvRegM

; 1815 : 	{
; 1816 : 		Result.MutoNum[0] = -1;

  00047	83 c9 ff	 or	 ecx, -1
  0004a	66 89 4d f4	 mov	 WORD PTR _Result$[ebp+4], cx

; 1817 : 		Result.MutoNum[1] = 0;
; 1818 : 		Result.MutoNum[2] = 0;
; 1819 : 
; 1820 : 		DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  0004e	0f b6 4d f1	 movzx	 ecx, BYTE PTR _Result$[ebp+1]
  00052	33 d2		 xor	 edx, edx
  00054	89 55 f6	 mov	 DWORD PTR _Result$[ebp+6], edx
  00057	51		 push	 ecx
  00058	8d 55 f0	 lea	 edx, DWORD PTR _Result$[ebp]
  0005b	52		 push	 edx
  0005c	57		 push	 edi
  0005d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00062	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1821 : 
; 1822 : 		lpObj->UseEventServer = FALSE;
; 1823 : 
; 1824 : 		return;

  00065	eb 75		 jmp	 SHORT $LN4@EGRecvRegM
$LN1@EGRecvRegM:

; 1825 : 	}
; 1826 : 
; 1827 : 	gObjDelete10EventChip(aIndex);

  00067	57		 push	 edi
  00068	e8 00 00 00 00	 call	 ?gObjDelete10EventChip@@YAHH@Z ; gObjDelete10EventChip

; 1828 : 	Result.MutoNum[0] = aRecv->iMUTO_NUM / 1000000;

  0006d	8b 7b 14	 mov	 edi, DWORD PTR [ebx+20]
  00070	b8 83 de 1b 43	 mov	 eax, 1125899907		; 431bde83H
  00075	f7 ef		 imul	 edi
  00077	c1 fa 12	 sar	 edx, 18			; 00000012H
  0007a	8b ca		 mov	 ecx, edx
  0007c	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  0007f	03 ca		 add	 ecx, edx

; 1829 : 	Result.MutoNum[1] = aRecv->iMUTO_NUM / 1000 - aRecv->iMUTO_NUM / 1000000 * 1000;

  00081	8b c7		 mov	 eax, edi
  00083	99		 cdq
  00084	bb e8 03 00 00	 mov	 ebx, 1000		; 000003e8H
  00089	f7 fb		 idiv	 ebx
  0008b	66 89 4d f4	 mov	 WORD PTR _Result$[ebp+4], cx
  0008f	69 c9 e8 03 00
	00		 imul	 ecx, 1000		; 000003e8H
  00095	2b c1		 sub	 eax, ecx
  00097	66 89 45 f6	 mov	 WORD PTR _Result$[ebp+6], ax

; 1830 : 	Result.MutoNum[2] = aRecv->iMUTO_NUM % 1000;

  0009b	66 89 55 f8	 mov	 WORD PTR _Result$[ebp+8], dx

; 1831 : 	lpObj->MutoNumber = aRecv->iMUTO_NUM;

  0009f	89 be 4c 10 00
	00		 mov	 DWORD PTR [esi+4172], edi

; 1832 : 	
; 1833 : 	LogAddTD("[EventChip] [%s][%s] Make MutoNumber %d,%d,%d",
; 1834 : 		lpObj->AccountID, lpObj->Name, 
; 1835 : 		Result.MutoNum[0], Result.MutoNum[1], Result.MutoNum[2]);

  000a5	0f bf 45 f8	 movsx	 eax, WORD PTR _Result$[ebp+8]
  000a9	0f bf 4d f6	 movsx	 ecx, WORD PTR _Result$[ebp+6]
  000ad	0f bf 55 f4	 movsx	 edx, WORD PTR _Result$[ebp+4]
  000b1	50		 push	 eax
  000b2	51		 push	 ecx
  000b3	52		 push	 edx
  000b4	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  000b7	50		 push	 eax
  000b8	8d 4e 6c	 lea	 ecx, DWORD PTR [esi+108]
  000bb	51		 push	 ecx
  000bc	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@PLMPLCLH@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Make?5MutoNu@
  000c1	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 1836 : 
; 1837 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  000c7	0f b6 55 f1	 movzx	 edx, BYTE PTR _Result$[ebp+1]
  000cb	8b 4d ec	 mov	 ecx, DWORD PTR tv194[ebp]
  000ce	52		 push	 edx
  000cf	8d 45 f0	 lea	 eax, DWORD PTR _Result$[ebp]
  000d2	50		 push	 eax
  000d3	51		 push	 ecx
  000d4	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000d9	83 c4 28	 add	 esp, 40			; 00000028H
$LN4@EGRecvRegM:

; 1838 : 	lpObj->UseEventServer = FALSE;
; 1839 : }

  000dc	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000df	5f		 pop	 edi
  000e0	c7 86 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4176], 0
  000ea	5e		 pop	 esi
  000eb	33 cd		 xor	 ecx, ebp
  000ed	5b		 pop	 ebx
  000ee	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000f3	8b e5		 mov	 esp, ebp
  000f5	5d		 pop	 ebp
  000f6	c3		 ret	 0
?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z ENDP ; EGRecvRegMutoNum
_TEXT	ENDS
PUBLIC	??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ ; `string'
PUBLIC	??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ ; `string'
PUBLIC	?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeRena
EXTRN	?GCMoneySend@@YAXHK@Z:PROC			; GCMoneySend
;	COMDAT ??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
CONST	SEGMENT
??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ DB '['
	DB	'EventChip] [%s][%s] ChangeRena Fail', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
CONST	SEGMENT
??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@ DB '['
	DB	'EventChip] [%s][%s] ChangeRena AddMoney(%d)', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z
_TEXT	SEGMENT
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z PROC ; EGRecvChangeRena, COMDAT

; 1844 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	56		 push	 esi
  00007	57		 push	 edi

; 1845 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1846 : 	LPOBJ lpObj;
; 1847 : 	int aIndex;
; 1848 : 
; 1849 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  00008	6a 08		 push	 8
  0000a	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  0000d	68 95 00 00 00	 push	 149			; 00000095H
  00012	50		 push	 eax
  00013	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1850 : 	lpObj = &gObj[aRecv->iINDEX];

  00018	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0001b	8b 78 04	 mov	 edi, DWORD PTR [eax+4]
  0001e	8b f7		 mov	 esi, edi
  00020	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00026	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1851 : 	aIndex = aRecv->iINDEX;
; 1852 : 
; 1853 : 	if ( aRecv->bSUCCESS != FALSE )

  0002f	80 78 13 00	 cmp	 BYTE PTR [eax+19], 0
  00033	74 46		 je	 SHORT $LN2@EGRecvChan

; 1854 : 	{
; 1855 : 		lpObj->Money += lpObj->EventChipCount * 3000;

  00035	0f bf 8e 48 10
	00 00		 movsx	 ecx, WORD PTR [esi+4168]
  0003c	69 c9 b8 0b 00
	00		 imul	 ecx, 3000		; 00000bb8H
  00042	01 8e f0 00 00
	00		 add	 DWORD PTR [esi+240], ecx
  00048	8b 86 f0 00 00
	00		 mov	 eax, DWORD PTR [esi+240]

; 1856 : 		GCMoneySend(aIndex, lpObj->Money);

  0004e	50		 push	 eax
  0004f	57		 push	 edi
  00050	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend

; 1857 : 
; 1858 : 		LogAddTD("[EventChip] [%s][%s] ChangeRena AddMoney(%d)",
; 1859 : 			lpObj->AccountID, lpObj->Name, lpObj->EventChipCount * 3000);

  00055	0f bf 96 48 10
	00 00		 movsx	 edx, WORD PTR [esi+4168]
  0005c	69 d2 b8 0b 00
	00		 imul	 edx, 3000		; 00000bb8H
  00062	52		 push	 edx
  00063	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  00066	50		 push	 eax
  00067	8d 4e 6c	 lea	 ecx, DWORD PTR [esi+108]
  0006a	51		 push	 ecx
  0006b	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@HPMMCJJA@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
  00070	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00076	83 c4 18	 add	 esp, 24			; 00000018H

; 1860 : 	}
; 1861 : 	else

  00079	eb 16		 jmp	 SHORT $LN1@EGRecvChan
$LN2@EGRecvChan:

; 1862 : 	{
; 1863 : 		LogAddTD("[EventChip] [%s][%s] ChangeRena Fail",
; 1864 : 			lpObj->AccountID, lpObj->Name);

  0007b	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0007e	52		 push	 edx
  0007f	8d 46 6c	 lea	 eax, DWORD PTR [esi+108]
  00082	50		 push	 eax
  00083	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@KMDOMHEE@?$FLEventChip?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5@
  00088	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0008e	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@EGRecvChan:

; 1865 : 	}
; 1866 : 
; 1867 : 	Result.ChipCount = 0;
; 1868 : 	lpObj->EventChipCount = 0;

  00091	33 c9		 xor	 ecx, ecx
  00093	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Result$[ebp+4], 0
  0009a	66 89 8e 48 10
	00 00		 mov	 WORD PTR [esi+4168], cx

; 1869 : 
; 1870 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  000a1	0f b6 55 f9	 movzx	 edx, BYTE PTR _Result$[ebp+1]
  000a5	52		 push	 edx
  000a6	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  000a9	50		 push	 eax
  000aa	57		 push	 edi
  000ab	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000b0	83 c4 0c	 add	 esp, 12			; 0000000cH
  000b3	5f		 pop	 edi

; 1871 : 
; 1872 : 	lpObj->UseEventServer = FALSE;

  000b4	c7 86 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4176], 0
  000be	5e		 pop	 esi

; 1873 : }

  000bf	8b e5		 mov	 esp, ebp
  000c1	5d		 pop	 ebp
  000c2	c3		 ret	 0
?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ENDP ; EGRecvChangeRena
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z ; EGRecvStoneInfo
EXTRN	?ChatTargetSend@@YAXPAUOBJECTSTRUCT@@PADH@Z:PROC ; ChatTargetSend
EXTRN	__imp__wsprintfA:PROC
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
; Function compile flags: /Ogtp
;	COMDAT ?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z
_TEXT	SEGMENT
_Result$ = -148						; size = 16
_msg$ = -132						; size = 128
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z PROC	; EGRecvStoneInfo, COMDAT

; 1880 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 94 00 00
	00		 sub	 esp, 148		; 00000094H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi
  00015	8b 7d 08	 mov	 edi, DWORD PTR _aRecv$[ebp]

; 1881 : 	LPOBJ lpObj = &gObj[aRecv->iINDEX];

  00018	8b 77 04	 mov	 esi, DWORD PTR [edi+4]
  0001b	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00021	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 1882 : 
; 1883 : 	PMSG_EVENTCHIPINFO Result;
; 1884 : 	
; 1885 : 	PHeadSetB((LPBYTE)&Result, 0x94, sizeof(Result));

  00027	6a 10		 push	 16			; 00000010H
  00029	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _Result$[ebp]
  0002f	68 94 00 00 00	 push	 148			; 00000094H
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1886 : 
; 1887 : 	if ( aRecv->bSUCCESS )

  0003a	33 c0		 xor	 eax, eax
  0003c	83 c4 0c	 add	 esp, 12			; 0000000cH
  0003f	38 47 13	 cmp	 BYTE PTR [edi+19], al
  00042	74 0b		 je	 SHORT $LN2@EGRecvSton

; 1888 : 		lpObj->iStoneCount = aRecv->iStoneCount;

  00044	8b 4f 14	 mov	 ecx, DWORD PTR [edi+20]
  00047	89 8e 58 10 00
	00		 mov	 DWORD PTR [esi+4184], ecx

; 1889 : 	else

  0004d	eb 06		 jmp	 SHORT $LN1@EGRecvSton
$LN2@EGRecvSton:

; 1890 : 		lpObj->iStoneCount = 0;

  0004f	89 86 58 10 00
	00		 mov	 DWORD PTR [esi+4184], eax
$LN1@EGRecvSton:

; 1891 : 
; 1892 : 	lpObj->MutoNumber = 0;

  00055	89 86 4c 10 00
	00		 mov	 DWORD PTR [esi+4172], eax

; 1893 : 	Result.Type = 3;
; 1894 : 	Result.ChipCount = aRecv->iStoneCount;
; 1895 : 
; 1896 : 	DataSend(lpObj->m_Index, (LPBYTE)&Result, Result.h.size);

  0005b	0f b6 85 6d ff
	ff ff		 movzx	 eax, BYTE PTR _Result$[ebp+1]
  00062	8b 57 14	 mov	 edx, DWORD PTR [edi+20]
  00065	50		 push	 eax
  00066	8d 8d 6c ff ff
	ff		 lea	 ecx, DWORD PTR _Result$[ebp]
  0006c	c6 85 6f ff ff
	ff 03		 mov	 BYTE PTR _Result$[ebp+3], 3
  00073	89 95 70 ff ff
	ff		 mov	 DWORD PTR _Result$[ebp+4], edx
  00079	8b 16		 mov	 edx, DWORD PTR [esi]
  0007b	51		 push	 ecx
  0007c	52		 push	 edx
  0007d	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 1897 : 
; 1898 : 	char msg[128];
; 1899 : 	wsprintf(msg, lMsg.Get(MSGGET(4, 153)), Result.ChipCount);

  00082	8b 85 70 ff ff
	ff		 mov	 eax, DWORD PTR _Result$[ebp+4]
  00088	83 c4 0c	 add	 esp, 12			; 0000000cH
  0008b	50		 push	 eax
  0008c	68 99 04 00 00	 push	 1177			; 00000499H
  00091	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00096	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0009b	50		 push	 eax
  0009c	8d 8d 7c ff ff
	ff		 lea	 ecx, DWORD PTR _msg$[ebp]
  000a2	51		 push	 ecx
  000a3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 1900 : 	ChatTargetSend(pEventObj, msg, lpObj->m_Index);

  000a9	8b 16		 mov	 edx, DWORD PTR [esi]
  000ab	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pEventObj@@3PAUOBJECTSTRUCT@@A ; pEventObj
  000b1	52		 push	 edx
  000b2	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _msg$[ebp]
  000b8	50		 push	 eax
  000b9	51		 push	 ecx
  000ba	e8 00 00 00 00	 call	 ?ChatTargetSend@@YAXPAUOBJECTSTRUCT@@PADH@Z ; ChatTargetSend

; 1901 : }

  000bf	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c2	83 c4 18	 add	 esp, 24			; 00000018H
  000c5	5f		 pop	 edi
  000c6	33 cd		 xor	 ecx, ebp
  000c8	5e		 pop	 esi
  000c9	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ce	8b e5		 mov	 esp, ebp
  000d0	5d		 pop	 ebp
  000d1	c3		 ret	 0
?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z ENDP	; EGRecvStoneInfo
_TEXT	ENDS
PUBLIC	??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@ ; `string'
PUBLIC	??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@ ; `string'
PUBLIC	?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z ; EGRecvRegStone
;	COMDAT ??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@
CONST	SEGMENT
??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@ DB '['
	DB	'Stone] [%s][%s] RegEventServer Fail (Stones : %d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@
CONST	SEGMENT
??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@ DB '['
	DB	'Stone] [%s][%s] Delete Stones', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z
_TEXT	SEGMENT
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z PROC ; EGRecvRegStone, COMDAT

; 1906 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1907 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1908 : 	LPOBJ lpObj;
; 1909 : 	int aIndex;
; 1910 : 	
; 1911 : 
; 1912 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  00009	6a 08		 push	 8
  0000b	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  0000e	68 95 00 00 00	 push	 149			; 00000095H
  00013	50		 push	 eax
  00014	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1913 : 	lpObj = &gObj[aRecv->iINDEX];

  00019	8b 7d 08	 mov	 edi, DWORD PTR _aRecv$[ebp]
  0001c	8b 5f 04	 mov	 ebx, DWORD PTR [edi+4]
  0001f	8b f3		 mov	 esi, ebx
  00021	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00027	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1914 : 	aIndex = aRecv->iINDEX;
; 1915 : 
; 1916 : 	if ( aRecv->bSUCCESS != FALSE )

  00030	80 7f 14 00	 cmp	 BYTE PTR [edi+20], 0
  00034	74 36		 je	 SHORT $LN2@EGRecvRegS

; 1917 : 	{
; 1918 : 		Result.ChipCount = aRecv->iStoneCount;
; 1919 : 		gObjInventoryDeleteItem(aIndex, aRecv->iPosition);

  00036	0f b6 57 08	 movzx	 edx, BYTE PTR [edi+8]
  0003a	8b 4f 18	 mov	 ecx, DWORD PTR [edi+24]
  0003d	52		 push	 edx
  0003e	53		 push	 ebx
  0003f	89 4d fc	 mov	 DWORD PTR _Result$[ebp+4], ecx
  00042	e8 00 00 00 00	 call	 ?gObjInventoryDeleteItem@@YAEHH@Z ; gObjInventoryDeleteItem

; 1920 : 		GCInventoryItemDeleteSend(aIndex, aRecv->iPosition, 1);

  00047	0f b6 47 08	 movzx	 eax, BYTE PTR [edi+8]
  0004b	6a 01		 push	 1
  0004d	50		 push	 eax
  0004e	53		 push	 ebx
  0004f	e8 00 00 00 00	 call	 ?GCInventoryItemDeleteSend@@YAXHEE@Z ; GCInventoryItemDeleteSend

; 1921 : 
; 1922 : 		LogAddTD("[Stone] [%s][%s] Delete Stones",
; 1923 : 			lpObj->AccountID, lpObj->Name);

  00054	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  00057	51		 push	 ecx
  00058	8d 56 6c	 lea	 edx, DWORD PTR [esi+108]
  0005b	52		 push	 edx
  0005c	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@HIMCGJFF@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Delete?5Stones?$AA@
  00061	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00067	83 c4 20	 add	 esp, 32			; 00000020H

; 1924 : 	}
; 1925 : 	else

  0006a	eb 21		 jmp	 SHORT $LN1@EGRecvRegS
$LN2@EGRecvRegS:

; 1926 : 	{
; 1927 : 		Result.ChipCount = -1;
; 1928 : 		
; 1929 : 		LogAddTD("[Stone] [%s][%s] RegEventServer Fail (Stones : %d)",
; 1930 : 			lpObj->AccountID, lpObj->Name, aRecv->iStoneCount);

  0006c	8b 47 18	 mov	 eax, DWORD PTR [edi+24]
  0006f	50		 push	 eax
  00070	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  00073	51		 push	 ecx
  00074	8d 56 6c	 lea	 edx, DWORD PTR [esi+108]
  00077	52		 push	 edx
  00078	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@JDHGBHBI@?$FLStone?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5RegEventServer?5@
  0007d	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR _Result$[ebp+4], -1
  00084	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0008a	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@EGRecvRegS:

; 1931 : 	}
; 1932 : 
; 1933 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  0008d	0f b6 45 f9	 movzx	 eax, BYTE PTR _Result$[ebp+1]
  00091	50		 push	 eax
  00092	8d 4d f8	 lea	 ecx, DWORD PTR _Result$[ebp]
  00095	51		 push	 ecx
  00096	53		 push	 ebx
  00097	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0009c	83 c4 0c	 add	 esp, 12			; 0000000cH
  0009f	5f		 pop	 edi

; 1934 : 
; 1935 : 	lpObj->UseEventServer = FALSE;

  000a0	c7 86 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4176], 0
  000aa	5e		 pop	 esi
  000ab	5b		 pop	 ebx

; 1936 : }

  000ac	8b e5		 mov	 esp, ebp
  000ae	5d		 pop	 ebp
  000af	c3		 ret	 0
?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z ENDP ; EGRecvRegStone
_TEXT	ENDS
PUBLIC	?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z ; EGRecvDeleteStone
; Function compile flags: /Ogtp
;	COMDAT ?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z
_TEXT	SEGMENT
_aRecv$ = 8						; size = 4
?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z PROC ; EGRecvDeleteStone, COMDAT

; 1942 : 	return;
; 1943 : }

  00000	c3		 ret	 0
?EGRecvDeleteStone@@YAXPAUPMSG_ANS_DELETE_STONES@@@Z ENDP ; EGRecvDeleteStone
_TEXT	ENDS
PUBLIC	??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@ ; `string'
PUBLIC	??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@ ; `string'
PUBLIC	?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeStones
;	COMDAT ??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@
CONST	SEGMENT
??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@ DB '['
	DB	'Stones] [%s][%s] ChangeRena Fail', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@
CONST	SEGMENT
??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@ DB '['
	DB	'Stones] [%s][%s] ChangeRena AddMoney(%d)', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z
_TEXT	SEGMENT
_Result$ = -8						; size = 8
_aRecv$ = 8						; size = 4
?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z PROC ; EGRecvChangeStones, COMDAT

; 1948 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	56		 push	 esi
  00007	57		 push	 edi

; 1949 : 	PMSG_REGEVENTCHIP_RESULT Result;
; 1950 : 	LPOBJ lpObj;
; 1951 : 	int aIndex;
; 1952 : 	
; 1953 : 
; 1954 : 	PHeadSetB((LPBYTE)&Result, 0x95, sizeof(Result));

  00008	6a 08		 push	 8
  0000a	8d 45 f8	 lea	 eax, DWORD PTR _Result$[ebp]
  0000d	68 95 00 00 00	 push	 149			; 00000095H
  00012	50		 push	 eax
  00013	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 1955 : 	lpObj = &gObj[aRecv->iINDEX];

  00018	8b 45 08	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0001b	8b 78 04	 mov	 edi, DWORD PTR [eax+4]
  0001e	8b f7		 mov	 esi, edi
  00020	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00026	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1956 : 	aIndex = aRecv->iINDEX;
; 1957 : 
; 1958 : 	if ( aRecv->bSUCCESS != FALSE )

  0002f	80 78 13 00	 cmp	 BYTE PTR [eax+19], 0
  00033	74 44		 je	 SHORT $LN2@EGRecvChan@2

; 1959 : 	{
; 1960 : 		lpObj->Money += lpObj->iStoneCount * 3000;

  00035	8b 8e 58 10 00
	00		 mov	 ecx, DWORD PTR [esi+4184]
  0003b	69 c9 b8 0b 00
	00		 imul	 ecx, 3000		; 00000bb8H
  00041	01 8e f0 00 00
	00		 add	 DWORD PTR [esi+240], ecx
  00047	8b 86 f0 00 00
	00		 mov	 eax, DWORD PTR [esi+240]

; 1961 : 		GCMoneySend(aIndex, lpObj->Money);

  0004d	50		 push	 eax
  0004e	57		 push	 edi
  0004f	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend

; 1962 : 
; 1963 : 		LogAddTD("[Stones] [%s][%s] ChangeRena AddMoney(%d)",
; 1964 : 			lpObj->AccountID, lpObj->Name, lpObj->iStoneCount*3000);

  00054	8b 96 58 10 00
	00		 mov	 edx, DWORD PTR [esi+4184]
  0005a	69 d2 b8 0b 00
	00		 imul	 edx, 3000		; 00000bb8H
  00060	52		 push	 edx
  00061	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  00064	50		 push	 eax
  00065	8d 4e 6c	 lea	 ecx, DWORD PTR [esi+108]
  00068	51		 push	 ecx
  00069	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@KDDNBJOH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Add@
  0006e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00074	83 c4 18	 add	 esp, 24			; 00000018H

; 1965 : 	}
; 1966 : 	else

  00077	eb 16		 jmp	 SHORT $LN1@EGRecvChan@2
$LN2@EGRecvChan@2:

; 1967 : 	{
; 1968 : 		LogAddTD("[Stones] [%s][%s] ChangeRena Fail",
; 1969 : 			lpObj->AccountID, lpObj->Name);

  00079	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0007c	52		 push	 edx
  0007d	8d 46 6c	 lea	 eax, DWORD PTR [esi+108]
  00080	50		 push	 eax
  00081	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@FLCEMGDH@?$FLStones?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5ChangeRena?5Fai@
  00086	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0008c	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@EGRecvChan@2:

; 1970 : 	}
; 1971 : 
; 1972 : 	Result.ChipCount = 0;

  0008f	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _Result$[ebp+4], 0

; 1973 : 	lpObj->iStoneCount = 0;

  00096	c7 86 58 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4184], 0

; 1974 : 
; 1975 : 	DataSend(aIndex, (LPBYTE)&Result, Result.h.size);

  000a0	0f b6 4d f9	 movzx	 ecx, BYTE PTR _Result$[ebp+1]
  000a4	51		 push	 ecx
  000a5	8d 55 f8	 lea	 edx, DWORD PTR _Result$[ebp]
  000a8	52		 push	 edx
  000a9	57		 push	 edi
  000aa	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000af	83 c4 0c	 add	 esp, 12			; 0000000cH
  000b2	5f		 pop	 edi

; 1976 : 
; 1977 : 	lpObj->UseEventServer = FALSE;

  000b3	c7 86 50 10 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+4176], 0
  000bd	5e		 pop	 esi

; 1978 : }

  000be	8b e5		 mov	 esp, ebp
  000c0	5d		 pop	 ebp
  000c1	c3		 ret	 0
?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ENDP ; EGRecvChangeStones
_TEXT	ENDS
PUBLIC	??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@ ; `string'
PUBLIC	??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@ ; `string'
PUBLIC	??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@ ; `string'
PUBLIC	??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@ ; `string'
PUBLIC	??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z ; EGRecv2AnvRegSerial
EXTRN	?SortItem@CEventItemList@@QAEHEPAE0@Z:PROC	; CEventItemList::SortItem
EXTRN	?g_EventItemList@@3VCEventItemList@@A:BYTE	; g_EventItemList
;	COMDAT ??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@
CONST	SEGMENT
??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@ DB '[Mu_2Anv'
	DB	'_Event] Register Serial Result : %d [%s][%s] GiftNumber: %d I'
	DB	'tem : %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@
CONST	SEGMENT
??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@ DB '[Mu_2'
	DB	'Anv_Event] Error : Result Value is Wrong [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@
CONST	SEGMENT
??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@ DB '[Mu_2A'
	DB	'nv_Event] Error : iGiftNumber is Out of Boud [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@
CONST	SEGMENT
??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@ DB '[Mu_2'
	DB	'Anv_Event] Error : Gift Index is out of bound [%d]', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@
CONST	SEGMENT
??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@ DB '[Mu_2'
	DB	'Anv_Event] Error : Index is out of bound [%d]', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z
_TEXT	SEGMENT
_dur$215943 = -88					; size = 1
_level$215942 = -84					; size = 1
_ServerCmd$215937 = -80					; size = 7
_Result$ = -72						; size = 68
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z PROC ; EGRecv2AnvRegSerial, COMDAT

; 1996 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _aRecv$[ebp]
  00014	57		 push	 edi

; 1997 : 	int loc1 = -1;
; 1998 : 
; 1999 : 	PMSG_ANS_2ANV_LOTTO_EVENT Result;
; 2000 : 
; 2001 : 	PHeadSetB((LPBYTE)&Result, 0x9D, sizeof(Result));

  00015	6a 44		 push	 68			; 00000044H
  00017	8d 45 b8	 lea	 eax, DWORD PTR _Result$[ebp]
  0001a	68 9d 00 00 00	 push	 157			; 0000009dH
  0001f	50		 push	 eax
  00020	83 cf ff	 or	 edi, -1
  00023	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 2002 : 
; 2003 : 	if ( !OBJMAX_RANGE(aRecv->iINDEX))

  00028	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  0002b	83 c4 0c	 add	 esp, 12			; 0000000cH
  0002e	85 c0		 test	 eax, eax
  00030	78 0e		 js	 SHORT $LN25@EGRecv2Anv
  00032	33 c9		 xor	 ecx, ecx
  00034	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  00039	0f 9e c1	 setle	 cl
  0003c	85 c9		 test	 ecx, ecx
  0003e	75 1f		 jne	 SHORT $LN14@EGRecv2Anv
$LN25@EGRecv2Anv:

; 2004 : 	{
; 2005 : 		LogAddTD("[Mu_2Anv_Event] Error : Index is out of bound [%d]", aRecv->iINDEX);

  00040	50		 push	 eax
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@NFIPOICF@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Index?5is@
  00046	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0004c	83 c4 08	 add	 esp, 8
  0004f	5f		 pop	 edi
  00050	5e		 pop	 esi

; 2081 : }

  00051	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00054	33 cd		 xor	 ecx, ebp
  00056	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0005b	8b e5		 mov	 esp, ebp
  0005d	5d		 pop	 ebp
  0005e	c3		 ret	 0
$LN14@EGRecv2Anv:

; 2006 : 		return;
; 2007 : 	}
; 2008 : 
; 2009 : 	if ( gObj[aRecv->iINDEX].Connected <= PLAYER_LOGGED )

  0005f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00065	8b c8		 mov	 ecx, eax
  00067	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0006d	83 7c 11 04 02	 cmp	 DWORD PTR [ecx+edx+4], 2

; 2010 : 	{
; 2011 : 		LogAddTD("[Mu_2Anv_Event] Error : Index is out of bound [%d]", aRecv->iINDEX);
; 2012 : 		return;

  00072	7e cc		 jle	 SHORT $LN25@EGRecv2Anv

; 2013 : 	}
; 2014 : 
; 2015 : 	Result.szGIFT_NAME[0] = 0;
; 2016 : 
; 2017 : 	if ( aRecv->btIsRegistered == FALSE )

  00074	8a 46 13	 mov	 al, BYTE PTR [esi+19]
  00077	c6 45 bc 00	 mov	 BYTE PTR _Result$[ebp+4], 0
  0007b	84 c0		 test	 al, al
  0007d	0f 85 6d 01 00
	00		 jne	 $LN12@EGRecv2Anv

; 2018 : 	{
; 2019 : 		Result.btIsRegistered = FALSE;
; 2020 : 		
; 2021 : 		if ( !GIFT_2ANV_RANGE(aRecv->iGiftNumber-1) )

  00083	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  00086	88 45 bb	 mov	 BYTE PTR _Result$[ebp+3], al
  00089	8d 41 ff	 lea	 eax, DWORD PTR [ecx-1]
  0008c	85 c0		 test	 eax, eax
  0008e	78 10		 js	 SHORT $LN26@EGRecv2Anv
  00090	33 d2		 xor	 edx, edx
  00092	3d ae 00 00 00	 cmp	 eax, 174		; 000000aeH
  00097	0f 9e c2	 setle	 dl
  0009a	8b c2		 mov	 eax, edx
  0009c	85 c0		 test	 eax, eax
  0009e	75 13		 jne	 SHORT $LN28@EGRecv2Anv
$LN26@EGRecv2Anv:

; 2022 : 		{
; 2023 : 			LogAddTD("[Mu_2Anv_Event] Error : Gift Index is out of bound [%d]", aRecv->iGiftNumber);

  000a0	51		 push	 ecx
  000a1	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@IMNBMFDN@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Gift?5Ind@
  000a6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000ac	83 c4 08	 add	 esp, 8

; 2024 : 			Result.btIsRegistered = 2;

  000af	c6 45 bb 02	 mov	 BYTE PTR _Result$[ebp+3], 2
$LN28@EGRecv2Anv:

; 2025 : 		}
; 2026 : 
; 2027 : 		if ( gObj[aRecv->iINDEX].Connected > PLAYER_LOGGED )

  000b3	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  000b6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000bc	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000c2	83 7c 08 04 02	 cmp	 DWORD PTR [eax+ecx+4], 2
  000c7	7e 55		 jle	 SHORT $LN10@EGRecv2Anv

; 2028 : 		{
; 2029 : 			PMSG_SERVERCMD ServerCmd;
; 2030 : 
; 2031 : 			PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  000c9	6a 07		 push	 7
  000cb	6a 40		 push	 64			; 00000040H
  000cd	8d 55 b0	 lea	 edx, DWORD PTR _ServerCmd$215937[ebp]
  000d0	68 f3 00 00 00	 push	 243			; 000000f3H
  000d5	52		 push	 edx
  000d6	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 2032 : 			ServerCmd.CmdType = 0;
; 2033 : 			ServerCmd.X = gObj[aRecv->iINDEX].X;

  000db	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  000de	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000e4	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000ea	c6 45 b4 00	 mov	 BYTE PTR _ServerCmd$215937[ebp+4], 0
  000ee	8a 90 44 01 00
	00		 mov	 dl, BYTE PTR [eax+324]
  000f4	88 55 b5	 mov	 BYTE PTR _ServerCmd$215937[ebp+5], dl

; 2034 : 			ServerCmd.Y = gObj[aRecv->iINDEX].Y;

  000f7	8a 88 46 01 00
	00		 mov	 cl, BYTE PTR [eax+326]

; 2035 : 
; 2036 : 			MsgSendV2(&gObj[aRecv->iINDEX], (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  000fd	6a 07		 push	 7
  000ff	8d 55 b0	 lea	 edx, DWORD PTR _ServerCmd$215937[ebp]
  00102	52		 push	 edx
  00103	50		 push	 eax
  00104	88 4d b6	 mov	 BYTE PTR _ServerCmd$215937[ebp+6], cl
  00107	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 2037 : 			DataSend(aRecv->iINDEX, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0010c	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  0010f	6a 07		 push	 7
  00111	8d 45 b0	 lea	 eax, DWORD PTR _ServerCmd$215937[ebp]
  00114	50		 push	 eax
  00115	51		 push	 ecx
  00116	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0011b	83 c4 28	 add	 esp, 40			; 00000028H
$LN10@EGRecv2Anv:

; 2038 : 		}
; 2039 : 
; 2040 : 		if ( g_bRingEventItemTextLoad )

  0011e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_bRingEventItemTextLoad@@3HA, 0 ; g_bRingEventItemTextLoad
  00125	74 1b		 je	 SHORT $LN9@EGRecv2Anv

; 2041 : 		{
; 2042 : 			strcpy(Result.szGIFT_NAME, g_sz2ANV_GIFT_NAME[aRecv->iGiftNumber-1]);

  00127	8b 46 14	 mov	 eax, DWORD PTR [esi+20]
  0012a	c1 e0 06	 shl	 eax, 6
  0012d	8d 80 c0 ff ff
	ff		 lea	 eax, DWORD PTR ?g_sz2ANV_GIFT_NAME@@3PAY0EA@DA[eax-64]
  00133	8d 55 bc	 lea	 edx, DWORD PTR _Result$[ebp+4]
  00136	2b d0		 sub	 edx, eax
$LL21@EGRecv2Anv:
  00138	8a 08		 mov	 cl, BYTE PTR [eax]
  0013a	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  0013d	40		 inc	 eax
  0013e	84 c9		 test	 cl, cl
  00140	75 f6		 jne	 SHORT $LL21@EGRecv2Anv
$LN9@EGRecv2Anv:

; 2043 : 		}
; 2044 : 		 
; 2045 : 		BYTE level = 0;//loc21
; 2046 : 		BYTE dur = 0;//loc22
; 2047 : 		
; 2048 : 		int ItemNum = g_EventItemList.SortItem(aRecv->iGiftNumber,&level,&dur);//loc23

  00142	0f b6 4e 14	 movzx	 ecx, BYTE PTR [esi+20]
  00146	8d 55 a8	 lea	 edx, DWORD PTR _dur$215943[ebp]
  00149	52		 push	 edx
  0014a	8d 45 ac	 lea	 eax, DWORD PTR _level$215942[ebp]
  0014d	50		 push	 eax
  0014e	51		 push	 ecx
  0014f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_EventItemList@@3VCEventItemList@@A ; g_EventItemList
  00154	c6 45 ac 00	 mov	 BYTE PTR _level$215942[ebp], 0
  00158	c6 45 a8 00	 mov	 BYTE PTR _dur$215943[ebp], 0
  0015c	e8 00 00 00 00	 call	 ?SortItem@CEventItemList@@QAEHEPAE0@Z ; CEventItemList::SortItem
  00161	8b f8		 mov	 edi, eax

; 2049 : 		
; 2050 : 		loc1 = ItemNum;
; 2051 : 		
; 2052 : 		if ( ItemNum == 0 ||ItemNum == -1 )

  00163	85 ff		 test	 edi, edi
  00165	74 75		 je	 SHORT $LN7@EGRecv2Anv
  00167	83 ff ff	 cmp	 edi, -1
  0016a	74 70		 je	 SHORT $LN7@EGRecv2Anv

; 2055 : 		}
; 2056 : 		else
; 2057 : 		{
; 2058 : 			ItemSerialCreateSend(gObj[aRecv->iINDEX].m_Index,235,(BYTE)gObj[aRecv->iINDEX].X,(BYTE)gObj[aRecv->iINDEX].Y,ItemNum,(BYTE)level,(BYTE)dur,0,0,0,aRecv->iINDEX,0,0);

  0016c	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  0016f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00174	6a 00		 push	 0
  00176	6a 00		 push	 0
  00178	51		 push	 ecx
  00179	8b d1		 mov	 edx, ecx
  0017b	8b 4d a8	 mov	 ecx, DWORD PTR _dur$215943[ebp]
  0017e	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00184	6a 00		 push	 0
  00186	6a 00		 push	 0
  00188	6a 00		 push	 0
  0018a	51		 push	 ecx
  0018b	0f b6 8c 10 46
	01 00 00	 movzx	 ecx, BYTE PTR [eax+edx+326]
  00193	03 c2		 add	 eax, edx
  00195	8b 55 ac	 mov	 edx, DWORD PTR _level$215942[ebp]
  00198	52		 push	 edx
  00199	0f b6 90 44 01
	00 00		 movzx	 edx, BYTE PTR [eax+324]
  001a0	8b 00		 mov	 eax, DWORD PTR [eax]
  001a2	57		 push	 edi
  001a3	51		 push	 ecx
  001a4	52		 push	 edx
  001a5	68 eb 00 00 00	 push	 235			; 000000ebH
  001aa	50		 push	 eax
  001ab	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  001b0	83 c4 34	 add	 esp, 52			; 00000034H

; 2059 : 			
; 2060 : 			if ( g_bRingEventItemTextLoad == FALSE)

  001b3	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_bRingEventItemTextLoad@@3HA, 0 ; g_bRingEventItemTextLoad
  001ba	75 63		 jne	 SHORT $LN27@EGRecv2Anv

; 2061 : 			{
; 2062 : 				strcpy(Result.szGIFT_NAME, ItemAttribute[ItemNum].Name);

  001bc	8b cf		 mov	 ecx, edi
  001be	6b c9 70	 imul	 ecx, 112		; 00000070H
  001c1	8d 81 00 00 00
	00		 lea	 eax, DWORD PTR ?ItemAttribute@@3PAUITEM_ATTRIBUTE@@A[ecx]
  001c7	8d 55 bc	 lea	 edx, DWORD PTR _Result$[ebp+4]
  001ca	2b d0		 sub	 edx, eax
  001cc	8d 64 24 00	 npad	 4
$LL22@EGRecv2Anv:
  001d0	8a 08		 mov	 cl, BYTE PTR [eax]
  001d2	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  001d5	40		 inc	 eax
  001d6	84 c9		 test	 cl, cl
  001d8	75 f6		 jne	 SHORT $LL22@EGRecv2Anv
  001da	eb 43		 jmp	 SHORT $LN27@EGRecv2Anv
$LN7@EGRecv2Anv:

; 2053 :         {
; 2054 : 			LogAddTD("[Mu_2Anv_Event] Error : iGiftNumber is Out of Boud [%d]", aRecv->iGiftNumber);

  001dc	8b 56 14	 mov	 edx, DWORD PTR [esi+20]
  001df	52		 push	 edx
  001e0	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@MNCKIFPI@?$FLMu_2Anv_Event?$FN?5Error?5?3?5iGiftNum@
  001e5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  001eb	83 c4 08	 add	 esp, 8

; 2063 : 			}
; 2064 : 		}

  001ee	eb 2f		 jmp	 SHORT $LN27@EGRecv2Anv
$LN12@EGRecv2Anv:

; 2065 : 	}
; 2066 : 	else if ( aRecv->btIsRegistered == 1 ||  aRecv->btIsRegistered == 2 ||  aRecv->btIsRegistered == 3 ||  aRecv->btIsRegistered == 4 ||  aRecv->btIsRegistered == 5 )

  001f0	3c 01		 cmp	 al, 1
  001f2	74 28		 je	 SHORT $LN2@EGRecv2Anv
  001f4	3c 02		 cmp	 al, 2
  001f6	74 24		 je	 SHORT $LN2@EGRecv2Anv
  001f8	3c 03		 cmp	 al, 3
  001fa	74 20		 je	 SHORT $LN2@EGRecv2Anv
  001fc	3c 04		 cmp	 al, 4
  001fe	74 1c		 je	 SHORT $LN2@EGRecv2Anv
  00200	3c 05		 cmp	 al, 5
  00202	74 18		 je	 SHORT $LN2@EGRecv2Anv

; 2069 : 	}
; 2070 : 	else
; 2071 : 	{
; 2072 : 		Result.btIsRegistered = 4;
; 2073 : 		LogAddTD("[Mu_2Anv_Event] Error : Result Value is Wrong [%d]", aRecv->btIsRegistered);

  00204	0f b6 c0	 movzx	 eax, al
  00207	50		 push	 eax
  00208	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@BPJEDJME@?$FLMu_2Anv_Event?$FN?5Error?5?3?5Result?5V@
  0020d	c6 45 bb 04	 mov	 BYTE PTR _Result$[ebp+3], 4
  00211	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00217	83 c4 08	 add	 esp, 8
  0021a	eb 03		 jmp	 SHORT $LN27@EGRecv2Anv
$LN2@EGRecv2Anv:

; 2067 : 	{
; 2068 : 		Result.btIsRegistered = aRecv->btIsRegistered;

  0021c	88 45 bb	 mov	 BYTE PTR _Result$[ebp+3], al
$LN27@EGRecv2Anv:

; 2074 : 	}
; 2075 : 
; 2076 : 	LogAddTD("[Mu_2Anv_Event] Register Serial Result : %d [%s][%s] GiftNumber: %d Item : %d", aRecv->btIsRegistered, gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name,aRecv->iGiftNumber,loc1);

  0021f	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00222	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  00225	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0022b	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00231	57		 push	 edi
  00232	51		 push	 ecx
  00233	8d 50 77	 lea	 edx, DWORD PTR [eax+119]
  00236	52		 push	 edx
  00237	83 c0 6c	 add	 eax, 108		; 0000006cH
  0023a	50		 push	 eax
  0023b	0f b6 46 13	 movzx	 eax, BYTE PTR [esi+19]
  0023f	50		 push	 eax
  00240	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@IOBIPNI@?$FLMu_2Anv_Event?$FN?5Register?5Serial?5@
  00245	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 2077 : 
; 2078 : 	DataSend(aRecv->iINDEX, (LPBYTE)&Result, Result.h.size);

  0024b	0f b6 4d b9	 movzx	 ecx, BYTE PTR _Result$[ebp+1]
  0024f	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00252	51		 push	 ecx
  00253	8d 55 b8	 lea	 edx, DWORD PTR _Result$[ebp]
  00256	52		 push	 edx
  00257	50		 push	 eax
  00258	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2079 : 
; 2080 : 	gObj[aRecv->iINDEX].UseEventServer = FALSE;

  0025d	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  00260	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00266	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0026c	83 c4 24	 add	 esp, 36			; 00000024H
  0026f	c7 84 11 50 10
	00 00 00 00 00
	00		 mov	 DWORD PTR [ecx+edx+4176], 0

; 2081 : }

  0027a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0027d	5f		 pop	 edi
  0027e	33 cd		 xor	 ecx, ebp
  00280	5e		 pop	 esi
  00281	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00286	8b e5		 mov	 esp, ebp
  00288	5d		 pop	 ebp
  00289	c3		 ret	 0
?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z ENDP ; EGRecv2AnvRegSerial
_TEXT	ENDS
PUBLIC	??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ ; `string'
PUBLIC	??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ ; `string'
PUBLIC	??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@ ; `string'
PUBLIC	??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z ; EGRecvRegRingGift
EXTRN	?AllSendServerMsg@@YAXPAD@Z:PROC		; AllSendServerMsg
EXTRN	?gObjIsConnected@@YAHH@Z:PROC			; gObjIsConnected
;	COMDAT ??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
CONST	SEGMENT
??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ DB '['
	DB	'Ring Event] [%s][%s] Register Failed Result : %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
CONST	SEGMENT
??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@ DB '['
	DB	'Ring Event] [%s][%s] Register Failed Result:%d, Gift:%d (out '
	DB	'of bound, 1~4)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@
CONST	SEGMENT
??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@ DB '['
	DB	'Ring Event] [%s][%s] Register Succeeded Result:%d, Gift:%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@
CONST	SEGMENT
??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@ DB '%'
	DB	's', 0b4H, 0d4H, ' ', 0b2H, 0b2H, 0bcH, 0adH, ' %s', 0bfH, 0a1H
	DB	' ', 0b4H, 0e7H, 0c3H, 0b7H, 0b5H, 0c7H, 0bcH, 0ccH, 0bdH, 0c0H
	DB	0b4H, 0cfH, 0b4H, 0d9H, '.', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z
_TEXT	SEGMENT
_szTemp$215969 = -260					; size = 256
__$ArrayPad$ = -4					; size = 4
_aRecv$ = 8						; size = 4
?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z PROC ; EGRecvRegRingGift, COMDAT

; 2088 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 04 01 00
	00		 sub	 esp, 260		; 00000104H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 2089 : 	gObj[aRecv->iINDEX].UseEventServer = FALSE;

  00013	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00019	56		 push	 esi
  0001a	8b 75 08	 mov	 esi, DWORD PTR _aRecv$[ebp]
  0001d	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00020	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00026	c7 84 08 50 10
	00 00 00 00 00
	00		 mov	 DWORD PTR [eax+ecx+4176], 0

; 2090 : 
; 2091 : 	if ( gObjIsConnected(aRecv->iINDEX) == FALSE )

  00031	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  00034	52		 push	 edx
  00035	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0003a	83 c4 04	 add	 esp, 4
  0003d	85 c0		 test	 eax, eax
  0003f	0f 84 7f 01 00
	00		 je	 $LN1@EGRecvRegR

; 2092 : 		return;
; 2093 : 
; 2094 : 	if ( strcmp(aRecv->szUID, gObj[aRecv->iINDEX].AccountID))

  00045	53		 push	 ebx
  00046	8b 5e 04	 mov	 ebx, DWORD PTR [esi+4]
  00049	69 db 50 2b 00
	00		 imul	 ebx, 11088		; 00002b50H
  0004f	57		 push	 edi
  00050	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00056	03 df		 add	 ebx, edi
  00058	8d 4b 6c	 lea	 ecx, DWORD PTR [ebx+108]
  0005b	8d 46 08	 lea	 eax, DWORD PTR [esi+8]
  0005e	8b ff		 npad	 2
$LL11@EGRecvRegR:
  00060	8a 10		 mov	 dl, BYTE PTR [eax]
  00062	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00064	75 1a		 jne	 SHORT $LN12@EGRecvRegR
  00066	84 d2		 test	 dl, dl
  00068	74 12		 je	 SHORT $LN13@EGRecvRegR
  0006a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0006d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00070	75 0e		 jne	 SHORT $LN12@EGRecvRegR
  00072	83 c0 02	 add	 eax, 2
  00075	83 c1 02	 add	 ecx, 2
  00078	84 d2		 test	 dl, dl
  0007a	75 e4		 jne	 SHORT $LL11@EGRecvRegR
$LN13@EGRecvRegR:
  0007c	33 c0		 xor	 eax, eax
  0007e	eb 05		 jmp	 SHORT $LN14@EGRecvRegR
$LN12@EGRecvRegR:
  00080	1b c0		 sbb	 eax, eax
  00082	83 d8 ff	 sbb	 eax, -1
$LN14@EGRecvRegR:
  00085	85 c0		 test	 eax, eax
  00087	0f 85 35 01 00
	00		 jne	 $LN15@EGRecvRegR

; 2095 : 		return;
; 2096 : 
; 2097 : 	if ( aRecv->btIsRegistered == 1 )

  0008d	8a 4e 13	 mov	 cl, BYTE PTR [esi+19]
  00090	80 f9 01	 cmp	 cl, 1
  00093	0f 85 ba 00 00
	00		 jne	 $LN4@EGRecvRegR

; 2098 : 	{
; 2099 : 		if ( CHECK_LIMIT(aRecv->btGiftKind-1, 4) )

  00099	0f b6 46 15	 movzx	 eax, BYTE PTR [esi+21]
  0009d	8d 48 ff	 lea	 ecx, DWORD PTR [eax-1]
  000a0	85 c9		 test	 ecx, ecx
  000a2	78 7a		 js	 SHORT $LN3@EGRecvRegR
  000a4	33 d2		 xor	 edx, edx
  000a6	83 f9 03	 cmp	 ecx, 3
  000a9	0f 9e c2	 setle	 dl
  000ac	8b ca		 mov	 ecx, edx
  000ae	85 c9		 test	 ecx, ecx
  000b0	74 6c		 je	 SHORT $LN3@EGRecvRegR

; 2100 : 		{
; 2101 : 			char szTemp[256];
; 2102 : 			wsprintf(szTemp, "%s  %s .",
; 2103 : 				gObj[aRecv->iINDEX].Name, g_szRingEventOfflineGift[aRecv->btGiftKind-1]);

  000b2	c1 e0 05	 shl	 eax, 5
  000b5	8d 80 e0 ff ff
	ff		 lea	 eax, DWORD PTR _g_szRingEventOfflineGift[eax-32]
  000bb	50		 push	 eax
  000bc	83 c3 77	 add	 ebx, 119		; 00000077H
  000bf	53		 push	 ebx
  000c0	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _szTemp$215969[ebp]
  000c6	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@LPHCCDAB@?$CFs?$LE?T?5?$LC?$LC?$LM?$KN?5?$CFs?$LP?$KB?5?$LE?g?C?$LH?$LF?G?$LM?L?$LN?$MA?$LE?O?$LE?Y?4?$AA@
  000cb	51		 push	 ecx
  000cc	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 2104 : 
; 2105 : 			AllSendServerMsg(szTemp);

  000d2	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _szTemp$215969[ebp]
  000d8	52		 push	 edx
  000d9	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg

; 2106 : 
; 2107 : 			LogAddTD("[Ring Event] [%s][%s] Register Succeeded Result:%d, Gift:%d", gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name, aRecv->btIsRegistered, aRecv->btGiftKind);

  000de	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  000e1	0f b6 56 15	 movzx	 edx, BYTE PTR [esi+21]
  000e5	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000eb	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000f1	0f b6 4e 13	 movzx	 ecx, BYTE PTR [esi+19]
  000f5	52		 push	 edx
  000f6	51		 push	 ecx
  000f7	8d 50 77	 lea	 edx, DWORD PTR [eax+119]
  000fa	52		 push	 edx
  000fb	83 c0 6c	 add	 eax, 108		; 0000006cH
  000fe	50		 push	 eax
  000ff	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@EBGDAEID@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5S@
  00104	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0010a	83 c4 28	 add	 esp, 40			; 00000028H
  0010d	5f		 pop	 edi
  0010e	5b		 pop	 ebx
  0010f	5e		 pop	 esi

; 2122 : 	}
; 2123 : }

  00110	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00113	33 cd		 xor	 ecx, ebp
  00115	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0011a	8b e5		 mov	 esp, ebp
  0011c	5d		 pop	 ebp
  0011d	c3		 ret	 0
$LN3@EGRecvRegR:

; 2108 : 		}
; 2109 : 		else
; 2110 : 		{
; 2111 : 			LogAddTD("[Ring Event] [%s][%s] Register Failed Result:%d, Gift:%d (out of bound, 1~4)", gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name, aRecv->btIsRegistered, aRecv->btGiftKind);

  0011e	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  00121	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00127	50		 push	 eax
  00128	03 cf		 add	 ecx, edi
  0012a	6a 01		 push	 1
  0012c	8d 51 77	 lea	 edx, DWORD PTR [ecx+119]
  0012f	52		 push	 edx
  00130	83 c1 6c	 add	 ecx, 108		; 0000006cH
  00133	51		 push	 ecx
  00134	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@JKCGIJEK@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
  00139	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0013f	83 c4 14	 add	 esp, 20			; 00000014H
  00142	5f		 pop	 edi
  00143	5b		 pop	 ebx
  00144	5e		 pop	 esi

; 2122 : 	}
; 2123 : }

  00145	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00148	33 cd		 xor	 ecx, ebp
  0014a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0014f	8b e5		 mov	 esp, ebp
  00151	5d		 pop	 ebp
  00152	c3		 ret	 0
$LN4@EGRecvRegR:

; 2112 : 		}
; 2113 : 
; 2114 : 		return;
; 2115 : 	}
; 2116 : 
; 2117 : 	LogAddTD("[Ring Event] [%s][%s] Register Failed Result : %d", gObj[aRecv->iINDEX].AccountID, gObj[aRecv->iINDEX].Name, aRecv->btIsRegistered);

  00153	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00156	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0015c	0f b6 c9	 movzx	 ecx, cl
  0015f	03 c7		 add	 eax, edi
  00161	51		 push	 ecx
  00162	8d 50 77	 lea	 edx, DWORD PTR [eax+119]
  00165	52		 push	 edx
  00166	83 c0 6c	 add	 eax, 108		; 0000006cH
  00169	50		 push	 eax
  0016a	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@NJLHLHM@?$FLRing?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Register?5F@
  0016f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 2118 : 
; 2119 : 	if ( gObjIsConnected(aRecv->iINDEX) == TRUE )

  00175	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00178	50		 push	 eax
  00179	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0017e	83 c4 14	 add	 esp, 20			; 00000014H
  00181	83 f8 01	 cmp	 eax, 1
  00184	75 3c		 jne	 SHORT $LN15@EGRecvRegR

; 2120 : 	{
; 2121 : 		MapC[gObj[aRecv->iINDEX].MapNumber].MoneyItemDrop(100000, (BYTE)gObj[aRecv->iINDEX].X, (BYTE)gObj[aRecv->iINDEX].Y);

  00186	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00189	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0018f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00195	0f b6 88 46 01
	00 00		 movzx	 ecx, BYTE PTR [eax+326]
  0019c	0f b6 90 44 01
	00 00		 movzx	 edx, BYTE PTR [eax+324]
  001a3	51		 push	 ecx
  001a4	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  001ab	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  001b1	52		 push	 edx
  001b2	68 a0 86 01 00	 push	 100000			; 000186a0H
  001b7	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  001bd	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
$LN15@EGRecvRegR:
  001c2	5f		 pop	 edi
  001c3	5b		 pop	 ebx
$LN1@EGRecvRegR:

; 2122 : 	}
; 2123 : }

  001c4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001c7	33 cd		 xor	 ecx, ebp
  001c9	5e		 pop	 esi
  001ca	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001cf	8b e5		 mov	 esp, ebp
  001d1	5d		 pop	 ebp
  001d2	c3		 ret	 0
?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z ENDP ; EGRecvRegRingGift
_TEXT	ENDS
PUBLIC	??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqBloodCastleEnterCount@@YAXH@Z		; EGReqBloodCastleEnterCount
EXTRN	?GMRankingServerConnect@@YAHPADK@Z:PROC		; GMRankingServerConnect
EXTRN	?gDevilSquareEventServerIp@@3PADA:BYTE		; gDevilSquareEventServerIp
EXTRN	?wsRServerCli@@3VwsJoinServerCli@@A:BYTE	; wsRServerCli
EXTRN	?DevilSquareEventConnect@@3HA:DWORD		; DevilSquareEventConnect
EXTRN	?IsDevilSquareEventConnected@@3HA:DWORD		; IsDevilSquareEventConnected
EXTRN	?gGameServerCode@@3FA:WORD			; gGameServerCode
;	COMDAT ??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@
CONST	SEGMENT
??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@ DB 'Can not co'
	DB	'nnect Ranking Server', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGReqBloodCastleEnterCount@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -36						; size = 32
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqBloodCastleEnterCount@@YAXH@Z PROC		; EGReqBloodCastleEnterCount, COMDAT

; 2135 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 24	 sub	 esp, 36			; 00000024H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]

; 2136 : 	if ( !gObjIsConnected(iIndex) )

  00014	56		 push	 esi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	0f 84 ec 00 00
	00		 je	 $LN1@EGReqBlood

; 2137 : 		return;
; 2138 : 
; 2139 : 	PMSG_REQ_BLOODCASTLE_ENTERCOUNT pMsg;
; 2140 : 
; 2141 : 	pMsg.h.c = 0xC1;
; 2142 : 	pMsg.h.headcode = 0x0B;
; 2143 : 	pMsg.h.size = sizeof(pMsg);
; 2144 : 	memcpy(pMsg.AccountID, gObj[iIndex].AccountID, 10);

  00025	8b c6		 mov	 eax, esi
  00027	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0002d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00033	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00037	66 c7 45 dd 20
	0b		 mov	 WORD PTR _pMsg$[ebp+1], 2848 ; 00000b20H
  0003d	8b 50 6c	 mov	 edx, DWORD PTR [eax+108]
  00040	89 55 df	 mov	 DWORD PTR _pMsg$[ebp+3], edx
  00043	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00046	89 4d e3	 mov	 DWORD PTR _pMsg$[ebp+7], ecx
  00049	66 8b 50 74	 mov	 dx, WORD PTR [eax+116]
  0004d	66 89 55 e7	 mov	 WORD PTR _pMsg$[ebp+11], dx

; 2145 : 	memcpy(pMsg.GameID, gObj[iIndex].Name, 10);

  00051	8b 48 77	 mov	 ecx, DWORD PTR [eax+119]
  00054	89 4d e9	 mov	 DWORD PTR _pMsg$[ebp+13], ecx
  00057	8b 50 7b	 mov	 edx, DWORD PTR [eax+123]

; 2146 : 	pMsg.ServerCode = gGameServerCode / 20;

  0005a	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  00061	89 55 ed	 mov	 DWORD PTR _pMsg$[ebp+17], edx
  00064	66 8b 40 7f	 mov	 ax, WORD PTR [eax+127]
  00068	66 89 45 f1	 mov	 WORD PTR _pMsg$[ebp+21], ax
  0006c	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  00071	f7 e9		 imul	 ecx

; 2147 : 	pMsg.iObjIndex = iIndex;
; 2148 : 
; 2149 : 	if ( !IsDevilSquareEventConnected && !DevilSquareEventConnect )

  00073	a1 00 00 00 00	 mov	 eax, DWORD PTR ?IsDevilSquareEventConnected@@3HA ; IsDevilSquareEventConnected
  00078	c1 fa 03	 sar	 edx, 3
  0007b	8b ca		 mov	 ecx, edx
  0007d	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  00080	03 ca		 add	 ecx, edx
  00082	89 4d f4	 mov	 DWORD PTR _pMsg$[ebp+24], ecx
  00085	89 75 f8	 mov	 DWORD PTR _pMsg$[ebp+28], esi
  00088	85 c0		 test	 eax, eax
  0008a	75 65		 jne	 SHORT $LN3@EGReqBlood
  0008c	39 05 00 00 00
	00		 cmp	 DWORD PTR ?DevilSquareEventConnect@@3HA, eax ; DevilSquareEventConnect
  00092	75 7d		 jne	 SHORT $LN1@EGReqBlood

; 2150 : 	{
; 2151 : 		wsRServerCli.Close();

  00094	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsRServerCli@@3VwsJoinServerCli@@A+4
  00099	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close

; 2152 : 		wsRServerCli.CreateSocket(ghWnd);

  0009e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?ghWnd@@3PAUHWND__@@A ; ghWnd
  000a4	52		 push	 edx
  000a5	b9 04 00 00 00	 mov	 ecx, OFFSET ?wsRServerCli@@3VwsJoinServerCli@@A+4
  000aa	e8 00 00 00 00	 call	 ?CreateSocket@MyWinsockBase@@QAEHPAUHWND__@@@Z ; MyWinsockBase::CreateSocket

; 2153 : 
; 2154 : 		if ( !GMRankingServerConnect(gDevilSquareEventServerIp, WM_GM_RANKING_CLIENT_MSG_PROC) )

  000af	68 0c 04 00 00	 push	 1036			; 0000040cH
  000b4	68 00 00 00 00	 push	 OFFSET ?gDevilSquareEventServerIp@@3PADA ; gDevilSquareEventServerIp
  000b9	e8 00 00 00 00	 call	 ?GMRankingServerConnect@@YAHPADK@Z ; GMRankingServerConnect
  000be	83 c4 08	 add	 esp, 8
  000c1	85 c0		 test	 eax, eax
  000c3	75 22		 jne	 SHORT $LN2@EGReqBlood

; 2155 : 		{
; 2156 : 			IsDevilSquareEventConnected = 0;
; 2157 : 			LogAddTD("Can not connect Ranking Server");

  000c5	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@EMDINEAJ@Can?5not?5connect?5Ranking?5Server?$AA@
  000ca	a3 00 00 00 00	 mov	 DWORD PTR ?IsDevilSquareEventConnected@@3HA, eax ; IsDevilSquareEventConnected
  000cf	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000d5	83 c4 04	 add	 esp, 4
  000d8	5e		 pop	 esi

; 2167 : 	}
; 2168 : }

  000d9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000dc	33 cd		 xor	 ecx, ebp
  000de	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e3	8b e5		 mov	 esp, ebp
  000e5	5d		 pop	 ebp
  000e6	c3		 ret	 0
$LN2@EGReqBlood:

; 2158 : 			return;
; 2159 : 		}
; 2160 : 
; 2161 : 		IsDevilSquareEventConnected = TRUE;

  000e7	b8 01 00 00 00	 mov	 eax, 1
  000ec	a3 00 00 00 00	 mov	 DWORD PTR ?IsDevilSquareEventConnected@@3HA, eax ; IsDevilSquareEventConnected
$LN3@EGReqBlood:

; 2162 : 	}
; 2163 : 
; 2164 : 	if ( !DevilSquareEventConnect && IsDevilSquareEventConnected )

  000f1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?DevilSquareEventConnect@@3HA, 0 ; DevilSquareEventConnect
  000f8	75 17		 jne	 SHORT $LN1@EGReqBlood
  000fa	85 c0		 test	 eax, eax
  000fc	74 13		 je	 SHORT $LN1@EGReqBlood

; 2165 : 	{
; 2166 : 		wsRServerCli.DataSend((char*)&pMsg, pMsg.h.size);

  000fe	0f b6 45 dd	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00102	50		 push	 eax
  00103	8d 4d dc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00106	51		 push	 ecx
  00107	b9 00 00 00 00	 mov	 ecx, OFFSET ?wsRServerCli@@3VwsJoinServerCli@@A ; wsRServerCli
  0010c	e8 00 00 00 00	 call	 ?DataSend@wsJoinServerCli@@QAEHPADH@Z ; wsJoinServerCli::DataSend
$LN1@EGReqBlood:

; 2167 : 	}
; 2168 : }

  00111	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00114	33 cd		 xor	 ecx, ebp
  00116	5e		 pop	 esi
  00117	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0011c	8b e5		 mov	 esp, ebp
  0011e	5d		 pop	 ebp
  0011f	c3		 ret	 0
?EGReqBloodCastleEnterCount@@YAXH@Z ENDP		; EGReqBloodCastleEnterCount
_TEXT	ENDS
PUBLIC	?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z ; EGAnsBloodCastleEnterCount
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z
_TEXT	SEGMENT
_szName$ = -32						; size = 11
_szAccountID$ = -20					; size = 11
_pMsgSend$ = -8						; size = 5
_lpMsg$ = 8						; size = 4
?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z PROC ; EGAnsBloodCastleEnterCount, COMDAT

; 2171 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	56		 push	 esi

; 2172 : 	if ( !lpMsg)

  00007	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]
  0000a	85 f6		 test	 esi, esi
  0000c	0f 84 ec 00 00
	00		 je	 $LN1@EGAnsBlood

; 2173 : 		return;
; 2174 : 
; 2175 : 	if ( !gObjIsConnected(lpMsg->iObjIndex))

  00012	8b 46 1c	 mov	 eax, DWORD PTR [esi+28]
  00015	50		 push	 eax
  00016	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001b	83 c4 04	 add	 esp, 4
  0001e	85 c0		 test	 eax, eax
  00020	0f 84 d8 00 00
	00		 je	 $LN1@EGAnsBlood

; 2176 : 		return;
; 2177 : 
; 2178 : 	char szAccountID[11] = {0};
; 2179 : 	char szName[11] = {0};
; 2180 : 	memcpy(szAccountID, lpMsg->AccountID, 10);

  00026	8b 56 07	 mov	 edx, DWORD PTR [esi+7]
  00029	8b 4e 03	 mov	 ecx, DWORD PTR [esi+3]
  0002c	33 c0		 xor	 eax, eax
  0002e	53		 push	 ebx

; 2181 : 	memcpy(szName, lpMsg->GameID, 10);
; 2182 : 
; 2183 : 	if ( strcmp(gObj[lpMsg->iObjIndex].AccountID, szAccountID) || strcmp(gObj[lpMsg->iObjIndex].Name, szName) )

  0002f	8b 5e 1c	 mov	 ebx, DWORD PTR [esi+28]
  00032	57		 push	 edi
  00033	89 45 ed	 mov	 DWORD PTR _szAccountID$[ebp+1], eax
  00036	89 45 f1	 mov	 DWORD PTR _szAccountID$[ebp+5], eax
  00039	89 45 e1	 mov	 DWORD PTR _szName$[ebp+1], eax
  0003c	89 45 e5	 mov	 DWORD PTR _szName$[ebp+5], eax
  0003f	8b fb		 mov	 edi, ebx
  00041	66 89 45 f5	 mov	 WORD PTR _szAccountID$[ebp+9], ax
  00045	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  0004b	66 89 45 e9	 mov	 WORD PTR _szName$[ebp+9], ax
  0004f	0f b7 46 0b	 movzx	 eax, WORD PTR [esi+11]
  00053	89 55 f0	 mov	 DWORD PTR _szAccountID$[ebp+4], edx
  00056	8b 56 11	 mov	 edx, DWORD PTR [esi+17]
  00059	66 89 45 f4	 mov	 WORD PTR _szAccountID$[ebp+8], ax
  0005d	0f b7 46 15	 movzx	 eax, WORD PTR [esi+21]
  00061	89 4d ec	 mov	 DWORD PTR _szAccountID$[ebp], ecx
  00064	8b 4e 0d	 mov	 ecx, DWORD PTR [esi+13]
  00067	89 55 e4	 mov	 DWORD PTR _szName$[ebp+4], edx
  0006a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00070	03 fa		 add	 edi, edx
  00072	89 4d e0	 mov	 DWORD PTR _szName$[ebp], ecx
  00075	66 89 45 e8	 mov	 WORD PTR _szName$[ebp+8], ax
  00079	8d 4d ec	 lea	 ecx, DWORD PTR _szAccountID$[ebp]
  0007c	8d 47 6c	 lea	 eax, DWORD PTR [edi+108]
  0007f	90		 npad	 1
$LL7@EGAnsBlood:
  00080	8a 10		 mov	 dl, BYTE PTR [eax]
  00082	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00084	75 1a		 jne	 SHORT $LN8@EGAnsBlood
  00086	84 d2		 test	 dl, dl
  00088	74 12		 je	 SHORT $LN9@EGAnsBlood
  0008a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0008d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00090	75 0e		 jne	 SHORT $LN8@EGAnsBlood
  00092	83 c0 02	 add	 eax, 2
  00095	83 c1 02	 add	 ecx, 2
  00098	84 d2		 test	 dl, dl
  0009a	75 e4		 jne	 SHORT $LL7@EGAnsBlood
$LN9@EGAnsBlood:
  0009c	33 c0		 xor	 eax, eax
  0009e	eb 05		 jmp	 SHORT $LN10@EGAnsBlood
$LN8@EGAnsBlood:
  000a0	1b c0		 sbb	 eax, eax
  000a2	83 d8 ff	 sbb	 eax, -1
$LN10@EGAnsBlood:
  000a5	85 c0		 test	 eax, eax
  000a7	75 53		 jne	 SHORT $LN15@EGAnsBlood
  000a9	8d 4d e0	 lea	 ecx, DWORD PTR _szName$[ebp]
  000ac	8d 47 77	 lea	 eax, DWORD PTR [edi+119]
  000af	90		 npad	 1
$LL11@EGAnsBlood:
  000b0	8a 10		 mov	 dl, BYTE PTR [eax]
  000b2	3a 11		 cmp	 dl, BYTE PTR [ecx]
  000b4	75 1a		 jne	 SHORT $LN12@EGAnsBlood
  000b6	84 d2		 test	 dl, dl
  000b8	74 12		 je	 SHORT $LN13@EGAnsBlood
  000ba	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  000bd	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  000c0	75 0e		 jne	 SHORT $LN12@EGAnsBlood
  000c2	83 c0 02	 add	 eax, 2
  000c5	83 c1 02	 add	 ecx, 2
  000c8	84 d2		 test	 dl, dl
  000ca	75 e4		 jne	 SHORT $LL11@EGAnsBlood
$LN13@EGAnsBlood:
  000cc	33 c0		 xor	 eax, eax
  000ce	eb 05		 jmp	 SHORT $LN14@EGAnsBlood
$LN12@EGAnsBlood:
  000d0	1b c0		 sbb	 eax, eax
  000d2	83 d8 ff	 sbb	 eax, -1
$LN14@EGAnsBlood:
  000d5	85 c0		 test	 eax, eax
  000d7	75 23		 jne	 SHORT $LN15@EGAnsBlood

; 2184 : 		 return;
; 2185 : 
; 2186 : 	PMSG_ANS_CL_ENTERCOUNT pMsgSend;
; 2187 : 
; 2188 : 	pMsgSend.h.c = 0xC1;
; 2189 : 	pMsgSend.h.headcode = 0x9F;
; 2190 : 	pMsgSend.h.size = sizeof(pMsgSend);
; 2191 : 	pMsgSend.btEventType = 2;
; 2192 : 	pMsgSend.btLeftEnterCount = lpMsg->iLeftCount;

  000d9	8a 46 20	 mov	 al, BYTE PTR [esi+32]

; 2193 : 
; 2194 : 	DataSend(lpMsg->iObjIndex, (LPBYTE)&pMsgSend, sizeof(pMsgSend));

  000dc	6a 05		 push	 5
  000de	8d 4d f8	 lea	 ecx, DWORD PTR _pMsgSend$[ebp]
  000e1	51		 push	 ecx
  000e2	53		 push	 ebx
  000e3	c6 45 f8 c1	 mov	 BYTE PTR _pMsgSend$[ebp], 193 ; 000000c1H
  000e7	66 c7 45 f9 05
	9f		 mov	 WORD PTR _pMsgSend$[ebp+1], 40709 ; 00009f05H
  000ed	c6 45 fb 02	 mov	 BYTE PTR _pMsgSend$[ebp+3], 2
  000f1	88 45 fc	 mov	 BYTE PTR _pMsgSend$[ebp+4], al
  000f4	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  000f9	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN15@EGAnsBlood:
  000fc	5f		 pop	 edi
  000fd	5b		 pop	 ebx
$LN1@EGAnsBlood:
  000fe	5e		 pop	 esi

; 2195 : }

  000ff	8b e5		 mov	 esp, ebp
  00101	5d		 pop	 ebp
  00102	c3		 ret	 0
?EGAnsBloodCastleEnterCount@@YAXPAUPMSG_ANS_BLOODCASTLE_ENTERCOUNT@@@Z ENDP ; EGAnsBloodCastleEnterCount
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqRegCCOfflineGift@@YAXH@Z			; EGReqRegCCOfflineGift
; Function compile flags: /Ogtp
;	COMDAT ?EGReqRegCCOfflineGift@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -40						; size = 36
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqRegCCOfflineGift@@YAXH@Z PROC			; EGReqRegCCOfflineGift, COMDAT

; 2207 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 28	 sub	 esp, 40			; 00000028H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]

; 2208 : 	if ( !gObjIsConnected(iIndex) )

  00014	56		 push	 esi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	0f 84 84 00 00
	00		 je	 $LN2@EGReqRegCC

; 2209 : 		return;
; 2210 : 
; 2211 : 	PMSG_REQ_REG_CC_OFFLINE_GIFT pMsg;
; 2212 : 
; 2213 : 	pMsg.h.c = 0xC1;
; 2214 : 	pMsg.h.headcode = 0x15;
; 2215 : 	pMsg.h.size = sizeof(pMsg);
; 2216 : 	memcpy(pMsg.szUID, gObj[iIndex].AccountID, 11);

  00025	8b c6		 mov	 eax, esi
  00027	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0002d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00033	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00037	66 c7 45 d9 24
	15		 mov	 WORD PTR _pMsg$[ebp+1], 5412 ; 00001524H
  0003d	8b 50 6c	 mov	 edx, DWORD PTR [eax+108]
  00040	89 55 e0	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  00043	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00046	89 4d e4	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  00049	0f b7 50 74	 movzx	 edx, WORD PTR [eax+116]
  0004d	66 89 55 e8	 mov	 WORD PTR _pMsg$[ebp+16], dx
  00051	8a 48 76	 mov	 cl, BYTE PTR [eax+118]
  00054	88 4d ea	 mov	 BYTE PTR _pMsg$[ebp+18], cl

; 2217 : 	memcpy(pMsg.szNAME, gObj[iIndex].Name, 11);

  00057	8b 50 77	 mov	 edx, DWORD PTR [eax+119]
  0005a	89 55 ee	 mov	 DWORD PTR _pMsg$[ebp+22], edx
  0005d	8b 48 7b	 mov	 ecx, DWORD PTR [eax+123]
  00060	89 4d f2	 mov	 DWORD PTR _pMsg$[ebp+26], ecx
  00063	0f b7 50 7f	 movzx	 edx, WORD PTR [eax+127]

; 2218 : 	pMsg.wServerCode = gGameServerCode / 20;

  00067	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0006e	66 89 55 f6	 mov	 WORD PTR _pMsg$[ebp+30], dx
  00072	8a 80 81 00 00
	00		 mov	 al, BYTE PTR [eax+129]
  00078	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+32], al
  0007b	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  00080	f7 e9		 imul	 ecx
  00082	c1 fa 03	 sar	 edx, 3
  00085	8b ca		 mov	 ecx, edx
  00087	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  0008a	03 ca		 add	 ecx, edx

; 2219 : 	pMsg.iINDEX = iIndex;
; 2220 : 	pMsg.szUID[10] = 0;

  0008c	32 c0		 xor	 al, al

; 2221 : 	pMsg.szNAME[10] = 0;
; 2222 : 
; 2223 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  0008e	8d 55 d8	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00091	6a 24		 push	 36			; 00000024H
  00093	52		 push	 edx
  00094	66 89 4d ec	 mov	 WORD PTR _pMsg$[ebp+20], cx
  00098	89 75 dc	 mov	 DWORD PTR _pMsg$[ebp+4], esi
  0009b	88 45 ea	 mov	 BYTE PTR _pMsg$[ebp+18], al
  0009e	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+32], al
  000a1	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000a6	83 c4 08	 add	 esp, 8
$LN2@EGReqRegCC:

; 2224 : }

  000a9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000ac	33 cd		 xor	 ecx, ebp
  000ae	5e		 pop	 esi
  000af	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b4	8b e5		 mov	 esp, ebp
  000b6	5d		 pop	 ebp
  000b7	c3		 ret	 0
?EGReqRegCCOfflineGift@@YAXH@Z ENDP			; EGReqRegCCOfflineGift
_TEXT	ENDS
PUBLIC	??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z ; EGAnsRegCCOfflineGift
EXTRN	_memset:PROC
;	COMDAT ??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@
CONST	SEGMENT
??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@ DB '['
	DB	'Chaos Castle] [%s][%s] Success to Register OffLine Gift (GIFT'
	DB	':%s)', 00H					; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z
_TEXT	SEGMENT
_szText$ = -336						; size = 256
_szGIFT_NAME$ = -80					; size = 50
_szAccountID$ = -28					; size = 11
_szName$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z PROC ; EGAnsRegCCOfflineGift, COMDAT

; 2227 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 50 01 00
	00		 sub	 esp, 336		; 00000150H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]

; 2228 : 	if ( !lpMsg)

  00016	33 d2		 xor	 edx, edx
  00018	3b c2		 cmp	 eax, edx
  0001a	0f 84 c1 00 00
	00		 je	 $LN3@EGAnsRegCC

; 2229 : 		return;
; 2230 : 
; 2231 : 	if ( !lpMsg->iResultCode )

  00020	39 50 24	 cmp	 DWORD PTR [eax+36], edx
  00023	0f 84 b8 00 00
	00		 je	 $LN3@EGAnsRegCC

; 2232 : 		return;
; 2233 : 
; 2234 : 	char szAccountID[11] = {0};
; 2235 : 	char szName[11] = {0};
; 2236 : 	char szGIFT_NAME[50] = {0};
; 2237 : 	memset(szAccountID, 0, sizeof(szAccountID));
; 2238 : 	memset(szName, 0, sizeof(szName));
; 2239 : 	memset(szGIFT_NAME, 0, sizeof(szGIFT_NAME));
; 2240 : 	memcpy(szAccountID, lpMsg->szUID, sizeof(szAccountID));

  00029	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0002c	89 4d e4	 mov	 DWORD PTR _szAccountID$[ebp], ecx
  0002f	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  00032	89 4d e8	 mov	 DWORD PTR _szAccountID$[ebp+4], ecx
  00035	0f b7 48 10	 movzx	 ecx, WORD PTR [eax+16]
  00039	66 89 4d ec	 mov	 WORD PTR _szAccountID$[ebp+8], cx
  0003d	0f b6 48 12	 movzx	 ecx, BYTE PTR [eax+18]
  00041	88 4d ee	 mov	 BYTE PTR _szAccountID$[ebp+10], cl

; 2241 : 	memcpy(szName, lpMsg->szNAME, sizeof(szName));

  00044	8b 48 16	 mov	 ecx, DWORD PTR [eax+22]
  00047	89 4d f0	 mov	 DWORD PTR _szName$[ebp], ecx
  0004a	8b 48 1a	 mov	 ecx, DWORD PTR [eax+26]
  0004d	89 4d f4	 mov	 DWORD PTR _szName$[ebp+4], ecx
  00050	0f b7 48 1e	 movzx	 ecx, WORD PTR [eax+30]
  00054	56		 push	 esi
  00055	66 89 4d f8	 mov	 WORD PTR _szName$[ebp+8], cx
  00059	0f b6 48 20	 movzx	 ecx, BYTE PTR [eax+32]
  0005d	57		 push	 edi
  0005e	88 4d fa	 mov	 BYTE PTR _szName$[ebp+10], cl

; 2242 : 	memcpy(szGIFT_NAME, lpMsg->szGIFT_NAME, sizeof(szGIFT_NAME));

  00061	8d 70 28	 lea	 esi, DWORD PTR [eax+40]
  00064	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00069	8d 7d b0	 lea	 edi, DWORD PTR _szGIFT_NAME$[ebp]
  0006c	f3 a5		 rep movsd

; 2243 : 	szAccountID[10] = 0;
; 2244 : 	szName[10] = 0;
; 2245 : 	szGIFT_NAME[49] = 0;
; 2246 : 	char szText[256] = {0};

  0006e	68 ff 00 00 00	 push	 255			; 000000ffH
  00073	52		 push	 edx
  00074	66 a5		 movsw
  00076	88 55 ee	 mov	 BYTE PTR _szAccountID$[ebp+10], dl
  00079	88 55 fa	 mov	 BYTE PTR _szName$[ebp+10], dl
  0007c	88 55 e1	 mov	 BYTE PTR _szGIFT_NAME$[ebp+49], dl
  0007f	88 95 b0 fe ff
	ff		 mov	 BYTE PTR _szText$[ebp], dl
  00085	8d 95 b1 fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp+1]
  0008b	52		 push	 edx
  0008c	e8 00 00 00 00	 call	 _memset
  00091	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2247 : 
; 2248 : 	wsprintf(szText, lMsg.Get(MSGGET(6,74)), szName, szGIFT_NAME);

  00094	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  00097	50		 push	 eax
  00098	8d 4d f0	 lea	 ecx, DWORD PTR _szName$[ebp]
  0009b	51		 push	 ecx
  0009c	68 4a 06 00 00	 push	 1610			; 0000064aH
  000a1	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000a6	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000ab	50		 push	 eax
  000ac	8d 95 b0 fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp]
  000b2	52		 push	 edx
  000b3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 2249 : 	AllSendServerMsg(szText);

  000b9	8d 85 b0 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp]
  000bf	50		 push	 eax
  000c0	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg

; 2250 : 
; 2251 : 	LogAddTD("[Chaos Castle] [%s][%s] Success to Register OffLine Gift (GIFT:%s)", szAccountID, szName, szGIFT_NAME);

  000c5	8d 4d b0	 lea	 ecx, DWORD PTR _szGIFT_NAME$[ebp]
  000c8	51		 push	 ecx
  000c9	8d 55 f0	 lea	 edx, DWORD PTR _szName$[ebp]
  000cc	52		 push	 edx
  000cd	8d 45 e4	 lea	 eax, DWORD PTR _szAccountID$[ebp]
  000d0	50		 push	 eax
  000d1	68 00 00 00 00	 push	 OFFSET ??_C@_0ED@MNBMBKBB@?$FLChaos?5Castle?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Success?5@
  000d6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000dc	83 c4 24	 add	 esp, 36			; 00000024H
  000df	5f		 pop	 edi
  000e0	5e		 pop	 esi
$LN3@EGAnsRegCC:

; 2252 : }

  000e1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e4	33 cd		 xor	 ecx, ebp
  000e6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000eb	8b e5		 mov	 esp, ebp
  000ed	5d		 pop	 ebp
  000ee	c3		 ret	 0
?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z ENDP ; EGAnsRegCCOfflineGift
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqRegDLOfflineGift@@YAXH@Z			; EGReqRegDLOfflineGift
; Function compile flags: /Ogtp
;	COMDAT ?EGReqRegDLOfflineGift@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -40						; size = 36
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqRegDLOfflineGift@@YAXH@Z PROC			; EGReqRegDLOfflineGift, COMDAT

; 2264 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 28	 sub	 esp, 40			; 00000028H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]

; 2265 : 	if ( !gObjIsConnected(iIndex) )

  00014	56		 push	 esi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	0f 84 84 00 00
	00		 je	 $LN2@EGReqRegDL

; 2266 : 		return;
; 2267 : 
; 2268 : 	PMSG_REQ_REG_DL_OFFLINE_GIFT pMsg;
; 2269 : 
; 2270 : 	pMsg.h.c = 0xC1;
; 2271 : 	pMsg.h.headcode = 0x16;
; 2272 : 	pMsg.h.size = sizeof(pMsg);
; 2273 : 	memcpy(pMsg.szUID, gObj[iIndex].AccountID, 11);

  00025	8b c6		 mov	 eax, esi
  00027	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0002d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00033	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00037	66 c7 45 d9 24
	16		 mov	 WORD PTR _pMsg$[ebp+1], 5668 ; 00001624H
  0003d	8b 50 6c	 mov	 edx, DWORD PTR [eax+108]
  00040	89 55 e0	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  00043	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00046	89 4d e4	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  00049	0f b7 50 74	 movzx	 edx, WORD PTR [eax+116]
  0004d	66 89 55 e8	 mov	 WORD PTR _pMsg$[ebp+16], dx
  00051	8a 48 76	 mov	 cl, BYTE PTR [eax+118]
  00054	88 4d ea	 mov	 BYTE PTR _pMsg$[ebp+18], cl

; 2274 : 	memcpy(pMsg.szNAME, gObj[iIndex].Name, 11);

  00057	8b 50 77	 mov	 edx, DWORD PTR [eax+119]
  0005a	89 55 ee	 mov	 DWORD PTR _pMsg$[ebp+22], edx
  0005d	8b 48 7b	 mov	 ecx, DWORD PTR [eax+123]
  00060	89 4d f2	 mov	 DWORD PTR _pMsg$[ebp+26], ecx
  00063	0f b7 50 7f	 movzx	 edx, WORD PTR [eax+127]

; 2275 : 	pMsg.wServerCode = gGameServerCode / 20;

  00067	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0006e	66 89 55 f6	 mov	 WORD PTR _pMsg$[ebp+30], dx
  00072	8a 80 81 00 00
	00		 mov	 al, BYTE PTR [eax+129]
  00078	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+32], al
  0007b	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  00080	f7 e9		 imul	 ecx
  00082	c1 fa 03	 sar	 edx, 3
  00085	8b ca		 mov	 ecx, edx
  00087	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  0008a	03 ca		 add	 ecx, edx

; 2276 : 	pMsg.iINDEX = iIndex;
; 2277 : 	pMsg.szUID[10] = 0;

  0008c	32 c0		 xor	 al, al

; 2278 : 	pMsg.szNAME[10] = 0;
; 2279 : 
; 2280 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  0008e	8d 55 d8	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00091	6a 24		 push	 36			; 00000024H
  00093	52		 push	 edx
  00094	66 89 4d ec	 mov	 WORD PTR _pMsg$[ebp+20], cx
  00098	89 75 dc	 mov	 DWORD PTR _pMsg$[ebp+4], esi
  0009b	88 45 ea	 mov	 BYTE PTR _pMsg$[ebp+18], al
  0009e	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+32], al
  000a1	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000a6	83 c4 08	 add	 esp, 8
$LN2@EGReqRegDL:

; 2281 : }

  000a9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000ac	33 cd		 xor	 ecx, ebp
  000ae	5e		 pop	 esi
  000af	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b4	8b e5		 mov	 esp, ebp
  000b6	5d		 pop	 ebp
  000b7	c3		 ret	 0
?EGReqRegDLOfflineGift@@YAXH@Z ENDP			; EGReqRegDLOfflineGift
_TEXT	ENDS
PUBLIC	??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@ ; `string'
PUBLIC	??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z ; EGAnsRegDLOfflineGift
;	COMDAT ??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@
CONST	SEGMENT
??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@ DB '['
	DB	'DarkLord Heart Event] [%s][%s] Success to Register OffLine Gi'
	DB	'ft (GIFT:%s)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@
CONST	SEGMENT
??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@ DB '['
	DB	0b4H, 0d9H, 0c5H, 0a9H, 0b7H, 0ceH, 0b5H, 0e5H, ' ', 0b1H, 0e2H
	DB	0b3H, 0e4H, ' ', 0c0H, 0ccH, 0baH, 0a5H, 0c6H, 0aeH, '] %s ', 0b4H
	DB	0d4H, 0b2H, 0b2H, 0bcH, 0adH, ' %s ', 0b0H, 0e6H, 0c7H, 0b0H, 0bfH
	DB	0a1H, ' ', 0b4H, 0e7H, 0c3H, 0b7H, 0b5H, 0c7H, 0bcH, 0ccH, 0bdH
	DB	0c0H, 0b4H, 0cfH, 0b4H, 0d9H, '.', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z
_TEXT	SEGMENT
_szText$ = -336						; size = 256
_szGIFT_NAME$ = -80					; size = 50
_szAccountID$ = -28					; size = 11
_szName$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z PROC ; EGAnsRegDLOfflineGift, COMDAT

; 2284 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 50 01 00
	00		 sub	 esp, 336		; 00000150H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]

; 2285 : 	if ( !lpMsg)

  00016	33 d2		 xor	 edx, edx
  00018	3b c2		 cmp	 eax, edx
  0001a	0f 84 b3 00 00
	00		 je	 $LN3@EGAnsRegDL

; 2286 : 		return;
; 2287 : 
; 2288 : 	if ( !lpMsg->iResultCode )

  00020	39 50 24	 cmp	 DWORD PTR [eax+36], edx
  00023	0f 84 aa 00 00
	00		 je	 $LN3@EGAnsRegDL

; 2289 : 		return;
; 2290 : 
; 2291 : 	char szAccountID[11] = {0};
; 2292 : 	char szName[11] = {0};
; 2293 : 	char szGIFT_NAME[50] = {0};
; 2294 : 	memset(szAccountID, 0, sizeof(szAccountID));
; 2295 : 	memset(szName, 0, sizeof(szName));
; 2296 : 	memset(szGIFT_NAME, 0, sizeof(szGIFT_NAME));
; 2297 : 	memcpy(szAccountID, lpMsg->szUID, sizeof(szAccountID));

  00029	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0002c	89 4d e4	 mov	 DWORD PTR _szAccountID$[ebp], ecx
  0002f	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  00032	89 4d e8	 mov	 DWORD PTR _szAccountID$[ebp+4], ecx
  00035	0f b7 48 10	 movzx	 ecx, WORD PTR [eax+16]
  00039	66 89 4d ec	 mov	 WORD PTR _szAccountID$[ebp+8], cx
  0003d	0f b6 48 12	 movzx	 ecx, BYTE PTR [eax+18]
  00041	88 4d ee	 mov	 BYTE PTR _szAccountID$[ebp+10], cl

; 2298 : 	memcpy(szName, lpMsg->szNAME, sizeof(szName));

  00044	8b 48 16	 mov	 ecx, DWORD PTR [eax+22]
  00047	89 4d f0	 mov	 DWORD PTR _szName$[ebp], ecx
  0004a	8b 48 1a	 mov	 ecx, DWORD PTR [eax+26]
  0004d	89 4d f4	 mov	 DWORD PTR _szName$[ebp+4], ecx
  00050	0f b7 48 1e	 movzx	 ecx, WORD PTR [eax+30]
  00054	56		 push	 esi
  00055	66 89 4d f8	 mov	 WORD PTR _szName$[ebp+8], cx
  00059	0f b6 48 20	 movzx	 ecx, BYTE PTR [eax+32]
  0005d	57		 push	 edi
  0005e	88 4d fa	 mov	 BYTE PTR _szName$[ebp+10], cl

; 2299 : 	memcpy(szGIFT_NAME, lpMsg->szGIFT_NAME, sizeof(szGIFT_NAME));

  00061	8d 70 28	 lea	 esi, DWORD PTR [eax+40]
  00064	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00069	8d 7d b0	 lea	 edi, DWORD PTR _szGIFT_NAME$[ebp]
  0006c	f3 a5		 rep movsd

; 2300 : 	szAccountID[10] = 0;
; 2301 : 	szName[10] = 0;
; 2302 : 	szGIFT_NAME[49] = 0;
; 2303 : 	char szText[256] = {0};

  0006e	68 ff 00 00 00	 push	 255			; 000000ffH
  00073	52		 push	 edx
  00074	66 a5		 movsw
  00076	88 55 ee	 mov	 BYTE PTR _szAccountID$[ebp+10], dl
  00079	88 55 fa	 mov	 BYTE PTR _szName$[ebp+10], dl
  0007c	88 55 e1	 mov	 BYTE PTR _szGIFT_NAME$[ebp+49], dl
  0007f	88 95 b0 fe ff
	ff		 mov	 BYTE PTR _szText$[ebp], dl
  00085	8d 95 b1 fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp+1]
  0008b	52		 push	 edx
  0008c	e8 00 00 00 00	 call	 _memset

; 2304 : 
; 2305 : 	wsprintf(szText, "[  ] %s  %s  .", szName, szGIFT_NAME);

  00091	8d 45 b0	 lea	 eax, DWORD PTR _szGIFT_NAME$[ebp]
  00094	50		 push	 eax
  00095	8d 4d f0	 lea	 ecx, DWORD PTR _szName$[ebp]
  00098	51		 push	 ecx
  00099	8d 95 b0 fe ff
	ff		 lea	 edx, DWORD PTR _szText$[ebp]
  0009f	68 00 00 00 00	 push	 OFFSET ??_C@_0DL@IPBEOKOL@?$FL?$LE?Y?E?$KJ?$LH?N?$LF?e?5?$LB?b?$LD?d?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC?$LM?$KN@
  000a4	52		 push	 edx
  000a5	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 2306 : 	AllSendServerMsg(szText);

  000ab	8d 85 b0 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp]
  000b1	50		 push	 eax
  000b2	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg

; 2307 : 
; 2308 : 	LogAddTD("[DarkLord Heart Event] [%s][%s] Success to Register OffLine Gift (GIFT:%s)", szAccountID, szName, szGIFT_NAME);

  000b7	8d 4d b0	 lea	 ecx, DWORD PTR _szGIFT_NAME$[ebp]
  000ba	51		 push	 ecx
  000bb	8d 55 f0	 lea	 edx, DWORD PTR _szName$[ebp]
  000be	52		 push	 edx
  000bf	8d 45 e4	 lea	 eax, DWORD PTR _szAccountID$[ebp]
  000c2	50		 push	 eax
  000c3	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@NOBBOLBI@?$FLDarkLord?5Heart?5Event?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5@
  000c8	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000ce	83 c4 30	 add	 esp, 48			; 00000030H
  000d1	5f		 pop	 edi
  000d2	5e		 pop	 esi
$LN3@EGAnsRegDL:

; 2309 : }

  000d3	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000d6	33 cd		 xor	 ecx, ebp
  000d8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000dd	8b e5		 mov	 esp, ebp
  000df	5d		 pop	 ebp
  000e0	c3		 ret	 0
?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z ENDP ; EGAnsRegDLOfflineGift
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGReqRegHTOfflineGift@@YAXH@Z			; EGReqRegHTOfflineGift
; Function compile flags: /Ogtp
;	COMDAT ?EGReqRegHTOfflineGift@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -40						; size = 36
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGReqRegHTOfflineGift@@YAXH@Z PROC			; EGReqRegHTOfflineGift, COMDAT

; 2321 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 28	 sub	 esp, 40			; 00000028H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]

; 2322 : 	if ( !gObjIsConnected(iIndex) )

  00014	56		 push	 esi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	0f 84 84 00 00
	00		 je	 $LN2@EGReqRegHT

; 2323 : 		return;
; 2324 : 
; 2325 : 	PMSG_REQ_REG_HT_OFFLINE_GIFT pMsg;
; 2326 : 
; 2327 : 	pMsg.h.c = 0xC1;
; 2328 : 	pMsg.h.headcode = 0x17;
; 2329 : 	pMsg.h.size = sizeof(pMsg);
; 2330 : 	memcpy(pMsg.szUID, gObj[iIndex].AccountID, 11);

  00025	8b c6		 mov	 eax, esi
  00027	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0002d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00033	c6 45 d8 c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00037	66 c7 45 d9 24
	17		 mov	 WORD PTR _pMsg$[ebp+1], 5924 ; 00001724H
  0003d	8b 50 6c	 mov	 edx, DWORD PTR [eax+108]
  00040	89 55 e0	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  00043	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00046	89 4d e4	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  00049	0f b7 50 74	 movzx	 edx, WORD PTR [eax+116]
  0004d	66 89 55 e8	 mov	 WORD PTR _pMsg$[ebp+16], dx
  00051	8a 48 76	 mov	 cl, BYTE PTR [eax+118]
  00054	88 4d ea	 mov	 BYTE PTR _pMsg$[ebp+18], cl

; 2331 : 	memcpy(pMsg.szNAME, gObj[iIndex].Name, 11);

  00057	8b 50 77	 mov	 edx, DWORD PTR [eax+119]
  0005a	89 55 ee	 mov	 DWORD PTR _pMsg$[ebp+22], edx
  0005d	8b 48 7b	 mov	 ecx, DWORD PTR [eax+123]
  00060	89 4d f2	 mov	 DWORD PTR _pMsg$[ebp+26], ecx
  00063	0f b7 50 7f	 movzx	 edx, WORD PTR [eax+127]

; 2332 : 	pMsg.wServerCode = gGameServerCode / 20;

  00067	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0006e	66 89 55 f6	 mov	 WORD PTR _pMsg$[ebp+30], dx
  00072	8a 80 81 00 00
	00		 mov	 al, BYTE PTR [eax+129]
  00078	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+32], al
  0007b	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  00080	f7 e9		 imul	 ecx
  00082	c1 fa 03	 sar	 edx, 3
  00085	8b ca		 mov	 ecx, edx
  00087	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  0008a	03 ca		 add	 ecx, edx

; 2333 : 	pMsg.iINDEX = iIndex;
; 2334 : 	pMsg.szUID[10] = 0;

  0008c	32 c0		 xor	 al, al

; 2335 : 	pMsg.szNAME[10] = 0;
; 2336 : 
; 2337 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  0008e	8d 55 d8	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00091	6a 24		 push	 36			; 00000024H
  00093	52		 push	 edx
  00094	66 89 4d ec	 mov	 WORD PTR _pMsg$[ebp+20], cx
  00098	89 75 dc	 mov	 DWORD PTR _pMsg$[ebp+4], esi
  0009b	88 45 ea	 mov	 BYTE PTR _pMsg$[ebp+18], al
  0009e	88 45 f8	 mov	 BYTE PTR _pMsg$[ebp+32], al
  000a1	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000a6	83 c4 08	 add	 esp, 8
$LN2@EGReqRegHT:

; 2338 : }

  000a9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000ac	33 cd		 xor	 ecx, ebp
  000ae	5e		 pop	 esi
  000af	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b4	8b e5		 mov	 esp, ebp
  000b6	5d		 pop	 ebp
  000b7	c3		 ret	 0
?EGReqRegHTOfflineGift@@YAXH@Z ENDP			; EGReqRegHTOfflineGift
_TEXT	ENDS
PUBLIC	??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ ; `string'
PUBLIC	??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z ; EGAnsRegHTOfflineGift
;	COMDAT ??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
CONST	SEGMENT
??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@ DB '['
	DB	'Hidden TreasureBox Event] [%s][%s] Success to Register OffLin'
	DB	'e Gift (GIFT:%s)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@
CONST	SEGMENT
??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@ DB '['
	DB	0bcH, 0fbH, 0b0H, 0dcH, 0c1H, 0f8H, ' ', 0baH, 0b8H, 0b9H, 0b0H
	DB	0bbH, 0f3H, 0c0H, 0daH, ' ', 0c0H, 0ccH, 0baH, 0a5H, 0c6H, 0aeH
	DB	'] %s ', 0b4H, 0d4H, 0b2H, 0b2H, 0bcH, 0adH, ' %s ', 0b0H, 0e6H
	DB	0c7H, 0b0H, 0bfH, 0a1H, ' ', 0b4H, 0e7H, 0c3H, 0b7H, 0b5H, 0c7H
	DB	0bcH, 0ccH, 0bdH, 0c0H, 0b4H, 0cfH, 0b4H, 0d9H, '.', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z
_TEXT	SEGMENT
_szText$ = -336						; size = 256
_szGIFT_NAME$ = -80					; size = 50
_szAccountID$ = -28					; size = 11
_szName$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z PROC ; EGAnsRegHTOfflineGift, COMDAT

; 2341 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 50 01 00
	00		 sub	 esp, 336		; 00000150H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b 75 08	 mov	 esi, DWORD PTR _lpMsg$[ebp]

; 2342 : 	if ( !lpMsg)

  00017	33 c0		 xor	 eax, eax
  00019	3b f0		 cmp	 esi, eax
  0001b	0f 84 0c 01 00
	00		 je	 $LN4@EGAnsRegHT

; 2343 : 		return;
; 2344 : 
; 2345 : 	if ( !lpMsg->iResultCode )

  00021	39 46 24	 cmp	 DWORD PTR [esi+36], eax
  00024	75 5f		 jne	 SHORT $LN2@EGAnsRegHT

; 2346 : 	{
; 2347 : 		if ( gObjIsConnected(lpMsg->iINDEX))

  00026	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00029	50		 push	 eax
  0002a	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0002f	83 c4 04	 add	 esp, 4
  00032	85 c0		 test	 eax, eax
  00034	0f 84 f3 00 00
	00		 je	 $LN4@EGAnsRegHT

; 2348 : 		{
; 2349 : 			LPOBJ lpObj = &gObj[lpMsg->iINDEX];

  0003a	8b 76 04	 mov	 esi, DWORD PTR [esi+4]
  0003d	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00043	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2350 : 
; 2351 : 			MapC[lpObj->MapNumber].MoneyItemDrop(1000000, lpObj->X, lpObj->Y);

  00049	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00050	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  00057	51		 push	 ecx
  00058	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0005f	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00065	52		 push	 edx
  00066	68 40 42 0f 00	 push	 1000000			; 000f4240H
  0006b	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00071	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
  00076	5e		 pop	 esi

; 2374 : }

  00077	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0007a	33 cd		 xor	 ecx, ebp
  0007c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00081	8b e5		 mov	 esp, ebp
  00083	5d		 pop	 ebp
  00084	c3		 ret	 0
$LN2@EGAnsRegHT:

; 2352 : 		}
; 2353 : 		return;
; 2354 : 	}
; 2355 : 
; 2356 : 	char szAccountID[11] = {0};
; 2357 : 	char szName[11] = {0};
; 2358 : 	char szGIFT_NAME[50] = {0};
; 2359 : 	memset(szAccountID, 0, sizeof(szAccountID));
; 2360 : 	memset(szName, 0, sizeof(szName));
; 2361 : 	memset(szGIFT_NAME, 0, sizeof(szGIFT_NAME));
; 2362 : 	memcpy(szAccountID, lpMsg->szUID, sizeof(szAccountID));

  00085	8b 4e 08	 mov	 ecx, DWORD PTR [esi+8]
  00088	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  0008b	89 4d e4	 mov	 DWORD PTR _szAccountID$[ebp], ecx
  0008e	0f b7 4e 10	 movzx	 ecx, WORD PTR [esi+16]
  00092	89 55 e8	 mov	 DWORD PTR _szAccountID$[ebp+4], edx
  00095	0f b6 56 12	 movzx	 edx, BYTE PTR [esi+18]
  00099	66 89 4d ec	 mov	 WORD PTR _szAccountID$[ebp+8], cx

; 2363 : 	memcpy(szName, lpMsg->szNAME, sizeof(szName));

  0009d	8b 4e 16	 mov	 ecx, DWORD PTR [esi+22]
  000a0	89 4d f0	 mov	 DWORD PTR _szName$[ebp], ecx
  000a3	0f b7 4e 1e	 movzx	 ecx, WORD PTR [esi+30]
  000a7	88 55 ee	 mov	 BYTE PTR _szAccountID$[ebp+10], dl
  000aa	8b 56 1a	 mov	 edx, DWORD PTR [esi+26]
  000ad	57		 push	 edi
  000ae	89 55 f4	 mov	 DWORD PTR _szName$[ebp+4], edx
  000b1	0f b6 56 20	 movzx	 edx, BYTE PTR [esi+32]
  000b5	66 89 4d f8	 mov	 WORD PTR _szName$[ebp+8], cx

; 2364 : 	memcpy(szGIFT_NAME, lpMsg->szGIFT_NAME, sizeof(szGIFT_NAME));

  000b9	83 c6 28	 add	 esi, 40			; 00000028H
  000bc	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  000c1	8d 7d b0	 lea	 edi, DWORD PTR _szGIFT_NAME$[ebp]
  000c4	f3 a5		 rep movsd

; 2365 : 	szAccountID[10] = 0;
; 2366 : 	szName[10] = 0;
; 2367 : 	szGIFT_NAME[49] = 0;
; 2368 : 	char szText[256] = {0};

  000c6	68 ff 00 00 00	 push	 255			; 000000ffH
  000cb	88 55 fa	 mov	 BYTE PTR _szName$[ebp+10], dl
  000ce	50		 push	 eax
  000cf	66 a5		 movsw
  000d1	88 45 ee	 mov	 BYTE PTR _szAccountID$[ebp+10], al
  000d4	88 45 fa	 mov	 BYTE PTR _szName$[ebp+10], al
  000d7	88 45 e1	 mov	 BYTE PTR _szGIFT_NAME$[ebp+49], al
  000da	88 85 b0 fe ff
	ff		 mov	 BYTE PTR _szText$[ebp], al
  000e0	8d 85 b1 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp+1]
  000e6	50		 push	 eax
  000e7	e8 00 00 00 00	 call	 _memset

; 2369 : 
; 2370 : 	wsprintf(szText, "[  ] %s  %s  .", szName, szGIFT_NAME);

  000ec	8d 4d b0	 lea	 ecx, DWORD PTR _szGIFT_NAME$[ebp]
  000ef	51		 push	 ecx
  000f0	8d 55 f0	 lea	 edx, DWORD PTR _szName$[ebp]
  000f3	52		 push	 edx
  000f4	8d 85 b0 fe ff
	ff		 lea	 eax, DWORD PTR _szText$[ebp]
  000fa	68 00 00 00 00	 push	 OFFSET ??_C@_0DN@DCNMDOGL@?$FL?$LM?$PL?$LA?$NM?A?x?5?$LK?$LI?$LJ?$LA?$LL?s?$MA?Z?5?$MA?L?$LK?$KF?F?$KO?$FN?5?$CFs?5?$LE?T?$LC?$LC@
  000ff	50		 push	 eax
  00100	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 2371 : 	AllSendServerMsg(szText);

  00106	8d 8d b0 fe ff
	ff		 lea	 ecx, DWORD PTR _szText$[ebp]
  0010c	51		 push	 ecx
  0010d	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg

; 2372 : 
; 2373 : 	LogAddTD("[Hidden TreasureBox Event] [%s][%s] Success to Register OffLine Gift (GIFT:%s)", szAccountID, szName, szGIFT_NAME);

  00112	8d 55 b0	 lea	 edx, DWORD PTR _szGIFT_NAME$[ebp]
  00115	52		 push	 edx
  00116	8d 45 f0	 lea	 eax, DWORD PTR _szName$[ebp]
  00119	50		 push	 eax
  0011a	8d 4d e4	 lea	 ecx, DWORD PTR _szAccountID$[ebp]
  0011d	51		 push	 ecx
  0011e	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@NDKKAONI@?$FLHidden?5TreasureBox?5Event?$FN?5?$FL?$CFs?$FN?$FL@
  00123	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00129	83 c4 30	 add	 esp, 48			; 00000030H
  0012c	5f		 pop	 edi
$LN4@EGAnsRegHT:

; 2374 : }

  0012d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00130	33 cd		 xor	 ecx, ebp
  00132	5e		 pop	 esi
  00133	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00138	8b e5		 mov	 esp, ebp
  0013a	5d		 pop	 ebp
  0013b	c3		 ret	 0
?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z ENDP ; EGAnsRegHTOfflineGift
_TEXT	ENDS
PUBLIC	?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z	; Japan1StAnivBoxOpen
; Function compile flags: /Ogtp
;	COMDAT ?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z
_TEXT	SEGMENT
_ServerCmd$ = -8					; size = 7
_lpObj$ = 8						; size = 4
_iBoxLevel$ = 12					; size = 4
?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z PROC	; Japan1StAnivBoxOpen, COMDAT

; 2378 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	56		 push	 esi

; 2379 : 	PMSG_SERVERCMD ServerCmd;
; 2380 : 
; 2381 : 	PHeadSubSetB((LPBYTE)&ServerCmd, 0xF3, 0x40, sizeof(ServerCmd));

  00007	6a 07		 push	 7
  00009	6a 40		 push	 64			; 00000040H
  0000b	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0000e	68 f3 00 00 00	 push	 243			; 000000f3H
  00013	50		 push	 eax
  00014	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 2382 : 	ServerCmd.CmdType = 0;
; 2383 : 	ServerCmd.X = lpObj->X;

  00019	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0001c	8a 8e 44 01 00
	00		 mov	 cl, BYTE PTR [esi+324]

; 2384 : 	ServerCmd.Y = lpObj->Y;

  00022	8a 96 46 01 00
	00		 mov	 dl, BYTE PTR [esi+326]

; 2385 : 
; 2386 : 	MsgSendV2(lpObj, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  00028	6a 07		 push	 7
  0002a	8d 45 f8	 lea	 eax, DWORD PTR _ServerCmd$[ebp]
  0002d	50		 push	 eax
  0002e	56		 push	 esi
  0002f	c6 45 fc 00	 mov	 BYTE PTR _ServerCmd$[ebp+4], 0
  00033	88 4d fd	 mov	 BYTE PTR _ServerCmd$[ebp+5], cl
  00036	88 55 fe	 mov	 BYTE PTR _ServerCmd$[ebp+6], dl
  00039	e8 00 00 00 00	 call	 ?MsgSendV2@@YAXPAUOBJECTSTRUCT@@PAEH@Z ; MsgSendV2

; 2387 : 	DataSend(lpObj->m_Index, (LPBYTE)&ServerCmd, sizeof(ServerCmd));

  0003e	8b 16		 mov	 edx, DWORD PTR [esi]
  00040	6a 07		 push	 7
  00042	8d 4d f8	 lea	 ecx, DWORD PTR _ServerCmd$[ebp]
  00045	51		 push	 ecx
  00046	52		 push	 edx
  00047	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 2388 : 
; 2389 : 	CProbabilityItemBag * Japan1StAnivBox = NULL;
; 2390 : 
; 2391 : 	switch ( iBoxLevel )

  0004c	8b 45 0c	 mov	 eax, DWORD PTR _iBoxLevel$[ebp]
  0004f	48		 dec	 eax
  00050	83 c4 28	 add	 esp, 40			; 00000028H
  00053	33 c9		 xor	 ecx, ecx
  00055	83 f8 04	 cmp	 eax, 4
  00058	77 2d		 ja	 SHORT $LN6@Japan1StAn
  0005a	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN10@Japan1StAn[eax*4]
$LN5@Japan1StAn:

; 2392 : 	{
; 2393 : 		case 1:	Japan1StAnivBox = GoldGoblenItemBag;		break;

  00061	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldGoblenItemBag@@3PAVCProbabilityItemBag@@A ; GoldGoblenItemBag
  00067	eb 1e		 jmp	 SHORT $LN6@Japan1StAn
$LN4@Japan1StAn:

; 2394 : 		case 2:	Japan1StAnivBox = TitanItemBag;				break;

  00069	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?TitanItemBag@@3PAVCProbabilityItemBag@@A ; TitanItemBag
  0006f	eb 16		 jmp	 SHORT $LN6@Japan1StAn
$LN3@Japan1StAn:

; 2395 : 		case 3:	Japan1StAnivBox = GoldDerconItemBag;		break;

  00071	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldDerconItemBag@@3PAVCProbabilityItemBag@@A ; GoldDerconItemBag
  00077	eb 0e		 jmp	 SHORT $LN6@Japan1StAn
$LN2@Japan1StAn:

; 2396 : 		case 4:	Japan1StAnivBox = DevilLizardKingItemBag;	break;

  00079	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DevilLizardKingItemBag@@3PAVCProbabilityItemBag@@A ; DevilLizardKingItemBag
  0007f	eb 06		 jmp	 SHORT $LN6@Japan1StAn
$LN1@Japan1StAn:

; 2397 : 		case 5:	Japan1StAnivBox = KanturItemBag;			break;

  00081	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?KanturItemBag@@3PAVCProbabilityItemBag@@A ; KanturItemBag
$LN6@Japan1StAn:

; 2398 : 	}
; 2399 : 	
; 2400 : 	Japan1StAnivBox->DropItem(lpObj->m_Index,lpObj->MapNumber,lpObj->X, lpObj->Y);

  00087	0f b6 86 46 01
	00 00		 movzx	 eax, BYTE PTR [esi+326]
  0008e	0f b6 96 44 01
	00 00		 movzx	 edx, BYTE PTR [esi+324]
  00095	50		 push	 eax
  00096	0f b6 86 49 01
	00 00		 movzx	 eax, BYTE PTR [esi+329]
  0009d	52		 push	 edx
  0009e	8b 16		 mov	 edx, DWORD PTR [esi]
  000a0	50		 push	 eax
  000a1	52		 push	 edx
  000a2	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem
  000a7	5e		 pop	 esi

; 2401 : }

  000a8	8b e5		 mov	 esp, ebp
  000aa	5d		 pop	 ebp
  000ab	c3		 ret	 0
$LN10@Japan1StAn:
  000ac	00 00 00 00	 DD	 $LN5@Japan1StAn
  000b0	00 00 00 00	 DD	 $LN4@Japan1StAn
  000b4	00 00 00 00	 DD	 $LN3@Japan1StAn
  000b8	00 00 00 00	 DD	 $LN2@Japan1StAn
  000bc	00 00 00 00	 DD	 $LN1@Japan1StAn
?Japan1StAnivBoxOpen@@YAXPAUOBJECTSTRUCT@@H@Z ENDP	; Japan1StAnivBoxOpen
_TEXT	ENDS
PUBLIC	??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z	; RingOfHeroBoxOpen
EXTRN	?RingOfHeroBoxItemBag@@3PAVCItemBag@@A:DWORD	; RingOfHeroBoxItemBag
;	COMDAT ??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@ DB '['
	DB	'%s][%s][RingOfHero Event](%d,%d,%d) ItemDrop : Item:%s %d Lev'
	DB	'el:%d op1:%d op2:%d op3:%d', 00H		; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_y$ = -240						; size = 4
_x$ = -236						; size = 4
_DropItemNum$ = -232					; size = 4
_level$ = -228						; size = 4
_Option1$ = -224					; size = 4
_Option3$ = -220					; size = 4
_NewItem$216146 = -216					; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC		; RingOfHeroBoxOpen, COMDAT

; 2405 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 2406 : 	float dur; //loc1
; 2407 : 	int type; //loc2
; 2408 : 	int level; //loc3
; 2409 : 	int x; //loc4
; 2410 : 	int y; //loc5
; 2411 : 	int Option1 = 0; //loc6
; 2412 : 	int Option2 = 0; //loc7
; 2413 : 	int Option3 = 0; //loc8
; 2414 : 	int DropItemNum; //loc9
; 2415 : 
; 2416 : 	if ( RingOfHeroBoxItemBag->GetBagCount() > 0 && (rand()%10) < 9)

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  00018	83 b8 88 03 00
	00 00		 cmp	 DWORD PTR [eax+904], 0
  0001f	56		 push	 esi
  00020	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00023	0f 8e 37 03 00
	00		 jle	 $LN10@RingOfHero
  00029	e8 00 00 00 00	 call	 _rand
  0002e	99		 cdq
  0002f	b9 0a 00 00 00	 mov	 ecx, 10			; 0000000aH
  00034	f7 f9		 idiv	 ecx
  00036	83 fa 09	 cmp	 edx, 9
  00039	0f 8d 21 03 00
	00		 jge	 $LN10@RingOfHero

; 2417 : 	{
; 2418 : 		DropItemNum = rand()%RingOfHeroBoxItemBag->GetBagCount();

  0003f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  00045	53		 push	 ebx
  00046	57		 push	 edi
  00047	8b ba 88 03 00
	00		 mov	 edi, DWORD PTR [edx+904]
  0004d	e8 00 00 00 00	 call	 _rand
  00052	99		 cdq
  00053	f7 ff		 idiv	 edi

; 2419 : 		dur=0;
; 2420 : 		x = lpObj->X;
; 2421 : 		y = lpObj->Y;

  00055	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  0005c	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00063	89 8d 10 ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 2422 : 
; 2423 : 		level = RingOfHeroBoxItemBag->GetLevel(DropItemNum) + rand()%3;

  00069	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  0006f	89 85 14 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  00075	8b fa		 mov	 edi, edx
  00077	57		 push	 edi
  00078	89 bd 18 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], edi
  0007e	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00083	0f b6 d8	 movzx	 ebx, al
  00086	e8 00 00 00 00	 call	 _rand
  0008b	99		 cdq
  0008c	b9 03 00 00 00	 mov	 ecx, 3
  00091	f7 f9		 idiv	 ecx

; 2424 : 		type = ItemGetNumberMake(RingOfHeroBoxItemBag->GetType(DropItemNum), RingOfHeroBoxItemBag->GetIndex(DropItemNum));

  00093	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  00099	57		 push	 edi
  0009a	03 d3		 add	 edx, ebx
  0009c	89 95 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], edx
  000a2	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000a7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  000ad	0f b6 d0	 movzx	 edx, al
  000b0	52		 push	 edx
  000b1	57		 push	 edi
  000b2	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000b7	0f b6 c0	 movzx	 eax, al
  000ba	50		 push	 eax
  000bb	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000c0	83 c4 08	 add	 esp, 8
  000c3	8b f8		 mov	 edi, eax

; 2425 : 
; 2426 : 		Option1 = 1;

  000c5	c7 85 20 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR _Option1$[ebp], 1

; 2427 : 
; 2428 : 		Option2 = rand() % 2;

  000cf	e8 00 00 00 00	 call	 _rand
  000d4	8b d8		 mov	 ebx, eax
  000d6	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  000dc	79 05		 jns	 SHORT $LN19@RingOfHero
  000de	4b		 dec	 ebx
  000df	83 cb fe	 or	 ebx, -2			; fffffffeH
  000e2	43		 inc	 ebx
$LN19@RingOfHero:

; 2429 : 
; 2430 : 		if ( (rand() % 5 ) < 1 )

  000e3	e8 00 00 00 00	 call	 _rand
  000e8	99		 cdq
  000e9	b9 05 00 00 00	 mov	 ecx, 5
  000ee	f7 f9		 idiv	 ecx
  000f0	83 fa 01	 cmp	 edx, 1
  000f3	7d 0c		 jge	 SHORT $LN9@RingOfHero

; 2431 : 		{
; 2432 : 			Option3 = 3;

  000f5	c7 85 24 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3

; 2433 : 		}
; 2434 : 		else

  000ff	eb 13		 jmp	 SHORT $LN8@RingOfHero
$LN9@RingOfHero:

; 2435 : 		{
; 2436 : 			Option3 = rand() % 3;

  00101	e8 00 00 00 00	 call	 _rand
  00106	99		 cdq
  00107	b9 03 00 00 00	 mov	 ecx, 3
  0010c	f7 f9		 idiv	 ecx
  0010e	89 95 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], edx
$LN8@RingOfHero:

; 2437 : 		}
; 2438 : 		
; 2439 : 		if ( type == ITEMGET(12,15) ||
; 2440 : 				type == ITEMGET(14,13) ||
; 2441 : 				type == ITEMGET(14,14) ||
; 2442 : 				type == ITEMGET(14,14) ||
; 2443 : 				type == ITEMGET(14,16)	||
; 2444 : 				type == ITEMGET(14,22)	||
; 2445 : 				type == ITEMGET(14,31)	||
; 2446 : 				type == ITEMGET(14,41)	||
; 2447 : 				type == ITEMGET(14,42)	||
; 2448 : 				type == ITEMGET(14,180)||
; 2449 : 				type == ITEMGET(14,181)||
; 2450 : 				type == ITEMGET(14,182)||
; 2451 : 				type == ITEMGET(14,183)||
; 2452 : 				type == ITEMGET(14,184)||
; 2453 : 				type == ITEMGET(14,185)||
; 2454 : 				type == ITEMGET(14,186)||
; 2455 : 				type == ITEMGET(14,187)||
; 2456 : 				type == ITEMGET(14,190)||
; 2457 : 				type == ITEMGET(14,43) ||
; 2458 : 				type == ITEMGET(14,44) )

  00114	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  0011a	0f 84 98 00 00
	00		 je	 $LN6@RingOfHero
  00120	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  00126	0f 84 8c 00 00
	00		 je	 $LN6@RingOfHero
  0012c	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  00132	0f 84 80 00 00
	00		 je	 $LN6@RingOfHero
  00138	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  0013e	74 78		 je	 SHORT $LN6@RingOfHero
  00140	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  00146	74 70		 je	 SHORT $LN6@RingOfHero
  00148	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  0014e	74 68		 je	 SHORT $LN6@RingOfHero
  00150	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  00156	74 60		 je	 SHORT $LN6@RingOfHero
  00158	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  0015e	74 58		 je	 SHORT $LN6@RingOfHero
  00160	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  00166	74 50		 je	 SHORT $LN6@RingOfHero
  00168	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  0016e	74 48		 je	 SHORT $LN6@RingOfHero
  00170	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  00176	74 40		 je	 SHORT $LN6@RingOfHero
  00178	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  0017e	74 38		 je	 SHORT $LN6@RingOfHero
  00180	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  00186	74 30		 je	 SHORT $LN6@RingOfHero
  00188	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  0018e	74 28		 je	 SHORT $LN6@RingOfHero
  00190	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  00196	74 20		 je	 SHORT $LN6@RingOfHero
  00198	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  0019e	74 18		 je	 SHORT $LN6@RingOfHero
  001a0	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  001a6	74 10		 je	 SHORT $LN6@RingOfHero
  001a8	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  001ae	74 08		 je	 SHORT $LN6@RingOfHero
  001b0	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  001b6	75 18		 jne	 SHORT $LN18@RingOfHero
$LN6@RingOfHero:

; 2459 : 		{
; 2460 : 			Option1 = 0;

  001b8	33 c9		 xor	 ecx, ecx
  001ba	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx

; 2461 : 			Option2 = 0;

  001c0	33 db		 xor	 ebx, ebx

; 2462 : 			Option3 = 0;

  001c2	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 2463 : 			level = 0;

  001c8	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
  001ce	eb 02		 jmp	 SHORT $LN7@RingOfHero
$LN18@RingOfHero:
  001d0	33 c9		 xor	 ecx, ecx
$LN7@RingOfHero:

; 2464 : 		}
; 2465 : 
; 2466 : 		if ( type == ITEMGET(12,30)	||
; 2467 : 				type == ITEMGET(12,31)	||
; 2468 : 				type == ITEMGET(12,136)||
; 2469 : 				type == ITEMGET(12,137)||
; 2470 : 				type == ITEMGET(12,138)||
; 2471 : 				type == ITEMGET(12,139)||
; 2472 : 				type == ITEMGET(12,140)||
; 2473 : 				type == ITEMGET(12,141)||
; 2474 : 				type == ITEMGET(12,142)||
; 2475 : 				type == ITEMGET(12,143))

  001d2	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  001d8	74 48		 je	 SHORT $LN4@RingOfHero
  001da	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  001e0	74 40		 je	 SHORT $LN4@RingOfHero
  001e2	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  001e8	74 38		 je	 SHORT $LN4@RingOfHero
  001ea	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  001f0	74 30		 je	 SHORT $LN4@RingOfHero
  001f2	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  001f8	74 28		 je	 SHORT $LN4@RingOfHero
  001fa	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  00200	74 20		 je	 SHORT $LN4@RingOfHero
  00202	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  00208	74 18		 je	 SHORT $LN4@RingOfHero
  0020a	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  00210	74 10		 je	 SHORT $LN4@RingOfHero
  00212	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  00218	74 08		 je	 SHORT $LN4@RingOfHero
  0021a	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  00220	75 2b		 jne	 SHORT $LN5@RingOfHero
$LN4@RingOfHero:

; 2476 : 		{
; 2477 : 			Option1 = 0;
; 2478 : 			Option2 = 0;
; 2479 : 			Option3 = 0;
; 2480 : 			level = RingOfHeroBoxItemBag->GetLevel(DropItemNum);

  00222	8b 95 18 ff ff
	ff		 mov	 edx, DWORD PTR _DropItemNum$[ebp]
  00228	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option1$[ebp], ecx
  0022e	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx
  00234	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RingOfHeroBoxItemBag@@3PAVCItemBag@@A ; RingOfHeroBoxItemBag
  0023a	52		 push	 edx
  0023b	33 db		 xor	 ebx, ebx
  0023d	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00242	0f b6 c0	 movzx	 eax, al
  00245	89 85 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], eax
  0024b	33 c9		 xor	 ecx, ecx
$LN5@RingOfHero:

; 2481 : 		}
; 2482 : 
; 2483 : 		if ( type == ITEMGET(13,0) ||
; 2484 : 			 type == ITEMGET(13,1) ||
; 2485 : 			 type == ITEMGET(13,2) ||
; 2486 : 			 type == ITEMGET(13,8) ||
; 2487 : 			 type == ITEMGET(13,9) ||
; 2488 : 			 type == ITEMGET(13,12) ||
; 2489 : 			 type == ITEMGET(13,13) )

  0024d	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  00253	74 30		 je	 SHORT $LN2@RingOfHero
  00255	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  0025b	74 28		 je	 SHORT $LN2@RingOfHero
  0025d	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  00263	74 20		 je	 SHORT $LN2@RingOfHero
  00265	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  0026b	74 18		 je	 SHORT $LN2@RingOfHero
  0026d	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  00273	74 10		 je	 SHORT $LN2@RingOfHero
  00275	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  0027b	74 08		 je	 SHORT $LN2@RingOfHero
  0027d	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  00283	75 06		 jne	 SHORT $LN3@RingOfHero
$LN2@RingOfHero:

; 2490 : 		{
; 2491 : 			level = 0;

  00285	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN3@RingOfHero:

; 2492 : 		}
; 2493 : 
; 2494 : 		ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur, (BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  0028b	8b 06		 mov	 eax, DWORD PTR [esi]
  0028d	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00293	51		 push	 ecx
  00294	51		 push	 ecx
  00295	50		 push	 eax
  00296	52		 push	 edx
  00297	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option1$[ebp]
  0029d	53		 push	 ebx
  0029e	52		 push	 edx
  0029f	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _y$[ebp]
  002a5	51		 push	 ecx
  002a6	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  002ac	51		 push	 ecx
  002ad	8b 8d 14 ff ff
	ff		 mov	 ecx, DWORD PTR _x$[ebp]
  002b3	57		 push	 edi
  002b4	52		 push	 edx
  002b5	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  002bc	51		 push	 ecx
  002bd	52		 push	 edx
  002be	50		 push	 eax
  002bf	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  002c4	83 c4 34	 add	 esp, 52			; 00000034H

; 2495 : 
; 2496 : 		CItem NewItem;

  002c7	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$216146[ebp]
  002cd	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 2497 : 		NewItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, CURRENT_DB_VERSION);

  002d2	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option3$[ebp]
  002d8	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _Option1$[ebp]
  002de	6a 03		 push	 3
  002e0	6a 00		 push	 0
  002e2	68 ff 00 00 00	 push	 255			; 000000ffH
  002e7	6a 00		 push	 0
  002e9	6a 00		 push	 0
  002eb	6a 01		 push	 1
  002ed	6a 00		 push	 0
  002ef	50		 push	 eax
  002f0	53		 push	 ebx
  002f1	51		 push	 ecx
  002f2	57		 push	 edi
  002f3	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$216146[ebp]
  002f9	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 2498 : 
; 2499 : 		LogAddTD("[%s][%s][RingOfHero Event](%d,%d,%d) ItemDrop : Item:%s %d Level:%d op1:%d op2:%d op3:%d", lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, NewItem.GetName(), type, level, Option1, Option2, Option3);

  002fe	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00304	8b 85 20 ff ff
	ff		 mov	 eax, DWORD PTR _Option1$[ebp]
  0030a	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  00310	52		 push	 edx
  00311	53		 push	 ebx
  00312	50		 push	 eax
  00313	51		 push	 ecx
  00314	57		 push	 edi
  00315	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _NewItem$216146[ebp]
  0031b	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  00320	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  00327	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0032e	50		 push	 eax
  0032f	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00336	52		 push	 edx
  00337	50		 push	 eax
  00338	51		 push	 ecx
  00339	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0033c	52		 push	 edx
  0033d	83 c6 6c	 add	 esi, 108		; 0000006cH
  00340	56		 push	 esi
  00341	68 00 00 00 00	 push	 OFFSET ??_C@_0FJ@LJFKNLI@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLRingOfHero?5Event?$FN?$CI?$CFd?0?$CFd@
  00346	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0034c	83 c4 30	 add	 esp, 48			; 00000030H
  0034f	5f		 pop	 edi
  00350	5b		 pop	 ebx
  00351	5e		 pop	 esi

; 2506 : 	}
; 2507 : }

  00352	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00355	33 cd		 xor	 ecx, ebp
  00357	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0035c	8b e5		 mov	 esp, ebp
  0035e	5d		 pop	 ebp
  0035f	c3		 ret	 0
$LN10@RingOfHero:

; 2500 : 	}
; 2501 : 	else
; 2502 : 	{
; 2503 : 		x = lpObj->X;
; 2504 : 		y = lpObj->Y;
; 2505 : 		MapC[lpObj->MapNumber].MoneyItemDrop(100000, x, y);

  00360	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00367	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  0036e	50		 push	 eax
  0036f	51		 push	 ecx
  00370	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00377	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  0037d	68 a0 86 01 00	 push	 100000			; 000186a0H
  00382	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00388	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop

; 2506 : 	}
; 2507 : }

  0038d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00390	33 cd		 xor	 ecx, ebp
  00392	5e		 pop	 esi
  00393	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00398	8b e5		 mov	 esp, ebp
  0039a	5d		 pop	 ebp
  0039b	c3		 ret	 0
?RingOfHeroBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP		; RingOfHeroBoxOpen
_TEXT	ENDS
PUBLIC	?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; NewYearLuckMonsterItemBagOpen
EXTRN	?DropNewYearLuckMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropNewYearLuckMonsterReward
EXTRN	?NewYearLuckyPouchItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; NewYearLuckyPouchItemBag
; Function compile flags: /Ogtp
;	COMDAT ?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; NewYearLuckMonsterItemBagOpen, COMDAT

; 2510 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2511 : 	NewYearLuckyPouchItemBag->DropNewYearLuckMonsterReward(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?NewYearLuckyPouchItemBag@@3PAVCProbabilityItemBag@@A ; NewYearLuckyPouchItemBag
  0001b	e8 00 00 00 00	 call	 ?DropNewYearLuckMonsterReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropNewYearLuckMonsterReward

; 2512 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?NewYearLuckMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; NewYearLuckMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z ; GMPresentBoxItemBagOpen
EXTRN	?DropGMPresentBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropGMPresentBoxReward
EXTRN	?GMPresentBoxItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GMPresentBoxItemBag
; Function compile flags: /Ogtp
;	COMDAT ?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; GMPresentBoxItemBagOpen, COMDAT

; 2515 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2516 : 	GMPresentBoxItemBag->DropGMPresentBoxReward(lpObj->m_Index, lpObj->MapNumber, 0, 0);

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00006	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  0000d	8b 10		 mov	 edx, DWORD PTR [eax]
  0000f	6a 00		 push	 0
  00011	6a 00		 push	 0
  00013	51		 push	 ecx
  00014	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GMPresentBoxItemBag@@3PAVCProbabilityItemBag@@A ; GMPresentBoxItemBag
  0001a	52		 push	 edx
  0001b	e8 00 00 00 00	 call	 ?DropGMPresentBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropGMPresentBoxReward

; 2517 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?GMPresentBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; GMPresentBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; PCBangGreenChaosBoxItemBagOpen
EXTRN	?DropPCBangGreenChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropPCBangGreenChaosBoxReward
EXTRN	?PCBangGageGreenBox@@3PAVCProbabilityItemBag@@A:DWORD ; PCBangGageGreenBox
; Function compile flags: /Ogtp
;	COMDAT ?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; PCBangGreenChaosBoxItemBagOpen, COMDAT

; 2521 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2522 : 	PCBangGageGreenBox->DropPCBangGreenChaosBoxReward(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PCBangGageGreenBox@@3PAVCProbabilityItemBag@@A ; PCBangGageGreenBox
  0001b	e8 00 00 00 00	 call	 ?DropPCBangGreenChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropPCBangGreenChaosBoxReward

; 2523 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?PCBangGreenChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; PCBangGreenChaosBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; PCBangRedChaosBoxItemBagOpen
EXTRN	?DropPCBangRedChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropPCBangRedChaosBoxReward
EXTRN	?PCBangGageRedBox@@3PAVCProbabilityItemBag@@A:DWORD ; PCBangGageRedBox
; Function compile flags: /Ogtp
;	COMDAT ?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; PCBangRedChaosBoxItemBagOpen, COMDAT

; 2526 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2527 : 	PCBangGageRedBox->DropPCBangRedChaosBoxReward(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PCBangGageRedBox@@3PAVCProbabilityItemBag@@A ; PCBangGageRedBox
  0001b	e8 00 00 00 00	 call	 ?DropPCBangRedChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropPCBangRedChaosBoxReward

; 2528 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?PCBangRedChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; PCBangRedChaosBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; PCBangPurpleChaosBoxItemBagOpen
EXTRN	?DropPCBangPurpleChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropPCBangPurpleChaosBoxReward
EXTRN	?PCBangGagePurpleBox@@3PAVCProbabilityItemBag@@A:DWORD ; PCBangGagePurpleBox
; Function compile flags: /Ogtp
;	COMDAT ?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; PCBangPurpleChaosBoxItemBagOpen, COMDAT

; 2531 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2532 : 	PCBangGagePurpleBox->DropPCBangPurpleChaosBoxReward(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?PCBangGagePurpleBox@@3PAVCProbabilityItemBag@@A ; PCBangGagePurpleBox
  0001b	e8 00 00 00 00	 call	 ?DropPCBangPurpleChaosBoxReward@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropPCBangPurpleChaosBoxReward

; 2533 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?PCBangPurpleChaosBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; PCBangPurpleChaosBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; GenericBoxItemBagOpen
EXTRN	?MoonHarvestItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; MoonHarvestItemBag
; Function compile flags: /Ogtp
;	COMDAT ?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; GenericBoxItemBagOpen, COMDAT

; 2537 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2538 : 	MoonHarvestItemBag->DropItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?MoonHarvestItemBag@@3PAVCProbabilityItemBag@@A ; MoonHarvestItemBag
  0001b	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 2539 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?GenericBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; GenericBoxItemBagOpen
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegXMasGetPayItem@@YAXHH@Z		; EGAnsRegXMasGetPayItem
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegXMasGetPayItem@@YAXHH@Z
_TEXT	SEGMENT
_pMsg$ = -28						; size = 22
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Result$ = 12						; size = 4
?EGAnsRegXMasGetPayItem@@YAXHH@Z PROC			; EGAnsRegXMasGetPayItem, COMDAT

; 2555 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	57		 push	 edi
  00011	8b 7d 08	 mov	 edi, DWORD PTR _aIndex$[ebp]

; 2556 : 	if(gObjIsConnected(aIndex) == FALSE)

  00014	57		 push	 edi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	0f 84 8a 00 00
	00		 je	 $LN2@EGAnsRegXM

; 2557 : 	{
; 2558 : 		return;
; 2559 : 	}
; 2560 : 
; 2561 : 	LPOBJ lpObj = &gObj[aIndex];
; 2562 : 
; 2563 : 	PMSG_XMAS_PAY_ITEM pMsg = {0};

  00025	56		 push	 esi
  00026	33 c0		 xor	 eax, eax
  00028	8b f7		 mov	 esi, edi
  0002a	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00030	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2564 : 
; 2565 : 	PHeadSubSetB((LPBYTE)&pMsg, 0x31, 0x00, sizeof(pMsg));

  00036	6a 16		 push	 22			; 00000016H
  00038	50		 push	 eax
  00039	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0003c	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  0003f	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00042	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00045	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  00048	88 45 f9	 mov	 BYTE PTR _pMsg$[ebp+21], al
  0004b	8d 45 e4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0004e	6a 31		 push	 49			; 00000031H
  00050	50		 push	 eax
  00051	c6 45 e4 00	 mov	 BYTE PTR _pMsg$[ebp], 0
  00055	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 2566 : 
; 2567 : 	memcpy(pMsg.szUID, lpObj->AccountID, sizeof(pMsg.szUID));

  0005a	8b 4e 6c	 mov	 ecx, DWORD PTR [esi+108]
  0005d	89 4d ea	 mov	 DWORD PTR _pMsg$[ebp+6], ecx
  00060	8b 56 70	 mov	 edx, DWORD PTR [esi+112]
  00063	89 55 ee	 mov	 DWORD PTR _pMsg$[ebp+10], edx
  00066	66 8b 46 74	 mov	 ax, WORD PTR [esi+116]
  0006a	66 89 45 f2	 mov	 WORD PTR _pMsg$[ebp+14], ax
  0006e	8a 4e 76	 mov	 cl, BYTE PTR [esi+118]
  00071	88 4d f4	 mov	 BYTE PTR _pMsg$[ebp+16], cl

; 2568 : 	pMsg.wServerCode = gGameServerCode / 20;

  00074	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0007b	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  00080	f7 e9		 imul	 ecx

; 2569 : 	pMsg.iINDEX = aIndex;
; 2570 : 	pMsg.szUID[10] = '\0';
; 2571 : 	pMsg.wResult = Result;

  00082	66 8b 4d 0c	 mov	 cx, WORD PTR _Result$[ebp]
  00086	c1 fa 03	 sar	 edx, 3
  00089	8b c2		 mov	 eax, edx
  0008b	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0008e	03 c2		 add	 eax, edx

; 2572 : 
; 2573 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  00090	8d 55 e4	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00093	6a 16		 push	 22			; 00000016H
  00095	52		 push	 edx
  00096	66 89 45 f6	 mov	 WORD PTR _pMsg$[ebp+18], ax
  0009a	66 89 7d e8	 mov	 WORD PTR _pMsg$[ebp+4], di
  0009e	c6 45 f4 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0
  000a2	66 89 4d f8	 mov	 WORD PTR _pMsg$[ebp+20], cx
  000a6	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000ab	83 c4 18	 add	 esp, 24			; 00000018H
  000ae	5e		 pop	 esi
$LN2@EGAnsRegXM:

; 2574 : }

  000af	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b2	33 cd		 xor	 ecx, ebp
  000b4	5f		 pop	 edi
  000b5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ba	8b e5		 mov	 esp, ebp
  000bc	5d		 pop	 ebp
  000bd	c3		 ret	 0
?EGAnsRegXMasGetPayItem@@YAXHH@Z ENDP			; EGAnsRegXMasGetPayItem
_TEXT	ENDS
PUBLIC	?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasGetPayItemResult
EXTRN	?GCServerCmd@@YAXHEEE@Z:PROC			; GCServerCmd
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z PROC ; EGAnsRegXMasGetPayItemResult, COMDAT

; 2578 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2579 : 	int aIndex = lpMsg->iIndex;

  00003	8b 4d 08	 mov	 ecx, DWORD PTR _lpMsg$[ebp]
  00006	0f bf 41 04	 movsx	 eax, WORD PTR [ecx+4]

; 2580 : 	LPOBJ lpObj;
; 2581 : 
; 2582 : 	if(!OBJMAX_RANGE(aIndex))

  0000a	85 c0		 test	 eax, eax
  0000c	0f 88 8d 00 00
	00		 js	 $LN1@EGAnsRegXM@2
  00012	33 d2		 xor	 edx, edx
  00014	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  00019	0f 9e c2	 setle	 dl
  0001c	85 d2		 test	 edx, edx
  0001e	74 7f		 je	 SHORT $LN1@EGAnsRegXM@2

; 2583 : 	{
; 2584 : 		return;
; 2585 : 	}
; 2586 : 	
; 2587 : 	lpObj = &gObj[aIndex];
; 2588 : 
; 2589 : 	switch(lpMsg->bt_17)

  00020	0f b6 51 17	 movzx	 edx, BYTE PTR [ecx+23]
  00024	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0002a	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00030	83 fa 03	 cmp	 edx, 3
  00033	77 6a		 ja	 SHORT $LN1@EGAnsRegXM@2
  00035	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN18@EGAnsRegXM@2[edx*4]
$LN8@EGAnsRegXM@2:

; 2590 : 	{
; 2591 : 	case 0:
; 2592 : 		{
; 2593 : 			if(lpMsg->w_14 == 1)

  0003c	66 83 79 14 01	 cmp	 WORD PTR [ecx+20], 1
  00041	75 5c		 jne	 SHORT $LN1@EGAnsRegXM@2

; 2594 : 			{
; 2595 : 				if(lpMsg->bt_16 != 0) //first time

  00043	80 79 16 00	 cmp	 BYTE PTR [ecx+22], 0

; 2596 : 				{
; 2597 : 					GCServerCmd(lpObj->m_Index,16,0,0);

  00047	6a 00		 push	 0
  00049	74 11		 je	 SHORT $LN6@EGAnsRegXM@2

; 2615 : 		{
; 2616 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  0004b	8b 00		 mov	 eax, DWORD PTR [eax]
  0004d	6a 00		 push	 0
  0004f	6a 10		 push	 16			; 00000010H
  00051	50		 push	 eax
  00052	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00057	83 c4 10	 add	 esp, 16			; 00000010H

; 2617 : 		}
; 2618 : 		break;
; 2619 : 	}
; 2620 : }

  0005a	5d		 pop	 ebp
  0005b	c3		 ret	 0
$LN6@EGAnsRegXM@2:

; 2598 : 				}
; 2599 : 				else
; 2600 : 				{
; 2601 : 					GCServerCmd(lpObj->m_Index,16,1,0);

  0005c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005e	6a 01		 push	 1
  00060	6a 10		 push	 16			; 00000010H
  00062	51		 push	 ecx

; 2615 : 		{
; 2616 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  00063	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00068	83 c4 10	 add	 esp, 16			; 00000010H

; 2617 : 		}
; 2618 : 		break;
; 2619 : 	}
; 2620 : }

  0006b	5d		 pop	 ebp
  0006c	c3		 ret	 0
$LN4@EGAnsRegXM@2:

; 2602 : 				}
; 2603 : 			}
; 2604 : 		}
; 2605 : 		break;
; 2606 : 	case 1:
; 2607 : 	case 2:
; 2608 : 		if(lpMsg->w_14 == 1)

  0006d	66 83 79 14 01	 cmp	 WORD PTR [ecx+20], 1
  00072	75 2b		 jne	 SHORT $LN1@EGAnsRegXM@2

; 2609 : 		{
; 2610 : 			GCServerCmd(lpObj->m_Index,16,2,0);

  00074	8b 10		 mov	 edx, DWORD PTR [eax]
  00076	6a 00		 push	 0
  00078	6a 02		 push	 2
  0007a	6a 10		 push	 16			; 00000010H
  0007c	52		 push	 edx

; 2615 : 		{
; 2616 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  0007d	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00082	83 c4 10	 add	 esp, 16			; 00000010H

; 2617 : 		}
; 2618 : 		break;
; 2619 : 	}
; 2620 : }

  00085	5d		 pop	 ebp
  00086	c3		 ret	 0
$LN2@EGAnsRegXM@2:

; 2611 : 		}
; 2612 : 		break;
; 2613 : 	case 3:
; 2614 : 		if(lpMsg->w_14 == 1)

  00087	66 83 79 14 01	 cmp	 WORD PTR [ecx+20], 1
  0008c	75 11		 jne	 SHORT $LN1@EGAnsRegXM@2

; 2615 : 		{
; 2616 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  0008e	8b 00		 mov	 eax, DWORD PTR [eax]
  00090	6a 00		 push	 0
  00092	6a 03		 push	 3
  00094	6a 10		 push	 16			; 00000010H
  00096	50		 push	 eax
  00097	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  0009c	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@EGAnsRegXM@2:

; 2617 : 		}
; 2618 : 		break;
; 2619 : 	}
; 2620 : }

  0009f	5d		 pop	 ebp
  000a0	c3		 ret	 0
  000a1	8d 49 00	 npad	 3
$LN18@EGAnsRegXM@2:
  000a4	00 00 00 00	 DD	 $LN8@EGAnsRegXM@2
  000a8	00 00 00 00	 DD	 $LN4@EGAnsRegXM@2
  000ac	00 00 00 00	 DD	 $LN4@EGAnsRegXM@2
  000b0	00 00 00 00	 DD	 $LN2@EGAnsRegXM@2
?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ENDP ; EGAnsRegXMasGetPayItemResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegXMasSetPayItem@@YAXHH@Z		; EGAnsRegXMasSetPayItem
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegXMasSetPayItem@@YAXHH@Z
_TEXT	SEGMENT
_pMsg$ = -28						; size = 22
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Result$ = 12						; size = 4
?EGAnsRegXMasSetPayItem@@YAXHH@Z PROC			; EGAnsRegXMasSetPayItem, COMDAT

; 2623 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	57		 push	 edi
  00011	8b 7d 08	 mov	 edi, DWORD PTR _aIndex$[ebp]

; 2624 : 	if(gObjIsConnected(aIndex) == FALSE)

  00014	57		 push	 edi
  00015	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001a	83 c4 04	 add	 esp, 4
  0001d	85 c0		 test	 eax, eax
  0001f	0f 84 8a 00 00
	00		 je	 $LN2@EGAnsRegXM@3

; 2625 : 	{
; 2626 : 		return;
; 2627 : 	}
; 2628 : 
; 2629 : 	LPOBJ lpObj = &gObj[aIndex];
; 2630 : 
; 2631 : 	PMSG_XMAS_PAY_ITEM pMsg = {0};

  00025	56		 push	 esi
  00026	33 c0		 xor	 eax, eax
  00028	8b f7		 mov	 esi, edi
  0002a	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00030	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2632 : 
; 2633 : 	PHeadSubSetB((LPBYTE)&pMsg, 0x32, 0x00, sizeof(pMsg));

  00036	6a 16		 push	 22			; 00000016H
  00038	50		 push	 eax
  00039	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0003c	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  0003f	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00042	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00045	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  00048	88 45 f9	 mov	 BYTE PTR _pMsg$[ebp+21], al
  0004b	8d 45 e4	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0004e	6a 32		 push	 50			; 00000032H
  00050	50		 push	 eax
  00051	c6 45 e4 00	 mov	 BYTE PTR _pMsg$[ebp], 0
  00055	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 2634 : 
; 2635 : 	memcpy(pMsg.szUID, lpObj->AccountID, sizeof(pMsg.szUID));

  0005a	8b 4e 6c	 mov	 ecx, DWORD PTR [esi+108]
  0005d	89 4d ea	 mov	 DWORD PTR _pMsg$[ebp+6], ecx
  00060	8b 56 70	 mov	 edx, DWORD PTR [esi+112]
  00063	89 55 ee	 mov	 DWORD PTR _pMsg$[ebp+10], edx
  00066	66 8b 46 74	 mov	 ax, WORD PTR [esi+116]
  0006a	66 89 45 f2	 mov	 WORD PTR _pMsg$[ebp+14], ax
  0006e	8a 4e 76	 mov	 cl, BYTE PTR [esi+118]
  00071	88 4d f4	 mov	 BYTE PTR _pMsg$[ebp+16], cl

; 2636 : 	pMsg.wServerCode = gGameServerCode / 20;

  00074	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0007b	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  00080	f7 e9		 imul	 ecx

; 2637 : 	pMsg.iINDEX = aIndex;
; 2638 : 	pMsg.szUID[10] = '\0';
; 2639 : 	pMsg.wResult = Result;

  00082	66 8b 4d 0c	 mov	 cx, WORD PTR _Result$[ebp]
  00086	c1 fa 03	 sar	 edx, 3
  00089	8b c2		 mov	 eax, edx
  0008b	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0008e	03 c2		 add	 eax, edx

; 2640 : 
; 2641 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  00090	8d 55 e4	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00093	6a 16		 push	 22			; 00000016H
  00095	52		 push	 edx
  00096	66 89 45 f6	 mov	 WORD PTR _pMsg$[ebp+18], ax
  0009a	66 89 7d e8	 mov	 WORD PTR _pMsg$[ebp+4], di
  0009e	c6 45 f4 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0
  000a2	66 89 4d f8	 mov	 WORD PTR _pMsg$[ebp+20], cx
  000a6	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000ab	83 c4 18	 add	 esp, 24			; 00000018H
  000ae	5e		 pop	 esi
$LN2@EGAnsRegXM@3:

; 2642 : }

  000af	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b2	33 cd		 xor	 ecx, ebp
  000b4	5f		 pop	 edi
  000b5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ba	8b e5		 mov	 esp, ebp
  000bc	5d		 pop	 ebp
  000bd	c3		 ret	 0
?EGAnsRegXMasSetPayItem@@YAXHH@Z ENDP			; EGAnsRegXMasSetPayItem
_TEXT	ENDS
PUBLIC	??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasSetPayItemResult
EXTRN	?XMasEventA@@3PAVCProbabilityItemBag@@A:DWORD	; XMasEventA
EXTRN	?gNewServer@@3HA:DWORD				; gNewServer
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?XMasEventB@@3PAVCProbabilityItemBag@@A:DWORD	; XMasEventB
EXTRN	?XMasEventC@@3PAVCProbabilityItemBag@@A:DWORD	; XMasEventC
EXTRN	?g_iXMasEvent_LuckNumber2nd@@3HA:DWORD		; g_iXMasEvent_LuckNumber2nd
EXTRN	?g_iXMasEvent_LuckNumber1st@@3HA:DWORD		; g_iXMasEvent_LuckNumber1st
EXTRN	?g_iXMasVisitCount@@3HA:DWORD			; g_iXMasVisitCount
;	COMDAT ??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@
CONST	SEGMENT
??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@ DB '['
	DB	'X-MAX Event] [AccountID]: %s , [VISITCOUNT]:%d', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z
_TEXT	SEGMENT
_szText$216243 = -260					; size = 256
__$ArrayPad$ = -4					; size = 4
_lpMsg$ = 8						; size = 4
?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z PROC ; EGAnsRegXMasSetPayItemResult, COMDAT

; 2646 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 04 01 00
	00		 sub	 esp, 260		; 00000104H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]

; 2647 : 	int aIndex = lpMsg->iIndex;

  00019	0f bf 5f 04	 movsx	 ebx, WORD PTR [edi+4]

; 2648 : 
; 2649 : 	int loc2 = 0;//ebp-8
; 2650 : 
; 2651 : 	LPOBJ lpObj = &gObj[aIndex];

  0001d	8b f3		 mov	 esi, ebx
  0001f	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00025	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2652 : 
; 2653 : 	if(!gObjIsConnected(aIndex))

  0002b	53		 push	 ebx
  0002c	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00031	83 c4 04	 add	 esp, 4
  00034	85 c0		 test	 eax, eax
  00036	0f 84 67 01 00
	00		 je	 $LN1@EGAnsRegXM@4

; 2654 : 	{
; 2655 : 		return;
; 2656 : 	}
; 2657 : 	
; 2658 : 	switch(lpMsg->bt_17)

  0003c	0f b6 47 17	 movzx	 eax, BYTE PTR [edi+23]
  00040	83 f8 03	 cmp	 eax, 3
  00043	0f 87 5a 01 00
	00		 ja	 $LN1@EGAnsRegXM@4
  00049	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN18@EGAnsRegXM@4[eax*4]
$LN10@EGAnsRegXM@4:

; 2659 : 	{
; 2660 : 	case 0:
; 2661 : 		{
; 2662 : 			if(lpMsg->w_14 == 1)

  00050	66 83 7f 14 01	 cmp	 WORD PTR [edi+20], 1
  00055	0f 85 48 01 00
	00		 jne	 $LN1@EGAnsRegXM@4

; 2663 : 			{
; 2664 : 				char szText[256] = { 0 };

  0005b	68 ff 00 00 00	 push	 255			; 000000ffH
  00060	8d 85 fd fe ff
	ff		 lea	 eax, DWORD PTR _szText$216243[ebp+1]
  00066	6a 00		 push	 0
  00068	50		 push	 eax
  00069	c6 85 fc fe ff
	ff 00		 mov	 BYTE PTR _szText$216243[ebp], 0
  00070	e8 00 00 00 00	 call	 _memset

; 2665 : 
; 2666 : 				g_iXMasVisitCount++;

  00075	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  0007a	83 c4 0c	 add	 esp, 12			; 0000000cH
  0007d	40		 inc	 eax

; 2667 : 				wsprintf(szText,lMsg.Get(MSGGET(10,24)),g_iXMasVisitCount);

  0007e	50		 push	 eax
  0007f	68 18 0a 00 00	 push	 2584			; 00000a18H
  00084	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00089	a3 00 00 00 00	 mov	 DWORD PTR ?g_iXMasVisitCount@@3HA, eax ; g_iXMasVisitCount
  0008e	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00093	50		 push	 eax
  00094	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _szText$216243[ebp]
  0009a	51		 push	 ecx
  0009b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__wsprintfA

; 2668 : 				
; 2669 : 				if ( (g_iXMasVisitCount % g_iXMasEvent_LuckNumber1st) == FALSE )

  000a1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  000a7	8b c1		 mov	 eax, ecx
  000a9	99		 cdq
  000aa	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?g_iXMasEvent_LuckNumber1st@@3HA ; g_iXMasEvent_LuckNumber1st
  000b0	83 c4 0c	 add	 esp, 12			; 0000000cH
  000b3	85 d2		 test	 edx, edx
  000b5	75 51		 jne	 SHORT $LN8@EGAnsRegXM@4

; 2670 : 				{
; 2671 : 					if ( (g_iXMasVisitCount % g_iXMasEvent_LuckNumber2nd) == FALSE )

  000b7	8b c1		 mov	 eax, ecx
  000b9	99		 cdq
  000ba	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?g_iXMasEvent_LuckNumber2nd@@3HA ; g_iXMasEvent_LuckNumber2nd

; 2672 : 					{
; 2673 : 						XMasEventC->DropItem(aIndex,lpObj->MapNumber,lpObj->X, lpObj->Y);

  000c0	0f b6 86 44 01
	00 00		 movzx	 eax, BYTE PTR [esi+324]
  000c7	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  000ce	85 d2		 test	 edx, edx
  000d0	0f b6 96 46 01
	00 00		 movzx	 edx, BYTE PTR [esi+326]
  000d7	52		 push	 edx
  000d8	50		 push	 eax
  000d9	51		 push	 ecx
  000da	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?XMasEventC@@3PAVCProbabilityItemBag@@A ; XMasEventC
  000e0	53		 push	 ebx
  000e1	74 06		 je	 SHORT $LN16@EGAnsRegXM@4

; 2674 : 					}
; 2675 : 					else
; 2676 : 					{
; 2677 : 						XMasEventB->DropItem(aIndex,lpObj->MapNumber,lpObj->X, lpObj->Y);

  000e3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?XMasEventB@@3PAVCProbabilityItemBag@@A ; XMasEventB
$LN16@EGAnsRegXM@4:
  000e9	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem

; 2678 : 					}
; 2679 : 
; 2680 : 					GCServerMsgStringSend(szText, lpObj->m_Index, 0);

  000ee	8b 16		 mov	 edx, DWORD PTR [esi]
  000f0	6a 00		 push	 0
  000f2	52		 push	 edx
  000f3	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _szText$216243[ebp]
  000f9	50		 push	 eax
  000fa	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  000ff	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
  00105	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN8@EGAnsRegXM@4:

; 2681 : 				}
; 2682 : 
; 2683 : 				if((g_iXMasVisitCount % 100) != 0 && gNewServer != 1)

  00108	b8 1f 85 eb 51	 mov	 eax, 1374389535		; 51eb851fH
  0010d	f7 e9		 imul	 ecx
  0010f	c1 fa 05	 sar	 edx, 5
  00112	8b c2		 mov	 eax, edx
  00114	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  00117	03 c2		 add	 eax, edx
  00119	6b c0 64	 imul	 eax, 100		; 00000064H
  0011c	8b d1		 mov	 edx, ecx
  0011e	2b d0		 sub	 edx, eax
  00120	74 33		 je	 SHORT $LN5@EGAnsRegXM@4
  00122	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?gNewServer@@3HA, 1 ; gNewServer
  00129	74 2a		 je	 SHORT $LN5@EGAnsRegXM@4

; 2684 : 				{
; 2685 : 					XMasEventA->DropItem(aIndex,lpObj->MapNumber,lpObj->X, lpObj->Y);

  0012b	0f b6 86 46 01
	00 00		 movzx	 eax, BYTE PTR [esi+326]
  00132	0f b6 8e 44 01
	00 00		 movzx	 ecx, BYTE PTR [esi+324]
  00139	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  00140	50		 push	 eax
  00141	51		 push	 ecx
  00142	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?XMasEventA@@3PAVCProbabilityItemBag@@A ; XMasEventA
  00148	52		 push	 edx
  00149	53		 push	 ebx
  0014a	e8 00 00 00 00	 call	 ?DropItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropItem
  0014f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?g_iXMasVisitCount@@3HA ; g_iXMasVisitCount
$LN5@EGAnsRegXM@4:

; 2686 : 				}
; 2687 : 				
; 2688 : 				LogAddTD("[X-MAX Event] [AccountID]: %s , [VISITCOUNT]:%d",lpObj->AccountID,g_iXMasVisitCount);

  00155	51		 push	 ecx
  00156	83 c6 6c	 add	 esi, 108		; 0000006cH
  00159	56		 push	 esi
  0015a	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@JOPKPPPJ@?$FLX?9MAX?5Event?$FN?5?$FLAccountID?$FN?3?5?$CFs?5?0?5@
  0015f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00165	83 c4 0c	 add	 esp, 12			; 0000000cH
  00168	5f		 pop	 edi
  00169	5e		 pop	 esi
  0016a	5b		 pop	 ebx

; 2704 : 		}
; 2705 : 		break;
; 2706 : 	}
; 2707 : }

  0016b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0016e	33 cd		 xor	 ecx, ebp
  00170	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00175	8b e5		 mov	 esp, ebp
  00177	5d		 pop	 ebp
  00178	c3		 ret	 0
$LN4@EGAnsRegXM@4:

; 2689 : 
; 2690 : 			}
; 2691 : 		}
; 2692 : 		break;
; 2693 : 	case 1:
; 2694 : 	case 2:
; 2695 : 		if(lpMsg->w_14 == 1)

  00179	66 83 7f 14 01	 cmp	 WORD PTR [edi+20], 1
  0017e	75 23		 jne	 SHORT $LN1@EGAnsRegXM@4

; 2696 : 		{
; 2697 : 			GCServerCmd(lpObj->m_Index,16,2,0);

  00180	8b 06		 mov	 eax, DWORD PTR [esi]
  00182	6a 00		 push	 0
  00184	6a 02		 push	 2
  00186	6a 10		 push	 16			; 00000010H
  00188	50		 push	 eax

; 2698 : 		}
; 2699 : 		break;

  00189	eb 10		 jmp	 SHORT $LN17@EGAnsRegXM@4
$LN2@EGAnsRegXM@4:

; 2700 : 	case 3:
; 2701 : 		if(lpMsg->w_14 == 1)

  0018b	66 83 7f 14 01	 cmp	 WORD PTR [edi+20], 1
  00190	75 11		 jne	 SHORT $LN1@EGAnsRegXM@4

; 2702 : 		{
; 2703 : 			GCServerCmd(lpObj->m_Index,16,3,0);

  00192	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00194	6a 00		 push	 0
  00196	6a 03		 push	 3
  00198	6a 10		 push	 16			; 00000010H
  0019a	51		 push	 ecx
$LN17@EGAnsRegXM@4:
  0019b	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  001a0	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@EGAnsRegXM@4:

; 2704 : 		}
; 2705 : 		break;
; 2706 : 	}
; 2707 : }

  001a3	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001a6	5f		 pop	 edi
  001a7	5e		 pop	 esi
  001a8	33 cd		 xor	 ecx, ebp
  001aa	5b		 pop	 ebx
  001ab	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001b0	8b e5		 mov	 esp, ebp
  001b2	5d		 pop	 ebp
  001b3	c3		 ret	 0
$LN18@EGAnsRegXM@4:
  001b4	00 00 00 00	 DD	 $LN10@EGAnsRegXM@4
  001b8	00 00 00 00	 DD	 $LN4@EGAnsRegXM@4
  001bc	00 00 00 00	 DD	 $LN4@EGAnsRegXM@4
  001c0	00 00 00 00	 DD	 $LN2@EGAnsRegXM@4
?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ENDP ; EGAnsRegXMasSetPayItemResult
_TEXT	ENDS
PUBLIC	?ReqNPCXMasMapMoveOpen@@YAXH@Z			; ReqNPCXMasMapMoveOpen
; Function compile flags: /Ogtp
;	COMDAT ?ReqNPCXMasMapMoveOpen@@YAXH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?ReqNPCXMasMapMoveOpen@@YAXH@Z PROC			; ReqNPCXMasMapMoveOpen, COMDAT

; 2711 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2712 : 	LPOBJ lpObj = &gObj[aIndex];

  00003	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00006	56		 push	 esi
  00007	8b f0		 mov	 esi, eax
  00009	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0000f	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2713 : 
; 2714 : 	if(gObjIsConnected(aIndex) == FALSE)

  00015	50		 push	 eax
  00016	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001b	83 c4 04	 add	 esp, 4
  0001e	85 c0		 test	 eax, eax
  00020	74 11		 je	 SHORT $LN2@ReqNPCXMas

; 2715 : 	{
; 2716 : 		return;
; 2717 : 	}
; 2718 : 	
; 2719 : 	GCServerCmd(lpObj->m_Index,17,1,0);

  00022	8b 06		 mov	 eax, DWORD PTR [esi]
  00024	6a 00		 push	 0
  00026	6a 01		 push	 1
  00028	6a 11		 push	 17			; 00000011H
  0002a	50		 push	 eax
  0002b	e8 00 00 00 00	 call	 ?GCServerCmd@@YAXHEEE@Z	; GCServerCmd
  00030	83 c4 10	 add	 esp, 16			; 00000010H
$LN2@ReqNPCXMas:
  00033	5e		 pop	 esi

; 2720 : }

  00034	5d		 pop	 ebp
  00035	c3		 ret	 0
?ReqNPCXMasMapMoveOpen@@YAXH@Z ENDP			; ReqNPCXMasMapMoveOpen
_TEXT	ENDS
PUBLIC	?ReqNPCXMasMapMoveDevias@@YAXH@Z		; ReqNPCXMasMapMoveDevias
EXTRN	?gObjMoveGate@@YAHHH@Z:PROC			; gObjMoveGate
; Function compile flags: /Ogtp
;	COMDAT ?ReqNPCXMasMapMoveDevias@@YAXH@Z
_TEXT	SEGMENT
_iIndex$ = 8						; size = 4
?ReqNPCXMasMapMoveDevias@@YAXH@Z PROC			; ReqNPCXMasMapMoveDevias, COMDAT

; 2723 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2724 : 	LPOBJ lpObj = &gObj[iIndex];

  00003	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00006	56		 push	 esi
  00007	8b f0		 mov	 esi, eax
  00009	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0000f	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2725 : 
; 2726 : 	if(gObjIsConnected(iIndex) == FALSE)

  00015	50		 push	 eax
  00016	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001b	83 c4 04	 add	 esp, 4
  0001e	85 c0		 test	 eax, eax
  00020	74 0d		 je	 SHORT $LN2@ReqNPCXMas@2

; 2727 : 	{
; 2728 : 		return;
; 2729 : 	}
; 2730 : 
; 2731 : 	gObjMoveGate(lpObj->m_Index, 22); //Devias :)

  00022	8b 06		 mov	 eax, DWORD PTR [esi]
  00024	6a 16		 push	 22			; 00000016H
  00026	50		 push	 eax
  00027	e8 00 00 00 00	 call	 ?gObjMoveGate@@YAHHH@Z	; gObjMoveGate
  0002c	83 c4 08	 add	 esp, 8
$LN2@ReqNPCXMas@2:
  0002f	5e		 pop	 esi

; 2732 : }

  00030	5d		 pop	 ebp
  00031	c3		 ret	 0
?ReqNPCXMasMapMoveDevias@@YAXH@Z ENDP			; ReqNPCXMasMapMoveDevias
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegLuckyCoinItem@@YAXH@Z			; EGAnsRegLuckyCoinItem
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegLuckyCoinItem@@YAXH@Z
_TEXT	SEGMENT
_pMsg$ = -36						; size = 30
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
?EGAnsRegLuckyCoinItem@@YAXH@Z PROC			; EGAnsRegLuckyCoinItem, COMDAT

; 2747 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 24	 sub	 esp, 36			; 00000024H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00013	56		 push	 esi

; 2748 : 	LPOBJ lpObj = &gObj[iIndex];

  00014	8b f0		 mov	 esi, eax
  00016	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0001c	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2749 : 
; 2750 : 	if(gObjIsConnected(iIndex) == FALSE)

  00022	50		 push	 eax
  00023	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00028	83 c4 04	 add	 esp, 4
  0002b	85 c0		 test	 eax, eax
  0002d	0f 84 85 00 00
	00		 je	 $LN2@EGAnsRegLu

; 2751 : 	{
; 2752 : 		return;
; 2753 : 	}
; 2754 : 
; 2755 : 	PMSG_ANS_LUCKYCOIN_REGCOUNT pMsg = { 0 };
; 2756 : 	
; 2757 : 	pMsg.h.c = 0xC1;
; 2758 : 	pMsg.h.headcode = 0x33;
; 2759 : 	pMsg.h.size = sizeof(pMsg); //0x1E
; 2760 : 	
; 2761 : 	pMsg.iIndex = lpObj->m_Index;
; 2762 : 	pMsg.ServerCode = gGameServerCode / 20;

  00033	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0003a	33 c0		 xor	 eax, eax
  0003c	89 45 dd	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0003f	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00042	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+25], eax
  00045	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  00048	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  0004b	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  0004e	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  00051	88 45 f9	 mov	 BYTE PTR _pMsg$[ebp+29], al
  00054	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00058	66 c7 45 dd 1e
	33		 mov	 WORD PTR _pMsg$[ebp+1], 13086 ; 0000331eH
  0005e	66 8b 06	 mov	 ax, WORD PTR [esi]
  00061	66 89 45 e0	 mov	 WORD PTR _pMsg$[ebp+4], ax
  00065	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  0006a	f7 e9		 imul	 ecx
  0006c	c1 fa 03	 sar	 edx, 3
  0006f	8b ca		 mov	 ecx, edx
  00071	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  00074	03 ca		 add	 ecx, edx
  00076	66 89 4d f8	 mov	 WORD PTR _pMsg$[ebp+28], cx

; 2763 : 	memcpy(pMsg.AccountID, lpObj->AccountID, 0xA);

  0007a	8b 56 6c	 mov	 edx, DWORD PTR [esi+108]
  0007d	89 55 e2	 mov	 DWORD PTR _pMsg$[ebp+6], edx
  00080	8b 46 70	 mov	 eax, DWORD PTR [esi+112]
  00083	89 45 e6	 mov	 DWORD PTR _pMsg$[ebp+10], eax
  00086	0f b7 4e 74	 movzx	 ecx, WORD PTR [esi+116]
  0008a	66 89 4d ea	 mov	 WORD PTR _pMsg$[ebp+14], cx

; 2764 : 	pMsg.btResult = 0;

  0008e	c6 45 ec 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0

; 2765 : 	memcpy(pMsg.Name, lpObj->Name, 0xA);

  00092	8b 56 77	 mov	 edx, DWORD PTR [esi+119]
  00095	89 55 ed	 mov	 DWORD PTR _pMsg$[ebp+17], edx
  00098	8b 46 7b	 mov	 eax, DWORD PTR [esi+123]
  0009b	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  0009e	0f b7 4e 7f	 movzx	 ecx, WORD PTR [esi+127]

; 2766 : 	pMsg.btResult2 = 0;
; 2767 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  000a2	8d 55 dc	 lea	 edx, DWORD PTR _pMsg$[ebp]
  000a5	6a 1e		 push	 30			; 0000001eH
  000a7	52		 push	 edx
  000a8	66 89 4d f5	 mov	 WORD PTR _pMsg$[ebp+25], cx
  000ac	c6 45 f7 00	 mov	 BYTE PTR _pMsg$[ebp+27], 0
  000b0	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000b5	83 c4 08	 add	 esp, 8
$LN2@EGAnsRegLu:

; 2768 : }

  000b8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000bb	33 cd		 xor	 ecx, ebp
  000bd	5e		 pop	 esi
  000be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c3	8b e5		 mov	 esp, ebp
  000c5	5d		 pop	 ebp
  000c6	c3		 ret	 0
?EGAnsRegLuckyCoinItem@@YAXH@Z ENDP			; EGAnsRegLuckyCoinItem
_TEXT	ENDS
PUBLIC	?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemResult
EXTRN	?GCSendLuckyCoinCount@@YAXHH@Z:PROC		; GCSendLuckyCoinCount
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z PROC ; EGAnsRegLuckyCoinItemResult, COMDAT

; 2771 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	56		 push	 esi
  00005	57		 push	 edi

; 2772 : 	int aIndex = lpMsg->iIndex;

  00006	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]
  00009	0f bf 5f 04	 movsx	 ebx, WORD PTR [edi+4]

; 2773 : 	int loc2 = 0;
; 2774 : 
; 2775 : 	LPOBJ lpObj = &gObj[aIndex];

  0000d	8b f3		 mov	 esi, ebx
  0000f	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00015	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2776 : 
; 2777 : 	if(gObjIsConnected(aIndex) == FALSE)

  0001b	53		 push	 ebx
  0001c	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00021	83 c4 04	 add	 esp, 4
  00024	85 c0		 test	 eax, eax
  00026	74 3e		 je	 SHORT $LN3@EGAnsRegLu@2

; 2778 : 	{
; 2779 : 		return;
; 2780 : 	}
; 2781 : 	
; 2782 : 	if(strcmp(lpMsg->szNAME,lpObj->Name))

  00028	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  0002b	8d 47 11	 lea	 eax, DWORD PTR [edi+17]
  0002e	8b ff		 npad	 2
$LL5@EGAnsRegLu@2:
  00030	8a 10		 mov	 dl, BYTE PTR [eax]
  00032	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00034	75 1a		 jne	 SHORT $LN6@EGAnsRegLu@2
  00036	84 d2		 test	 dl, dl
  00038	74 12		 je	 SHORT $LN7@EGAnsRegLu@2
  0003a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0003d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00040	75 0e		 jne	 SHORT $LN6@EGAnsRegLu@2
  00042	83 c0 02	 add	 eax, 2
  00045	83 c1 02	 add	 ecx, 2
  00048	84 d2		 test	 dl, dl
  0004a	75 e4		 jne	 SHORT $LL5@EGAnsRegLu@2
$LN7@EGAnsRegLu@2:
  0004c	33 c0		 xor	 eax, eax
  0004e	eb 05		 jmp	 SHORT $LN8@EGAnsRegLu@2
$LN6@EGAnsRegLu@2:
  00050	1b c0		 sbb	 eax, eax
  00052	83 d8 ff	 sbb	 eax, -1
$LN8@EGAnsRegLu@2:
  00055	85 c0		 test	 eax, eax
  00057	75 0d		 jne	 SHORT $LN3@EGAnsRegLu@2

; 2783 : 	{
; 2784 : 		return;
; 2785 : 	}
; 2786 : 	
; 2787 : 	GCSendLuckyCoinCount(aIndex,lpMsg->iCoinCount);

  00059	8b 47 20	 mov	 eax, DWORD PTR [edi+32]
  0005c	50		 push	 eax
  0005d	53		 push	 ebx
  0005e	e8 00 00 00 00	 call	 ?GCSendLuckyCoinCount@@YAXHH@Z ; GCSendLuckyCoinCount
  00063	83 c4 08	 add	 esp, 8
$LN3@EGAnsRegLu@2:
  00066	5f		 pop	 edi
  00067	5e		 pop	 esi
  00068	5b		 pop	 ebx

; 2788 : }

  00069	5d		 pop	 ebp
  0006a	c3		 ret	 0
?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ENDP ; EGAnsRegLuckyCoinItemResult
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z		; EGAnsRegLuckyCoinItemPosition
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z
_TEXT	SEGMENT
_pMsg$ = -36						; size = 32
__$ArrayPad$ = -4					; size = 4
_iIndex$ = 8						; size = 4
_Ipos$ = 12						; size = 4
?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z PROC		; EGAnsRegLuckyCoinItemPosition, COMDAT

; 2804 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 24	 sub	 esp, 36			; 00000024H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00013	56		 push	 esi

; 2805 : 	LPOBJ lpObj = &gObj[iIndex];

  00014	8b f0		 mov	 esi, eax
  00016	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0001c	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2806 : 
; 2807 : 	if(gObjIsConnected(iIndex) == FALSE)

  00022	50		 push	 eax
  00023	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00028	83 c4 04	 add	 esp, 4
  0002b	85 c0		 test	 eax, eax
  0002d	0f 84 8f 00 00
	00		 je	 $LN2@EGAnsRegLu@3

; 2808 : 	{
; 2809 : 		return;
; 2810 : 	}
; 2811 : 
; 2812 : 	PMSG_ANS_LUCKYCOIN_ITEM_POSITION pMsg = { 0 };
; 2813 : 	
; 2814 : 	pMsg.h.c = 0xC1;
; 2815 : 	pMsg.h.headcode = 0x34;
; 2816 : 	pMsg.h.size = sizeof(pMsg); //0x20
; 2817 : 	
; 2818 : 	pMsg.iIndex = lpObj->m_Index;
; 2819 : 	pMsg.ServerCode = gGameServerCode / 20;

  00033	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?gGameServerCode@@3FA ; gGameServerCode
  0003a	33 c0		 xor	 eax, eax
  0003c	89 45 dd	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  0003f	89 45 e9	 mov	 DWORD PTR _pMsg$[ebp+13], eax
  00042	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+25], eax
  00045	89 45 e1	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  00048	89 45 e5	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  0004b	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+29], ax
  0004f	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  00052	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  00055	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+31], al
  00058	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  0005c	66 c7 45 dd 20
	34		 mov	 WORD PTR _pMsg$[ebp+1], 13344 ; 00003420H
  00062	66 8b 06	 mov	 ax, WORD PTR [esi]
  00065	66 89 45 e0	 mov	 WORD PTR _pMsg$[ebp+4], ax
  00069	b8 67 66 66 66	 mov	 eax, 1717986919		; 66666667H
  0006e	f7 e9		 imul	 ecx
  00070	c1 fa 03	 sar	 edx, 3
  00073	8b ca		 mov	 ecx, edx
  00075	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  00078	03 ca		 add	 ecx, edx
  0007a	66 89 4d f8	 mov	 WORD PTR _pMsg$[ebp+28], cx

; 2820 : 	memcpy(pMsg.AccountID, lpObj->AccountID, 0xA);

  0007e	8b 56 6c	 mov	 edx, DWORD PTR [esi+108]
  00081	89 55 e2	 mov	 DWORD PTR _pMsg$[ebp+6], edx
  00084	8b 46 70	 mov	 eax, DWORD PTR [esi+112]
  00087	89 45 e6	 mov	 DWORD PTR _pMsg$[ebp+10], eax
  0008a	0f b7 4e 74	 movzx	 ecx, WORD PTR [esi+116]
  0008e	66 89 4d ea	 mov	 WORD PTR _pMsg$[ebp+14], cx

; 2821 : 	pMsg.btResult = 0;

  00092	c6 45 ec 00	 mov	 BYTE PTR _pMsg$[ebp+16], 0

; 2822 : 	memcpy(pMsg.Name, lpObj->Name, 0xA);

  00096	8b 56 77	 mov	 edx, DWORD PTR [esi+119]
  00099	89 55 ed	 mov	 DWORD PTR _pMsg$[ebp+17], edx
  0009c	8b 46 7b	 mov	 eax, DWORD PTR [esi+123]

; 2823 : 	pMsg.btResult2 = 0;
; 2824 : 	pMsg.pos = Ipos;

  0009f	8a 55 0c	 mov	 dl, BYTE PTR _Ipos$[ebp]
  000a2	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+21], eax
  000a5	0f b7 4e 7f	 movzx	 ecx, WORD PTR [esi+127]

; 2825 : 	DataSendEventChip((char*)&pMsg, sizeof(pMsg));

  000a9	8d 45 dc	 lea	 eax, DWORD PTR _pMsg$[ebp]
  000ac	6a 20		 push	 32			; 00000020H
  000ae	50		 push	 eax
  000af	66 89 4d f5	 mov	 WORD PTR _pMsg$[ebp+25], cx
  000b3	c6 45 f7 00	 mov	 BYTE PTR _pMsg$[ebp+27], 0
  000b7	88 55 fa	 mov	 BYTE PTR _pMsg$[ebp+30], dl
  000ba	e8 00 00 00 00	 call	 ?DataSendEventChip@@YAXPADH@Z ; DataSendEventChip
  000bf	83 c4 08	 add	 esp, 8
$LN2@EGAnsRegLu@3:

; 2826 : }

  000c2	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000c5	33 cd		 xor	 ecx, ebp
  000c7	5e		 pop	 esi
  000c8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000cd	8b e5		 mov	 esp, ebp
  000cf	5d		 pop	 ebp
  000d0	c3		 ret	 0
?EGAnsRegLuckyCoinItemPosition@@YAXHH@Z ENDP		; EGAnsRegLuckyCoinItemPosition
_TEXT	ENDS
PUBLIC	?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemPositionResult
EXTRN	?CGReqLuckyCoinRegister@@YAXHEHE@Z:PROC		; CGReqLuckyCoinRegister
; Function compile flags: /Ogtp
;	COMDAT ?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z PROC ; EGAnsRegLuckyCoinItemPositionResult, COMDAT

; 2829 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	56		 push	 esi
  00005	57		 push	 edi

; 2830 : 	int aIndex = lpMsg->iIndex;

  00006	8b 7d 08	 mov	 edi, DWORD PTR _lpMsg$[ebp]
  00009	0f bf 5f 04	 movsx	 ebx, WORD PTR [edi+4]

; 2831 : 	int loc2 = 0;
; 2832 : 
; 2833 : 	LPOBJ lpObj = &gObj[aIndex];

  0000d	8b f3		 mov	 esi, ebx
  0000f	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00015	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 2834 : 
; 2835 : 	if(gObjIsConnected(aIndex) == FALSE)

  0001b	53		 push	 ebx
  0001c	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00021	83 c4 04	 add	 esp, 4
  00024	85 c0		 test	 eax, eax
  00026	74 48		 je	 SHORT $LN3@EGAnsRegLu@4

; 2836 : 	{
; 2837 : 		return;
; 2838 : 	}
; 2839 : 	
; 2840 : 	if(strcmp(lpMsg->szNAME,lpObj->Name))

  00028	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  0002b	8d 47 11	 lea	 eax, DWORD PTR [edi+17]
  0002e	8b ff		 npad	 2
$LL5@EGAnsRegLu@4:
  00030	8a 10		 mov	 dl, BYTE PTR [eax]
  00032	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00034	75 1a		 jne	 SHORT $LN6@EGAnsRegLu@4
  00036	84 d2		 test	 dl, dl
  00038	74 12		 je	 SHORT $LN7@EGAnsRegLu@4
  0003a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0003d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00040	75 0e		 jne	 SHORT $LN6@EGAnsRegLu@4
  00042	83 c0 02	 add	 eax, 2
  00045	83 c1 02	 add	 ecx, 2
  00048	84 d2		 test	 dl, dl
  0004a	75 e4		 jne	 SHORT $LL5@EGAnsRegLu@4
$LN7@EGAnsRegLu@4:
  0004c	33 c0		 xor	 eax, eax
  0004e	eb 05		 jmp	 SHORT $LN8@EGAnsRegLu@4
$LN6@EGAnsRegLu@4:
  00050	1b c0		 sbb	 eax, eax
  00052	83 d8 ff	 sbb	 eax, -1
$LN8@EGAnsRegLu@4:
  00055	85 c0		 test	 eax, eax
  00057	75 17		 jne	 SHORT $LN3@EGAnsRegLu@4

; 2841 : 	{
; 2842 : 		return;
; 2843 : 	}
; 2844 : 
; 2845 : 	CGReqLuckyCoinRegister(aIndex,lpMsg->btResult,lpMsg->iCoinCount,lpMsg->pos);

  00059	0f b6 47 24	 movzx	 eax, BYTE PTR [edi+36]
  0005d	8b 4f 20	 mov	 ecx, DWORD PTR [edi+32]
  00060	0f b6 57 1e	 movzx	 edx, BYTE PTR [edi+30]
  00064	50		 push	 eax
  00065	51		 push	 ecx
  00066	52		 push	 edx
  00067	53		 push	 ebx
  00068	e8 00 00 00 00	 call	 ?CGReqLuckyCoinRegister@@YAXHEHE@Z ; CGReqLuckyCoinRegister
  0006d	83 c4 10	 add	 esp, 16			; 00000010H
$LN3@EGAnsRegLu@4:
  00070	5f		 pop	 edi
  00071	5e		 pop	 esi
  00072	5b		 pop	 ebx

; 2846 : }

  00073	5d		 pop	 ebp
  00074	c3		 ret	 0
?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ENDP ; EGAnsRegLuckyCoinItemPositionResult
_TEXT	ENDS
PUBLIC	?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; GoldenBoxItemBagOpen
EXTRN	?DropGoldenBoxItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropGoldenBoxItem
EXTRN	?GoldenBoxItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; GoldenBoxItemBag
; Function compile flags: /Ogtp
;	COMDAT ?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; GoldenBoxItemBagOpen, COMDAT

; 2867 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2868 : 	GoldenBoxItemBag->DropGoldenBoxItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?GoldenBoxItemBag@@3PAVCProbabilityItemBag@@A ; GoldenBoxItemBag
  0001b	e8 00 00 00 00	 call	 ?DropGoldenBoxItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropGoldenBoxItem

; 2869 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?GoldenBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; GoldenBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; SilverBoxItemBagOpen
EXTRN	?DropSilverBoxItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropSilverBoxItem
EXTRN	?SilverBoxItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; SilverBoxItemBag
; Function compile flags: /Ogtp
;	COMDAT ?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC	; SilverBoxItemBagOpen, COMDAT

; 2874 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2875 : 	SilverBoxItemBag->DropSilverBoxItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?SilverBoxItemBag@@3PAVCProbabilityItemBag@@A ; SilverBoxItemBag
  0001b	e8 00 00 00 00	 call	 ?DropSilverBoxItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropSilverBoxItem

; 2876 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?SilverBoxItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP	; SilverBoxItemBagOpen
_TEXT	ENDS
PUBLIC	?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; ShineJewelleryCaseItemBagOpen
EXTRN	?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropJewelleryCaseItem
EXTRN	?ShineJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; ShineJewelleryCaseItemBag
; Function compile flags: /Ogtp
;	COMDAT ?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; ShineJewelleryCaseItemBagOpen, COMDAT

; 2881 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2882 : 	ShineJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ShineJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; ShineJewelleryCaseItemBag
  0001b	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2883 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?ShineJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; ShineJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; RefinedJewelleryCaseItemBagOpen
EXTRN	?RefinedJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; RefinedJewelleryCaseItemBag
; Function compile flags: /Ogtp
;	COMDAT ?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; RefinedJewelleryCaseItemBagOpen, COMDAT

; 2888 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2889 : 	RefinedJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?RefinedJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; RefinedJewelleryCaseItemBag
  0001b	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2890 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?RefinedJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; RefinedJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; IronJewelleryCaseItemBagOpen
EXTRN	?IronJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; IronJewelleryCaseItemBag
; Function compile flags: /Ogtp
;	COMDAT ?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; IronJewelleryCaseItemBagOpen, COMDAT

; 2895 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2896 : 	IronJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?IronJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; IronJewelleryCaseItemBag
  0001b	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2897 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?IronJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; IronJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; OldJewelleryCaseItemBagOpen
EXTRN	?OldJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; OldJewelleryCaseItemBag
; Function compile flags: /Ogtp
;	COMDAT ?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; OldJewelleryCaseItemBagOpen, COMDAT

; 2902 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2903 : 	OldJewelleryCaseItemBag->DropJewelleryCaseItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?OldJewelleryCaseItemBag@@3PAVCProbabilityItemBag@@A ; OldJewelleryCaseItemBag
  0001b	e8 00 00 00 00	 call	 ?DropJewelleryCaseItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropJewelleryCaseItem

; 2904 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?OldJewelleryCaseItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; OldJewelleryCaseItemBagOpen
_TEXT	ENDS
PUBLIC	?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z ; NewMonsterItemBagOpen
EXTRN	?DropNewMonsterItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropNewMonsterItem
EXTRN	?NewMonsterItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; NewMonsterItemBag
; Function compile flags: /Ogtp
;	COMDAT ?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
_nBagNumber$ = 24					; size = 4
?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z PROC	; NewMonsterItemBagOpen, COMDAT

; 2909 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2910 : 	switch(nBagNumber)

  00003	8b 45 18	 mov	 eax, DWORD PTR _nBagNumber$[ebp]
  00006	83 f8 47	 cmp	 eax, 71			; 00000047H
  00009	7c 22		 jl	 SHORT $LN2@NewMonster
  0000b	83 f8 4b	 cmp	 eax, 75			; 0000004bH
  0000e	7f 1d		 jg	 SHORT $LN2@NewMonster

; 2911 : 	{
; 2912 : 	case 71:
; 2913 : 	case 72:
; 2914 : 	case 73:
; 2915 : 	case 74:
; 2916 : 	case 75:
; 2917 : 		NewMonsterItemBag->DropNewMonsterItem(lpObj->m_Index, btMapNumber, cX, cY);

  00010	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00013	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00016	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  00019	50		 push	 eax
  0001a	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0001d	51		 push	 ecx
  0001e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00020	52		 push	 edx
  00021	51		 push	 ecx
  00022	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?NewMonsterItemBag@@3PAVCProbabilityItemBag@@A ; NewMonsterItemBag
  00028	e8 00 00 00 00	 call	 ?DropNewMonsterItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropNewMonsterItem
$LN2@NewMonster:

; 2918 : 		break;
; 2919 : 	}
; 2920 : }

  0002d	5d		 pop	 ebp
  0002e	c3		 ret	 0
?NewMonsterItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEEH@Z ENDP	; NewMonsterItemBagOpen
_TEXT	ENDS
PUBLIC	?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; BoxOfGreenColorItemBagOpen
EXTRN	?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z:PROC ; CProbabilityItemBag::DropBoxOfGRPColorItem
EXTRN	?BoxOfGreenColorItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; BoxOfGreenColorItemBag
; Function compile flags: /Ogtp
;	COMDAT ?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; BoxOfGreenColorItemBagOpen, COMDAT

; 2925 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2926 : 	BoxOfGreenColorItemBag->DropBoxOfGRPColorItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BoxOfGreenColorItemBag@@3PAVCProbabilityItemBag@@A ; BoxOfGreenColorItemBag
  0001b	e8 00 00 00 00	 call	 ?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropBoxOfGRPColorItem

; 2927 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?BoxOfGreenColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; BoxOfGreenColorItemBagOpen
_TEXT	ENDS
PUBLIC	?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; BoxOfRedColorItemBagOpen
EXTRN	?BoxOfRedColorItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; BoxOfRedColorItemBag
; Function compile flags: /Ogtp
;	COMDAT ?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; BoxOfRedColorItemBagOpen, COMDAT

; 2932 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2933 : 	BoxOfRedColorItemBag->DropBoxOfGRPColorItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BoxOfRedColorItemBag@@3PAVCProbabilityItemBag@@A ; BoxOfRedColorItemBag
  0001b	e8 00 00 00 00	 call	 ?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropBoxOfGRPColorItem

; 2934 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?BoxOfRedColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; BoxOfRedColorItemBagOpen
_TEXT	ENDS
PUBLIC	?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ; BoxOfPurpleColorItemBagOpen
EXTRN	?BoxOfPurpleColorItemBag@@3PAVCProbabilityItemBag@@A:DWORD ; BoxOfPurpleColorItemBag
; Function compile flags: /Ogtp
;	COMDAT ?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_btMapNumber$ = 12					; size = 1
_cX$ = 16						; size = 1
_cY$ = 20						; size = 1
?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z PROC ; BoxOfPurpleColorItemBagOpen, COMDAT

; 2939 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2940 : 	BoxOfPurpleColorItemBag->DropBoxOfGRPColorItem(lpObj->m_Index, btMapNumber, cX, cY);

  00003	8b 45 14	 mov	 eax, DWORD PTR _cY$[ebp]
  00006	8b 4d 10	 mov	 ecx, DWORD PTR _cX$[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _btMapNumber$[ebp]
  0000c	50		 push	 eax
  0000d	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00010	51		 push	 ecx
  00011	8b 08		 mov	 ecx, DWORD PTR [eax]
  00013	52		 push	 edx
  00014	51		 push	 ecx
  00015	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?BoxOfPurpleColorItemBag@@3PAVCProbabilityItemBag@@A ; BoxOfPurpleColorItemBag
  0001b	e8 00 00 00 00	 call	 ?DropBoxOfGRPColorItem@CProbabilityItemBag@@QAEHHEEE@Z ; CProbabilityItemBag::DropBoxOfGRPColorItem

; 2941 : }

  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?BoxOfPurpleColorItemBagOpen@@YAXPAUOBJECTSTRUCT@@EEE@Z ENDP ; BoxOfPurpleColorItemBagOpen
_TEXT	ENDS
PUBLIC	?EventChipEventProtocolCore@@YAXEPAEH@Z		; EventChipEventProtocolCore
; Function compile flags: /Ogtp
;	COMDAT ?EventChipEventProtocolCore@@YAXEPAEH@Z
_TEXT	SEGMENT
_protoNum$ = 8						; size = 1
_aRecv$ = 12						; size = 4
_aLen$ = 16						; size = 4
?EventChipEventProtocolCore@@YAXEPAEH@Z PROC		; EventChipEventProtocolCore, COMDAT

; 18   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 19   : 	switch ( protoNum )

  00003	0f b6 45 08	 movzx	 eax, BYTE PTR _protoNum$[ebp]
  00007	48		 dec	 eax
  00008	83 f8 33	 cmp	 eax, 51			; 00000033H
  0000b	0f 87 ec 00 00
	00		 ja	 $LN22@EventChipE
  00011	0f b6 80 00 00
	00 00		 movzx	 eax, BYTE PTR $LN26@EventChipE[eax]
  00018	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN28@EventChipE[eax*4]
$LN21@EventChipE:

; 20   : 	{
; 21   : 		case 0x01:
; 22   : 			EGRecvEventChipInfo((PMSG_ANS_VIEW_EC_MN *)aRecv);

  0001f	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  00022	51		 push	 ecx
  00023	e8 00 00 00 00	 call	 ?EGRecvEventChipInfo@@YAXPAUPMSG_ANS_VIEW_EC_MN@@@Z ; EGRecvEventChipInfo

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00028	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  0002b	5d		 pop	 ebp
  0002c	c3		 ret	 0
$LN20@EventChipE:

; 23   : 			break;
; 24   : 		case 0x02:
; 25   : 			EGResultRegEventChip((PMSG_ANS_REGISTER_EVENTCHIP *)aRecv);

  0002d	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  00030	52		 push	 edx
  00031	e8 00 00 00 00	 call	 ?EGResultRegEventChip@@YAXPAUPMSG_ANS_REGISTER_EVENTCHIP@@@Z ; EGResultRegEventChip

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00036	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  00039	5d		 pop	 ebp
  0003a	c3		 ret	 0
$LN19@EventChipE:

; 26   : 			break;
; 27   : 		case 0x03:
; 28   : 			EGRecvRegMutoNum((PMSG_ANS_REGISTER_MUTONUM *)aRecv);

  0003b	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  0003e	50		 push	 eax
  0003f	e8 00 00 00 00	 call	 ?EGRecvRegMutoNum@@YAXPAUPMSG_ANS_REGISTER_MUTONUM@@@Z ; EGRecvRegMutoNum

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00044	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  00047	5d		 pop	 ebp
  00048	c3		 ret	 0
$LN18@EventChipE:

; 29   : 			break;
; 30   : 		case 0x04:
; 31   : 			EGRecvChangeRena((PMSG_ANS_RESET_EVENTCHIP *)aRecv);

  00049	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  0004c	51		 push	 ecx
  0004d	e8 00 00 00 00	 call	 ?EGRecvChangeRena@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeRena

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00052	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  00055	5d		 pop	 ebp
  00056	c3		 ret	 0
$LN17@EventChipE:

; 32   : 			break;
; 33   : 		case 0x05:
; 34   : 			EGRecvStoneInfo((PMSG_ANS_VIEW_STONES *)aRecv);

  00057	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  0005a	52		 push	 edx
  0005b	e8 00 00 00 00	 call	 ?EGRecvStoneInfo@@YAXPAUPMSG_ANS_VIEW_STONES@@@Z ; EGRecvStoneInfo

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00060	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  00063	5d		 pop	 ebp
  00064	c3		 ret	 0
$LN16@EventChipE:

; 35   : 			break;
; 36   : 		case 0x06:
; 37   : 			EGRecvRegStone((PMSG_ANS_REGISTER_STONES *)aRecv);

  00065	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00068	50		 push	 eax
  00069	e8 00 00 00 00	 call	 ?EGRecvRegStone@@YAXPAUPMSG_ANS_REGISTER_STONES@@@Z ; EGRecvRegStone

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  0006e	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  00071	5d		 pop	 ebp
  00072	c3		 ret	 0
$LN14@EventChipE:

; 38   : 			break;
; 39   : 		case 0x07:
; 40   : 			EGRecvDeleteStone((PMSG_ANS_DELETE_STONES *)aRecv);
; 41   : 			break;
; 42   : 		case 0x09:
; 43   : 			EGRecvChangeStones((PMSG_ANS_RESET_EVENTCHIP *)aRecv);

  00073	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  00076	51		 push	 ecx
  00077	e8 00 00 00 00	 call	 ?EGRecvChangeStones@@YAXPAUPMSG_ANS_RESET_EVENTCHIP@@@Z ; EGRecvChangeStones

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  0007c	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  0007f	5d		 pop	 ebp
  00080	c3		 ret	 0
$LN13@EventChipE:

; 44   : 			break;
; 45   : 		case 0x08:
; 46   : 			EGRecv2AnvRegSerial((PMSG_ANS_2ANIV_SERIAL *)aRecv);

  00081	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  00084	52		 push	 edx
  00085	e8 00 00 00 00	 call	 ?EGRecv2AnvRegSerial@@YAXPAUPMSG_ANS_2ANIV_SERIAL@@@Z ; EGRecv2AnvRegSerial

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  0008a	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  0008d	5d		 pop	 ebp
  0008e	c3		 ret	 0
$LN12@EventChipE:

; 47   : 			break;
; 48   : 		case 0x10:
; 49   : 			EGRecvRegRingGift((PMSG_ANS_REG_RINGGIFT *)aRecv);

  0008f	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  00092	50		 push	 eax
  00093	e8 00 00 00 00	 call	 ?EGRecvRegRingGift@@YAXPAUPMSG_ANS_REG_RINGGIFT@@@Z ; EGRecvRegRingGift

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  00098	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  0009b	5d		 pop	 ebp
  0009c	c3		 ret	 0
$LN11@EventChipE:

; 50   : 			break;
; 51   : 		case 0x15:
; 52   : 			EGAnsRegCCOfflineGift((PMSG_ANS_REG_CC_OFFLINE_GIFT *)aRecv);

  0009d	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  000a0	51		 push	 ecx
  000a1	e8 00 00 00 00	 call	 ?EGAnsRegCCOfflineGift@@YAXPAUPMSG_ANS_REG_CC_OFFLINE_GIFT@@@Z ; EGAnsRegCCOfflineGift

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000a6	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000a9	5d		 pop	 ebp
  000aa	c3		 ret	 0
$LN10@EventChipE:

; 53   : 			break;
; 54   : 		case 0x16:
; 55   : 			EGAnsRegDLOfflineGift((PMSG_ANS_REG_DL_OFFLINE_GIFT *)aRecv);

  000ab	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  000ae	52		 push	 edx
  000af	e8 00 00 00 00	 call	 ?EGAnsRegDLOfflineGift@@YAXPAUPMSG_ANS_REG_DL_OFFLINE_GIFT@@@Z ; EGAnsRegDLOfflineGift

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000b4	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000b7	5d		 pop	 ebp
  000b8	c3		 ret	 0
$LN9@EventChipE:

; 56   : 			break;
; 57   : 		case 0x17:
; 58   : 			EGAnsRegHTOfflineGift((PMSG_ANS_REG_HT_OFFLINE_GIFT *)aRecv);

  000b9	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000bc	50		 push	 eax
  000bd	e8 00 00 00 00	 call	 ?EGAnsRegHTOfflineGift@@YAXPAUPMSG_ANS_REG_HT_OFFLINE_GIFT@@@Z ; EGAnsRegHTOfflineGift

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000c2	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000c5	5d		 pop	 ebp
  000c6	c3		 ret	 0
$LN4@EventChipE:

; 59   : 			break;
; 60   : 		case 0x23: //season4.5 add-on start
; 61   : #if(PC_BANG_POINT_SYSTEM==1)
; 62   : 			g_PCBangPointSystem.EGAnsPcBangPointInfo((PMSG_ANS_REG_PC_POINT *)aRecv);
; 63   : #endif
; 64   : 			break;
; 65   : 		case 0x24:
; 66   : #if(PC_BANG_POINT_SYSTEM==1)
; 67   : 			g_PCBangPointSystem.EGAnsUserFirstPcBangUpdatePoint((PMSG_ANS_REG_PC_POINT *)aRecv);
; 68   : #endif
; 69   : 			break;
; 70   : 		case 0x29:
; 71   : #if(PC_BANG_POINT_SYSTEM==1)
; 72   : 			g_PCBangPointSystem.EGAnsUpdatePcBangResetPointInfo((PMSG_ANS_REG_PC_POINT *)aRecv);
; 73   : #endif
; 74   : 			break;
; 75   : 		case 0x30:
; 76   : #if(PC_BANG_POINT_SYSTEM==1)
; 77   : 			g_PCBangPointSystem.EGAnsUserPcBangUpdatePoint((PMSG_ANS_REG_PC_POINT *)aRecv);
; 78   : #endif
; 79   : 			break;
; 80   : 		case 0x31:
; 81   : 			EGAnsRegXMasGetPayItemResult((PMSG_XMAS_PAY_ITEM_RESULT *)aRecv);

  000c7	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  000ca	51		 push	 ecx
  000cb	e8 00 00 00 00	 call	 ?EGAnsRegXMasGetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasGetPayItemResult

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000d0	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000d3	5d		 pop	 ebp
  000d4	c3		 ret	 0
$LN3@EventChipE:

; 82   : 			break;
; 83   : 		case 0x32:
; 84   : 			EGAnsRegXMasSetPayItemResult((PMSG_XMAS_PAY_ITEM_RESULT *)aRecv);

  000d5	8b 55 0c	 mov	 edx, DWORD PTR _aRecv$[ebp]
  000d8	52		 push	 edx
  000d9	e8 00 00 00 00	 call	 ?EGAnsRegXMasSetPayItemResult@@YAXPAUPMSG_XMAS_PAY_ITEM_RESULT@@@Z ; EGAnsRegXMasSetPayItemResult

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000de	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000e1	5d		 pop	 ebp
  000e2	c3		 ret	 0
$LN2@EventChipE:

; 85   : 			break;
; 86   : 		case 0x33:
; 87   : 			EGAnsRegLuckyCoinItemResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000e3	8b 45 0c	 mov	 eax, DWORD PTR _aRecv$[ebp]
  000e6	50		 push	 eax
  000e7	e8 00 00 00 00	 call	 ?EGAnsRegLuckyCoinItemResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemResult

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000ec	83 c4 04	 add	 esp, 4

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000ef	5d		 pop	 ebp
  000f0	c3		 ret	 0
$LN1@EventChipE:

; 88   : 			break;
; 89   : 		case 0x34:
; 90   : 			EGAnsRegLuckyCoinItemPositionResult((PMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT *)aRecv);

  000f1	8b 4d 0c	 mov	 ecx, DWORD PTR _aRecv$[ebp]
  000f4	51		 push	 ecx
  000f5	e8 00 00 00 00	 call	 ?EGAnsRegLuckyCoinItemPositionResult@@YAXPAUPMSG_ANS_LUCKYCOIN_REGCOUNT_RESULT@@@Z ; EGAnsRegLuckyCoinItemPositionResult
  000fa	83 c4 04	 add	 esp, 4
$LN22@EventChipE:

; 91   : 			break;//season4.5 add-on end
; 92   : 	}
; 93   : }

  000fd	5d		 pop	 ebp
  000fe	c3		 ret	 0
  000ff	90		 npad	 1
$LN28@EventChipE:
  00100	00 00 00 00	 DD	 $LN21@EventChipE
  00104	00 00 00 00	 DD	 $LN20@EventChipE
  00108	00 00 00 00	 DD	 $LN19@EventChipE
  0010c	00 00 00 00	 DD	 $LN18@EventChipE
  00110	00 00 00 00	 DD	 $LN17@EventChipE
  00114	00 00 00 00	 DD	 $LN16@EventChipE
  00118	00 00 00 00	 DD	 $LN22@EventChipE
  0011c	00 00 00 00	 DD	 $LN13@EventChipE
  00120	00 00 00 00	 DD	 $LN14@EventChipE
  00124	00 00 00 00	 DD	 $LN12@EventChipE
  00128	00 00 00 00	 DD	 $LN11@EventChipE
  0012c	00 00 00 00	 DD	 $LN10@EventChipE
  00130	00 00 00 00	 DD	 $LN9@EventChipE
  00134	00 00 00 00	 DD	 $LN4@EventChipE
  00138	00 00 00 00	 DD	 $LN3@EventChipE
  0013c	00 00 00 00	 DD	 $LN2@EventChipE
  00140	00 00 00 00	 DD	 $LN1@EventChipE
  00144	00 00 00 00	 DD	 $LN22@EventChipE
$LN26@EventChipE:
  00148	00		 DB	 0
  00149	01		 DB	 1
  0014a	02		 DB	 2
  0014b	03		 DB	 3
  0014c	04		 DB	 4
  0014d	05		 DB	 5
  0014e	06		 DB	 6
  0014f	07		 DB	 7
  00150	08		 DB	 8
  00151	11		 DB	 17			; 00000011H
  00152	11		 DB	 17			; 00000011H
  00153	11		 DB	 17			; 00000011H
  00154	11		 DB	 17			; 00000011H
  00155	11		 DB	 17			; 00000011H
  00156	11		 DB	 17			; 00000011H
  00157	09		 DB	 9
  00158	11		 DB	 17			; 00000011H
  00159	11		 DB	 17			; 00000011H
  0015a	11		 DB	 17			; 00000011H
  0015b	11		 DB	 17			; 00000011H
  0015c	0a		 DB	 10			; 0000000aH
  0015d	0b		 DB	 11			; 0000000bH
  0015e	0c		 DB	 12			; 0000000cH
  0015f	11		 DB	 17			; 00000011H
  00160	11		 DB	 17			; 00000011H
  00161	11		 DB	 17			; 00000011H
  00162	11		 DB	 17			; 00000011H
  00163	11		 DB	 17			; 00000011H
  00164	11		 DB	 17			; 00000011H
  00165	11		 DB	 17			; 00000011H
  00166	11		 DB	 17			; 00000011H
  00167	11		 DB	 17			; 00000011H
  00168	11		 DB	 17			; 00000011H
  00169	11		 DB	 17			; 00000011H
  0016a	11		 DB	 17			; 00000011H
  0016b	11		 DB	 17			; 00000011H
  0016c	11		 DB	 17			; 00000011H
  0016d	11		 DB	 17			; 00000011H
  0016e	11		 DB	 17			; 00000011H
  0016f	11		 DB	 17			; 00000011H
  00170	11		 DB	 17			; 00000011H
  00171	11		 DB	 17			; 00000011H
  00172	11		 DB	 17			; 00000011H
  00173	11		 DB	 17			; 00000011H
  00174	11		 DB	 17			; 00000011H
  00175	11		 DB	 17			; 00000011H
  00176	11		 DB	 17			; 00000011H
  00177	11		 DB	 17			; 00000011H
  00178	0d		 DB	 13			; 0000000dH
  00179	0e		 DB	 14			; 0000000eH
  0017a	0f		 DB	 15			; 0000000fH
  0017b	10		 DB	 16			; 00000010H
?EventChipEventProtocolCore@@YAXEPAEH@Z ENDP		; EventChipEventProtocolCore
_TEXT	ENDS
PUBLIC	??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ; DarkLordHeartItemBoxOpen
EXTRN	?GetOp1@CItemBag@@QAEEH@Z:PROC			; CItemBag::GetOp1
EXTRN	?DarkLordHeartItemBag@@3PAVCItemBag@@A:DWORD	; DarkLordHeartItemBag
EXTRN	?g_iDarkLordHeartOffEventRate@@3HA:DWORD	; g_iDarkLordHeartOffEventRate
;	COMDAT ??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@
; File e:\work\tranet_version\gs\gameserver\itembag.h
CONST	SEGMENT
??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@ DB '['
	DB	'%s][%s][Lucky Box Item Drop][Darklord Heart] : (%d)(X:%d/Y:%d'
	DB	') Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\event.cpp
CONST	ENDS
;	COMDAT ?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_y$ = -240						; size = 4
_x$ = -236						; size = 4
_DropItemNum$ = -232					; size = 4
_level$ = -228						; size = 4
_Option2$ = -224					; size = 4
_Option3$ = -220					; size = 4
_EventItem$215529 = -216				; size = 212
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z PROC	; DarkLordHeartItemBoxOpen, COMDAT

; 1043 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]

; 1044 : 	float dur;
; 1045 : 	int type;
; 1046 : 	int level;
; 1047 : 	int x;
; 1048 : 	int y;
; 1049 : 	int Option1=0;
; 1050 : 	int Option2=0;
; 1051 : 	int Option3=0;
; 1052 : 	int DropItemNum;
; 1053 : 	int DropItemRate = 0;
; 1054 : 
; 1055 : 	if ( ((DWORD)rand()%60000) < (DWORD)g_iDarkLordHeartOffEventRate )	

  00017	e8 00 00 00 00	 call	 _rand
  0001c	33 d2		 xor	 edx, edx
  0001e	b9 60 ea 00 00	 mov	 ecx, 60000		; 0000ea60H
  00023	f7 f1		 div	 ecx
  00025	3b 15 00 00 00
	00		 cmp	 edx, DWORD PTR ?g_iDarkLordHeartOffEventRate@@3HA ; g_iDarkLordHeartOffEventRate
  0002b	73 19		 jae	 SHORT $LN24@DarkLordHe

; 1056 : 	{
; 1057 : 		if ( lpObj->Level > 100 )

  0002d	66 83 be be 00
	00 00 64	 cmp	 WORD PTR [esi+190], 100	; 00000064H
  00035	0f 8f a2 03 00
	00		 jg	 $LN17@DarkLordHe

; 1058 : 		{
; 1059 : 			return;
; 1060 : 		}
; 1061 : 
; 1062 : 		EGReqRegDLOfflineGift(lpObj->m_Index);

  0003b	8b 16		 mov	 edx, DWORD PTR [esi]
  0003d	52		 push	 edx
  0003e	e8 00 00 00 00	 call	 ?EGReqRegDLOfflineGift@@YAXH@Z ; EGReqRegDLOfflineGift
  00043	83 c4 04	 add	 esp, 4
$LN24@DarkLordHe:

; 1063 : 	}
; 1064 : 	
; 1065 : 	if ( DarkLordHeartItemBag->GetBagCount() > 0 )

  00046	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  0004b	53		 push	 ebx
  0004c	57		 push	 edi
  0004d	8b b8 88 03 00
	00		 mov	 edi, DWORD PTR [eax+904]
  00053	85 ff		 test	 edi, edi
  00055	0f 8e 53 03 00
	00		 jle	 $LN13@DarkLordHe

; 1066 : 	{
; 1067 : 	
; 1068 : 		DropItemNum = rand()%DarkLordHeartItemBag->GetBagCount();

  0005b	e8 00 00 00 00	 call	 _rand
  00060	99		 cdq
  00061	f7 ff		 idiv	 edi

; 1069 : 		DropItemRate = DarkLordHeartItemBag->GetOp1(DropItemNum);

  00063	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  00069	8b fa		 mov	 edi, edx
  0006b	57		 push	 edi
  0006c	89 bd 18 ff ff
	ff		 mov	 DWORD PTR _DropItemNum$[ebp], edi
  00072	e8 00 00 00 00	 call	 ?GetOp1@CItemBag@@QAEEH@Z ; CItemBag::GetOp1
  00077	0f b6 d8	 movzx	 ebx, al

; 1070 : 
; 1071 : 		if ( (rand()%100) < DropItemRate && lpObj->Level <= 100 )

  0007a	e8 00 00 00 00	 call	 _rand
  0007f	99		 cdq
  00080	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00085	f7 f9		 idiv	 ecx
  00087	3b d3		 cmp	 edx, ebx
  00089	0f 8d 1f 03 00
	00		 jge	 $LN13@DarkLordHe
  0008f	66 39 8e be 00
	00 00		 cmp	 WORD PTR [esi+190], cx
  00096	0f 8f 12 03 00
	00		 jg	 $LN13@DarkLordHe

; 1072 : 		{
; 1073 : 			level = DarkLordHeartItemBag->GetLevel(DropItemNum);

  0009c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  000a2	57		 push	 edi
  000a3	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel

; 1074 : 			dur=0;
; 1075 : 			x = lpObj->X;
; 1076 : 			y = lpObj->Y;

  000a8	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  000af	0f b6 d0	 movzx	 edx, al
  000b2	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  000b9	89 8d 10 ff ff
	ff		 mov	 DWORD PTR _y$[ebp], ecx

; 1077 : 			
; 1078 : 			type = ItemGetNumberMake(DarkLordHeartItemBag->GetType(DropItemNum), DarkLordHeartItemBag->GetIndex(DropItemNum));

  000bf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  000c5	57		 push	 edi
  000c6	89 95 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], edx
  000cc	89 85 14 ff ff
	ff		 mov	 DWORD PTR _x$[ebp], eax
  000d2	e8 00 00 00 00	 call	 ?GetIndex@CItemBag@@QAEEH@Z ; CItemBag::GetIndex
  000d7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  000dd	0f b6 d0	 movzx	 edx, al
  000e0	52		 push	 edx
  000e1	57		 push	 edi
  000e2	e8 00 00 00 00	 call	 ?GetType@CItemBag@@QAEEH@Z ; CItemBag::GetType
  000e7	0f b6 c0	 movzx	 eax, al
  000ea	50		 push	 eax
  000eb	e8 00 00 00 00	 call	 ?ItemGetNumberMake@@YAHHH@Z ; ItemGetNumberMake
  000f0	83 c4 08	 add	 esp, 8
  000f3	8b f8		 mov	 edi, eax

; 1079 : 			Option1 = ((rand()%100)>=70)?0:1;

  000f5	e8 00 00 00 00	 call	 _rand
  000fa	99		 cdq
  000fb	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00100	f7 f9		 idiv	 ecx
  00102	33 db		 xor	 ebx, ebx
  00104	83 fa 46	 cmp	 edx, 70			; 00000046H
  00107	0f 9c c3	 setl	 bl

; 1080 : 			Option2 = ((rand()%100)>=10)?0:1;

  0010a	e8 00 00 00 00	 call	 _rand
  0010f	99		 cdq
  00110	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00115	f7 f9		 idiv	 ecx
  00117	33 c0		 xor	 eax, eax
  00119	83 fa 0a	 cmp	 edx, 10			; 0000000aH
  0011c	0f 9c c0	 setl	 al
  0011f	89 85 20 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], eax

; 1081 : 			int rnd = rand()%20;

  00125	e8 00 00 00 00	 call	 _rand
  0012a	99		 cdq
  0012b	b9 14 00 00 00	 mov	 ecx, 20			; 00000014H
  00130	f7 f9		 idiv	 ecx

; 1082 : 
; 1083 : 			if ( rnd < 1 )

  00132	83 fa 01	 cmp	 edx, 1
  00135	7d 0c		 jge	 SHORT $LN12@DarkLordHe

; 1084 : 				Option3 = 3;

  00137	c7 85 24 ff ff
	ff 03 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 3
  00141	eb 1f		 jmp	 SHORT $LN8@DarkLordHe
$LN12@DarkLordHe:

; 1085 : 			else if ( rnd < 5 )

  00143	83 fa 05	 cmp	 edx, 5
  00146	7d 0c		 jge	 SHORT $LN10@DarkLordHe

; 1086 : 				Option3 = 2;

  00148	c7 85 24 ff ff
	ff 02 00 00 00	 mov	 DWORD PTR _Option3$[ebp], 2
  00152	eb 0e		 jmp	 SHORT $LN8@DarkLordHe
$LN10@DarkLordHe:

; 1087 : 			else if ( rnd < 9 )

  00154	33 c0		 xor	 eax, eax
  00156	83 fa 09	 cmp	 edx, 9
  00159	0f 9c c0	 setl	 al
  0015c	89 85 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], eax
$LN8@DarkLordHe:

; 1088 : 				Option3 = 1;
; 1089 : 			else
; 1090 : 				Option3 = 0;
; 1091 : 
; 1092 : 			if ( type == ITEMGET(12,15) ||
; 1093 : 				 type == ITEMGET(14,13) ||
; 1094 : 				 type == ITEMGET(14,14) ||
; 1095 : 				 type == ITEMGET(14,14) ||
; 1096 : 				 type == ITEMGET(14,16)	||
; 1097 : 				 type == ITEMGET(14,22)	||
; 1098 : 				 type == ITEMGET(14,31)	||
; 1099 : 				 type == ITEMGET(14,41)	||
; 1100 : 				 type == ITEMGET(14,42)	||
; 1101 : 				 type == ITEMGET(14,180)||
; 1102 : 				 type == ITEMGET(14,181)||
; 1103 : 				 type == ITEMGET(14,182)||
; 1104 : 				 type == ITEMGET(14,183)||
; 1105 : 				 type == ITEMGET(14,184)||
; 1106 : 				 type == ITEMGET(14,185)||
; 1107 : 				 type == ITEMGET(14,186)||
; 1108 : 				 type == ITEMGET(14,187)||
; 1109 : 				 type == ITEMGET(14,190)||
; 1110 : 				 type == ITEMGET(14,43) ||
; 1111 : 				 type == ITEMGET(14,44) )

  00162	81 ff 0f 18 00
	00		 cmp	 edi, 6159		; 0000180fH
  00168	0f 84 98 00 00
	00		 je	 $LN5@DarkLordHe
  0016e	81 ff 0d 1c 00
	00		 cmp	 edi, 7181		; 00001c0dH
  00174	0f 84 8c 00 00
	00		 je	 $LN5@DarkLordHe
  0017a	81 ff 0e 1c 00
	00		 cmp	 edi, 7182		; 00001c0eH
  00180	0f 84 80 00 00
	00		 je	 $LN5@DarkLordHe
  00186	81 ff 10 1c 00
	00		 cmp	 edi, 7184		; 00001c10H
  0018c	74 78		 je	 SHORT $LN5@DarkLordHe
  0018e	81 ff 16 1c 00
	00		 cmp	 edi, 7190		; 00001c16H
  00194	74 70		 je	 SHORT $LN5@DarkLordHe
  00196	81 ff 1f 1c 00
	00		 cmp	 edi, 7199		; 00001c1fH
  0019c	74 68		 je	 SHORT $LN5@DarkLordHe
  0019e	81 ff 29 1c 00
	00		 cmp	 edi, 7209		; 00001c29H
  001a4	74 60		 je	 SHORT $LN5@DarkLordHe
  001a6	81 ff 2a 1c 00
	00		 cmp	 edi, 7210		; 00001c2aH
  001ac	74 58		 je	 SHORT $LN5@DarkLordHe
  001ae	81 ff b4 1c 00
	00		 cmp	 edi, 7348		; 00001cb4H
  001b4	74 50		 je	 SHORT $LN5@DarkLordHe
  001b6	81 ff b5 1c 00
	00		 cmp	 edi, 7349		; 00001cb5H
  001bc	74 48		 je	 SHORT $LN5@DarkLordHe
  001be	81 ff b6 1c 00
	00		 cmp	 edi, 7350		; 00001cb6H
  001c4	74 40		 je	 SHORT $LN5@DarkLordHe
  001c6	81 ff b7 1c 00
	00		 cmp	 edi, 7351		; 00001cb7H
  001cc	74 38		 je	 SHORT $LN5@DarkLordHe
  001ce	81 ff b8 1c 00
	00		 cmp	 edi, 7352		; 00001cb8H
  001d4	74 30		 je	 SHORT $LN5@DarkLordHe
  001d6	81 ff b9 1c 00
	00		 cmp	 edi, 7353		; 00001cb9H
  001dc	74 28		 je	 SHORT $LN5@DarkLordHe
  001de	81 ff ba 1c 00
	00		 cmp	 edi, 7354		; 00001cbaH
  001e4	74 20		 je	 SHORT $LN5@DarkLordHe
  001e6	81 ff bb 1c 00
	00		 cmp	 edi, 7355		; 00001cbbH
  001ec	74 18		 je	 SHORT $LN5@DarkLordHe
  001ee	81 ff be 1c 00
	00		 cmp	 edi, 7358		; 00001cbeH
  001f4	74 10		 je	 SHORT $LN5@DarkLordHe
  001f6	81 ff 2b 1c 00
	00		 cmp	 edi, 7211		; 00001c2bH
  001fc	74 08		 je	 SHORT $LN5@DarkLordHe
  001fe	81 ff 2c 1c 00
	00		 cmp	 edi, 7212		; 00001c2cH
  00204	75 18		 jne	 SHORT $LN25@DarkLordHe
$LN5@DarkLordHe:

; 1112 : 			{
; 1113 : 				Option1 = 0;

  00206	33 c9		 xor	 ecx, ecx
  00208	33 db		 xor	 ebx, ebx

; 1114 : 				Option2 = 0;

  0020a	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 1115 : 				Option3 = 0;

  00210	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 1116 : 				level = 0;

  00216	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
  0021c	eb 02		 jmp	 SHORT $LN6@DarkLordHe
$LN25@DarkLordHe:
  0021e	33 c9		 xor	 ecx, ecx
$LN6@DarkLordHe:

; 1117 : 			}
; 1118 : 
; 1119 : 			if ( type == ITEMGET(12,30)	||
; 1120 : 				 type == ITEMGET(12,31)	||
; 1121 : 				 type == ITEMGET(12,136)||
; 1122 : 				 type == ITEMGET(12,137)||
; 1123 : 				 type == ITEMGET(12,138)||
; 1124 : 				 type == ITEMGET(12,139)||
; 1125 : 				 type == ITEMGET(12,140)||
; 1126 : 				 type == ITEMGET(12,141)||
; 1127 : 				 type == ITEMGET(12,142)||
; 1128 : 				 type == ITEMGET(12,143))

  00220	81 ff 1e 18 00
	00		 cmp	 edi, 6174		; 0000181eH
  00226	74 48		 je	 SHORT $LN3@DarkLordHe
  00228	81 ff 1f 18 00
	00		 cmp	 edi, 6175		; 0000181fH
  0022e	74 40		 je	 SHORT $LN3@DarkLordHe
  00230	81 ff 88 18 00
	00		 cmp	 edi, 6280		; 00001888H
  00236	74 38		 je	 SHORT $LN3@DarkLordHe
  00238	81 ff 89 18 00
	00		 cmp	 edi, 6281		; 00001889H
  0023e	74 30		 je	 SHORT $LN3@DarkLordHe
  00240	81 ff 8a 18 00
	00		 cmp	 edi, 6282		; 0000188aH
  00246	74 28		 je	 SHORT $LN3@DarkLordHe
  00248	81 ff 8b 18 00
	00		 cmp	 edi, 6283		; 0000188bH
  0024e	74 20		 je	 SHORT $LN3@DarkLordHe
  00250	81 ff 8c 18 00
	00		 cmp	 edi, 6284		; 0000188cH
  00256	74 18		 je	 SHORT $LN3@DarkLordHe
  00258	81 ff 8d 18 00
	00		 cmp	 edi, 6285		; 0000188dH
  0025e	74 10		 je	 SHORT $LN3@DarkLordHe
  00260	81 ff 8e 18 00
	00		 cmp	 edi, 6286		; 0000188eH
  00266	74 08		 je	 SHORT $LN3@DarkLordHe
  00268	81 ff 8f 18 00
	00		 cmp	 edi, 6287		; 0000188fH
  0026e	75 2b		 jne	 SHORT $LN4@DarkLordHe
$LN3@DarkLordHe:

; 1129 : 			{
; 1130 : 				Option1 = 0;
; 1131 : 				Option2 = 0;

  00270	89 8d 20 ff ff
	ff		 mov	 DWORD PTR _Option2$[ebp], ecx

; 1132 : 				Option3 = 0;

  00276	89 8d 24 ff ff
	ff		 mov	 DWORD PTR _Option3$[ebp], ecx

; 1133 : 				level = DarkLordHeartItemBag->GetLevel(DropItemNum);

  0027c	8b 8d 18 ff ff
	ff		 mov	 ecx, DWORD PTR _DropItemNum$[ebp]
  00282	51		 push	 ecx
  00283	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?DarkLordHeartItemBag@@3PAVCItemBag@@A ; DarkLordHeartItemBag
  00289	33 db		 xor	 ebx, ebx
  0028b	e8 00 00 00 00	 call	 ?GetLevel@CItemBag@@QAEEH@Z ; CItemBag::GetLevel
  00290	0f b6 d0	 movzx	 edx, al
  00293	89 95 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], edx
  00299	33 c9		 xor	 ecx, ecx
$LN4@DarkLordHe:

; 1134 : 			}
; 1135 : 
; 1136 : 			if ( type == ITEMGET(13,0) ||
; 1137 : 				 type == ITEMGET(13,1) ||
; 1138 : 				 type == ITEMGET(13,2) ||
; 1139 : 				 type == ITEMGET(13,8) ||
; 1140 : 				 type == ITEMGET(13,9) ||
; 1141 : 				 type == ITEMGET(13,12) ||
; 1142 : 				 type == ITEMGET(13,13) )

  0029b	81 ff 00 1a 00
	00		 cmp	 edi, 6656		; 00001a00H
  002a1	74 30		 je	 SHORT $LN1@DarkLordHe
  002a3	81 ff 01 1a 00
	00		 cmp	 edi, 6657		; 00001a01H
  002a9	74 28		 je	 SHORT $LN1@DarkLordHe
  002ab	81 ff 02 1a 00
	00		 cmp	 edi, 6658		; 00001a02H
  002b1	74 20		 je	 SHORT $LN1@DarkLordHe
  002b3	81 ff 08 1a 00
	00		 cmp	 edi, 6664		; 00001a08H
  002b9	74 18		 je	 SHORT $LN1@DarkLordHe
  002bb	81 ff 09 1a 00
	00		 cmp	 edi, 6665		; 00001a09H
  002c1	74 10		 je	 SHORT $LN1@DarkLordHe
  002c3	81 ff 0c 1a 00
	00		 cmp	 edi, 6668		; 00001a0cH
  002c9	74 08		 je	 SHORT $LN1@DarkLordHe
  002cb	81 ff 0d 1a 00
	00		 cmp	 edi, 6669		; 00001a0dH
  002d1	75 06		 jne	 SHORT $LN2@DarkLordHe
$LN1@DarkLordHe:

; 1143 : 			{
; 1144 : 				level = 0;

  002d3	89 8d 1c ff ff
	ff		 mov	 DWORD PTR _level$[ebp], ecx
$LN2@DarkLordHe:

; 1145 : 			}
; 1146 : 
; 1147 : 			ItemSerialCreateSend(lpObj->m_Index, (BYTE)lpObj->MapNumber, (BYTE)x, (BYTE)y, type, (BYTE)level, (BYTE)dur,
; 1148 : 				(BYTE)Option1, (BYTE)Option2, (BYTE)Option3, lpObj->m_Index, 0, 0);

  002d9	8b 06		 mov	 eax, DWORD PTR [esi]
  002db	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  002e1	51		 push	 ecx
  002e2	51		 push	 ecx
  002e3	50		 push	 eax
  002e4	52		 push	 edx
  002e5	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _Option2$[ebp]
  002eb	52		 push	 edx
  002ec	8b 95 10 ff ff
	ff		 mov	 edx, DWORD PTR _y$[ebp]
  002f2	53		 push	 ebx
  002f3	51		 push	 ecx
  002f4	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  002fa	51		 push	 ecx
  002fb	8b 8d 14 ff ff
	ff		 mov	 ecx, DWORD PTR _x$[ebp]
  00301	57		 push	 edi
  00302	52		 push	 edx
  00303	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  0030a	51		 push	 ecx
  0030b	52		 push	 edx
  0030c	50		 push	 eax
  0030d	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  00312	83 c4 34	 add	 esp, 52			; 00000034H

; 1149 : 
; 1150 : 			CItem EventItem;

  00315	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215529[ebp]
  0031b	e8 00 00 00 00	 call	 ??0CItem@@QAE@XZ	; CItem::CItem

; 1151 : 
; 1152 : 			EventItem.Convert(type, Option1, Option2, Option3, 0, 1, 0, NULL, 0xFF, 0, 3);

  00320	8b 85 24 ff ff
	ff		 mov	 eax, DWORD PTR _Option3$[ebp]
  00326	8b 8d 20 ff ff
	ff		 mov	 ecx, DWORD PTR _Option2$[ebp]
  0032c	6a 03		 push	 3
  0032e	6a 00		 push	 0
  00330	68 ff 00 00 00	 push	 255			; 000000ffH
  00335	6a 00		 push	 0
  00337	6a 00		 push	 0
  00339	6a 01		 push	 1
  0033b	6a 00		 push	 0
  0033d	50		 push	 eax
  0033e	51		 push	 ecx
  0033f	53		 push	 ebx
  00340	57		 push	 edi
  00341	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215529[ebp]
  00347	e8 00 00 00 00	 call	 ?Convert@CItem@@QAEXHEEEEEEPAEEEE@Z ; CItem::Convert

; 1153 : 
; 1154 : 			LogAddTD("[%s][%s][Lucky Box Item Drop][Darklord Heart] : (%d)(X:%d/Y:%d) Item:%s(%d) Level:%d Op1:%d Op2:%d Op3:%d",
; 1155 : 				lpObj->AccountID, lpObj->Name, lpObj->MapNumber, lpObj->X, lpObj->Y, EventItem.GetName(),
; 1156 : 				type, level, Option1, Option2, Option3);

  0034c	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR _Option3$[ebp]
  00352	8b 85 20 ff ff
	ff		 mov	 eax, DWORD PTR _Option2$[ebp]
  00358	8b 8d 1c ff ff
	ff		 mov	 ecx, DWORD PTR _level$[ebp]
  0035e	52		 push	 edx
  0035f	50		 push	 eax
  00360	53		 push	 ebx
  00361	51		 push	 ecx
  00362	57		 push	 edi
  00363	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _EventItem$215529[ebp]
  00369	e8 00 00 00 00	 call	 ?GetName@CItem@@QAEPADXZ ; CItem::GetName
  0036e	0f bf 96 46 01
	00 00		 movsx	 edx, WORD PTR [esi+326]
  00375	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  0037c	50		 push	 eax
  0037d	0f bf 86 44 01
	00 00		 movsx	 eax, WORD PTR [esi+324]
  00384	52		 push	 edx
  00385	50		 push	 eax
  00386	51		 push	 ecx
  00387	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0038a	52		 push	 edx
  0038b	83 c6 6c	 add	 esi, 108		; 0000006cH
  0038e	56		 push	 esi
  0038f	68 00 00 00 00	 push	 OFFSET ??_C@_0GK@MCOFOKEO@?$FL?$CFs?$FN?$FL?$CFs?$FN?$FLLucky?5Box?5Item?5Drop?$FN?$FLDa@
  00394	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0039a	83 c4 30	 add	 esp, 48			; 00000030H
  0039d	5f		 pop	 edi
  0039e	5b		 pop	 ebx
  0039f	5e		 pop	 esi

; 1165 : }

  003a0	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003a3	33 cd		 xor	 ecx, ebp
  003a5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  003aa	8b e5		 mov	 esp, ebp
  003ac	5d		 pop	 ebp
  003ad	c3		 ret	 0
$LN13@DarkLordHe:

; 1157 : 
; 1158 : 			return;
; 1159 : 		}
; 1160 : 	}
; 1161 : 
; 1162 : 	x = lpObj->X;
; 1163 : 	y = lpObj->Y;
; 1164 : 	MapC[lpObj->MapNumber].MoneyItemDrop(10000, x, y);

  003ae	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  003b5	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  003bc	50		 push	 eax
  003bd	51		 push	 ecx
  003be	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  003c5	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  003cb	68 10 27 00 00	 push	 10000			; 00002710H
  003d0	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  003d6	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
  003db	5f		 pop	 edi
  003dc	5b		 pop	 ebx
$LN17@DarkLordHe:

; 1165 : }

  003dd	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  003e0	33 cd		 xor	 ecx, ebp
  003e2	5e		 pop	 esi
  003e3	e8 00 00 00 00	 call	 @__security_check_cookie@4
  003e8	8b e5		 mov	 esp, ebp
  003ea	5d		 pop	 ebp
  003eb	c3		 ret	 0
?DarkLordHeartItemBoxOpen@@YAXPAUOBJECTSTRUCT@@@Z ENDP	; DarkLordHeartItemBoxOpen
_TEXT	ENDS
END
