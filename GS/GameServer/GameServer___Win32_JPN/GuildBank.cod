; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\GuildBank.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?g_GuildBank@@3VCGuildBank@@A			; g_GuildBank
_BSS	SEGMENT
?g_GuildBank@@3VCGuildBank@@A DB 010H DUP (?)		; g_GuildBank
_BSS	ENDS
_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_C@_0L@GBNGFBCI@GuildBankY?$AA@		; `string'
PUBLIC	??_C@_0L@HIMNGAGJ@GuildBankX?$AA@		; `string'
PUBLIC	??_C@_0N@PIGALGDH@GuildBankMap?$AA@		; `string'
PUBLIC	??_C@_06CNKIADGI@ZtTeam?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	?Read@CGuildBank@@QAEXPAD@Z			; CGuildBank::Read
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
;	COMDAT ??_C@_0L@GBNGFBCI@GuildBankY?$AA@
; File e:\work\tranet_version\gs\gameserver\guildbank.cpp
CONST	SEGMENT
??_C@_0L@GBNGFBCI@GuildBankY?$AA@ DB 'GuildBankY', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@HIMNGAGJ@GuildBankX?$AA@
CONST	SEGMENT
??_C@_0L@HIMNGAGJ@GuildBankX?$AA@ DB 'GuildBankX', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@PIGALGDH@GuildBankMap?$AA@
CONST	SEGMENT
??_C@_0N@PIGALGDH@GuildBankMap?$AA@ DB 'GuildBankMap', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_06CNKIADGI@ZtTeam?$AA@
CONST	SEGMENT
??_C@_06CNKIADGI@ZtTeam?$AA@ DB 'ZtTeam', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Read@CGuildBank@@QAEXPAD@Z
_TEXT	SEGMENT
_filename$ = 8						; size = 4
?Read@CGuildBank@@QAEXPAD@Z PROC			; CGuildBank::Read, COMDAT
; _this$ = ecx

; 44   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 45   : 	this->m_iEnable = GetPrivateProfileInt("ZtTeam", "Enable", 0, filename);

  00004	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR __imp__GetPrivateProfileIntA@16
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8b 7d 08	 mov	 edi, DWORD PTR _filename$[ebp]
  0000f	57		 push	 edi
  00010	6a 00		 push	 0
  00012	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  00017	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0001c	8b f1		 mov	 esi, ecx
  0001e	ff d3		 call	 ebx

; 46   : 	this->m_iGuildBankMap = GetPrivateProfileInt("ZtTeam", "GuildBankMap", 0, filename);

  00020	57		 push	 edi
  00021	6a 00		 push	 0
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0N@PIGALGDH@GuildBankMap?$AA@
  00028	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0002d	89 06		 mov	 DWORD PTR [esi], eax
  0002f	ff d3		 call	 ebx

; 47   : 	this->m_iGuildBankX = GetPrivateProfileInt("ZtTeam", "GuildBankX", 0, filename);

  00031	57		 push	 edi
  00032	6a 00		 push	 0
  00034	68 00 00 00 00	 push	 OFFSET ??_C@_0L@HIMNGAGJ@GuildBankX?$AA@
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0003e	89 46 04	 mov	 DWORD PTR [esi+4], eax
  00041	ff d3		 call	 ebx

; 48   : 	this->m_iGuildBankY = GetPrivateProfileInt("ZtTeam", "GuildBankY", 0, filename);

  00043	57		 push	 edi
  00044	6a 00		 push	 0
  00046	68 00 00 00 00	 push	 OFFSET ??_C@_0L@GBNGFBCI@GuildBankY?$AA@
  0004b	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00050	89 46 08	 mov	 DWORD PTR [esi+8], eax
  00053	ff d3		 call	 ebx
  00055	5f		 pop	 edi
  00056	89 46 0c	 mov	 DWORD PTR [esi+12], eax
  00059	5e		 pop	 esi
  0005a	5b		 pop	 ebx

; 49   : }

  0005b	5d		 pop	 ebp
  0005c	c2 04 00	 ret	 4
?Read@CGuildBank@@QAEXPAD@Z ENDP			; CGuildBank::Read
_TEXT	ENDS
PUBLIC	??_C@_0DF@JAGDICPG@You?5need?5to?5be?5in?5a?5Guild?5before@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GDDelGuildWarehouseList@CGuildBank@@QAEXH@Z	; CGuildBank::GDDelGuildWarehouseList
EXTRN	?Send@DBSockMng@@QAEHPADH@Z:PROC		; DBSockMng::Send
EXTRN	?cDBSMng@@3VDBSockMng@@A:BYTE			; cDBSMng
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0DF@JAGDICPG@You?5need?5to?5be?5in?5a?5Guild?5before@
CONST	SEGMENT
??_C@_0DF@JAGDICPG@You?5need?5to?5be?5in?5a?5Guild?5before@ DB 'You need '
	DB	'to be in a Guild before Del GuildWarehouse!', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?GDDelGuildWarehouseList@CGuildBank@@QAEXH@Z
_TEXT	SEGMENT
tv251 = -40						; size = 4
_pMsg$ = -36						; size = 32
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?GDDelGuildWarehouseList@CGuildBank@@QAEXH@Z PROC	; CGuildBank::GDDelGuildWarehouseList, COMDAT
; _this$ = ecx

; 113  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 28	 sub	 esp, 40			; 00000028H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	57		 push	 edi
  00011	8b 7d 08	 mov	 edi, DWORD PTR _aIndex$[ebp]

; 114  : 	if(OBJMAX_RANGE(aIndex) == 0)

  00014	85 ff		 test	 edi, edi
  00016	0f 88 03 01 00
	00		 js	 $LN5@GDDelGuild
  0001c	33 c0		 xor	 eax, eax
  0001e	81 ff 97 3a 00
	00		 cmp	 edi, 14999		; 00003a97H
  00024	0f 9e c0	 setle	 al
  00027	85 c0		 test	 eax, eax
  00029	0f 84 f0 00 00
	00		 je	 $LN5@GDDelGuild

; 115  : 	{
; 116  : 		return;
; 117  : 	}
; 118  : 
; 119  : 	if(strlen(gObj[aIndex].AccountID) < 1)

  0002f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00034	53		 push	 ebx
  00035	56		 push	 esi
  00036	8b f7		 mov	 esi, edi
  00038	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0003e	8d 5c 06 6c	 lea	 ebx, DWORD PTR [esi+eax+108]
  00042	8b c3		 mov	 eax, ebx
  00044	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
$LL9@GDDelGuild:
  00047	8a 08		 mov	 cl, BYTE PTR [eax]
  00049	40		 inc	 eax
  0004a	84 c9		 test	 cl, cl
  0004c	75 f9		 jne	 SHORT $LL9@GDDelGuild
  0004e	2b c2		 sub	 eax, edx
  00050	83 f8 01	 cmp	 eax, 1
  00053	0f 82 c4 00 00
	00		 jb	 $LN11@GDDelGuild

; 120  : 	{
; 121  : 		return;
; 122  : 	}
; 123  : 
; 124  : 	if(strlen(gObj[aIndex].GuildName) < 1)

  00059	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005f	8d 8c 0e 3c 04
	00 00		 lea	 ecx, DWORD PTR [esi+ecx+1084]
  00066	8b c1		 mov	 eax, ecx
  00068	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
  0006b	89 55 d8	 mov	 DWORD PTR tv251[ebp], edx
  0006e	8b ff		 npad	 2
$LL10@GDDelGuild:
  00070	8a 10		 mov	 dl, BYTE PTR [eax]
  00072	40		 inc	 eax
  00073	84 d2		 test	 dl, dl
  00075	75 f9		 jne	 SHORT $LL10@GDDelGuild
  00077	2b 45 d8	 sub	 eax, DWORD PTR tv251[ebp]
  0007a	83 f8 01	 cmp	 eax, 1

; 125  : 	{
; 126  : 		GCServerMsgStringSend("You need to be in a Guild before Del GuildWarehouse!",aIndex, 0x01);
; 127  : 		gObj[aIndex].m_ReqWarehouseOpen = false;
; 128  : 		gObj[aIndex].m_IfState.use = 0;
; 129  : 		gObj[aIndex].m_IfState.state = 0;
; 130  : 		return;

  0007d	72 10		 jb	 SHORT $LN13@GDDelGuild

; 131  : 	}
; 132  : 
; 133  : 	if(gObj[aIndex].GuildNumber <= 0)

  0007f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00085	83 bc 16 34 04
	00 00 00	 cmp	 DWORD PTR [esi+edx+1076], 0
  0008d	7f 4a		 jg	 SHORT $LN1@GDDelGuild
$LN13@GDDelGuild:

; 134  : 	{
; 135  : 		GCServerMsgStringSend("You need to be in a Guild before Del GuildWarehouse!",aIndex, 0x01);

  0008f	6a 01		 push	 1
  00091	57		 push	 edi
  00092	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@JAGDICPG@You?5need?5to?5be?5in?5a?5Guild?5before@
  00097	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend

; 136  : 		gObj[aIndex].m_ReqWarehouseOpen = false;

  0009c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000a1	c6 84 06 1c 11
	00 00 00	 mov	 BYTE PTR [esi+eax+4380], 0

; 137  : 		gObj[aIndex].m_IfState.use = 0;

  000a9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000ae	83 a4 06 1c 0e
	00 00 fc	 and	 DWORD PTR [esi+eax+3612], -4 ; fffffffcH

; 138  : 		gObj[aIndex].m_IfState.state = 0;

  000b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000bb	83 c4 0c	 add	 esp, 12			; 0000000cH
  000be	83 a4 06 1c 0e
	00 00 c3	 and	 DWORD PTR [esi+eax+3612], -61 ; ffffffc3H
  000c6	5e		 pop	 esi
  000c7	5b		 pop	 ebx
  000c8	5f		 pop	 edi

; 153  : }

  000c9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000cc	33 cd		 xor	 ecx, ebp
  000ce	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000d3	8b e5		 mov	 esp, ebp
  000d5	5d		 pop	 ebp
  000d6	c2 04 00	 ret	 4
$LN1@GDDelGuild:

; 139  : 		return;
; 140  : 	}
; 141  : 
; 142  : 	SDHP_GETGUILDWAREHOUSEDB pMsg;
; 143  : 
; 144  : 	pMsg.h.c = 0xC1;

  000d9	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H

; 145  : 	pMsg.h.headcode = Protocol_GSSend_DelGuildWarehouseList;

  000dd	66 c7 45 dd 20
	de		 mov	 WORD PTR _pMsg$[ebp+1], 56864 ; 0000de20H

; 146  : 	pMsg.h.size = sizeof(SDHP_GETGUILDWAREHOUSEDB);
; 147  : 	pMsg.aIndex = aIndex;

  000e3	66 89 7d f4	 mov	 WORD PTR _pMsg$[ebp+24], di

; 148  : 
; 149  : 	memcpy(pMsg.G_Name, gObj[aIndex].GuildName, sizeof(pMsg.G_Name));

  000e7	8b 11		 mov	 edx, DWORD PTR [ecx]
  000e9	89 55 df	 mov	 DWORD PTR _pMsg$[ebp+3], edx
  000ec	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]
  000ef	89 45 e3	 mov	 DWORD PTR _pMsg$[ebp+7], eax
  000f2	0f b7 49 08	 movzx	 ecx, WORD PTR [ecx+8]
  000f6	66 89 4d e7	 mov	 WORD PTR _pMsg$[ebp+11], cx

; 150  : 	memcpy(pMsg.AccountID, gObj[aIndex].AccountID, sizeof(pMsg.AccountID));

  000fa	8b 13		 mov	 edx, DWORD PTR [ebx]
  000fc	89 55 e9	 mov	 DWORD PTR _pMsg$[ebp+13], edx
  000ff	8b 43 04	 mov	 eax, DWORD PTR [ebx+4]
  00102	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+17], eax
  00105	0f b7 4b 08	 movzx	 ecx, WORD PTR [ebx+8]

; 151  : 
; 152  : 	cDBSMng.Send((char*)&pMsg, pMsg.h.size);

  00109	6a 20		 push	 32			; 00000020H
  0010b	8d 55 dc	 lea	 edx, DWORD PTR _pMsg$[ebp]
  0010e	66 89 4d f1	 mov	 WORD PTR _pMsg$[ebp+21], cx
  00112	52		 push	 edx
  00113	b9 00 00 00 00	 mov	 ecx, OFFSET ?cDBSMng@@3VDBSockMng@@A ; cDBSMng
  00118	e8 00 00 00 00	 call	 ?Send@DBSockMng@@QAEHPADH@Z ; DBSockMng::Send
$LN11@GDDelGuild:
  0011d	5e		 pop	 esi
  0011e	5b		 pop	 ebx
$LN5@GDDelGuild:

; 153  : }

  0011f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00122	33 cd		 xor	 ecx, ebp
  00124	5f		 pop	 edi
  00125	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0012a	8b e5		 mov	 esp, ebp
  0012c	5d		 pop	 ebp
  0012d	c2 04 00	 ret	 4
?GDDelGuildWarehouseList@CGuildBank@@QAEXH@Z ENDP	; CGuildBank::GDDelGuildWarehouseList
_TEXT	ENDS
PUBLIC	??_C@_0CI@MIGOHDHJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5N@ ; `string'
PUBLIC	??_C@_0DB@KEHKILBL@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5W@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GDSetGuildWarehouseList@CGuildBank@@QAEXH@Z	; CGuildBank::GDSetGuildWarehouseList
EXTRN	?gObjWarehouseTextSave@@YAXPAUOBJECTSTRUCT@@@Z:PROC ; gObjWarehouseTextSave
EXTRN	?gObjSavePetItemInfo@@YAXHH@Z:PROC		; gObjSavePetItemInfo
EXTRN	?ItemByteConvert16@@YAXPAEQAVCItem@@H@Z:PROC	; ItemByteConvert16
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	_memset:PROC
;	COMDAT ??_C@_0CI@MIGOHDHJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5N@
CONST	SEGMENT
??_C@_0CI@MIGOHDHJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5N@ DB '['
	DB	'%s][%s] WareHouse Save Fail : Not Open', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@KEHKILBL@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5W@
CONST	SEGMENT
??_C@_0DB@KEHKILBL@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5W@ DB '['
	DB	'%s][%s] WareHouse Save Fail : WarehouseSave = 0', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?GDSetGuildWarehouseList@CGuildBank@@QAEXH@Z
_TEXT	SEGMENT
_pMsg$ = -3884						; size = 3880
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?GDSetGuildWarehouseList@CGuildBank@@QAEXH@Z PROC	; CGuildBank::GDSetGuildWarehouseList, COMDAT
; _this$ = ecx

; 156  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 2c 0f 00
	00		 sub	 esp, 3884		; 00000f2cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	8b 5d 08	 mov	 ebx, DWORD PTR _aIndex$[ebp]

; 157  : 	if(OBJMAX_RANGE(aIndex) == 0)

  00017	85 db		 test	 ebx, ebx
  00019	0f 88 da 01 00
	00		 js	 $LN7@GDSetGuild
  0001f	33 c0		 xor	 eax, eax
  00021	81 fb 97 3a 00
	00		 cmp	 ebx, 14999		; 00003a97H
  00027	0f 9e c0	 setle	 al
  0002a	85 c0		 test	 eax, eax
  0002c	0f 84 c7 01 00
	00		 je	 $LN7@GDSetGuild

; 158  : 	{
; 159  : 		return;
; 160  : 	}
; 161  : 
; 162  : 	SDHP_GETGUILDWAREHOUSEDB_SAVE pMsg;
; 163  : 
; 164  : 	if(strlen(gObj[aIndex].AccountID) < 1)

  00032	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00038	56		 push	 esi
  00039	8b f3		 mov	 esi, ebx
  0003b	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00041	8d 44 0e 6c	 lea	 eax, DWORD PTR [esi+ecx+108]
  00045	57		 push	 edi
  00046	8d 78 01	 lea	 edi, DWORD PTR [eax+1]
  00049	8d a4 24 00 00
	00 00		 npad	 7
$LL11@GDSetGuild:
  00050	8a 10		 mov	 dl, BYTE PTR [eax]
  00052	40		 inc	 eax
  00053	84 d2		 test	 dl, dl
  00055	75 f9		 jne	 SHORT $LL11@GDSetGuild
  00057	2b c7		 sub	 eax, edi
  00059	83 f8 01	 cmp	 eax, 1
  0005c	0f 82 95 01 00
	00		 jb	 $LN13@GDSetGuild

; 165  : 	{
; 166  : 		return;
; 167  : 	}
; 168  : 
; 169  : 	if(strlen(gObj[aIndex].GuildName) < 1)	///NoGuild

  00062	8d 84 0e 3c 04
	00 00		 lea	 eax, DWORD PTR [esi+ecx+1084]
  00069	8d 78 01	 lea	 edi, DWORD PTR [eax+1]
  0006c	8d 64 24 00	 npad	 4
$LL12@GDSetGuild:
  00070	8a 10		 mov	 dl, BYTE PTR [eax]
  00072	40		 inc	 eax
  00073	84 d2		 test	 dl, dl
  00075	75 f9		 jne	 SHORT $LL12@GDSetGuild
  00077	2b c7		 sub	 eax, edi
  00079	83 f8 01	 cmp	 eax, 1

; 170  : 	{
; 171  : 		gObj[aIndex].m_ReqWarehouseOpen = false;
; 172  : 		gObj[aIndex].m_IfState.use = 0;
; 173  : 		gObj[aIndex].m_IfState.state = 0;
; 174  : 		return;

  0007c	72 0a		 jb	 SHORT $LN16@GDSetGuild

; 175  : 	}
; 176  : 
; 177  : 	if(gObj[aIndex].GuildNumber <= 0)

  0007e	83 bc 0e 34 04
	00 00 00	 cmp	 DWORD PTR [esi+ecx+1076], 0
  00086	7f 35		 jg	 SHORT $LN3@GDSetGuild
$LN16@GDSetGuild:

; 178  : 	{
; 179  : 		gObj[aIndex].m_ReqWarehouseOpen = false;

  00088	c6 84 0e 1c 11
	00 00 00	 mov	 BYTE PTR [esi+ecx+4380], 0

; 180  : 		gObj[aIndex].m_IfState.use = 0;

  00090	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00095	83 a4 06 1c 0e
	00 00 fc	 and	 DWORD PTR [esi+eax+3612], -4 ; fffffffcH

; 181  : 		gObj[aIndex].m_IfState.state = 0;

  0009d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000a2	83 a4 06 1c 0e
	00 00 c3	 and	 DWORD PTR [esi+eax+3612], -61 ; ffffffc3H
  000aa	5f		 pop	 edi
  000ab	5e		 pop	 esi
  000ac	5b		 pop	 ebx

; 224  : }

  000ad	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b0	33 cd		 xor	 ecx, ebp
  000b2	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b7	8b e5		 mov	 esp, ebp
  000b9	5d		 pop	 ebp
  000ba	c2 04 00	 ret	 4
$LN3@GDSetGuild:

; 182  : 		return;
; 183  : 	}
; 184  : 
; 185  : 	gObj[aIndex].lpGuild->WareOpen = 0;

  000bd	8b 84 0e 38 04
	00 00		 mov	 eax, DWORD PTR [esi+ecx+1080]
  000c4	c7 80 44 07 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+1860], 0

; 186  : 
; 187  : 	if(gObj[aIndex].WarehouseSave == 0)

  000ce	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000d4	83 bc 3e 70 0e
	00 00 00	 cmp	 DWORD PTR [esi+edi+3696], 0
  000dc	75 1a		 jne	 SHORT $LN2@GDSetGuild

; 188  : 	{
; 189  : 		LogAddTD("[%s][%s] WareHouse Save Fail : WarehouseSave = 0", gObj[aIndex].AccountID, gObj[aIndex].Name);

  000de	8d 4c 3e 77	 lea	 ecx, DWORD PTR [esi+edi+119]
  000e2	51		 push	 ecx
  000e3	8d 54 3e 6c	 lea	 edx, DWORD PTR [esi+edi+108]
  000e7	52		 push	 edx
  000e8	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@KEHKILBL@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5W@
  000ed	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 190  : 		return;

  000f3	e9 fc 00 00 00	 jmp	 $LN15@GDSetGuild
$LN2@GDSetGuild:

; 191  : 	}
; 192  : 	
; 193  : 	if(gObj[aIndex].LoadWareHouseInfo == false)

  000f8	80 bc 3e 54 10
	00 00 00	 cmp	 BYTE PTR [esi+edi+4180], 0
  00100	75 1a		 jne	 SHORT $LN1@GDSetGuild

; 194  : 	{
; 195  : 		LogAddTD("[%s][%s] WareHouse Save Fail : Not Open", gObj[aIndex].AccountID, gObj[aIndex].Name);

  00102	8d 44 3e 77	 lea	 eax, DWORD PTR [esi+edi+119]
  00106	50		 push	 eax
  00107	8d 4c 3e 6c	 lea	 ecx, DWORD PTR [esi+edi+108]
  0010b	51		 push	 ecx
  0010c	68 00 00 00 00	 push	 OFFSET ??_C@_0CI@MIGOHDHJ@?$FL?$CFs?$FN?$FL?$CFs?$FN?5WareHouse?5Save?5Fail?5?3?5N@
  00111	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 196  : 		return;

  00117	e9 d8 00 00 00	 jmp	 $LN15@GDSetGuild
$LN1@GDSetGuild:

; 197  : 	}
; 198  : 
; 199  : 	//gObj[aIndex].m_bGuildBank = false;
; 200  : 
; 201  : 	//gObj[aIndex].lpGuild->WareOpen = 0;
; 202  : 
; 203  : 	memcpy(pMsg.AccountID, gObj[aIndex].AccountID, sizeof(pMsg.AccountID));

  0011c	8b 54 3e 6c	 mov	 edx, DWORD PTR [esi+edi+108]
  00120	89 95 e2 f0 ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+14], edx
  00126	8b 44 3e 70	 mov	 eax, DWORD PTR [esi+edi+112]
  0012a	89 85 e6 f0 ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+18], eax
  00130	0f b7 4c 3e 74	 movzx	 ecx, WORD PTR [esi+edi+116]
  00135	66 89 8d ea f0
	ff ff		 mov	 WORD PTR _pMsg$[ebp+22], cx

; 204  : 	//memcpy(pMsg.G_Name, gObj[aIndex].GuildName, sizeof(pMsg.G_Name));
; 205  : 	memcpy(pMsg.G_Name, gObj[aIndex].lpGuild->Name, sizeof(pMsg.G_Name));

  0013c	8b 84 3e 38 04
	00 00		 mov	 eax, DWORD PTR [esi+edi+1080]
  00143	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00146	89 95 d8 f0 ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+4], edx
  0014c	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0014f	89 8d dc f0 ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  00155	66 8b 50 0c	 mov	 dx, WORD PTR [eax+12]
  00159	66 89 95 e0 f0
	ff ff		 mov	 WORD PTR _pMsg$[ebp+12], dx

; 206  : 	
; 207  : 	pMsg.aIndex = aIndex;

  00160	66 89 9d ec f0
	ff ff		 mov	 WORD PTR _pMsg$[ebp+24], bx

; 208  : 	pMsg.h.c = 0xC2;

  00167	c7 85 d4 f0 ff
	ff c2 0f 28 cb	 mov	 DWORD PTR _pMsg$[ebp], -886566974 ; cb280fc2H

; 209  : 	pMsg.h.headcode = Protocol_GSSend_SetGuildWarehouseList;
; 210  : 	pMsg.h.sizeH = HIBYTE(sizeof(pMsg));
; 211  : 	pMsg.h.sizeL = LOBYTE(sizeof(pMsg));
; 212  : 	pMsg.Money = gObj[aIndex].WarehouseMoney;

  00171	8b 84 3e 6c 0e
	00 00		 mov	 eax, DWORD PTR [esi+edi+3692]
  00178	89 85 f0 f0 ff
	ff		 mov	 DWORD PTR _pMsg$[ebp+28], eax

; 213  : 	pMsg.pw = gObj[aIndex].WarehousePW;

  0017e	0f b7 8c 3e 66
	0e 00 00	 movzx	 ecx, WORD PTR [esi+edi+3686]

; 214  : 	pMsg.DbVersion = 3;
; 215  : 	pMsg.Number	= gObj[aIndex].WarehouseNumber;
; 216  : 
; 217  : 	memset(pMsg.dbItems,0xFF,sizeof(pMsg.dbItems));

  00186	68 00 0f 00 00	 push	 3840			; 00000f00H
  0018b	66 89 4d f6	 mov	 WORD PTR _pMsg$[ebp+3874], cx
  0018f	c6 45 f4 03	 mov	 BYTE PTR _pMsg$[ebp+3872], 3
  00193	8b 94 3e e8 2a
	00 00		 mov	 edx, DWORD PTR [esi+edi+10984]
  0019a	8d 85 f4 f0 ff
	ff		 lea	 eax, DWORD PTR _pMsg$[ebp+32]
  001a0	68 ff 00 00 00	 push	 255			; 000000ffH
  001a5	50		 push	 eax
  001a6	89 55 f8	 mov	 DWORD PTR _pMsg$[ebp+3876], edx
  001a9	e8 00 00 00 00	 call	 _memset

; 218  : 	ItemByteConvert16(pMsg.dbItems, gObj[aIndex].pWarehouse, WAREHOUSE_SIZE);

  001ae	8b 8c 3e 5c 0e
	00 00		 mov	 ecx, DWORD PTR [esi+edi+3676]
  001b5	68 f0 00 00 00	 push	 240			; 000000f0H
  001ba	51		 push	 ecx
  001bb	8d 95 f4 f0 ff
	ff		 lea	 edx, DWORD PTR _pMsg$[ebp+32]
  001c1	52		 push	 edx
  001c2	e8 00 00 00 00	 call	 ?ItemByteConvert16@@YAXPAEQAVCItem@@H@Z ; ItemByteConvert16
  001c7	83 c4 18	 add	 esp, 24			; 00000018H

; 219  : 
; 220  : 	cDBSMng.Send((PCHAR)&pMsg, sizeof(pMsg));

  001ca	68 28 0f 00 00	 push	 3880			; 00000f28H
  001cf	8d 85 d4 f0 ff
	ff		 lea	 eax, DWORD PTR _pMsg$[ebp]
  001d5	50		 push	 eax
  001d6	b9 00 00 00 00	 mov	 ecx, OFFSET ?cDBSMng@@3VDBSockMng@@A ; cDBSMng
  001db	e8 00 00 00 00	 call	 ?Send@DBSockMng@@QAEHPADH@Z ; DBSockMng::Send

; 221  : 
; 222  : 	gObjSavePetItemInfo(aIndex, 1);

  001e0	6a 01		 push	 1
  001e2	53		 push	 ebx
  001e3	e8 00 00 00 00	 call	 ?gObjSavePetItemInfo@@YAXHH@Z ; gObjSavePetItemInfo

; 223  : 	gObjWarehouseTextSave(&gObj[aIndex]);

  001e8	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001ee	56		 push	 esi
  001ef	e8 00 00 00 00	 call	 ?gObjWarehouseTextSave@@YAXPAUOBJECTSTRUCT@@@Z ; gObjWarehouseTextSave
$LN15@GDSetGuild:
  001f4	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN13@GDSetGuild:
  001f7	5f		 pop	 edi
  001f8	5e		 pop	 esi
$LN7@GDSetGuild:

; 224  : }

  001f9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001fc	33 cd		 xor	 ecx, ebp
  001fe	5b		 pop	 ebx
  001ff	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00204	8b e5		 mov	 esp, ebp
  00206	5d		 pop	 ebp
  00207	c2 04 00	 ret	 4
?GDSetGuildWarehouseList@CGuildBank@@QAEXH@Z ENDP	; CGuildBank::GDSetGuildWarehouseList
_TEXT	ENDS
PUBLIC	?WarehousePassword@CGuildBank@@QAE_NH@Z		; CGuildBank::WarehousePassword
; Function compile flags: /Ogtp
;	COMDAT ?WarehousePassword@CGuildBank@@QAE_NH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?WarehousePassword@CGuildBank@@QAE_NH@Z PROC		; CGuildBank::WarehousePassword, COMDAT
; _this$ = ecx

; 227  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 228  : 	if(!this->m_iEnable)

  00003	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00006	75 06		 jne	 SHORT $LN5@WarehouseP
$LN12@WarehouseP:

; 229  : 	{
; 230  : 		return true;

  00008	b0 01		 mov	 al, 1

; 249  : 	{
; 250  : 		return true;
; 251  : 	}
; 252  : 
; 253  : 	return false;
; 254  : }

  0000a	5d		 pop	 ebp
  0000b	c2 04 00	 ret	 4
$LN5@WarehouseP:

; 231  : 	}
; 232  : 
; 233  : 	if(OBJMAX_RANGE(aIndex) == 0)

  0000e	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00011	85 c0		 test	 eax, eax
  00013	78 0e		 js	 SHORT $LN10@WarehouseP
  00015	33 c9		 xor	 ecx, ecx
  00017	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  0001c	0f 9e c1	 setle	 cl
  0001f	85 c9		 test	 ecx, ecx
  00021	75 06		 jne	 SHORT $LN4@WarehouseP
$LN10@WarehouseP:

; 234  : 	{
; 235  : 		return false;

  00023	32 c0		 xor	 al, al

; 249  : 	{
; 250  : 		return true;
; 251  : 	}
; 252  : 
; 253  : 	return false;
; 254  : }

  00025	5d		 pop	 ebp
  00026	c2 04 00	 ret	 4
$LN4@WarehouseP:

; 236  : 	}
; 237  : 
; 238  : 	if(strlen(gObj[aIndex].GuildName) < 1)	///NoGuild

  00029	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002f	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00035	8d 14 08	 lea	 edx, DWORD PTR [eax+ecx]
  00038	8d 82 3c 04 00
	00		 lea	 eax, DWORD PTR [edx+1084]
  0003e	56		 push	 esi
  0003f	8d 70 01	 lea	 esi, DWORD PTR [eax+1]
$LL11@WarehouseP:
  00042	8a 08		 mov	 cl, BYTE PTR [eax]
  00044	40		 inc	 eax
  00045	84 c9		 test	 cl, cl
  00047	75 f9		 jne	 SHORT $LL11@WarehouseP
  00049	2b c6		 sub	 eax, esi
  0004b	5e		 pop	 esi
  0004c	83 f8 01	 cmp	 eax, 1

; 239  : 	{
; 240  : 		return true;

  0004f	72 b7		 jb	 SHORT $LN12@WarehouseP

; 241  : 	}
; 242  : 
; 243  : 	if(gObj[aIndex].GuildNumber <= 0)

  00051	83 ba 34 04 00
	00 00		 cmp	 DWORD PTR [edx+1076], 0

; 244  : 	{
; 245  : 		return true;

  00058	7e ae		 jle	 SHORT $LN12@WarehouseP

; 246  : 	}
; 247  : 
; 248  : 	if(gObj[aIndex].GuildStatus == GUILD_MASTER)

  0005a	81 ba 48 04 00
	00 80 00 00 00	 cmp	 DWORD PTR [edx+1096], 128 ; 00000080H
  00064	0f 94 c0	 sete	 al

; 249  : 	{
; 250  : 		return true;
; 251  : 	}
; 252  : 
; 253  : 	return false;
; 254  : }

  00067	5d		 pop	 ebp
  00068	c2 04 00	 ret	 4
?WarehousePassword@CGuildBank@@QAE_NH@Z ENDP		; CGuildBank::WarehousePassword
_TEXT	ENDS
PUBLIC	?ClearWarehouse@CGuildBank@@QAEXH@Z		; CGuildBank::ClearWarehouse
EXTRN	?Clear@CItem@@QAEXXZ:PROC			; CItem::Clear
; Function compile flags: /Ogtp
;	COMDAT ?ClearWarehouse@CGuildBank@@QAEXH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?ClearWarehouse@CGuildBank@@QAEXH@Z PROC		; CGuildBank::ClearWarehouse, COMDAT
; _this$ = ecx

; 337  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 338  : 	if(OBJMAX_RANGE(aIndex) == 0)

  00003	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00006	56		 push	 esi
  00007	33 f6		 xor	 esi, esi
  00009	3b c6		 cmp	 eax, esi
  0000b	7c 4f		 jl	 SHORT $LN1@ClearWareh
  0000d	33 c9		 xor	 ecx, ecx
  0000f	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  00014	0f 9e c1	 setle	 cl
  00017	3b ce		 cmp	 ecx, esi
  00019	74 41		 je	 SHORT $LN1@ClearWareh

; 339  : 	{
; 340  : 		return;
; 341  : 	}
; 342  : 	LPOBJ lpObj = &gObj[aIndex];

  0001b	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00021	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00027	57		 push	 edi
  00028	8b f8		 mov	 edi, eax

; 343  : 	/* Guild Bank Fix */
; 344  : 
; 345  : 	lpObj->WarehouseMoney = 0;
; 346  : 
; 347  : 	if(lpObj->Type == OBJ_USER)

  0002a	66 83 7f 68 01	 cmp	 WORD PTR [edi+104], 1
  0002f	89 b7 6c 0e 00
	00		 mov	 DWORD PTR [edi+3692], esi
  00035	75 24		 jne	 SHORT $LN12@ClearWareh
  00037	eb 07 8d a4 24
	00 00 00 00	 npad	 9
$LL3@ClearWareh:

; 348  : 	{
; 349  : 		for(int i=0;i<WAREHOUSE_SIZE;i++)
; 350  : 		{
; 351  : 			lpObj->pWarehouse[i].Clear();

  00040	8b 8f 5c 0e 00
	00		 mov	 ecx, DWORD PTR [edi+3676]
  00046	03 ce		 add	 ecx, esi
  00048	e8 00 00 00 00	 call	 ?Clear@CItem@@QAEXXZ	; CItem::Clear
  0004d	81 c6 d4 00 00
	00		 add	 esi, 212		; 000000d4H
  00053	81 fe c0 c6 00
	00		 cmp	 esi, 50880		; 0000c6c0H
  00059	7c e5		 jl	 SHORT $LL3@ClearWareh
$LN12@ClearWareh:
  0005b	5f		 pop	 edi
$LN1@ClearWareh:
  0005c	5e		 pop	 esi

; 352  : 		}
; 353  : 	}
; 354  : 
; 355  : }

  0005d	5d		 pop	 ebp
  0005e	c2 04 00	 ret	 4
?ClearWarehouse@CGuildBank@@QAEXH@Z ENDP		; CGuildBank::ClearWarehouse
_TEXT	ENDS
PUBLIC	??_C@_0BF@IJEHMCGD@ZtData?2GuildBank?4ini?$AA@	; `string'
PUBLIC	?Load@CGuildBank@@QAEXXZ			; CGuildBank::Load
EXTRN	?GetNewPath@CDirPath@@QAEPADPAD@Z:PROC		; CDirPath::GetNewPath
EXTRN	?gDirPath@@3VCDirPath@@A:BYTE			; gDirPath
EXTRN	?GetCustom@CZtLicense@@QAEHXZ:PROC		; CZtLicense::GetCustom
EXTRN	?CheckUser@CZtLicense@@QAE_NH@Z:PROC		; CZtLicense::CheckUser
EXTRN	?g_ZtLicense@@3VCZtLicense@@A:BYTE		; g_ZtLicense
;	COMDAT ??_C@_0BF@IJEHMCGD@ZtData?2GuildBank?4ini?$AA@
CONST	SEGMENT
??_C@_0BF@IJEHMCGD@ZtData?2GuildBank?4ini?$AA@ DB 'ZtData\GuildBank.ini', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Load@CGuildBank@@QAEXXZ
_TEXT	SEGMENT
?Load@CGuildBank@@QAEXXZ PROC				; CGuildBank::Load, COMDAT
; _this$ = ecx

; 18   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 19   : 	this->m_iEnable = 0;
; 20   : 	this->m_iGuildBankMap = 0;
; 21   : 
; 22   : 	if(g_ZtLicense.CheckUser(eZtUB::Local) ||
; 23   : 	   g_ZtLicense.CheckUser(eZtUB::MedoniAndrei) ||
; 24   : 	   g_ZtLicense.CheckUser(eZtUB::Gredy) || 
; 25   : 	   g_ZtLicense.CheckUser(eZtUB::GredyLocal) || 
; 26   : 	   g_ZtLicense.CheckUser(eZtUB::Gredy2) ||
; 27   : 	   g_ZtLicense.CheckUser(eZtUB::ProtectDebug) ||
; 28   : 	   g_ZtLicense.CheckUser(eZtUB::mu4you) ||
; 29   : 	   g_ZtLicense.CheckUser(eZtUB::Escalate) ||
; 30   : 	   g_ZtLicense.CheckUser(eZtUB::Artem) || 
; 31   : 	   g_ZtLicense.CheckUser(eZtUB::Artem2) ||
; 32   : 	   g_ZtLicense.CheckUser(eZtUB::eternalmu) ||
; 33   : 	   g_ZtLicense.CheckUser(eZtUB::SILVER1) ||
; 34   : 	   g_ZtLicense.CheckUser(eZtUB::SILVER2) ||
; 35   : 	   g_ZtLicense.CheckUser(eZtUB::SILVER_Local) ||
; 36   : 	   g_ZtLicense.CheckUser(eZtUB::NSGames) ||
; 37   : 	   g_ZtLicense.GetCustom())

  00003	6a 00		 push	 0
  00005	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0000a	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], 0
  00010	c7 46 04 00 00
	00 00		 mov	 DWORD PTR [esi+4], 0
  00017	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0001c	84 c0		 test	 al, al
  0001e	0f 85 06 01 00
	00		 jne	 $LN1@Load
  00024	6a 32		 push	 50			; 00000032H
  00026	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0002b	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00030	84 c0		 test	 al, al
  00032	0f 85 f2 00 00
	00		 jne	 $LN1@Load
  00038	6a 20		 push	 32			; 00000020H
  0003a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0003f	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00044	84 c0		 test	 al, al
  00046	0f 85 de 00 00
	00		 jne	 $LN1@Load
  0004c	6a 21		 push	 33			; 00000021H
  0004e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00053	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00058	84 c0		 test	 al, al
  0005a	0f 85 ca 00 00
	00		 jne	 $LN1@Load
  00060	6a 22		 push	 34			; 00000022H
  00062	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00067	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0006c	84 c0		 test	 al, al
  0006e	0f 85 b6 00 00
	00		 jne	 $LN1@Load
  00074	6a 4b		 push	 75			; 0000004bH
  00076	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0007b	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00080	84 c0		 test	 al, al
  00082	0f 85 a2 00 00
	00		 jne	 $LN1@Load
  00088	6a 4e		 push	 78			; 0000004eH
  0008a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0008f	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00094	84 c0		 test	 al, al
  00096	0f 85 8e 00 00
	00		 jne	 $LN1@Load
  0009c	6a 40		 push	 64			; 00000040H
  0009e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000a3	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000a8	84 c0		 test	 al, al
  000aa	75 7e		 jne	 SHORT $LN1@Load
  000ac	6a 30		 push	 48			; 00000030H
  000ae	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000b3	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000b8	84 c0		 test	 al, al
  000ba	75 6e		 jne	 SHORT $LN1@Load
  000bc	6a 31		 push	 49			; 00000031H
  000be	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000c3	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000c8	84 c0		 test	 al, al
  000ca	75 5e		 jne	 SHORT $LN1@Load
  000cc	6a 4f		 push	 79			; 0000004fH
  000ce	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000d3	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000d8	84 c0		 test	 al, al
  000da	75 4e		 jne	 SHORT $LN1@Load
  000dc	6a 07		 push	 7
  000de	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000e3	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000e8	84 c0		 test	 al, al
  000ea	75 3e		 jne	 SHORT $LN1@Load
  000ec	6a 08		 push	 8
  000ee	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000f3	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000f8	84 c0		 test	 al, al
  000fa	75 2e		 jne	 SHORT $LN1@Load
  000fc	6a 2b		 push	 43			; 0000002bH
  000fe	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00103	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00108	84 c0		 test	 al, al
  0010a	75 1e		 jne	 SHORT $LN1@Load
  0010c	6a 51		 push	 81			; 00000051H
  0010e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00113	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00118	84 c0		 test	 al, al
  0011a	75 0e		 jne	 SHORT $LN1@Load
  0011c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00121	e8 00 00 00 00	 call	 ?GetCustom@CZtLicense@@QAEHXZ ; CZtLicense::GetCustom
  00126	85 c0		 test	 eax, eax
  00128	74 17		 je	 SHORT $LN2@Load
$LN1@Load:

; 38   : 	{
; 39   : 		this->Read(gDirPath.GetNewPath("ZtData\\GuildBank.ini"));

  0012a	68 00 00 00 00	 push	 OFFSET ??_C@_0BF@IJEHMCGD@ZtData?2GuildBank?4ini?$AA@
  0012f	b9 00 00 00 00	 mov	 ecx, OFFSET ?gDirPath@@3VCDirPath@@A ; gDirPath
  00134	e8 00 00 00 00	 call	 ?GetNewPath@CDirPath@@QAEPADPAD@Z ; CDirPath::GetNewPath
  00139	50		 push	 eax
  0013a	8b ce		 mov	 ecx, esi
  0013c	e8 00 00 00 00	 call	 ?Read@CGuildBank@@QAEXPAD@Z ; CGuildBank::Read
$LN2@Load:
  00141	5e		 pop	 esi

; 40   : 	}
; 41   : }

  00142	c3		 ret	 0
?Load@CGuildBank@@QAEXXZ ENDP				; CGuildBank::Load
_TEXT	ENDS
PUBLIC	??_C@_0DD@CMMLNNOO@Some?5other?5character?5is?5using?5th@ ; `string'
PUBLIC	??_C@_0DG@ILLMGJMA@You?5need?5to?5be?5in?5a?5Guild?5before@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GDGetGuildWarehouseList@CGuildBank@@QAEXH@Z	; CGuildBank::GDGetGuildWarehouseList
;	COMDAT ??_C@_0DD@CMMLNNOO@Some?5other?5character?5is?5using?5th@
CONST	SEGMENT
??_C@_0DD@CMMLNNOO@Some?5other?5character?5is?5using?5th@ DB 'Some other '
	DB	'character is using this GuildWarehouse!', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DG@ILLMGJMA@You?5need?5to?5be?5in?5a?5Guild?5before@
CONST	SEGMENT
??_C@_0DG@ILLMGJMA@You?5need?5to?5be?5in?5a?5Guild?5before@ DB 'You need '
	DB	'to be in a Guild before open GuildWarehouse!', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?GDGetGuildWarehouseList@CGuildBank@@QAEXH@Z
_TEXT	SEGMENT
_this$ = -40						; size = 4
_pMsg$ = -36						; size = 32
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?GDGetGuildWarehouseList@CGuildBank@@QAEXH@Z PROC	; CGuildBank::GDGetGuildWarehouseList, COMDAT
; _this$ = ecx

; 52   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 28	 sub	 esp, 40			; 00000028H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	57		 push	 edi
  00011	8b 7d 08	 mov	 edi, DWORD PTR _aIndex$[ebp]
  00014	89 4d d8	 mov	 DWORD PTR _this$[ebp], ecx

; 53   : 	if(OBJMAX_RANGE(aIndex) == 0)

  00017	85 ff		 test	 edi, edi
  00019	0f 88 6f 01 00
	00		 js	 $LN6@GDGetGuild
  0001f	33 c0		 xor	 eax, eax
  00021	81 ff 97 3a 00
	00		 cmp	 edi, 14999		; 00003a97H
  00027	0f 9e c0	 setle	 al
  0002a	85 c0		 test	 eax, eax
  0002c	0f 84 5c 01 00
	00		 je	 $LN6@GDGetGuild

; 54   : 	{
; 55   : 		return;
; 56   : 	}
; 57   : 
; 58   : 	if(strlen(gObj[aIndex].AccountID) < 1)

  00032	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00038	53		 push	 ebx
  00039	56		 push	 esi
  0003a	8b f7		 mov	 esi, edi
  0003c	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00042	8d 44 16 6c	 lea	 eax, DWORD PTR [esi+edx+108]
  00046	8d 58 01	 lea	 ebx, DWORD PTR [eax+1]
  00049	8d a4 24 00 00
	00 00		 npad	 7
$LL10@GDGetGuild:
  00050	8a 08		 mov	 cl, BYTE PTR [eax]
  00052	40		 inc	 eax
  00053	84 c9		 test	 cl, cl
  00055	75 f9		 jne	 SHORT $LL10@GDGetGuild
  00057	2b c3		 sub	 eax, ebx
  00059	83 f8 01	 cmp	 eax, 1
  0005c	0f 82 2a 01 00
	00		 jb	 $LN12@GDGetGuild

; 59   : 	{
; 60   : 		return;
; 61   : 	}
; 62   : 
; 63   : 	if(strlen(gObj[aIndex].GuildName) < 1)

  00062	8d 84 16 3c 04
	00 00		 lea	 eax, DWORD PTR [esi+edx+1084]
  00069	8d 58 01	 lea	 ebx, DWORD PTR [eax+1]
  0006c	8d 64 24 00	 npad	 4
$LL11@GDGetGuild:
  00070	8a 08		 mov	 cl, BYTE PTR [eax]
  00072	40		 inc	 eax
  00073	84 c9		 test	 cl, cl
  00075	75 f9		 jne	 SHORT $LL11@GDGetGuild
  00077	2b c3		 sub	 eax, ebx
  00079	b9 01 00 00 00	 mov	 ecx, 1
  0007e	3b c1		 cmp	 eax, ecx
  00080	73 1b		 jae	 SHORT $LN3@GDGetGuild

; 64   : 	{
; 65   : 		GCServerMsgStringSend("You need to be in a Guild before open GuildWarehouse!",aIndex, 0x01);

  00082	51		 push	 ecx
  00083	57		 push	 edi
  00084	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@ILLMGJMA@You?5need?5to?5be?5in?5a?5Guild?5before@
  00089	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend

; 66   : 		gObj[aIndex].m_ReqWarehouseOpen = false;

  0008e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00093	c6 84 06 1c 11
	00 00 00	 mov	 BYTE PTR [esi+eax+4380], 0

; 67   : 		gObj[aIndex].m_IfState.use = 0;
; 68   : 		gObj[aIndex].m_IfState.state = 0;
; 69   : 		return;

  0009b	eb 3c		 jmp	 SHORT $LN16@GDGetGuild
$LN3@GDGetGuild:

; 70   : 	}
; 71   : 
; 72   : 	if(gObj[aIndex].GuildNumber <= 0)

  0009d	83 bc 16 34 04
	00 00 00	 cmp	 DWORD PTR [esi+edx+1076], 0
  000a5	7f 09		 jg	 SHORT $LN2@GDGetGuild

; 73   : 	{
; 74   : 		GCServerMsgStringSend("You need to be in a Guild before open GuildWarehouse!",aIndex, 0x01);

  000a7	51		 push	 ecx
  000a8	57		 push	 edi
  000a9	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@ILLMGJMA@You?5need?5to?5be?5in?5a?5Guild?5before@

; 75   : 		gObj[aIndex].m_ReqWarehouseOpen = false;
; 76   : 		gObj[aIndex].m_IfState.use = 0;
; 77   : 		gObj[aIndex].m_IfState.state = 0;
; 78   : 		return;

  000ae	eb 16		 jmp	 SHORT $LN14@GDGetGuild
$LN2@GDGetGuild:

; 79   : 	}
; 80   : 
; 81   : 	if(gObj[aIndex].lpGuild->WareOpen == 1)

  000b0	8b 84 16 38 04
	00 00		 mov	 eax, DWORD PTR [esi+edx+1080]
  000b7	39 88 44 07 00
	00		 cmp	 DWORD PTR [eax+1860], ecx
  000bd	75 4a		 jne	 SHORT $LN1@GDGetGuild

; 82   : 	{
; 83   : 		GCServerMsgStringSend("Some other character is using this GuildWarehouse!",aIndex, 0x01);

  000bf	51		 push	 ecx
  000c0	57		 push	 edi
  000c1	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@CMMLNNOO@Some?5other?5character?5is?5using?5th@
$LN14@GDGetGuild:
  000c6	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend

; 84   : 		gObj[aIndex].m_ReqWarehouseOpen = false;

  000cb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000d1	c6 84 0e 1c 11
	00 00 00	 mov	 BYTE PTR [esi+ecx+4380], 0
$LN16@GDGetGuild:

; 85   : 		gObj[aIndex].m_IfState.use = 0;

  000d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000de	83 a4 06 1c 0e
	00 00 fc	 and	 DWORD PTR [esi+eax+3612], -4 ; fffffffcH

; 86   : 		gObj[aIndex].m_IfState.state = 0;

  000e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000eb	83 c4 0c	 add	 esp, 12			; 0000000cH
  000ee	83 a4 06 1c 0e
	00 00 c3	 and	 DWORD PTR [esi+eax+3612], -61 ; ffffffc3H
  000f6	5e		 pop	 esi
  000f7	5b		 pop	 ebx
  000f8	5f		 pop	 edi

; 110  : }

  000f9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000fc	33 cd		 xor	 ecx, ebp
  000fe	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00103	8b e5		 mov	 esp, ebp
  00105	5d		 pop	 ebp
  00106	c2 04 00	 ret	 4
$LN1@GDGetGuild:

; 87   : 		return;
; 88   : 	}
; 89   : 
; 90   : 	gObj[aIndex].m_bGuildBank = true;

  00109	88 8c 16 25 2b
	00 00		 mov	 BYTE PTR [esi+edx+11045], cl

; 91   : 
; 92   : 	gObj[aIndex].lpGuild->WareOpen = 1;

  00110	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00116	8b 84 16 38 04
	00 00		 mov	 eax, DWORD PTR [esi+edx+1080]
  0011d	89 88 44 07 00
	00		 mov	 DWORD PTR [eax+1860], ecx

; 93   : 
; 94   : 	/* Guild Bank Fix */
; 95   : 	this->ClearWarehouse(aIndex);

  00123	8b 4d d8	 mov	 ecx, DWORD PTR _this$[ebp]
  00126	57		 push	 edi
  00127	e8 00 00 00 00	 call	 ?ClearWarehouse@CGuildBank@@QAEXH@Z ; CGuildBank::ClearWarehouse

; 96   : 
; 97   : 	SDHP_GETGUILDWAREHOUSEDB pMsg;
; 98   : 
; 99   : 	pMsg.h.c = 0xC1;
; 100  : 	pMsg.h.headcode = Protocol_GSSend_GetGuildWarehouseList;
; 101  : 	pMsg.h.size = sizeof(SDHP_GETGUILDWAREHOUSEDB);
; 102  : 	pMsg.aIndex = aIndex;
; 103  : 	pMsg.Number = gObj[aIndex].WarehouseNumber;

  0012c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00132	c6 45 dc c1	 mov	 BYTE PTR _pMsg$[ebp], 193 ; 000000c1H
  00136	66 c7 45 dd 20
	db		 mov	 WORD PTR _pMsg$[ebp+1], 56096 ; 0000db20H
  0013c	66 89 7d f4	 mov	 WORD PTR _pMsg$[ebp+24], di
  00140	8b 94 0e e8 2a
	00 00		 mov	 edx, DWORD PTR [esi+ecx+10984]
  00147	89 55 f8	 mov	 DWORD PTR _pMsg$[ebp+28], edx

; 104  : 
; 105  : 	//memcpy(pMsg.G_Name, gObj[aIndex].GuildName, sizeof(pMsg.G_Name));
; 106  : 	memcpy(pMsg.G_Name, gObj[aIndex].lpGuild->Name, sizeof(pMsg.G_Name));

  0014a	8b 84 0e 38 04
	00 00		 mov	 eax, DWORD PTR [esi+ecx+1080]
  00151	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00154	89 55 df	 mov	 DWORD PTR _pMsg$[ebp+3], edx
  00157	8b 50 08	 mov	 edx, DWORD PTR [eax+8]
  0015a	89 55 e3	 mov	 DWORD PTR _pMsg$[ebp+7], edx
  0015d	0f b7 40 0c	 movzx	 eax, WORD PTR [eax+12]
  00161	66 89 45 e7	 mov	 WORD PTR _pMsg$[ebp+11], ax

; 107  : 	memcpy(pMsg.AccountID, gObj[aIndex].AccountID, sizeof(pMsg.AccountID));

  00165	8d 44 0e 6c	 lea	 eax, DWORD PTR [esi+ecx+108]
  00169	8b 08		 mov	 ecx, DWORD PTR [eax]
  0016b	89 4d e9	 mov	 DWORD PTR _pMsg$[ebp+13], ecx
  0016e	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00171	89 55 ed	 mov	 DWORD PTR _pMsg$[ebp+17], edx
  00174	0f b7 40 08	 movzx	 eax, WORD PTR [eax+8]

; 108  : 
; 109  : 	cDBSMng.Send((char*)&pMsg, pMsg.h.size);

  00178	6a 20		 push	 32			; 00000020H
  0017a	8d 4d dc	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0017d	51		 push	 ecx
  0017e	b9 00 00 00 00	 mov	 ecx, OFFSET ?cDBSMng@@3VDBSockMng@@A ; cDBSMng
  00183	66 89 45 f1	 mov	 WORD PTR _pMsg$[ebp+21], ax
  00187	e8 00 00 00 00	 call	 ?Send@DBSockMng@@QAEHPADH@Z ; DBSockMng::Send
$LN12@GDGetGuild:
  0018c	5e		 pop	 esi
  0018d	5b		 pop	 ebx
$LN6@GDGetGuild:

; 110  : }

  0018e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00191	33 cd		 xor	 ecx, ebp
  00193	5f		 pop	 edi
  00194	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00199	8b e5		 mov	 esp, ebp
  0019b	5d		 pop	 ebp
  0019c	c2 04 00	 ret	 4
?GDGetGuildWarehouseList@CGuildBank@@QAEXH@Z ENDP	; CGuildBank::GDGetGuildWarehouseList
_TEXT	ENDS
PUBLIC	??_C@_0CG@NFDFKIHI@?$FLFix?5Inv?4Ptr?$FN?5False?5Location?5?9?5?$CF@ ; `string'
PUBLIC	??_C@_0O@ODOBHJFJ@GuildBank?4cpp?$AA@		; `string'
PUBLIC	??_C@_0CP@GINMLCLK@?$FLANTI?9HACK?$FN?$FLNPC?5Talk?$FN?5Couldn?8t?5t@ ; `string'
PUBLIC	?CGOpenGuildWarehouse@CGuildBank@@QAEXPAUPMSG_GUILD_BANK@@H@Z ; CGuildBank::CGOpenGuildWarehouse
EXTRN	?WarehouseNumberSend@@YAXH@Z:PROC		; WarehouseNumberSend
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?GCSendValueMenu@ZtUser@@QAE_NHH@Z:PROC		; ZtUser::GCSendValueMenu
EXTRN	?g_ZtUser@@3VZtUser@@A:BYTE			; g_ZtUser
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?gObjFixInventoryPointer@@YA_NH@Z:PROC		; gObjFixInventoryPointer
EXTRN	?gObjIsConnectedGP@@YAHH@Z:PROC			; gObjIsConnectedGP
EXTRN	?PacketCheckTime@@YAHPAUOBJECTSTRUCT@@@Z:PROC	; PacketCheckTime
;	COMDAT ??_C@_0CG@NFDFKIHI@?$FLFix?5Inv?4Ptr?$FN?5False?5Location?5?9?5?$CF@
CONST	SEGMENT
??_C@_0CG@NFDFKIHI@?$FLFix?5Inv?4Ptr?$FN?5False?5Location?5?9?5?$CF@ DB '['
	DB	'Fix Inv.Ptr] False Location - %s, %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@ODOBHJFJ@GuildBank?4cpp?$AA@
CONST	SEGMENT
??_C@_0O@ODOBHJFJ@GuildBank?4cpp?$AA@ DB 'GuildBank.cpp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CP@GINMLCLK@?$FLANTI?9HACK?$FN?$FLNPC?5Talk?$FN?5Couldn?8t?5t@
CONST	SEGMENT
??_C@_0CP@GINMLCLK@?$FLANTI?9HACK?$FN?$FLNPC?5Talk?$FN?5Couldn?8t?5t@ DB '['
	DB	'ANTI-HACK][NPC Talk] Couldn''t talk.. (%s)(%s)', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?CGOpenGuildWarehouse@CGuildBank@@QAEXPAUPMSG_GUILD_BANK@@H@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_lpMsg$ = 8						; size = 4
_aIndex$ = 12						; size = 4
?CGOpenGuildWarehouse@CGuildBank@@QAEXPAUPMSG_GUILD_BANK@@H@Z PROC ; CGuildBank::CGOpenGuildWarehouse, COMDAT
; _this$ = ecx

; 257  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 258  : 	if(!this->m_iEnable)

  00004	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00007	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000a	0f 84 75 01 00
	00		 je	 $LN10@CGOpenGuil

; 259  : 	{
; 260  : 		return;
; 261  : 	}
; 262  : 
; 263  : 	if(OBJMAX_RANGE(aIndex) == 0)

  00010	53		 push	 ebx
  00011	8b 5d 0c	 mov	 ebx, DWORD PTR _aIndex$[ebp]
  00014	85 db		 test	 ebx, ebx
  00016	0f 88 68 01 00
	00		 js	 $LN14@CGOpenGuil
  0001c	33 c0		 xor	 eax, eax
  0001e	81 fb 97 3a 00
	00		 cmp	 ebx, 14999		; 00003a97H
  00024	0f 9e c0	 setle	 al
  00027	85 c0		 test	 eax, eax
  00029	0f 84 55 01 00
	00		 je	 $LN14@CGOpenGuil

; 264  : 	{
; 265  : 		return;
; 266  : 	}
; 267  : 
; 268  : 	LPOBJ lpObj = &gObj[aIndex];

  0002f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00034	56		 push	 esi
  00035	57		 push	 edi
  00036	8b fb		 mov	 edi, ebx
  00038	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  0003e	8d 34 07	 lea	 esi, DWORD PTR [edi+eax]

; 269  : 
; 270  : 	if(!PacketCheckTime(lpObj))

  00041	56		 push	 esi
  00042	e8 00 00 00 00	 call	 ?PacketCheckTime@@YAHPAUOBJECTSTRUCT@@@Z ; PacketCheckTime
  00047	83 c4 04	 add	 esp, 4
  0004a	85 c0		 test	 eax, eax
  0004c	0f 84 30 01 00
	00		 je	 $LN15@CGOpenGuil

; 271  : 	{
; 272  : 		return;
; 273  : 	}
; 274  : 
; 275  : 	if(gObj[aIndex].CloseType != -1)

  00052	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00058	80 7c 0f 0b ff	 cmp	 BYTE PTR [edi+ecx+11], -1
  0005d	0f 85 1f 01 00
	00		 jne	 $LN15@CGOpenGuil

; 276  : 	{
; 277  : 		return;
; 278  : 	}
; 279  : 
; 280  : 	if(!gObjIsConnectedGP(aIndex))

  00063	53		 push	 ebx
  00064	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  00069	83 c4 04	 add	 esp, 4
  0006c	85 c0		 test	 eax, eax
  0006e	75 26		 jne	 SHORT $LN5@CGOpenGuil

; 281  : 	{
; 282  : 		LogAddTD("[ANTI-HACK][NPC Talk] Couldn't talk.. (%s)(%s)", gObj[aIndex].AccountID, gObj[aIndex].Name);

  00070	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00075	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  00079	52		 push	 edx
  0007a	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  0007e	50		 push	 eax
  0007f	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@GINMLCLK@?$FLANTI?9HACK?$FN?$FLNPC?5Talk?$FN?5Couldn?8t?5t@
  00084	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0008a	83 c4 0c	 add	 esp, 12			; 0000000cH
  0008d	5f		 pop	 edi
  0008e	5e		 pop	 esi
  0008f	5b		 pop	 ebx

; 328  : 
; 329  : #else
; 330  : 	GDGetWarehouseListOLD(aIndex, gObj[aIndex].AccountID);
; 331  : #endif
; 332  : 
; 333  : 	
; 334  : }

  00090	8b e5		 mov	 esp, ebp
  00092	5d		 pop	 ebp
  00093	c2 08 00	 ret	 8
$LN5@CGOpenGuil:

; 283  : 		return;
; 284  : 	}
; 285  : 
; 286  : 	if ( lpObj->m_IfState.use > 0 )

  00096	f6 86 1c 0e 00
	00 03		 test	 BYTE PTR [esi+3612], 3
  0009d	0f 87 df 00 00
	00		 ja	 $LN15@CGOpenGuil

; 287  : 	{
; 288  : 		return;
; 289  : 	}
; 290  : 
; 291  : 	if ( ::gObjFixInventoryPointer(aIndex) == false )

  000a3	53		 push	 ebx
  000a4	e8 00 00 00 00	 call	 ?gObjFixInventoryPointer@@YA_NH@Z ; gObjFixInventoryPointer
  000a9	83 c4 04	 add	 esp, 4
  000ac	84 c0		 test	 al, al
  000ae	75 18		 jne	 SHORT $LN3@CGOpenGuil

; 292  : 	{
; 293  : 		LogAdd("[Fix Inv.Ptr] False Location - %s, %d", __FILE__, __LINE__);

  000b0	68 25 01 00 00	 push	 293			; 00000125H
  000b5	68 00 00 00 00	 push	 OFFSET ??_C@_0O@ODOBHJFJ@GuildBank?4cpp?$AA@
  000ba	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@NFDFKIHI@?$FLFix?5Inv?4Ptr?$FN?5False?5Location?5?9?5?$CF@
  000bf	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000c5	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@CGOpenGuil:

; 294  : 	}
; 295  : 
; 296  : 	#if(CUSTOM_VALUE_MENU)
; 297  : 	if(g_ZtUser.GCSendValueMenu(aIndex, 2))

  000c8	6a 02		 push	 2
  000ca	53		 push	 ebx
  000cb	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtUser@@3VZtUser@@A ; g_ZtUser
  000d0	e8 00 00 00 00	 call	 ?GCSendValueMenu@ZtUser@@QAE_NHH@Z ; ZtUser::GCSendValueMenu
  000d5	84 c0		 test	 al, al
  000d7	0f 85 a5 00 00
	00		 jne	 $LN15@CGOpenGuil

; 298  : 	{
; 299  : 		return;
; 300  : 	}
; 301  : 	#endif
; 302  : 
; 303  : 	lpObj->TargetShopNumber = 100;
; 304  : 	lpObj->m_IfState.use = 1;

  000dd	8b 96 1c 0e 00
	00		 mov	 edx, DWORD PTR [esi+3612]
  000e3	83 e2 fd	 and	 edx, -3			; fffffffdH
  000e6	83 ca 01	 or	 edx, 1
  000e9	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  000ee	66 89 8e 5a 04
	00 00		 mov	 WORD PTR [esi+1114], cx
  000f5	89 96 1c 0e 00
	00		 mov	 DWORD PTR [esi+3612], edx

; 305  : 	//lpObj->m_IfState.type = 3;
; 306  : 	lpObj->m_ShopTime = 0;

  000fb	88 86 90 03 00
	00		 mov	 BYTE PTR [esi+912], al

; 307  : 
; 308  : 	if(gObj[aIndex].m_ReqWarehouseOpen != false)

  00101	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00106	80 bc 07 1c 11
	00 00 00	 cmp	 BYTE PTR [edi+eax+4380], 0
  0010e	75 72		 jne	 SHORT $LN15@CGOpenGuil

; 309  : 	{
; 310  : 		return;
; 311  : 	}
; 312  : 		
; 313  : 	gObj[aIndex].m_ReqWarehouseOpen = true;

  00110	c6 84 07 1c 11
	00 00 01	 mov	 BYTE PTR [edi+eax+4380], 1

; 314  : 
; 315  : 	lpObj->m_IfState.type = 6;
; 316  : 	lpObj->m_IfState.state = 0;

  00118	8b 86 1c 0e 00
	00		 mov	 eax, DWORD PTR [esi+3612]
  0011e	25 83 01 ff ff	 and	 eax, -65149		; ffff0183H
  00123	0d 80 01 00 00	 or	 eax, 384		; 00000180H
  00128	89 86 1c 0e 00
	00		 mov	 DWORD PTR [esi+3612], eax

; 317  : 
; 318  : 	gObj[aIndex].WarehouseTickCount = GetTickCount();

  0012e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00134	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0013a	89 84 0f 74 0e
	00 00		 mov	 DWORD PTR [edi+ecx+3700], eax

; 319  : 	gObj[aIndex].WarehouseCount = 0;

  00141	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00147	c6 84 17 64 0e
	00 00 00	 mov	 BYTE PTR [edi+edx+3684], 0

; 320  : 
; 321  : #if(CUSTOM_MULTIWAREHOUSE)
; 322  : 	lpObj->WareChange = false;
; 323  : 	lpObj->WarehouseNumber = 0;
; 324  : 	WarehouseNumberSend(lpObj->m_Index);

  0014f	8b 06		 mov	 eax, DWORD PTR [esi]
  00151	50		 push	 eax
  00152	c6 86 e5 2a 00
	00 00		 mov	 BYTE PTR [esi+10981], 0
  00159	c7 86 e8 2a 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+10984], 0
  00163	e8 00 00 00 00	 call	 ?WarehouseNumberSend@@YAXH@Z ; WarehouseNumberSend

; 325  : 
; 326  : 	gObj[aIndex].m_bGuildBank = false;

  00168	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0016e	83 c4 04	 add	 esp, 4
  00171	c6 84 0f 25 2b
	00 00 00	 mov	 BYTE PTR [edi+ecx+11045], 0

; 327  : 	this->GDGetGuildWarehouseList(aIndex);

  00179	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0017c	53		 push	 ebx
  0017d	e8 00 00 00 00	 call	 ?GDGetGuildWarehouseList@CGuildBank@@QAEXH@Z ; CGuildBank::GDGetGuildWarehouseList
$LN15@CGOpenGuil:
  00182	5f		 pop	 edi
  00183	5e		 pop	 esi
$LN14@CGOpenGuil:
  00184	5b		 pop	 ebx
$LN10@CGOpenGuil:

; 328  : 
; 329  : #else
; 330  : 	GDGetWarehouseListOLD(aIndex, gObj[aIndex].AccountID);
; 331  : #endif
; 332  : 
; 333  : 	
; 334  : }

  00185	8b e5		 mov	 esp, ebp
  00187	5d		 pop	 ebp
  00188	c2 08 00	 ret	 8
?CGOpenGuildWarehouse@CGuildBank@@QAEXPAUPMSG_GUILD_BANK@@H@Z ENDP ; CGuildBank::CGOpenGuildWarehouse
_TEXT	ENDS
END
