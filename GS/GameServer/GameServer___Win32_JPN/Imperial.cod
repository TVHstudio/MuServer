; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\Imperial.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_sttBLOODCASTLE_LEVEL DD 0fH
	DD	050H
	DD	0aH
	DD	03cH
	DD	051H
	DD	082H
	DD	03dH
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	03e8H
	DD	0137H
	DD	03e8H
	DD	0fH
	DD	04afH
	DD	0aH
	DD	04afH
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
CONST	SEGMENT
_g_ImperialGate DD 01H
	DD	0133H
	DD	02H
	DD	0138H
	DD	03H
	DD	013dH
	DD	04H
	DD	0133H
	DD	05H
	DD	0138H
	DD	06H
	DD	013dH
	DD	07H
	DD	0142H
_g_ExpTable DD	01H
	ORG $+4
	DQ	000000000007a120H
	DD	02H
	ORG $+4
	DQ	00000000000927c0H
	DD	03H
	ORG $+4
	DQ	00000000000aae60H
	DD	04H
	ORG $+4
	DQ	00000000000c3500H
	DD	05H
	ORG $+4
	DQ	00000000000dbba0H
	DD	06H
	ORG $+4
	DQ	00000000000f4240H
	DD	07H
	ORG $+4
	DQ	00000000004c4b40H
CONST	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfDestler@@QAE_NXZ ; CImperialBattleOfDestler::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofdestler.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfDestler@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfDestler@@QAE_NXZ PROC	; CImperialBattleOfDestler::GetSuccessValue, COMDAT
; _this$ = ecx

; 82   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 59	 mov	 al, BYTE PTR [ecx+89]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfDestler@@QAE_NXZ ENDP	; CImperialBattleOfDestler::GetSuccessValue
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfVermont@@QAE_NXZ ; CImperialBattleOfVermont::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofvermont.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfVermont@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfVermont@@QAE_NXZ PROC	; CImperialBattleOfVermont::GetSuccessValue, COMDAT
; _this$ = ecx

; 82   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 59	 mov	 al, BYTE PTR [ecx+89]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfVermont@@QAE_NXZ ENDP	; CImperialBattleOfVermont::GetSuccessValue
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfKato@@QAE_NXZ	; CImperialBattleOfKato::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofkato.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfKato@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfKato@@QAE_NXZ PROC	; CImperialBattleOfKato::GetSuccessValue, COMDAT
; _this$ = ecx

; 81   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 59	 mov	 al, BYTE PTR [ecx+89]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfKato@@QAE_NXZ ENDP	; CImperialBattleOfKato::GetSuccessValue
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfGalia@@QAE_NXZ ; CImperialBattleOfGalia::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgalia.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfGalia@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfGalia@@QAE_NXZ PROC	; CImperialBattleOfGalia::GetSuccessValue, COMDAT
; _this$ = ecx

; 80   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 59	 mov	 al, BYTE PTR [ecx+89]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfGalia@@QAE_NXZ ENDP	; CImperialBattleOfGalia::GetSuccessValue
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfErkanne@@QAE_NXZ ; CImperialBattleOfErkanne::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleoferkanne.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfErkanne@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfErkanne@@QAE_NXZ PROC	; CImperialBattleOfErkanne::GetSuccessValue, COMDAT
; _this$ = ecx

; 80   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 59	 mov	 al, BYTE PTR [ecx+89]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfErkanne@@QAE_NXZ ENDP	; CImperialBattleOfErkanne::GetSuccessValue
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfRaymond@@QAE_NXZ ; CImperialBattleOfRaymond::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofraymond.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfRaymond@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfRaymond@@QAE_NXZ PROC	; CImperialBattleOfRaymond::GetSuccessValue, COMDAT
; _this$ = ecx

; 76   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 4d	 mov	 al, BYTE PTR [ecx+77]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfRaymond@@QAE_NXZ ENDP	; CImperialBattleOfRaymond::GetSuccessValue
_TEXT	ENDS
PUBLIC	?GetSuccessValue@CImperialBattleOfGaion@@QAE_NXZ ; CImperialBattleOfGaion::GetSuccessValue
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.h
;	COMDAT ?GetSuccessValue@CImperialBattleOfGaion@@QAE_NXZ
_TEXT	SEGMENT
?GetSuccessValue@CImperialBattleOfGaion@@QAE_NXZ PROC	; CImperialBattleOfGaion::GetSuccessValue, COMDAT
; _this$ = ecx

; 82   : 	bool GetSuccessValue() { return this->SuccessValue; }

  00000	8a 41 51	 mov	 al, BYTE PTR [ecx+81]
  00003	c3		 ret	 0
?GetSuccessValue@CImperialBattleOfGaion@@QAE_NXZ ENDP	; CImperialBattleOfGaion::GetSuccessValue
_TEXT	ENDS
PUBLIC	?Reset@IMPERIAL_EVENT_INFO@@QAEXXZ		; IMPERIAL_EVENT_INFO::Reset
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperial.h
;	COMDAT ?Reset@IMPERIAL_EVENT_INFO@@QAEXXZ
_TEXT	SEGMENT
?Reset@IMPERIAL_EVENT_INFO@@QAEXXZ PROC			; IMPERIAL_EVENT_INFO::Reset, COMDAT
; _this$ = ecx

; 29   : 		this->PartyID = -1;

  00000	83 c8 ff	 or	 eax, -1
  00003	66 89 01	 mov	 WORD PTR [ecx], ax

; 30   : 		this->iState = 0;

  00006	33 c0		 xor	 eax, eax
  00008	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 31   : 		Tick = 0;

  0000b	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 32   : 		Time = 0;

  0000e	89 41 0c	 mov	 DWORD PTR [ecx+12], eax

; 33   : 	}

  00011	c3		 ret	 0
?Reset@IMPERIAL_EVENT_INFO@@QAEXXZ ENDP			; IMPERIAL_EVENT_INFO::Reset
_TEXT	ENDS
PUBLIC	?GetIndex@CImperialBattleUser@@QAEHXZ		; CImperialBattleUser::GetIndex
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleuser.h
;	COMDAT ?GetIndex@CImperialBattleUser@@QAEHXZ
_TEXT	SEGMENT
?GetIndex@CImperialBattleUser@@QAEHXZ PROC		; CImperialBattleUser::GetIndex, COMDAT
; _this$ = ecx

; 23   : 		return this->m_iIndex;

  00000	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]

; 24   : 	}

  00003	c3		 ret	 0
?GetIndex@CImperialBattleUser@@QAEHXZ ENDP		; CImperialBattleUser::GetIndex
_TEXT	ENDS
PUBLIC	??_7CImperial@@6B@				; CImperial::`vftable'
PUBLIC	??0CImperial@@QAE@XZ				; CImperial::CImperial
PUBLIC	??_R4CImperial@@6B@				; CImperial::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCImperial@@@8				; CImperial `RTTI Type Descriptor'
PUBLIC	??_R3CImperial@@8				; CImperial::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CImperial@@8				; CImperial::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CImperial@@8			; CImperial::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??1CImperialBattleOfRaymond@@UAE@XZ:PROC	; CImperialBattleOfRaymond::~CImperialBattleOfRaymond
EXTRN	??1CImperialBattleOfErkanne@@UAE@XZ:PROC	; CImperialBattleOfErkanne::~CImperialBattleOfErkanne
EXTRN	??1CImperialBattleOfGalia@@UAE@XZ:PROC		; CImperialBattleOfGalia::~CImperialBattleOfGalia
EXTRN	??1CImperialBattleOfKato@@UAE@XZ:PROC		; CImperialBattleOfKato::~CImperialBattleOfKato
EXTRN	??1CImperialBattleOfVermont@@UAE@XZ:PROC	; CImperialBattleOfVermont::~CImperialBattleOfVermont
EXTRN	??1CImperialBattleOfDestler@@UAE@XZ:PROC	; CImperialBattleOfDestler::~CImperialBattleOfDestler
EXTRN	??0CImperialBattleOfGaion@@QAE@XZ:PROC		; CImperialBattleOfGaion::CImperialBattleOfGaion
EXTRN	??0CImperialBattleOfRaymond@@QAE@XZ:PROC	; CImperialBattleOfRaymond::CImperialBattleOfRaymond
EXTRN	??0CImperialBattleOfErkanne@@QAE@XZ:PROC	; CImperialBattleOfErkanne::CImperialBattleOfErkanne
EXTRN	??0CImperialBattleOfGalia@@QAE@XZ:PROC		; CImperialBattleOfGalia::CImperialBattleOfGalia
EXTRN	??0CImperialBattleOfKato@@QAE@XZ:PROC		; CImperialBattleOfKato::CImperialBattleOfKato
EXTRN	??0CImperialBattleOfVermont@@QAE@XZ:PROC	; CImperialBattleOfVermont::CImperialBattleOfVermont
EXTRN	??0CImperialBattleOfDestler@@QAE@XZ:PROC	; CImperialBattleOfDestler::CImperialBattleOfDestler
EXTRN	___security_cookie:DWORD
EXTRN	___CxxFrameHandler3:PROC
EXTRN	@__security_check_cookie@4:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECImperial@@UAEPAXI@Z:PROC			; CImperial::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CImperial@@8
; File e:\work\tranet_version\gs\gameserver\imperial.h
rdata$r	SEGMENT
??_R1A@?0A@EA@CImperial@@8 DD FLAT:??_R0?AVCImperial@@@8 ; CImperial::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CImperial@@8
rdata$r	ENDS
;	COMDAT ??_R2CImperial@@8
rdata$r	SEGMENT
??_R2CImperial@@8 DD FLAT:??_R1A@?0A@EA@CImperial@@8	; CImperial::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CImperial@@8
rdata$r	SEGMENT
??_R3CImperial@@8 DD 00H				; CImperial::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CImperial@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCImperial@@@8
_DATA	SEGMENT
??_R0?AVCImperial@@@8 DD FLAT:??_7type_info@@6B@	; CImperial `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCImperial@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CImperial@@6B@
rdata$r	SEGMENT
??_R4CImperial@@6B@ DD 00H				; CImperial::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCImperial@@@8
	DD	FLAT:??_R3CImperial@@8
rdata$r	ENDS
;	COMDAT ??_7CImperial@@6B@
CONST	SEGMENT
??_7CImperial@@6B@ DD FLAT:??_R4CImperial@@6B@		; CImperial::`vftable'
	DD	FLAT:??_ECImperial@@UAEPAXI@Z
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__ehfuncinfo$??0CImperial@@QAE@XZ DD 019930522H
	DD	06H
	DD	FLAT:__unwindtable$??0CImperial@@QAE@XZ
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
__unwindtable$??0CImperial@@QAE@XZ DD 0ffffffffH
	DD	FLAT:__unwindfunclet$??0CImperial@@QAE@XZ$0
	DD	00H
	DD	FLAT:__unwindfunclet$??0CImperial@@QAE@XZ$1
	DD	01H
	DD	FLAT:__unwindfunclet$??0CImperial@@QAE@XZ$2
	DD	02H
	DD	FLAT:__unwindfunclet$??0CImperial@@QAE@XZ$3
	DD	03H
	DD	FLAT:__unwindfunclet$??0CImperial@@QAE@XZ$4
	DD	04H
	DD	FLAT:__unwindfunclet$??0CImperial@@QAE@XZ$5
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperial.cpp
xdata$x	ENDS
;	COMDAT ??0CImperial@@QAE@XZ
_TEXT	SEGMENT
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
??0CImperial@@QAE@XZ PROC				; CImperial::CImperial, COMDAT
; _this$ = ecx

; 20   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??0CImperial@@QAE@XZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	51		 push	 ecx
  00012	56		 push	 esi
  00013	57		 push	 edi
  00014	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00019	33 c5		 xor	 eax, ebp
  0001b	50		 push	 eax
  0001c	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001f	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00025	8b f1		 mov	 esi, ecx
  00027	89 75 f0	 mov	 DWORD PTR _this$[ebp], esi
  0002a	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  00030	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7CImperial@@6B@
  00036	e8 00 00 00 00	 call	 ??0CImperialBattleOfDestler@@QAE@XZ ; CImperialBattleOfDestler::CImperialBattleOfDestler
  0003b	33 ff		 xor	 edi, edi
  0003d	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  00043	89 7d fc	 mov	 DWORD PTR __$EHRec$[ebp+8], edi
  00046	e8 00 00 00 00	 call	 ??0CImperialBattleOfVermont@@QAE@XZ ; CImperialBattleOfVermont::CImperialBattleOfVermont
  0004b	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  00051	c6 45 fc 01	 mov	 BYTE PTR __$EHRec$[ebp+8], 1
  00055	e8 00 00 00 00	 call	 ??0CImperialBattleOfKato@@QAE@XZ ; CImperialBattleOfKato::CImperialBattleOfKato
  0005a	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  00060	c6 45 fc 02	 mov	 BYTE PTR __$EHRec$[ebp+8], 2
  00064	e8 00 00 00 00	 call	 ??0CImperialBattleOfGalia@@QAE@XZ ; CImperialBattleOfGalia::CImperialBattleOfGalia
  00069	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  0006f	c6 45 fc 03	 mov	 BYTE PTR __$EHRec$[ebp+8], 3
  00073	e8 00 00 00 00	 call	 ??0CImperialBattleOfErkanne@@QAE@XZ ; CImperialBattleOfErkanne::CImperialBattleOfErkanne
  00078	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  0007e	c6 45 fc 04	 mov	 BYTE PTR __$EHRec$[ebp+8], 4
  00082	e8 00 00 00 00	 call	 ??0CImperialBattleOfRaymond@@QAE@XZ ; CImperialBattleOfRaymond::CImperialBattleOfRaymond
  00087	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  0008d	c6 45 fc 05	 mov	 BYTE PTR __$EHRec$[ebp+8], 5
  00091	e8 00 00 00 00	 call	 ??0CImperialBattleOfGaion@@QAE@XZ ; CImperialBattleOfGaion::CImperialBattleOfGaion

; 21   : 	this->m_ImperialData.Reset();

  00096	83 c8 ff	 or	 eax, -1
  00099	66 89 86 20 af
	00 00		 mov	 WORD PTR [esi+44832], ax
  000a0	89 be 24 af 00
	00		 mov	 DWORD PTR [esi+44836], edi
  000a6	89 be 28 af 00
	00		 mov	 DWORD PTR [esi+44840], edi
  000ac	89 be 2c af 00
	00		 mov	 DWORD PTR [esi+44844], edi

; 22   : }

  000b2	8b c6		 mov	 eax, esi
  000b4	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  000b7	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  000be	59		 pop	 ecx
  000bf	5f		 pop	 edi
  000c0	5e		 pop	 esi
  000c1	8b e5		 mov	 esp, ebp
  000c3	5d		 pop	 ebp
  000c4	c3		 ret	 0
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$??0CImperial@@QAE@XZ$0:
  00000	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00003	81 c1 34 af 00
	00		 add	 ecx, 44852		; 0000af34H
  00009	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfDestler@@UAE@XZ ; CImperialBattleOfDestler::~CImperialBattleOfDestler
__unwindfunclet$??0CImperial@@QAE@XZ$1:
  0000e	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00011	81 c1 90 af 00
	00		 add	 ecx, 44944		; 0000af90H
  00017	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfVermont@@UAE@XZ ; CImperialBattleOfVermont::~CImperialBattleOfVermont
__unwindfunclet$??0CImperial@@QAE@XZ$2:
  0001c	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0001f	81 c1 ec af 00
	00		 add	 ecx, 45036		; 0000afecH
  00025	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfKato@@UAE@XZ ; CImperialBattleOfKato::~CImperialBattleOfKato
__unwindfunclet$??0CImperial@@QAE@XZ$3:
  0002a	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0002d	81 c1 48 b0 00
	00		 add	 ecx, 45128		; 0000b048H
  00033	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfGalia@@UAE@XZ ; CImperialBattleOfGalia::~CImperialBattleOfGalia
__unwindfunclet$??0CImperial@@QAE@XZ$4:
  00038	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0003b	81 c1 a4 b0 00
	00		 add	 ecx, 45220		; 0000b0a4H
  00041	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfErkanne@@UAE@XZ ; CImperialBattleOfErkanne::~CImperialBattleOfErkanne
__unwindfunclet$??0CImperial@@QAE@XZ$5:
  00046	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00049	81 c1 00 b1 00
	00		 add	 ecx, 45312		; 0000b100H
  0004f	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfRaymond@@UAE@XZ ; CImperialBattleOfRaymond::~CImperialBattleOfRaymond
__ehhandler$??0CImperial@@QAE@XZ:
  00054	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00058	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0005b	8b 4a f0	 mov	 ecx, DWORD PTR [edx-16]
  0005e	33 c8		 xor	 ecx, eax
  00060	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00065	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??0CImperial@@QAE@XZ
  0006a	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??0CImperial@@QAE@XZ ENDP				; CImperial::CImperial
PUBLIC	??1CImperial@@UAE@XZ				; CImperial::~CImperial
EXTRN	??1CImperialBattleOfGaion@@UAE@XZ:PROC		; CImperialBattleOfGaion::~CImperialBattleOfGaion
;	COMDAT xdata$x
xdata$x	SEGMENT
__ehfuncinfo$??1CImperial@@UAE@XZ DD 019930522H
	DD	06H
	DD	FLAT:__unwindtable$??1CImperial@@UAE@XZ
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
__unwindtable$??1CImperial@@UAE@XZ DD 0ffffffffH
	DD	FLAT:__unwindfunclet$??1CImperial@@UAE@XZ$0
	DD	00H
	DD	FLAT:__unwindfunclet$??1CImperial@@UAE@XZ$1
	DD	01H
	DD	FLAT:__unwindfunclet$??1CImperial@@UAE@XZ$2
	DD	02H
	DD	FLAT:__unwindfunclet$??1CImperial@@UAE@XZ$3
	DD	03H
	DD	FLAT:__unwindfunclet$??1CImperial@@UAE@XZ$4
	DD	04H
	DD	FLAT:__unwindfunclet$??1CImperial@@UAE@XZ$5
; Function compile flags: /Ogtp
xdata$x	ENDS
;	COMDAT ??1CImperial@@UAE@XZ
_TEXT	SEGMENT
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
??1CImperial@@UAE@XZ PROC				; CImperial::~CImperial, COMDAT
; _this$ = ecx

; 25   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??1CImperial@@UAE@XZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	51		 push	 ecx
  00012	56		 push	 esi
  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00018	33 c5		 xor	 eax, ebp
  0001a	50		 push	 eax
  0001b	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001e	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00024	8b f1		 mov	 esi, ecx
  00026	89 75 f0	 mov	 DWORD PTR _this$[ebp], esi
  00029	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7CImperial@@6B@

; 26   : }

  0002f	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  00035	c7 45 fc 05 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 5
  0003c	e8 00 00 00 00	 call	 ??1CImperialBattleOfGaion@@UAE@XZ ; CImperialBattleOfGaion::~CImperialBattleOfGaion
  00041	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  00047	c6 45 fc 04	 mov	 BYTE PTR __$EHRec$[ebp+8], 4
  0004b	e8 00 00 00 00	 call	 ??1CImperialBattleOfRaymond@@UAE@XZ ; CImperialBattleOfRaymond::~CImperialBattleOfRaymond
  00050	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  00056	c6 45 fc 03	 mov	 BYTE PTR __$EHRec$[ebp+8], 3
  0005a	e8 00 00 00 00	 call	 ??1CImperialBattleOfErkanne@@UAE@XZ ; CImperialBattleOfErkanne::~CImperialBattleOfErkanne
  0005f	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  00065	c6 45 fc 02	 mov	 BYTE PTR __$EHRec$[ebp+8], 2
  00069	e8 00 00 00 00	 call	 ??1CImperialBattleOfGalia@@UAE@XZ ; CImperialBattleOfGalia::~CImperialBattleOfGalia
  0006e	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  00074	c6 45 fc 01	 mov	 BYTE PTR __$EHRec$[ebp+8], 1
  00078	e8 00 00 00 00	 call	 ??1CImperialBattleOfKato@@UAE@XZ ; CImperialBattleOfKato::~CImperialBattleOfKato
  0007d	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  00083	c6 45 fc 00	 mov	 BYTE PTR __$EHRec$[ebp+8], 0
  00087	e8 00 00 00 00	 call	 ??1CImperialBattleOfVermont@@UAE@XZ ; CImperialBattleOfVermont::~CImperialBattleOfVermont
  0008c	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  00092	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  00099	e8 00 00 00 00	 call	 ??1CImperialBattleOfDestler@@UAE@XZ ; CImperialBattleOfDestler::~CImperialBattleOfDestler
  0009e	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  000a1	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  000a8	59		 pop	 ecx
  000a9	5e		 pop	 esi
  000aa	8b e5		 mov	 esp, ebp
  000ac	5d		 pop	 ebp
  000ad	c3		 ret	 0
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$??1CImperial@@UAE@XZ$0:
  00000	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00003	81 c1 34 af 00
	00		 add	 ecx, 44852		; 0000af34H
  00009	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfDestler@@UAE@XZ ; CImperialBattleOfDestler::~CImperialBattleOfDestler
__unwindfunclet$??1CImperial@@UAE@XZ$1:
  0000e	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00011	81 c1 90 af 00
	00		 add	 ecx, 44944		; 0000af90H
  00017	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfVermont@@UAE@XZ ; CImperialBattleOfVermont::~CImperialBattleOfVermont
__unwindfunclet$??1CImperial@@UAE@XZ$2:
  0001c	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0001f	81 c1 ec af 00
	00		 add	 ecx, 45036		; 0000afecH
  00025	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfKato@@UAE@XZ ; CImperialBattleOfKato::~CImperialBattleOfKato
__unwindfunclet$??1CImperial@@UAE@XZ$3:
  0002a	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0002d	81 c1 48 b0 00
	00		 add	 ecx, 45128		; 0000b048H
  00033	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfGalia@@UAE@XZ ; CImperialBattleOfGalia::~CImperialBattleOfGalia
__unwindfunclet$??1CImperial@@UAE@XZ$4:
  00038	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  0003b	81 c1 a4 b0 00
	00		 add	 ecx, 45220		; 0000b0a4H
  00041	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfErkanne@@UAE@XZ ; CImperialBattleOfErkanne::~CImperialBattleOfErkanne
__unwindfunclet$??1CImperial@@UAE@XZ$5:
  00046	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00049	81 c1 00 b1 00
	00		 add	 ecx, 45312		; 0000b100H
  0004f	e9 00 00 00 00	 jmp	 ??1CImperialBattleOfRaymond@@UAE@XZ ; CImperialBattleOfRaymond::~CImperialBattleOfRaymond
__ehhandler$??1CImperial@@UAE@XZ:
  00054	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00058	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0005b	8b 4a f4	 mov	 ecx, DWORD PTR [edx-12]
  0005e	33 c8		 xor	 ecx, eax
  00060	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00065	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??1CImperial@@UAE@XZ
  0006a	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??1CImperial@@UAE@XZ ENDP				; CImperial::~CImperial
PUBLIC	??_C@_0CE@INEABKAN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5O@ ; `string'
PUBLIC	?SetState_OPEN@CImperial@@QAEXXZ		; CImperial::SetState_OPEN
EXTRN	?ResetAllData@CImperialBattleUserMng@@QAEXXZ:PROC ; CImperialBattleUserMng::ResetAllData
EXTRN	?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A:BYTE ; g_ImperialBattleUserMng
EXTRN	?SetState@CImperialBattleOfGaion@@QAEXH@Z:PROC	; CImperialBattleOfGaion::SetState
EXTRN	?GetEventState@CImperialBattleOfGaion@@QAEHXZ:PROC ; CImperialBattleOfGaion::GetEventState
EXTRN	?SetState@CImperialBattleOfRaymond@@QAEXH@Z:PROC ; CImperialBattleOfRaymond::SetState
EXTRN	?GetEventState@CImperialBattleOfRaymond@@QAEHXZ:PROC ; CImperialBattleOfRaymond::GetEventState
EXTRN	?SetState@CImperialBattleOfErkanne@@QAEXH@Z:PROC ; CImperialBattleOfErkanne::SetState
EXTRN	?GetEventState@CImperialBattleOfErkanne@@QAEHXZ:PROC ; CImperialBattleOfErkanne::GetEventState
EXTRN	?SetState@CImperialBattleOfGalia@@QAEXH@Z:PROC	; CImperialBattleOfGalia::SetState
EXTRN	?GetEventState@CImperialBattleOfGalia@@QAEHXZ:PROC ; CImperialBattleOfGalia::GetEventState
EXTRN	?SetState@CImperialBattleOfKato@@QAEXH@Z:PROC	; CImperialBattleOfKato::SetState
EXTRN	?GetEventState@CImperialBattleOfKato@@QAEHXZ:PROC ; CImperialBattleOfKato::GetEventState
EXTRN	?SetState@CImperialBattleOfVermont@@QAEXH@Z:PROC ; CImperialBattleOfVermont::SetState
EXTRN	?GetEventState@CImperialBattleOfVermont@@QAEHXZ:PROC ; CImperialBattleOfVermont::GetEventState
EXTRN	?SetState@CImperialBattleOfDestler@@QAEXH@Z:PROC ; CImperialBattleOfDestler::SetState
EXTRN	?GetEventState@CImperialBattleOfDestler@@QAEHXZ:PROC ; CImperialBattleOfDestler::GetEventState
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
EXTRN	?gObjIsConnected@@YAHH@Z:PROC			; gObjIsConnected
EXTRN	?gObjMoveGate@@YAHHH@Z:PROC			; gObjMoveGate
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?LogAddC@@3P6AXEPADZZA:DWORD			; LogAddC
;	COMDAT ??_C@_0CE@INEABKAN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5O@
; File e:\work\tranet_version\gs\gameserver\imperial.h
CONST	SEGMENT
??_C@_0CE@INEABKAN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5O@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> OPEN', 00H	; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperial.cpp
CONST	ENDS
;	COMDAT ?SetState_OPEN@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_OPEN@CImperial@@QAEXXZ PROC			; CImperial::SetState_OPEN, COMDAT
; _this$ = ecx

; 72   : {

  00000	53		 push	 ebx
  00001	56		 push	 esi
  00002	8b d9		 mov	 ebx, ecx

; 73   : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> OPEN", this->m_ImperialData.iState);

  00004	8b 83 24 af 00
	00		 mov	 eax, DWORD PTR [ebx+44836]
  0000a	57		 push	 edi
  0000b	50		 push	 eax
  0000c	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@INEABKAN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5O@
  00011	6a 04		 push	 4
  00013	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00019	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0001f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 74   : 	for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;++i)

  00022	bf b0 36 00 00	 mov	 edi, 14000		; 000036b0H
  00027	be 00 a7 40 09	 mov	 esi, 155232000		; 0940a700H
  0002c	8d 64 24 00	 npad	 4
$LL15@SetState_O:

; 75   : 	{
; 76   : 		if(IMPERIAL_MAP_RANGE(gObj[i].MapNumber) && gObj[i].Connected == PLAYER_PLAYING)

  00030	0f b6 84 0e 49
	01 00 00	 movzx	 eax, BYTE PTR [esi+ecx+329]
  00038	3c 45		 cmp	 al, 69			; 00000045H
  0003a	72 24		 jb	 SHORT $LN14@SetState_O
  0003c	b2 48		 mov	 dl, 72			; 00000048H
  0003e	3a d0		 cmp	 dl, al
  00040	1b c0		 sbb	 eax, eax
  00042	40		 inc	 eax
  00043	74 1b		 je	 SHORT $LN14@SetState_O
  00045	83 7c 0e 04 03	 cmp	 DWORD PTR [esi+ecx+4], 3
  0004a	75 14		 jne	 SHORT $LN14@SetState_O

; 77   : 		{
; 78   : 			gObjMoveGate(i, 267);

  0004c	68 0b 01 00 00	 push	 267			; 0000010bH
  00051	57		 push	 edi
  00052	e8 00 00 00 00	 call	 ?gObjMoveGate@@YAHHH@Z	; gObjMoveGate
  00057	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005d	83 c4 08	 add	 esp, 8
$LN14@SetState_O:

; 74   : 	for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;++i)

  00060	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  00066	47		 inc	 edi
  00067	81 fe 80 d7 e9
	09		 cmp	 esi, 166320000		; 09e9d780H
  0006d	7c c1		 jl	 SHORT $LL15@SetState_O

; 79   : 		}
; 80   : 	}
; 81   : 	for(int i=0;i<OBJ_MAXMONSTER;++i)

  0006f	33 ff		 xor	 edi, edi
  00071	33 f6		 xor	 esi, esi
$LL11@SetState_O:

; 82   : 	{
; 83   : 		if(gObjIsConnected(i) && IMPERIAL_MAP_RANGE(gObj[i].MapNumber) && gObj[i].Class != 523)

  00073	57		 push	 edi
  00074	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00079	83 c4 04	 add	 esp, 4
  0007c	85 c0		 test	 eax, eax
  0007e	74 33		 je	 SHORT $LN10@SetState_O
  00080	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00086	0f b6 84 0e 49
	01 00 00	 movzx	 eax, BYTE PTR [esi+ecx+329]
  0008e	3c 45		 cmp	 al, 69			; 00000045H
  00090	72 21		 jb	 SHORT $LN10@SetState_O
  00092	b2 48		 mov	 dl, 72			; 00000048H
  00094	3a d0		 cmp	 dl, al
  00096	1b c0		 sbb	 eax, eax
  00098	40		 inc	 eax
  00099	74 18		 je	 SHORT $LN10@SetState_O
  0009b	b8 0b 02 00 00	 mov	 eax, 523		; 0000020bH
  000a0	66 39 84 0e b8
	00 00 00	 cmp	 WORD PTR [esi+ecx+184], ax
  000a8	74 09		 je	 SHORT $LN10@SetState_O

; 84   : 			gObjDel(i);

  000aa	57		 push	 edi
  000ab	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  000b0	83 c4 04	 add	 esp, 4
$LN10@SetState_O:

; 79   : 		}
; 80   : 	}
; 81   : 	for(int i=0;i<OBJ_MAXMONSTER;++i)

  000b3	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  000b9	47		 inc	 edi
  000ba	81 fe 80 76 97
	08		 cmp	 esi, 144144000		; 08977680H
  000c0	7c b1		 jl	 SHORT $LL11@SetState_O

; 85   : 	}
; 86   : 
; 87   : 	if(this->m_BattleOfDestler.GetEventState() != 3)

  000c2	8d 8b 34 af 00
	00		 lea	 ecx, DWORD PTR [ebx+44852]
  000c8	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfDestler@@QAEHXZ ; CImperialBattleOfDestler::GetEventState

; 88   : 	{
; 89   : 		this->m_BattleOfDestler.SetState(0);

  000cd	33 ff		 xor	 edi, edi
  000cf	83 f8 03	 cmp	 eax, 3
  000d2	74 0c		 je	 SHORT $LN7@SetState_O
  000d4	57		 push	 edi
  000d5	8d 8b 34 af 00
	00		 lea	 ecx, DWORD PTR [ebx+44852]
  000db	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfDestler@@QAEXH@Z ; CImperialBattleOfDestler::SetState
$LN7@SetState_O:

; 90   : 	}
; 91   : 
; 92   : 	if(this->m_BattleOfVermont.GetEventState() != 3)

  000e0	8d 8b 90 af 00
	00		 lea	 ecx, DWORD PTR [ebx+44944]
  000e6	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfVermont@@QAEHXZ ; CImperialBattleOfVermont::GetEventState
  000eb	83 f8 03	 cmp	 eax, 3
  000ee	74 0c		 je	 SHORT $LN6@SetState_O

; 93   : 	{
; 94   : 		this->m_BattleOfVermont.SetState(0);

  000f0	57		 push	 edi
  000f1	8d 8b 90 af 00
	00		 lea	 ecx, DWORD PTR [ebx+44944]
  000f7	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfVermont@@QAEXH@Z ; CImperialBattleOfVermont::SetState
$LN6@SetState_O:

; 95   : 	}
; 96   : 
; 97   : 	if(this->m_BattleOfKato.GetEventState() != 3)

  000fc	8d 8b ec af 00
	00		 lea	 ecx, DWORD PTR [ebx+45036]
  00102	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfKato@@QAEHXZ ; CImperialBattleOfKato::GetEventState
  00107	83 f8 03	 cmp	 eax, 3
  0010a	74 0c		 je	 SHORT $LN5@SetState_O

; 98   : 	{
; 99   : 		this->m_BattleOfKato.SetState(0);

  0010c	57		 push	 edi
  0010d	8d 8b ec af 00
	00		 lea	 ecx, DWORD PTR [ebx+45036]
  00113	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfKato@@QAEXH@Z ; CImperialBattleOfKato::SetState
$LN5@SetState_O:

; 100  : 	}
; 101  : 
; 102  : 	if(this->m_BattleOfGalia.GetEventState() != 3)

  00118	8d 8b 48 b0 00
	00		 lea	 ecx, DWORD PTR [ebx+45128]
  0011e	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGalia@@QAEHXZ ; CImperialBattleOfGalia::GetEventState
  00123	83 f8 03	 cmp	 eax, 3
  00126	74 0c		 je	 SHORT $LN4@SetState_O

; 103  : 	{
; 104  : 		this->m_BattleOfGalia.SetState(0);

  00128	57		 push	 edi
  00129	8d 8b 48 b0 00
	00		 lea	 ecx, DWORD PTR [ebx+45128]
  0012f	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState
$LN4@SetState_O:

; 105  : 	}
; 106  : 
; 107  : 	if(this->m_BattleOfErkanne.GetEventState() != 3)

  00134	8d 8b a4 b0 00
	00		 lea	 ecx, DWORD PTR [ebx+45220]
  0013a	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfErkanne@@QAEHXZ ; CImperialBattleOfErkanne::GetEventState
  0013f	83 f8 03	 cmp	 eax, 3
  00142	74 0c		 je	 SHORT $LN3@SetState_O

; 108  : 	{
; 109  : 		this->m_BattleOfErkanne.SetState(0);

  00144	57		 push	 edi
  00145	8d 8b a4 b0 00
	00		 lea	 ecx, DWORD PTR [ebx+45220]
  0014b	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfErkanne@@QAEXH@Z ; CImperialBattleOfErkanne::SetState
$LN3@SetState_O:

; 110  : 	}
; 111  : 
; 112  : 	if(this->m_BattleOfRaymond.GetEventState() != 3)

  00150	8d 8b 00 b1 00
	00		 lea	 ecx, DWORD PTR [ebx+45312]
  00156	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfRaymond@@QAEHXZ ; CImperialBattleOfRaymond::GetEventState
  0015b	83 f8 03	 cmp	 eax, 3
  0015e	74 0c		 je	 SHORT $LN2@SetState_O

; 113  : 	{
; 114  : 		this->m_BattleOfRaymond.SetState(0);

  00160	57		 push	 edi
  00161	8d 8b 00 b1 00
	00		 lea	 ecx, DWORD PTR [ebx+45312]
  00167	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfRaymond@@QAEXH@Z ; CImperialBattleOfRaymond::SetState
$LN2@SetState_O:

; 115  : 	}
; 116  : 
; 117  : 	if(this->m_BattleOfGaion.GetEventState() != 3)

  0016c	8d 8b 50 b1 00
	00		 lea	 ecx, DWORD PTR [ebx+45392]
  00172	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGaion@@QAEHXZ ; CImperialBattleOfGaion::GetEventState
  00177	83 f8 03	 cmp	 eax, 3
  0017a	74 0c		 je	 SHORT $LN1@SetState_O

; 118  : 	{
; 119  : 		this->m_BattleOfGaion.SetState(0);

  0017c	57		 push	 edi
  0017d	8d 8b 50 b1 00
	00		 lea	 ecx, DWORD PTR [ebx+45392]
  00183	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@SetState_O:

; 120  : 	}
; 121  : 
; 122  : 	this->m_ImperialData.Reset();

  00188	83 c9 ff	 or	 ecx, -1
  0018b	66 89 8b 20 af
	00 00		 mov	 WORD PTR [ebx+44832], cx

; 123  : 	g_ImperialBattleUserMng.ResetAllData();

  00192	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00197	89 bb 24 af 00
	00		 mov	 DWORD PTR [ebx+44836], edi
  0019d	89 bb 28 af 00
	00		 mov	 DWORD PTR [ebx+44840], edi
  001a3	89 bb 2c af 00
	00		 mov	 DWORD PTR [ebx+44844], edi
  001a9	e8 00 00 00 00	 call	 ?ResetAllData@CImperialBattleUserMng@@QAEXXZ ; CImperialBattleUserMng::ResetAllData
  001ae	5f		 pop	 edi
  001af	5e		 pop	 esi

; 124  : 	this->m_ImperialData.iState = IMPERIAL_STATE_OPEN;

  001b0	c7 83 24 af 00
	00 01 00 00 00	 mov	 DWORD PTR [ebx+44836], 1
  001ba	5b		 pop	 ebx

; 125  : }

  001bb	c3		 ret	 0
?SetState_OPEN@CImperial@@QAEXXZ ENDP			; CImperial::SetState_OPEN
_TEXT	ENDS
PUBLIC	??_C@_0DB@EBEDKJKN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_DESTLER@CImperial@@QAEXXZ		; CImperial::SetState_DESTLER
;	COMDAT ??_C@_0DB@EBEDKJKN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0DB@EBEDKJKN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_DESTLER', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_DESTLER@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_DESTLER@CImperial@@QAEXXZ PROC		; CImperial::SetState_DESTLER, COMDAT
; _this$ = ecx

; 128  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 129  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_DESTLER", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@EBEDKJKN@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 130  : 	this->m_BattleOfDestler.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfDestler@@QAEXH@Z ; CImperialBattleOfDestler::SetState

; 131  : 	this->m_ImperialData.iState = IMPERIAL_STATE_DESTLER;

  00027	c7 86 24 af 00
	00 02 00 00 00	 mov	 DWORD PTR [esi+44836], 2
  00031	5e		 pop	 esi

; 132  : }

  00032	c3		 ret	 0
?SetState_DESTLER@CImperial@@QAEXXZ ENDP		; CImperial::SetState_DESTLER
_TEXT	ENDS
PUBLIC	??_C@_0DB@JBMLFOCE@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_VERMONT@CImperial@@QAEXXZ		; CImperial::SetState_VERMONT
;	COMDAT ??_C@_0DB@JBMLFOCE@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0DB@JBMLFOCE@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_VERMONT', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_VERMONT@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_VERMONT@CImperial@@QAEXXZ PROC		; CImperial::SetState_VERMONT, COMDAT
; _this$ = ecx

; 135  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 136  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_VERMONT", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@JBMLFOCE@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 137  : 	this->m_BattleOfVermont.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfVermont@@QAEXH@Z ; CImperialBattleOfVermont::SetState

; 138  : 	this->m_ImperialData.iState = IMPERIAL_STATE_VERMONT;

  00027	c7 86 24 af 00
	00 03 00 00 00	 mov	 DWORD PTR [esi+44836], 3
  00031	5e		 pop	 esi

; 139  : }

  00032	c3		 ret	 0
?SetState_VERMONT@CImperial@@QAEXXZ ENDP		; CImperial::SetState_VERMONT
_TEXT	ENDS
PUBLIC	??_C@_0CO@LHAKLPLJ@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_KATO@CImperial@@QAEXXZ		; CImperial::SetState_KATO
;	COMDAT ??_C@_0CO@LHAKLPLJ@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0CO@LHAKLPLJ@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_KATO', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_KATO@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_KATO@CImperial@@QAEXXZ PROC			; CImperial::SetState_KATO, COMDAT
; _this$ = ecx

; 142  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 143  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_KATO", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@LHAKLPLJ@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 144  : 	this->m_BattleOfKato.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfKato@@QAEXH@Z ; CImperialBattleOfKato::SetState

; 145  : 	this->m_ImperialData.iState = IMPERIAL_STATE_KATO;

  00027	c7 86 24 af 00
	00 04 00 00 00	 mov	 DWORD PTR [esi+44836], 4
  00031	5e		 pop	 esi

; 146  : }

  00032	c3		 ret	 0
?SetState_KATO@CImperial@@QAEXXZ ENDP			; CImperial::SetState_KATO
_TEXT	ENDS
PUBLIC	??_C@_0CP@LNIKLMGK@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_GALIA@CImperial@@QAEXXZ		; CImperial::SetState_GALIA
;	COMDAT ??_C@_0CP@LNIKLMGK@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0CP@LNIKLMGK@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_GALIA', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_GALIA@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_GALIA@CImperial@@QAEXXZ PROC			; CImperial::SetState_GALIA, COMDAT
; _this$ = ecx

; 149  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 150  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_GALIA", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@LNIKLMGK@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 151  : 	this->m_BattleOfGalia.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState

; 152  : 	this->m_ImperialData.iState = IMPERIAL_STATE_GALIA;

  00027	c7 86 24 af 00
	00 05 00 00 00	 mov	 DWORD PTR [esi+44836], 5
  00031	5e		 pop	 esi

; 153  : }

  00032	c3		 ret	 0
?SetState_GALIA@CImperial@@QAEXXZ ENDP			; CImperial::SetState_GALIA
_TEXT	ENDS
PUBLIC	??_C@_0DB@MLMKDAIL@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_ERKANNE@CImperial@@QAEXXZ		; CImperial::SetState_ERKANNE
;	COMDAT ??_C@_0DB@MLMKDAIL@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0DB@MLMKDAIL@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_ERKANNE', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_ERKANNE@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_ERKANNE@CImperial@@QAEXXZ PROC		; CImperial::SetState_ERKANNE, COMDAT
; _this$ = ecx

; 156  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 157  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_ERKANNE", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@MLMKDAIL@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 158  : 	this->m_BattleOfErkanne.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfErkanne@@QAEXH@Z ; CImperialBattleOfErkanne::SetState

; 159  : 	this->m_ImperialData.iState = IMPERIAL_STATE_ERKANNE;

  00027	c7 86 24 af 00
	00 06 00 00 00	 mov	 DWORD PTR [esi+44836], 6
  00031	5e		 pop	 esi

; 160  : }

  00032	c3		 ret	 0
?SetState_ERKANNE@CImperial@@QAEXXZ ENDP		; CImperial::SetState_ERKANNE
_TEXT	ENDS
PUBLIC	??_C@_0DB@MBMLJGFP@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_RAYMOND@CImperial@@QAEXXZ		; CImperial::SetState_RAYMOND
;	COMDAT ??_C@_0DB@MBMLJGFP@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0DB@MBMLJGFP@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_RAYMOND', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_RAYMOND@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_RAYMOND@CImperial@@QAEXXZ PROC		; CImperial::SetState_RAYMOND, COMDAT
; _this$ = ecx

; 163  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 164  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_RAYMOND", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@MBMLJGFP@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 165  : 	this->m_BattleOfRaymond.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfRaymond@@QAEXH@Z ; CImperialBattleOfRaymond::SetState

; 166  : 	this->m_ImperialData.iState = IMPERIAL_STATE_RAYMOND;

  00027	c7 86 24 af 00
	00 07 00 00 00	 mov	 DWORD PTR [esi+44836], 7
  00031	5e		 pop	 esi

; 167  : }

  00032	c3		 ret	 0
?SetState_RAYMOND@CImperial@@QAEXXZ ENDP		; CImperial::SetState_RAYMOND
_TEXT	ENDS
PUBLIC	??_C@_0CP@JEBCMCF@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ ; `string'
PUBLIC	?SetState_GAION@CImperial@@QAEXXZ		; CImperial::SetState_GAION
;	COMDAT ??_C@_0CP@JEBCMCF@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
CONST	SEGMENT
??_C@_0CP@JEBCMCF@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> BATTLE_OF_GAION', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_GAION@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_GAION@CImperial@@QAEXXZ PROC			; CImperial::SetState_GAION, COMDAT
; _this$ = ecx

; 170  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 171  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> BATTLE_OF_GAION", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@JEBCMCF@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5B@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 172  : 	this->m_BattleOfGaion.SetState(1);

  0001a	6a 01		 push	 1
  0001c	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  00022	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState

; 173  : 	this->m_ImperialData.iState = IMPERIAL_STATE_GAION;

  00027	c7 86 24 af 00
	00 08 00 00 00	 mov	 DWORD PTR [esi+44836], 8
  00031	5e		 pop	 esi

; 174  : }

  00032	c3		 ret	 0
?SetState_GAION@CImperial@@QAEXXZ ENDP			; CImperial::SetState_GAION
_TEXT	ENDS
PUBLIC	??_C@_0CF@CAILDEKH@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5E@ ; `string'
PUBLIC	?SetState_ENDED@CImperial@@QAEXXZ		; CImperial::SetState_ENDED
EXTRN	__imp__GetTickCount@0:PROC
;	COMDAT ??_C@_0CF@CAILDEKH@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5E@
CONST	SEGMENT
??_C@_0CF@CAILDEKH@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5E@ DB '['
	DB	' IMPERIAL FORT ] State(%d) -> ENDED', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_ENDED@CImperial@@QAEXXZ
_TEXT	SEGMENT
?SetState_ENDED@CImperial@@QAEXXZ PROC			; CImperial::SetState_ENDED, COMDAT
; _this$ = ecx

; 177  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 178  : 	LogAddC(4, "[ IMPERIAL FORT ] State(%d) -> ENDED", this->m_ImperialData.iState);

  00003	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00009	50		 push	 eax
  0000a	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@CAILDEKH@?$FL?5IMPERIAL?5FORT?5?$FN?5State?$CI?$CFd?$CJ?5?9?$DO?5E@
  0000f	6a 04		 push	 4
  00011	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00017	83 c4 0c	 add	 esp, 12			; 0000000cH

; 179  : 	this->m_ImperialData.iState = IMPERIAL_STATE_ENDED;
; 180  : 	g_ImperialBattleUserMng.ResetAllData();

  0001a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  0001f	c7 86 24 af 00
	00 09 00 00 00	 mov	 DWORD PTR [esi+44836], 9
  00029	e8 00 00 00 00	 call	 ?ResetAllData@CImperialBattleUserMng@@QAEXXZ ; CImperialBattleUserMng::ResetAllData

; 181  : 	this->m_ImperialData.Time = 60000;	

  0002e	c7 86 2c af 00
	00 60 ea 00 00	 mov	 DWORD PTR [esi+44844], 60000 ; 0000ea60H

; 182  : 	this->m_ImperialData.Tick = GetTickCount();

  00038	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0003e	89 86 28 af 00
	00		 mov	 DWORD PTR [esi+44840], eax
  00044	5e		 pop	 esi

; 183  : }

  00045	c3		 ret	 0
?SetState_ENDED@CImperial@@QAEXXZ ENDP			; CImperial::SetState_ENDED
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?GetCurrentDay@CImperial@@QAEHXZ		; CImperial::GetCurrentDay
EXTRN	__imp__GetSystemTime@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?GetCurrentDay@CImperial@@QAEHXZ
_TEXT	SEGMENT
_Time$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
?GetCurrentDay@CImperial@@QAEHXZ PROC			; CImperial::GetCurrentDay, COMDAT
; _this$ = ecx

; 597  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 598  : 	SYSTEMTIME Time;
; 599  : 	GetSystemTime(&Time);

  00010	8d 45 ec	 lea	 eax, DWORD PTR _Time$[ebp]
  00013	50		 push	 eax
  00014	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetSystemTime@4

; 600  : 	if(Time.wDayOfWeek == 0)

  0001a	66 8b 45 f0	 mov	 ax, WORD PTR _Time$[ebp+4]
  0001e	66 85 c0	 test	 ax, ax
  00021	75 13		 jne	 SHORT $LN2@GetCurrent

; 601  : 		return 7;

  00023	b8 07 00 00 00	 mov	 eax, 7

; 602  : 	else return Time.wDayOfWeek;
; 603  : }

  00028	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0002b	33 cd		 xor	 ecx, ebp
  0002d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00032	8b e5		 mov	 esp, ebp
  00034	5d		 pop	 ebp
  00035	c3		 ret	 0
$LN2@GetCurrent:
  00036	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00039	33 cd		 xor	 ecx, ebp
  0003b	0f b7 c0	 movzx	 eax, ax
  0003e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00043	8b e5		 mov	 esp, ebp
  00045	5d		 pop	 ebp
  00046	c3		 ret	 0
?GetCurrentDay@CImperial@@QAEHXZ ENDP			; CImperial::GetCurrentDay
_TEXT	ENDS
PUBLIC	?SetTrapIndex@CImperial@@QAEXFH@Z		; CImperial::SetTrapIndex
; Function compile flags: /Ogtp
;	COMDAT ?SetTrapIndex@CImperial@@QAEXFH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 2
_MapNumber$ = 12					; size = 4
?SetTrapIndex@CImperial@@QAEXFH@Z PROC			; CImperial::SetTrapIndex, COMDAT
; _this$ = ecx

; 606  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 607  : 	switch ( MapNumber )

  00003	8b 45 0c	 mov	 eax, DWORD PTR _MapNumber$[ebp]
  00006	83 c0 bb	 add	 eax, -69		; ffffffbbH
  00009	83 f8 03	 cmp	 eax, 3
  0000c	77 4d		 ja	 SHORT $LN5@SetTrapInd
  0000e	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN9@SetTrapInd[eax*4]
$LN4@SetTrapInd:

; 608  : 	{
; 609  : 		case 69:
; 610  : 			{
; 611  : 				this->m_BattleOfDestler.m_BattleData.TrapIndex = aIndex;

  00015	0f bf 45 08	 movsx	 eax, WORD PTR _aIndex$[ebp]
  00019	89 81 80 af 00
	00		 mov	 DWORD PTR [ecx+44928], eax

; 612  : 				this->m_BattleOfGalia.m_BattleData.TrapIndex = aIndex;

  0001f	89 81 94 b0 00
	00		 mov	 DWORD PTR [ecx+45204], eax

; 630  : 			}
; 631  : 			break;
; 632  : 	}
; 633  : }

  00025	5d		 pop	 ebp
  00026	c2 08 00	 ret	 8
$LN3@SetTrapInd:

; 613  : 			}
; 614  : 			break;
; 615  : 		case 70:
; 616  : 			{
; 617  : 				this->m_BattleOfVermont.m_BattleData.TrapIndex = aIndex;

  00029	0f bf 45 08	 movsx	 eax, WORD PTR _aIndex$[ebp]
  0002d	89 81 dc af 00
	00		 mov	 DWORD PTR [ecx+45020], eax

; 618  : 				this->m_BattleOfErkanne.m_BattleData.TrapIndex = aIndex;

  00033	89 81 f0 b0 00
	00		 mov	 DWORD PTR [ecx+45296], eax

; 630  : 			}
; 631  : 			break;
; 632  : 	}
; 633  : }

  00039	5d		 pop	 ebp
  0003a	c2 08 00	 ret	 8
$LN2@SetTrapInd:

; 619  : 			}
; 620  : 			break;
; 621  : 		case 71:
; 622  : 			{
; 623  : 				this->m_BattleOfKato.m_BattleData.TrapIndex = aIndex;

  0003d	0f bf 45 08	 movsx	 eax, WORD PTR _aIndex$[ebp]
  00041	89 81 38 b0 00
	00		 mov	 DWORD PTR [ecx+45112], eax

; 624  : 				this->m_BattleOfRaymond.m_BattleData.TrapIndex = aIndex;

  00047	89 81 40 b1 00
	00		 mov	 DWORD PTR [ecx+45376], eax

; 630  : 			}
; 631  : 			break;
; 632  : 	}
; 633  : }

  0004d	5d		 pop	 ebp
  0004e	c2 08 00	 ret	 8
$LN1@SetTrapInd:

; 625  : 			}
; 626  : 			break;
; 627  : 		case 72:
; 628  : 			{
; 629  : 				this->m_BattleOfGaion.m_BattleData.TrapIndex = aIndex;

  00051	0f bf 45 08	 movsx	 eax, WORD PTR _aIndex$[ebp]
  00055	89 81 94 b1 00
	00		 mov	 DWORD PTR [ecx+45460], eax
$LN5@SetTrapInd:

; 630  : 			}
; 631  : 			break;
; 632  : 	}
; 633  : }

  0005b	5d		 pop	 ebp
  0005c	c2 08 00	 ret	 8
  0005f	90		 npad	 1
$LN9@SetTrapInd:
  00060	00 00 00 00	 DD	 $LN4@SetTrapInd
  00064	00 00 00 00	 DD	 $LN3@SetTrapInd
  00068	00 00 00 00	 DD	 $LN2@SetTrapInd
  0006c	00 00 00 00	 DD	 $LN1@SetTrapInd
?SetTrapIndex@CImperial@@QAEXFH@Z ENDP			; CImperial::SetTrapIndex
_TEXT	ENDS
PUBLIC	?UsePortalGate@CImperial@@QAE_NPAUOBJECTSTRUCT@@H@Z ; CImperial::UsePortalGate
EXTRN	?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfGaion::EnterPortal
EXTRN	?EnterPortal@CImperialBattleOfRaymond@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfRaymond::EnterPortal
EXTRN	?EnterPortal@CImperialBattleOfKato@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfKato::EnterPortal
EXTRN	?EnterPortal@CImperialBattleOfErkanne@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfErkanne::EnterPortal
EXTRN	?EnterPortal@CImperialBattleOfVermont@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfVermont::EnterPortal
EXTRN	?EnterPortal@CImperialBattleOfGalia@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfGalia::EnterPortal
EXTRN	?EnterPortal@CImperialBattleOfDestler@@QAE_NPAUOBJECTSTRUCT@@@Z:PROC ; CImperialBattleOfDestler::EnterPortal
; Function compile flags: /Ogtp
;	COMDAT ?UsePortalGate@CImperial@@QAE_NPAUOBJECTSTRUCT@@H@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_gt$ = 12						; size = 4
?UsePortalGate@CImperial@@QAE_NPAUOBJECTSTRUCT@@H@Z PROC ; CImperial::UsePortalGate, COMDAT
; _this$ = ecx

; 636  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 637  : 	switch ( gt )

  00003	8b 45 0c	 mov	 eax, DWORD PTR _gt$[ebp]
  00006	05 cd fe ff ff	 add	 eax, -307		; fffffecdH
  0000b	56		 push	 esi
  0000c	8b f1		 mov	 esi, ecx
  0000e	83 f8 15	 cmp	 eax, 21			; 00000015H
  00011	0f 87 ea 00 00
	00		 ja	 $LN1@UsePortalG
  00017	0f b6 80 00 00
	00 00		 movzx	 eax, BYTE PTR $LN19@UsePortalG[eax]
  0001e	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN20@UsePortalG[eax*4]
$LN14@UsePortalG:

; 638  : 	{
; 639  : 		case 307:
; 640  : 		case 308:
; 641  : 		case 309:
; 642  : 		case 310:
; 643  : 		case 311:
; 644  : 			{
; 645  : 				if(this->GetCurrentDay() == 1)

  00025	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  0002a	83 f8 01	 cmp	 eax, 1
  0002d	75 14		 jne	 SHORT $LN13@UsePortalG

; 646  : 				{
; 647  : 					return this->m_BattleOfDestler.EnterPortal(lpObj);		

  0002f	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00032	51		 push	 ecx
  00033	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  00039	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfDestler@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfDestler::EnterPortal
  0003e	5e		 pop	 esi

; 703  : }

  0003f	5d		 pop	 ebp
  00040	c2 08 00	 ret	 8
$LN13@UsePortalG:

; 648  : 				}
; 649  : 				else if(this->GetCurrentDay() == 4)

  00043	8b ce		 mov	 ecx, esi
  00045	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  0004a	83 f8 04	 cmp	 eax, 4
  0004d	0f 85 ae 00 00
	00		 jne	 $LN1@UsePortalG

; 650  : 				{
; 651  : 					return this->m_BattleOfGalia.EnterPortal(lpObj);

  00053	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00056	52		 push	 edx
  00057	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  0005d	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfGalia@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfGalia::EnterPortal
  00062	5e		 pop	 esi

; 703  : }

  00063	5d		 pop	 ebp
  00064	c2 08 00	 ret	 8
$LN10@UsePortalG:

; 652  : 				}
; 653  : 			}
; 654  : 			break;
; 655  : 		case 312:
; 656  : 		case 313:
; 657  : 		case 314:
; 658  : 		case 315:
; 659  : 		case 316:
; 660  : 			{
; 661  : 				if(this->GetCurrentDay() == 2)

  00067	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  0006c	83 f8 02	 cmp	 eax, 2
  0006f	75 14		 jne	 SHORT $LN9@UsePortalG

; 662  : 				{
; 663  : 					return this->m_BattleOfVermont.EnterPortal(lpObj);

  00071	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  00074	50		 push	 eax
  00075	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  0007b	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfVermont@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfVermont::EnterPortal
  00080	5e		 pop	 esi

; 703  : }

  00081	5d		 pop	 ebp
  00082	c2 08 00	 ret	 8
$LN9@UsePortalG:

; 664  : 				}
; 665  : 				else if(this->GetCurrentDay() == 5)

  00085	8b ce		 mov	 ecx, esi
  00087	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  0008c	83 f8 05	 cmp	 eax, 5
  0008f	75 70		 jne	 SHORT $LN1@UsePortalG

; 666  : 				{
; 667  : 					return this->m_BattleOfErkanne.EnterPortal(lpObj);

  00091	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00094	51		 push	 ecx
  00095	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  0009b	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfErkanne@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfErkanne::EnterPortal
  000a0	5e		 pop	 esi

; 703  : }

  000a1	5d		 pop	 ebp
  000a2	c2 08 00	 ret	 8
$LN6@UsePortalG:

; 668  : 				}
; 669  : 			}
; 670  : 			break;
; 671  : 		case 317:
; 672  : 		case 318:
; 673  : 		case 319:
; 674  : 		case 320:
; 675  : 		case 321:
; 676  : 			{
; 677  : 				if(this->GetCurrentDay() == 3)

  000a5	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  000aa	83 f8 03	 cmp	 eax, 3
  000ad	75 14		 jne	 SHORT $LN5@UsePortalG

; 678  : 				{
; 679  : 					return this->m_BattleOfKato.EnterPortal(lpObj);

  000af	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  000b2	52		 push	 edx
  000b3	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  000b9	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfKato@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfKato::EnterPortal
  000be	5e		 pop	 esi

; 703  : }

  000bf	5d		 pop	 ebp
  000c0	c2 08 00	 ret	 8
$LN5@UsePortalG:

; 680  : 				}
; 681  : 				else if(this->GetCurrentDay() == 6)

  000c3	8b ce		 mov	 ecx, esi
  000c5	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  000ca	83 f8 06	 cmp	 eax, 6
  000cd	75 32		 jne	 SHORT $LN1@UsePortalG

; 682  : 				{
; 683  : 					return this->m_BattleOfRaymond.EnterPortal(lpObj);

  000cf	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  000d2	50		 push	 eax
  000d3	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  000d9	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfRaymond@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfRaymond::EnterPortal
  000de	5e		 pop	 esi

; 703  : }

  000df	5d		 pop	 ebp
  000e0	c2 08 00	 ret	 8
$LN2@UsePortalG:

; 684  : 				}
; 685  : 			}
; 686  : 			break;
; 687  : 		case 322:
; 688  : 		case 323:
; 689  : 		case 324:
; 690  : 		case 325:
; 691  : 		case 326:
; 692  : 		case 327:
; 693  : 		case 328:
; 694  : 			{
; 695  : 				if(this->GetCurrentDay() == 7)

  000e3	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  000e8	83 f8 07	 cmp	 eax, 7
  000eb	75 14		 jne	 SHORT $LN1@UsePortalG

; 696  : 				{
; 697  : 					return this->m_BattleOfGaion.EnterPortal(lpObj);

  000ed	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  000f0	51		 push	 ecx
  000f1	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  000f7	e8 00 00 00 00	 call	 ?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfGaion::EnterPortal
  000fc	5e		 pop	 esi

; 703  : }

  000fd	5d		 pop	 ebp
  000fe	c2 08 00	 ret	 8
$LN1@UsePortalG:

; 698  : 				}
; 699  : 			}
; 700  : 			break;
; 701  : 	}
; 702  : 	return false;

  00101	32 c0		 xor	 al, al
  00103	5e		 pop	 esi

; 703  : }

  00104	5d		 pop	 ebp
  00105	c2 08 00	 ret	 8
$LN20@UsePortalG:
  00108	00 00 00 00	 DD	 $LN14@UsePortalG
  0010c	00 00 00 00	 DD	 $LN10@UsePortalG
  00110	00 00 00 00	 DD	 $LN6@UsePortalG
  00114	00 00 00 00	 DD	 $LN2@UsePortalG
$LN19@UsePortalG:
  00118	00		 DB	 0
  00119	00		 DB	 0
  0011a	00		 DB	 0
  0011b	00		 DB	 0
  0011c	00		 DB	 0
  0011d	01		 DB	 1
  0011e	01		 DB	 1
  0011f	01		 DB	 1
  00120	01		 DB	 1
  00121	01		 DB	 1
  00122	02		 DB	 2
  00123	02		 DB	 2
  00124	02		 DB	 2
  00125	02		 DB	 2
  00126	02		 DB	 2
  00127	03		 DB	 3
  00128	03		 DB	 3
  00129	03		 DB	 3
  0012a	03		 DB	 3
  0012b	03		 DB	 3
  0012c	03		 DB	 3
  0012d	03		 DB	 3
?UsePortalGate@CImperial@@QAE_NPAUOBJECTSTRUCT@@H@Z ENDP ; CImperial::UsePortalGate
_TEXT	ENDS
PUBLIC	?GetSpecificState@CImperial@@QAEHXZ		; CImperial::GetSpecificState
; Function compile flags: /Ogtp
;	COMDAT ?GetSpecificState@CImperial@@QAEHXZ
_TEXT	SEGMENT
?GetSpecificState@CImperial@@QAEHXZ PROC		; CImperial::GetSpecificState, COMDAT
; _this$ = ecx

; 707  : 	switch ( this->m_ImperialData.Day )

  00000	8b 81 30 af 00
	00		 mov	 eax, DWORD PTR [ecx+44848]
  00006	48		 dec	 eax
  00007	83 f8 06	 cmp	 eax, 6
  0000a	77 38		 ja	 SHORT $LN8@GetSpecifi
  0000c	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN12@GetSpecifi[eax*4]
$LN7@GetSpecifi:

; 708  : 	{
; 709  : 		case 1:
; 710  : 			return this->m_BattleOfDestler.m_BattleData.CurrentState;

  00013	8b 81 74 af 00
	00		 mov	 eax, DWORD PTR [ecx+44916]

; 726  : }

  00019	c3		 ret	 0
$LN6@GetSpecifi:

; 711  : 		case 2:
; 712  : 			return this->m_BattleOfVermont.m_BattleData.CurrentState;

  0001a	8b 81 d0 af 00
	00		 mov	 eax, DWORD PTR [ecx+45008]

; 726  : }

  00020	c3		 ret	 0
$LN5@GetSpecifi:

; 713  : 		case 3:
; 714  : 			return this->m_BattleOfKato.m_BattleData.CurrentState;

  00021	8b 81 2c b0 00
	00		 mov	 eax, DWORD PTR [ecx+45100]

; 726  : }

  00027	c3		 ret	 0
$LN4@GetSpecifi:

; 715  : 		case 4:
; 716  : 			return this->m_BattleOfGalia.m_BattleData.CurrentState;

  00028	8b 81 88 b0 00
	00		 mov	 eax, DWORD PTR [ecx+45192]

; 726  : }

  0002e	c3		 ret	 0
$LN3@GetSpecifi:

; 717  : 		case 5:
; 718  : 			return this->m_BattleOfErkanne.m_BattleData.CurrentState;

  0002f	8b 81 e4 b0 00
	00		 mov	 eax, DWORD PTR [ecx+45284]

; 726  : }

  00035	c3		 ret	 0
$LN2@GetSpecifi:

; 719  : 		case 6:
; 720  : 			return this->m_BattleOfRaymond.m_BattleData.CurrentState;

  00036	8b 81 34 b1 00
	00		 mov	 eax, DWORD PTR [ecx+45364]

; 726  : }

  0003c	c3		 ret	 0
$LN1@GetSpecifi:

; 721  : 		case 7:
; 722  : 			return this->m_BattleOfGaion.m_BattleData.CurrentState;

  0003d	8b 81 88 b1 00
	00		 mov	 eax, DWORD PTR [ecx+45448]

; 726  : }

  00043	c3		 ret	 0
$LN8@GetSpecifi:

; 723  : 	}
; 724  : 
; 725  : 	return -1;

  00044	83 c8 ff	 or	 eax, -1

; 726  : }

  00047	c3		 ret	 0
$LN12@GetSpecifi:
  00048	00 00 00 00	 DD	 $LN7@GetSpecifi
  0004c	00 00 00 00	 DD	 $LN6@GetSpecifi
  00050	00 00 00 00	 DD	 $LN5@GetSpecifi
  00054	00 00 00 00	 DD	 $LN4@GetSpecifi
  00058	00 00 00 00	 DD	 $LN3@GetSpecifi
  0005c	00 00 00 00	 DD	 $LN2@GetSpecifi
  00060	00 00 00 00	 DD	 $LN1@GetSpecifi
?GetSpecificState@CImperial@@QAEHXZ ENDP		; CImperial::GetSpecificState
_TEXT	ENDS
PUBLIC	??_C@_0EO@CEPDBKBN@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?$FL?$CF@ ; `string'
PUBLIC	??_C@_0BL@JIDIIGMB@You?5have?5reached?5max?5level?$AA@ ; `string'
PUBLIC	??_C@_0FC@MCCJHJPM@Experience?5?3?5Map?$FL?$CFd?$FN?9?$CI?$CFd?0?$CFd?$CJ?5?$FL?$CFs@ ; `string'
PUBLIC	??_C@_0DD@LJLHBLFH@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?3?5@ ; `string'
PUBLIC	?LevelUp@CImperial@@QAEHHH@Z			; CImperial::LevelUp
EXTRN	?gObjCalcMaxLifePower@@YAXH@Z:PROC		; gObjCalcMaxLifePower
EXTRN	?GCLevelUpMsgSend@@YAXHH@Z:PROC			; GCLevelUpMsgSend
EXTRN	?gObjSetBP@@YAXH@Z:PROC				; gObjSetBP
EXTRN	?gObjNextExpCal@@YAXPAUOBJECTSTRUCT@@@Z:PROC	; gObjNextExpCal
EXTRN	?DCInfo@@3Vclassdef@@A:BYTE			; DCInfo
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?gObjSetExpPetItem@@YAXHH@Z:PROC		; gObjSetExpPetItem
EXTRN	?MasterLevelUp@CMasterLevelSystem@@QAEHPAUOBJECTSTRUCT@@AA_J_NH@Z:PROC ; CMasterLevelSystem::MasterLevelUp
EXTRN	?CheckIsMasterLevelCharacter@CMasterLevelSystem@@QAEHPAUOBJECTSTRUCT@@@Z:PROC ; CMasterLevelSystem::CheckIsMasterLevelCharacter
EXTRN	?g_MasterLevelSystem@@3VCMasterLevelSystem@@A:BYTE ; g_MasterLevelSystem
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0EO@CEPDBKBN@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?$FL?$CF@
CONST	SEGMENT
??_C@_0EO@CEPDBKBN@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?$FL?$CF@ DB '['
	DB	' IMPERIAL FORT ][ ExpPrize ] [%s][%s] LevelUp PlusStatQuest C'
	DB	'lear AddStat %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@JIDIIGMB@You?5have?5reached?5max?5level?$AA@
CONST	SEGMENT
??_C@_0BL@JIDIIGMB@You?5have?5reached?5max?5level?$AA@ DB 'You have reach'
	DB	'ed max level', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FC@MCCJHJPM@Experience?5?3?5Map?$FL?$CFd?$FN?9?$CI?$CFd?0?$CFd?$CJ?5?$FL?$CFs@
CONST	SEGMENT
??_C@_0FC@MCCJHJPM@Experience?5?3?5Map?$FL?$CFd?$FN?9?$CI?$CFd?0?$CFd?$CJ?5?$FL?$CFs@ DB 'E'
	DB	'xperience : Map[%d]-(%d,%d) [%s][%s](%d) %u %d MonsterIndex :'
	DB	' %d, EventType : %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@LJLHBLFH@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?3?5@
CONST	SEGMENT
??_C@_0DD@LJLHBLFH@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?3?5@ DB '['
	DB	' IMPERIAL FORT ][ ExpPrize ] : [%s][%s](%d) %u %d', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?LevelUp@CImperial@@QAEHHH@Z
_TEXT	SEGMENT
_iUserIndex$ = 8					; size = 4
_iAddExp$ = 12						; size = 4
?LevelUp@CImperial@@QAEHHH@Z PROC			; CImperial::LevelUp, COMDAT
; _this$ = ecx

; 789  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 790  : 	if ( !OBJMAX_RANGE(iUserIndex ) )

  00004	8b 5d 08	 mov	 ebx, DWORD PTR _iUserIndex$[ebp]
  00007	85 db		 test	 ebx, ebx
  00009	78 0f		 js	 SHORT $LN14@LevelUp
  0000b	33 c0		 xor	 eax, eax
  0000d	81 fb 97 3a 00
	00		 cmp	 ebx, 14999		; 00003a97H
  00013	0f 9e c0	 setle	 al
  00016	85 c0		 test	 eax, eax
  00018	75 07		 jne	 SHORT $LN9@LevelUp
$LN14@LevelUp:

; 791  : 		return 0;

  0001a	33 c0		 xor	 eax, eax
  0001c	5b		 pop	 ebx

; 857  : }

  0001d	5d		 pop	 ebp
  0001e	c2 08 00	 ret	 8
$LN9@LevelUp:

; 792  : 
; 793  : 	int iLEFT_EXP = 0;
; 794  : 
; 795  : 	LogAddTD("[ IMPERIAL FORT ][ ExpPrize ] : [%s][%s](%d) %u %d",
; 796  : 		gObj[iUserIndex].AccountID, gObj[iUserIndex].Name,
; 797  : 		gObj[iUserIndex].Level, gObj[iUserIndex].Experience,
; 798  : 		iAddExp);

  00021	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00026	8b 4d 0c	 mov	 ecx, DWORD PTR _iAddExp$[ebp]
  00029	56		 push	 esi
  0002a	8b f3		 mov	 esi, ebx
  0002c	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00032	8b 94 06 c8 00
	00 00		 mov	 edx, DWORD PTR [esi+eax+200]
  00039	57		 push	 edi
  0003a	51		 push	 ecx
  0003b	0f bf 8c 06 be
	00 00 00	 movsx	 ecx, WORD PTR [esi+eax+190]
  00043	52		 push	 edx
  00044	51		 push	 ecx
  00045	8d 54 06 77	 lea	 edx, DWORD PTR [esi+eax+119]
  00049	52		 push	 edx
  0004a	8d 44 06 6c	 lea	 eax, DWORD PTR [esi+eax+108]
  0004e	50		 push	 eax
  0004f	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@LJLHBLFH@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?3?5@
  00054	33 ff		 xor	 edi, edi
  00056	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 799  : 
; 800  : 	if ( g_MasterLevelSystem.CheckIsMasterLevelCharacter(&gObj[iUserIndex]))

  0005c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00062	8d 14 0e	 lea	 edx, DWORD PTR [esi+ecx]
  00065	83 c4 18	 add	 esp, 24			; 00000018H
  00068	52		 push	 edx
  00069	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_MasterLevelSystem@@3VCMasterLevelSystem@@A ; g_MasterLevelSystem
  0006e	e8 00 00 00 00	 call	 ?CheckIsMasterLevelCharacter@CMasterLevelSystem@@QAEHPAUOBJECTSTRUCT@@@Z ; CMasterLevelSystem::CheckIsMasterLevelCharacter
  00073	85 c0		 test	 eax, eax
  00075	74 1f		 je	 SHORT $LN8@LevelUp

; 801  : 	{
; 802  : 		return g_MasterLevelSystem.MasterLevelUp(&gObj[iUserIndex], (__int64&)iAddExp,1,0);

  00077	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0007d	57		 push	 edi
  0007e	6a 01		 push	 1
  00080	8d 45 0c	 lea	 eax, DWORD PTR _iAddExp$[ebp]
  00083	50		 push	 eax
  00084	56		 push	 esi
  00085	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_MasterLevelSystem@@3VCMasterLevelSystem@@A ; g_MasterLevelSystem
  0008a	e8 00 00 00 00	 call	 ?MasterLevelUp@CMasterLevelSystem@@QAEHPAUOBJECTSTRUCT@@AA_J_NH@Z ; CMasterLevelSystem::MasterLevelUp
  0008f	5f		 pop	 edi
  00090	5e		 pop	 esi
  00091	5b		 pop	 ebx

; 857  : }

  00092	5d		 pop	 ebp
  00093	c2 08 00	 ret	 8
$LN8@LevelUp:

; 803  : 	}
; 804  : 
; 805  : 	LogAddTD("Experience : Map[%d]-(%d,%d) [%s][%s](%d) %u %d MonsterIndex : %d, EventType : %d",
; 806  : 		gObj[iUserIndex].MapNumber, gObj[iUserIndex].X, gObj[iUserIndex].Y,
; 807  : 		gObj[iUserIndex].AccountID, gObj[iUserIndex].Name,
; 808  : 		gObj[iUserIndex].Level, gObj[iUserIndex].Experience, iAddExp, 0, EVENT_TYPE_CRYWOLF);

  00096	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0009b	8b 55 0c	 mov	 edx, DWORD PTR _iAddExp$[ebp]
  0009e	8b 8c 06 c8 00
	00 00		 mov	 ecx, DWORD PTR [esi+eax+200]
  000a5	6a 05		 push	 5
  000a7	6a 00		 push	 0
  000a9	52		 push	 edx
  000aa	0f bf 94 06 be
	00 00 00	 movsx	 edx, WORD PTR [esi+eax+190]
  000b2	51		 push	 ecx
  000b3	52		 push	 edx
  000b4	8d 4c 06 77	 lea	 ecx, DWORD PTR [esi+eax+119]
  000b8	51		 push	 ecx
  000b9	0f bf 8c 06 46
	01 00 00	 movsx	 ecx, WORD PTR [esi+eax+326]
  000c1	8d 54 06 6c	 lea	 edx, DWORD PTR [esi+eax+108]
  000c5	52		 push	 edx
  000c6	0f bf 94 06 44
	01 00 00	 movsx	 edx, WORD PTR [esi+eax+324]
  000ce	0f b6 84 06 49
	01 00 00	 movzx	 eax, BYTE PTR [esi+eax+329]
  000d6	51		 push	 ecx
  000d7	52		 push	 edx
  000d8	50		 push	 eax
  000d9	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@MCCJHJPM@Experience?5?3?5Map?$FL?$CFd?$FN?9?$CI?$CFd?0?$CFd?$CJ?5?$FL?$CFs@
  000de	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 809  : 
; 810  : 	gObjSetExpPetItem(iUserIndex, iAddExp);

  000e4	8b 4d 0c	 mov	 ecx, DWORD PTR _iAddExp$[ebp]
  000e7	51		 push	 ecx
  000e8	53		 push	 ebx
  000e9	e8 00 00 00 00	 call	 ?gObjSetExpPetItem@@YAXHH@Z ; gObjSetExpPetItem

; 811  : 
; 812  : 	if ( gObj[iUserIndex].Level >= MAX_CHAR_LEVEL )

  000ee	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000f4	ba e8 03 00 00	 mov	 edx, 1000		; 000003e8H
  000f9	83 c4 34	 add	 esp, 52			; 00000034H
  000fc	66 39 94 0e be
	00 00 00	 cmp	 WORD PTR [esi+ecx+190], dx
  00104	7c 1c		 jl	 SHORT $LN7@LevelUp

; 813  : 	{
; 814  : 		GCServerMsgStringSend("You have reached max level", gObj[iUserIndex].m_Index, 1);

  00106	8b 04 0e	 mov	 eax, DWORD PTR [esi+ecx]
  00109	6a 01		 push	 1
  0010b	50		 push	 eax
  0010c	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@JIDIIGMB@You?5have?5reached?5max?5level?$AA@
  00111	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  00116	83 c4 0c	 add	 esp, 12			; 0000000cH
  00119	5f		 pop	 edi
  0011a	5e		 pop	 esi

; 815  : 		return 0;

  0011b	33 c0		 xor	 eax, eax
  0011d	5b		 pop	 ebx

; 857  : }

  0011e	5d		 pop	 ebp
  0011f	c2 08 00	 ret	 8
$LN7@LevelUp:

; 816  : 	}
; 817  : 
; 818  : 	if ( (gObj[iUserIndex].Experience + iAddExp) < gObj[iUserIndex].NextExp )

  00122	8b 9c 0e c8 00
	00 00		 mov	 ebx, DWORD PTR [esi+ecx+200]
  00129	8b 55 0c	 mov	 edx, DWORD PTR _iAddExp$[ebp]
  0012c	8d 84 0e c8 00
	00 00		 lea	 eax, DWORD PTR [esi+ecx+200]
  00133	8d 8c 0e cc 00
	00 00		 lea	 ecx, DWORD PTR [esi+ecx+204]
  0013a	03 da		 add	 ebx, edx
  0013c	3b 19		 cmp	 ebx, DWORD PTR [ecx]
  0013e	73 0b		 jae	 SHORT $LN6@LevelUp

; 819  : 	{
; 820  : 		gObj[iUserIndex].Experience += iAddExp;

  00140	01 10		 add	 DWORD PTR [eax], edx

; 854  : 	}
; 855  : 
; 856  : 	return iLEFT_EXP;

  00142	8b c7		 mov	 eax, edi
  00144	5f		 pop	 edi
  00145	5e		 pop	 esi
  00146	5b		 pop	 ebx

; 857  : }

  00147	5d		 pop	 ebp
  00148	c2 08 00	 ret	 8
$LN6@LevelUp:

; 821  : 	}
; 822  : 	else
; 823  : 	{
; 824  : 		iLEFT_EXP = gObj[iUserIndex].Experience + iAddExp - gObj[iUserIndex].NextExp;

  0014b	8b 09		 mov	 ecx, DWORD PTR [ecx]
  0014d	8b 38		 mov	 edi, DWORD PTR [eax]

; 825  : 		gObj[iUserIndex].Experience = gObj[iUserIndex].NextExp;

  0014f	89 08		 mov	 DWORD PTR [eax], ecx

; 826  : 		gObj[iUserIndex].Level++;

  00151	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00156	66 ff 84 06 be
	00 00 00	 inc	 WORD PTR [esi+eax+190]
  0015e	2b f9		 sub	 edi, ecx

; 827  : 
; 828  : 		if ( gObj[iUserIndex].Class == CLASS_DARKLORD || gObj[iUserIndex].Class == CLASS_MAGUMSA )

  00160	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00166	0f b7 84 0e b8
	00 00 00	 movzx	 eax, WORD PTR [esi+ecx+184]
  0016e	03 fa		 add	 edi, edx
  00170	83 f8 04	 cmp	 eax, 4
  00173	74 16		 je	 SHORT $LN3@LevelUp
  00175	83 f8 03	 cmp	 eax, 3
  00178	74 11		 je	 SHORT $LN3@LevelUp

; 831  : 		}
; 832  : 		else
; 833  : 		{
; 834  : 			gObj[iUserIndex].LevelUpPoint += 5;

  0017a	83 84 0e c0 00
	00 00 05	 add	 DWORD PTR [esi+ecx+192], 5
  00182	8d 84 0e c0 00
	00 00		 lea	 eax, DWORD PTR [esi+ecx+192]
  00189	eb 0f		 jmp	 SHORT $LN2@LevelUp
$LN3@LevelUp:

; 829  : 		{
; 830  : 			gObj[iUserIndex].LevelUpPoint += 7;

  0018b	83 84 0e c0 00
	00 00 07	 add	 DWORD PTR [esi+ecx+192], 7
  00193	8d 84 0e c0 00
	00 00		 lea	 eax, DWORD PTR [esi+ecx+192]
$LN2@LevelUp:

; 835  : 		}
; 836  : 
; 837  : 		if ( gObj[iUserIndex].PlusStatQuestClear != false )

  0019a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001a0	80 bc 0e a5 00
	00 00 00	 cmp	 BYTE PTR [esi+ecx+165], 0
  001a8	74 39		 je	 SHORT $LN1@LevelUp

; 838  : 		{
; 839  : 			gObj[iUserIndex].LevelUpPoint++;

  001aa	ff 84 0e c0 00
	00 00		 inc	 DWORD PTR [esi+ecx+192]
  001b1	8d 84 0e c0 00
	00 00		 lea	 eax, DWORD PTR [esi+ecx+192]

; 840  : 
; 841  : 			LogAddTD("[ IMPERIAL FORT ][ ExpPrize ] [%s][%s] LevelUp PlusStatQuest Clear AddStat %d",
; 842  : 				gObj[iUserIndex].AccountID, gObj[iUserIndex].Name,
; 843  : 				gObj[iUserIndex].LevelUpPoint);

  001b8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001bd	8b 8c 06 c0 00
	00 00		 mov	 ecx, DWORD PTR [esi+eax+192]
  001c4	51		 push	 ecx
  001c5	8d 54 06 77	 lea	 edx, DWORD PTR [esi+eax+119]
  001c9	52		 push	 edx
  001ca	8d 44 06 6c	 lea	 eax, DWORD PTR [esi+eax+108]
  001ce	50		 push	 eax
  001cf	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@CEPDBKBN@?$FL?5IMPERIAL?5FORT?5?$FN?$FL?5ExpPrize?5?$FN?5?$FL?$CF@
  001d4	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  001da	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001e0	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@LevelUp:

; 844  : 		}
; 845  : 
; 846  : 		gObj[iUserIndex].MaxLife += DCInfo.DefClass[gObj[iUserIndex].Class].LevelLife;

  001e3	8d 84 0e 00 01
	00 00		 lea	 eax, DWORD PTR [esi+ecx+256]
  001ea	0f b7 8c 0e b8
	00 00 00	 movzx	 ecx, WORD PTR [esi+ecx+184]
  001f2	69 c9 c8 0b 00
	00		 imul	 ecx, 3016		; 00000bc8H
  001f8	d9 81 10 00 00
	00		 fld	 DWORD PTR ?DCInfo@@3Vclassdef@@A[ecx+16]
  001fe	d8 00		 fadd	 DWORD PTR [eax]
  00200	d9 18		 fstp	 DWORD PTR [eax]

; 847  : 		gObj[iUserIndex].MaxMana += DCInfo.DefClass[gObj[iUserIndex].Class].LevelMana;

  00202	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00208	0f b7 94 0e b8
	00 00 00	 movzx	 edx, WORD PTR [esi+ecx+184]
  00210	69 d2 c8 0b 00
	00		 imul	 edx, 3016		; 00000bc8H
  00216	8d 84 0e 14 01
	00 00		 lea	 eax, DWORD PTR [esi+ecx+276]
  0021d	d9 82 1c 00 00
	00		 fld	 DWORD PTR ?DCInfo@@3Vclassdef@@A[edx+28]
  00223	d8 00		 fadd	 DWORD PTR [eax]
  00225	d9 18		 fstp	 DWORD PTR [eax]

; 848  : 		gObj[iUserIndex].Life = gObj[iUserIndex].MaxLife;

  00227	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0022c	d9 84 06 00 01
	00 00		 fld	 DWORD PTR [esi+eax+256]
  00233	d9 9c 06 fc 00
	00 00		 fstp	 DWORD PTR [esi+eax+252]

; 849  : 		gObj[iUserIndex].Mana = gObj[iUserIndex].MaxMana;

  0023a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0023f	d9 84 06 14 01
	00 00		 fld	 DWORD PTR [esi+eax+276]
  00246	d9 9c 06 10 01
	00 00		 fstp	 DWORD PTR [esi+eax+272]

; 850  : 		gObjNextExpCal(&gObj[iUserIndex]);

  0024d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00252	8d 0c 06	 lea	 ecx, DWORD PTR [esi+eax]
  00255	51		 push	 ecx
  00256	e8 00 00 00 00	 call	 ?gObjNextExpCal@@YAXPAUOBJECTSTRUCT@@@Z ; gObjNextExpCal

; 851  : 		gObjSetBP(gObj[iUserIndex].m_Index);

  0025b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00261	8b 04 16	 mov	 eax, DWORD PTR [esi+edx]
  00264	50		 push	 eax
  00265	e8 00 00 00 00	 call	 ?gObjSetBP@@YAXH@Z	; gObjSetBP

; 852  : 		GCLevelUpMsgSend(gObj[iUserIndex].m_Index, 1);

  0026a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00270	8b 14 0e	 mov	 edx, DWORD PTR [esi+ecx]
  00273	6a 01		 push	 1
  00275	52		 push	 edx
  00276	e8 00 00 00 00	 call	 ?GCLevelUpMsgSend@@YAXHH@Z ; GCLevelUpMsgSend

; 853  : 		gObjCalcMaxLifePower(gObj[iUserIndex].m_Index);

  0027b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00280	8b 0c 06	 mov	 ecx, DWORD PTR [esi+eax]
  00283	51		 push	 ecx
  00284	e8 00 00 00 00	 call	 ?gObjCalcMaxLifePower@@YAXH@Z ; gObjCalcMaxLifePower
  00289	83 c4 14	 add	 esp, 20			; 00000014H

; 854  : 	}
; 855  : 
; 856  : 	return iLEFT_EXP;

  0028c	8b c7		 mov	 eax, edi
  0028e	5f		 pop	 edi
  0028f	5e		 pop	 esi
  00290	5b		 pop	 ebx

; 857  : }

  00291	5d		 pop	 ebp
  00292	c2 08 00	 ret	 8
?LevelUp@CImperial@@QAEHHH@Z ENDP			; CImperial::LevelUp
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?SendFailMessage@CImperial@@QAEXH@Z		; CImperial::SendFailMessage
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
; Function compile flags: /Ogtp
;	COMDAT ?SendFailMessage@CImperial@@QAEXH@Z
_TEXT	SEGMENT
_pMsg$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?SendFailMessage@CImperial@@QAEXH@Z PROC		; CImperial::SendFailMessage, COMDAT
; _this$ = ecx

; 860  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 861  : 	PMSG_FORT_END_MESSAGE pMsg = {0};
; 862  : 	pMsg.Type = 0;
; 863  : 	DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00010	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00013	33 c0		 xor	 eax, eax
  00015	89 45 ed	 mov	 DWORD PTR _pMsg$[ebp+1], eax
  00018	88 45 ec	 mov	 BYTE PTR _pMsg$[ebp], al
  0001b	89 45 f1	 mov	 DWORD PTR _pMsg$[ebp+5], eax
  0001e	89 45 f5	 mov	 DWORD PTR _pMsg$[ebp+9], eax
  00021	66 89 45 f9	 mov	 WORD PTR _pMsg$[ebp+13], ax
  00025	88 45 fb	 mov	 BYTE PTR _pMsg$[ebp+15], al
  00028	88 45 f0	 mov	 BYTE PTR _pMsg$[ebp+4], al
  0002b	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0002f	50		 push	 eax
  00030	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00033	51		 push	 ecx
  00034	52		 push	 edx
  00035	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 864  : }

  0003a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0003d	33 cd		 xor	 ecx, ebp
  0003f	83 c4 0c	 add	 esp, 12			; 0000000cH
  00042	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00047	8b e5		 mov	 esp, ebp
  00049	5d		 pop	 ebp
  0004a	c2 04 00	 ret	 4
?SendFailMessage@CImperial@@QAEXH@Z ENDP		; CImperial::SendFailMessage
_TEXT	ENDS
PUBLIC	?GateAttack@CImperial@@QAE_NH@Z			; CImperial::GateAttack
; Function compile flags: /Ogtp
;	COMDAT ?GateAttack@CImperial@@QAE_NH@Z
_TEXT	SEGMENT
_Class$ = 8						; size = 4
?GateAttack@CImperial@@QAE_NH@Z PROC			; CImperial::GateAttack, COMDAT
; _this$ = ecx

; 867  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 868  : 	if( Class == 524 || 
; 869  : 	    Class == 525 || 
; 870  : 		Class == 526 || 
; 871  : 		Class == 527 ||
; 872  : 		Class == 528 )

  00003	8b 45 08	 mov	 eax, DWORD PTR _Class$[ebp]
  00006	56		 push	 esi
  00007	3d 0c 02 00 00	 cmp	 eax, 524		; 0000020cH
  0000c	74 20		 je	 SHORT $LN14@GateAttack
  0000e	3d 0d 02 00 00	 cmp	 eax, 525		; 0000020dH
  00013	74 19		 je	 SHORT $LN14@GateAttack
  00015	3d 0e 02 00 00	 cmp	 eax, 526		; 0000020eH
  0001a	74 12		 je	 SHORT $LN14@GateAttack
  0001c	3d 0f 02 00 00	 cmp	 eax, 527		; 0000020fH
  00021	74 0b		 je	 SHORT $LN14@GateAttack
  00023	3d 10 02 00 00	 cmp	 eax, 528		; 00000210H
  00028	0f 85 94 00 00
	00		 jne	 $LN1@GateAttack
$LN14@GateAttack:

; 873  : 	{
; 874  : 			int iPhaze = 0;
; 875  : 			int iCurrent = 0;
; 876  : 			switch ( this->m_ImperialData.Day )

  0002e	8b b1 30 af 00
	00		 mov	 esi, DWORD PTR [ecx+44848]
  00034	4e		 dec	 esi
  00035	33 d2		 xor	 edx, edx
  00037	33 c0		 xor	 eax, eax
  00039	83 fe 06	 cmp	 esi, 6
  0003c	0f 87 80 00 00
	00		 ja	 $LN1@GateAttack
  00042	ff 24 b5 00 00
	00 00		 jmp	 DWORD PTR $LN24@GateAttack[esi*4]
$LN11@GateAttack:

; 877  : 			{
; 878  : 				case 1:
; 879  : 					{
; 880  : 						iPhaze = this->m_BattleOfDestler.m_BattleData.PhazeStep;

  00049	8b 91 84 af 00
	00		 mov	 edx, DWORD PTR [ecx+44932]

; 881  : 						iCurrent = this->m_BattleOfDestler.m_BattleData.CurrentState;

  0004f	8b 81 74 af 00
	00		 mov	 eax, DWORD PTR [ecx+44916]

; 882  : 					}
; 883  : 					break;

  00055	eb 52		 jmp	 SHORT $LN12@GateAttack
$LN10@GateAttack:

; 884  : 				case 2:
; 885  : 					{
; 886  : 						iPhaze = this->m_BattleOfVermont.m_BattleData.PhazeStep;

  00057	8b 91 e0 af 00
	00		 mov	 edx, DWORD PTR [ecx+45024]

; 887  : 						iCurrent = this->m_BattleOfVermont.m_BattleData.CurrentState;

  0005d	8b 81 d0 af 00
	00		 mov	 eax, DWORD PTR [ecx+45008]

; 888  : 					}
; 889  : 					break;

  00063	eb 44		 jmp	 SHORT $LN12@GateAttack
$LN9@GateAttack:

; 890  : 				case 3:
; 891  : 					{
; 892  : 					iPhaze = this->m_BattleOfKato.m_BattleData.PhazeStep;

  00065	8b 91 3c b0 00
	00		 mov	 edx, DWORD PTR [ecx+45116]

; 893  : 					iCurrent = this->m_BattleOfKato.m_BattleData.CurrentState;

  0006b	8b 81 2c b0 00
	00		 mov	 eax, DWORD PTR [ecx+45100]

; 894  : 					}
; 895  : 					break;

  00071	eb 36		 jmp	 SHORT $LN12@GateAttack
$LN8@GateAttack:

; 896  : 				case 4:
; 897  : 					{
; 898  : 					iPhaze = this->m_BattleOfGalia.m_BattleData.PhazeStep;

  00073	8b 91 98 b0 00
	00		 mov	 edx, DWORD PTR [ecx+45208]

; 899  : 					iCurrent = this->m_BattleOfGalia.m_BattleData.CurrentState;

  00079	8b 81 88 b0 00
	00		 mov	 eax, DWORD PTR [ecx+45192]

; 900  : 					}
; 901  : 					break;

  0007f	eb 28		 jmp	 SHORT $LN12@GateAttack
$LN7@GateAttack:

; 902  : 				case 5:
; 903  : 					{
; 904  : 					iPhaze = this->m_BattleOfErkanne.m_BattleData.PhazeStep;

  00081	8b 91 f4 b0 00
	00		 mov	 edx, DWORD PTR [ecx+45300]

; 905  : 					iCurrent = this->m_BattleOfErkanne.m_BattleData.CurrentState;

  00087	8b 81 e4 b0 00
	00		 mov	 eax, DWORD PTR [ecx+45284]

; 906  : 					}
; 907  : 					break;

  0008d	eb 1a		 jmp	 SHORT $LN12@GateAttack
$LN6@GateAttack:

; 908  : 				case 6:
; 909  : 					{
; 910  : 					iPhaze = this->m_BattleOfRaymond.m_BattleData.PhazeStep;

  0008f	8b 91 44 b1 00
	00		 mov	 edx, DWORD PTR [ecx+45380]

; 911  : 					iCurrent = this->m_BattleOfRaymond.m_BattleData.CurrentState;

  00095	8b 81 34 b1 00
	00		 mov	 eax, DWORD PTR [ecx+45364]

; 912  : 					}
; 913  : 					break;

  0009b	eb 0c		 jmp	 SHORT $LN12@GateAttack
$LN5@GateAttack:

; 914  : 				case 7:
; 915  : 					{
; 916  : 					iPhaze = this->m_BattleOfGaion.m_BattleData.PhazeStep;

  0009d	8b 91 98 b1 00
	00		 mov	 edx, DWORD PTR [ecx+45464]

; 917  : 					iCurrent = this->m_BattleOfGaion.m_BattleData.CurrentState;

  000a3	8b 81 88 b1 00
	00		 mov	 eax, DWORD PTR [ecx+45448]
$LN12@GateAttack:

; 918  : 					}
; 919  : 					break;
; 920  : 			}
; 921  : 			if(iCurrent == 1 || iCurrent == 3 || iCurrent == 5 || iCurrent == 7 || iPhaze == 1) return false;

  000a9	83 f8 01	 cmp	 eax, 1
  000ac	74 1b		 je	 SHORT $LN3@GateAttack
  000ae	83 f8 03	 cmp	 eax, 3
  000b1	74 16		 je	 SHORT $LN3@GateAttack
$LN23@GateAttack:
  000b3	83 f8 05	 cmp	 eax, 5
  000b6	74 11		 je	 SHORT $LN3@GateAttack
  000b8	83 f8 07	 cmp	 eax, 7
  000bb	74 0c		 je	 SHORT $LN3@GateAttack
  000bd	83 fa 01	 cmp	 edx, 1
  000c0	74 07		 je	 SHORT $LN3@GateAttack
$LN1@GateAttack:

; 922  : 			if(iPhaze == 0 || iPhaze == 2 || iPhaze == 3) return true;

  000c2	b0 01		 mov	 al, 1
  000c4	5e		 pop	 esi

; 923  : 		}
; 924  : 	return true;
; 925  : }

  000c5	5d		 pop	 ebp
  000c6	c2 04 00	 ret	 4
$LN3@GateAttack:

; 918  : 					}
; 919  : 					break;
; 920  : 			}
; 921  : 			if(iCurrent == 1 || iCurrent == 3 || iCurrent == 5 || iCurrent == 7 || iPhaze == 1) return false;

  000c9	32 c0		 xor	 al, al
  000cb	5e		 pop	 esi

; 923  : 		}
; 924  : 	return true;
; 925  : }

  000cc	5d		 pop	 ebp
  000cd	c2 04 00	 ret	 4
$LN24@GateAttack:
  000d0	00 00 00 00	 DD	 $LN11@GateAttack
  000d4	00 00 00 00	 DD	 $LN10@GateAttack
  000d8	00 00 00 00	 DD	 $LN9@GateAttack
  000dc	00 00 00 00	 DD	 $LN8@GateAttack
  000e0	00 00 00 00	 DD	 $LN7@GateAttack
  000e4	00 00 00 00	 DD	 $LN6@GateAttack
  000e8	00 00 00 00	 DD	 $LN5@GateAttack
?GateAttack@CImperial@@QAE_NH@Z ENDP			; CImperial::GateAttack
_TEXT	ENDS
PUBLIC	??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0EF@HFJNMHEI@?$FLMossMerchant?$FN?5Info?5file?5Load?5Fa@ ; `string'
PUBLIC	??_C@_0P@BPENEPNJ@CRITICAL?5ERROR?$AA@		; `string'
PUBLIC	??_C@_0CA@LLHPDGKO@?4?4?2Data?2Events?2ImperialFort?4ini?$AA@ ; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?LoadRewardItem@CImperial@@QAEXXZ		; CImperial::LoadRewardItem
EXTRN	_fclose:PROC
EXTRN	_sscanf:PROC
EXTRN	?Zt_IsBadFileLine@@YA_NPADAAH@Z:PROC		; Zt_IsBadFileLine
EXTRN	_fgets:PROC
EXTRN	_feof:PROC
EXTRN	__imp__ExitProcess@4:PROC
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	_fopen:PROC
;	COMDAT ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@ DB '%'
	DB	'd %d %d %d %d %d %d %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EF@HFJNMHEI@?$FLMossMerchant?$FN?5Info?5file?5Load?5Fa@
CONST	SEGMENT
??_C@_0EF@HFJNMHEI@?$FLMossMerchant?$FN?5Info?5file?5Load?5Fa@ DB '[MossM'
	DB	'erchant] Info file Load Fail [..\Data\Events\ImperialFort.ini'
	DB	']', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@BPENEPNJ@CRITICAL?5ERROR?$AA@
CONST	SEGMENT
??_C@_0P@BPENEPNJ@CRITICAL?5ERROR?$AA@ DB 'CRITICAL ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@LLHPDGKO@?4?4?2Data?2Events?2ImperialFort?4ini?$AA@
CONST	SEGMENT
??_C@_0CA@LLHPDGKO@?4?4?2Data?2Events?2ImperialFort?4ini?$AA@ DB '..\Data'
	DB	'\Events\ImperialFort.ini', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?LoadRewardItem@CImperial@@QAEXXZ
_TEXT	SEGMENT
_Flag$ = -300						; size = 4
_file$ = -296						; size = 4
_n$212942 = -292					; size = 32
_n$212938 = -292					; size = 32
_n$212934 = -292					; size = 32
_n$212930 = -292					; size = 32
_n$212926 = -292					; size = 32
_n$212922 = -292					; size = 32
_n$212917 = -292					; size = 32
_Buff$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
?LoadRewardItem@CImperial@@QAEXXZ PROC			; CImperial::LoadRewardItem, COMDAT
; _this$ = ecx

; 928  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 2c 01 00
	00		 sub	 esp, 300		; 0000012cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b f1		 mov	 esi, ecx

; 929  : 	for(int i=0;i<7;i++)

  00017	ba 07 00 00 00	 mov	 edx, 7
  0001c	57		 push	 edi

; 930  : 	{
; 931  : 		for(int j=0;j<200;j++)

  0001d	8d 46 08	 lea	 eax, DWORD PTR [esi+8]
  00020	33 ff		 xor	 edi, edi
  00022	8d 5a fa	 lea	 ebx, DWORD PTR [edx-6]
$LL23@LoadReward:
  00025	b9 c8 00 00 00	 mov	 ecx, 200		; 000000c8H
  0002a	8d 9b 00 00 00
	00		 npad	 6
$LL20@LoadReward:

; 932  : 		{
; 933  : 			this->iItem[i][j].Type = 0;

  00030	89 78 fc	 mov	 DWORD PTR [eax-4], edi

; 934  : 			this->iItem[i][j].Index = 0;

  00033	89 38		 mov	 DWORD PTR [eax], edi

; 935  : 			this->iItem[i][j].Level = 0;

  00035	89 78 04	 mov	 DWORD PTR [eax+4], edi

; 936  : 			this->iItem[i][j].Skill = 0;

  00038	89 78 08	 mov	 DWORD PTR [eax+8], edi

; 937  : 			this->iItem[i][j].Luck = 0;

  0003b	89 78 0c	 mov	 DWORD PTR [eax+12], edi

; 938  : 			this->iItem[i][j].Opt = 0;

  0003e	89 78 10	 mov	 DWORD PTR [eax+16], edi

; 939  : 			this->iItem[i][j].Exl = 0;

  00041	89 78 14	 mov	 DWORD PTR [eax+20], edi

; 940  : 			this->iItem[i][j].Anc = 0;

  00044	89 78 18	 mov	 DWORD PTR [eax+24], edi
  00047	83 c0 20	 add	 eax, 32			; 00000020H
  0004a	2b cb		 sub	 ecx, ebx
  0004c	75 e2		 jne	 SHORT $LL20@LoadReward

; 929  : 	for(int i=0;i<7;i++)

  0004e	2b d3		 sub	 edx, ebx
  00050	75 d3		 jne	 SHORT $LL23@LoadReward

; 941  : 		}
; 942  : 	}
; 943  : 	FILE * file = fopen(IMPERIAL_REWARD_DIR,"r");

  00052	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@LLHPDGKO@?4?4?2Data?2Events?2ImperialFort?4ini?$AA@
  0005c	e8 00 00 00 00	 call	 _fopen
  00061	83 c4 08	 add	 esp, 8
  00064	89 85 d8 fe ff
	ff		 mov	 DWORD PTR _file$[ebp], eax

; 944  : 
; 945  : 	if (file == NULL)

  0006a	3b c7		 cmp	 eax, edi
  0006c	75 19		 jne	 SHORT $LN17@LoadReward

; 946  : 	{
; 947  : 		MessageBoxA(0,"[MossMerchant] Info file Load Fail [..\\Data\\Events\\ImperialFort.ini]","CRITICAL ERROR",0);

  0006e	57		 push	 edi
  0006f	68 00 00 00 00	 push	 OFFSET ??_C@_0P@BPENEPNJ@CRITICAL?5ERROR?$AA@
  00074	68 00 00 00 00	 push	 OFFSET ??_C@_0EF@HFJNMHEI@?$FLMossMerchant?$FN?5Info?5file?5Load?5Fa@
  00079	57		 push	 edi
  0007a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__MessageBoxA@16

; 948  : 		ExitProcess(1);

  00080	53		 push	 ebx
  00081	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__ExitProcess@4
$LN34@LoadReward:
$LN17@LoadReward:

; 949  : 		return;
; 950  : 	}
; 951  : 
; 952  : 	char Buff[256];
; 953  : 	int Flag = 0;
; 954  : 	memset(this->iCount, 0, sizeof(this->iCount));

  00087	89 be 04 af 00
	00		 mov	 DWORD PTR [esi+44804], edi
  0008d	89 be 08 af 00
	00		 mov	 DWORD PTR [esi+44808], edi
  00093	89 be 0c af 00
	00		 mov	 DWORD PTR [esi+44812], edi
  00099	89 be 10 af 00
	00		 mov	 DWORD PTR [esi+44816], edi
  0009f	89 be 14 af 00
	00		 mov	 DWORD PTR [esi+44820], edi
  000a5	89 be 18 af 00
	00		 mov	 DWORD PTR [esi+44824], edi

; 955  : 	while (!feof(file))

  000ab	50		 push	 eax
  000ac	89 bd d4 fe ff
	ff		 mov	 DWORD PTR _Flag$[ebp], edi
  000b2	89 be 1c af 00
	00		 mov	 DWORD PTR [esi+44828], edi
  000b8	e8 00 00 00 00	 call	 _feof
  000bd	83 c4 04	 add	 esp, 4
  000c0	85 c0		 test	 eax, eax
  000c2	0f 85 b4 07 00
	00		 jne	 $LN32@LoadReward
  000c8	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL16@LoadReward:

; 956  : 	{
; 957  : 		fgets(Buff,256,file);

  000d0	8b bd d8 fe ff
	ff		 mov	 edi, DWORD PTR _file$[ebp]
  000d6	57		 push	 edi
  000d7	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  000dd	68 00 01 00 00	 push	 256			; 00000100H
  000e2	50		 push	 eax
  000e3	e8 00 00 00 00	 call	 _fgets

; 958  : 		if(Zt_IsBadFileLine(Buff, Flag)) continue;

  000e8	8d 8d d4 fe ff
	ff		 lea	 ecx, DWORD PTR _Flag$[ebp]
  000ee	51		 push	 ecx
  000ef	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  000f5	52		 push	 edx
  000f6	e8 00 00 00 00	 call	 ?Zt_IsBadFileLine@@YA_NPADAAH@Z ; Zt_IsBadFileLine
  000fb	83 c4 14	 add	 esp, 20			; 00000014H
  000fe	84 c0		 test	 al, al
  00100	0f 85 63 07 00
	00		 jne	 $LN1@LoadReward

; 959  : 		if (Flag == 1)

  00106	8b 85 d4 fe ff
	ff		 mov	 eax, DWORD PTR _Flag$[ebp]
  0010c	3b c3		 cmp	 eax, ebx
  0010e	0f 85 f0 00 00
	00		 jne	 $LN13@LoadReward

; 960  : 		{
; 961  : 			int n[8];
; 962  : 			int a = Flag-1;
; 963  : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  00114	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _n$212917[ebp+28]
  0011a	50		 push	 eax
  0011b	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212917[ebp+24]
  00121	51		 push	 ecx
  00122	8d 95 f0 fe ff
	ff		 lea	 edx, DWORD PTR _n$212917[ebp+20]
  00128	52		 push	 edx
  00129	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _n$212917[ebp+16]
  0012f	50		 push	 eax
  00130	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212917[ebp+12]
  00136	51		 push	 ecx
  00137	8d 95 e4 fe ff
	ff		 lea	 edx, DWORD PTR _n$212917[ebp+8]
  0013d	52		 push	 edx
  0013e	8d 85 e0 fe ff
	ff		 lea	 eax, DWORD PTR _n$212917[ebp+4]
  00144	50		 push	 eax
  00145	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _n$212917[ebp]
  0014b	51		 push	 ecx
  0014c	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  00152	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00157	52		 push	 edx
  00158	e8 00 00 00 00	 call	 _sscanf

; 964  : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  0015d	8b 86 04 af 00
	00		 mov	 eax, DWORD PTR [esi+44804]
  00163	8b 8d dc fe ff
	ff		 mov	 ecx, DWORD PTR _n$212917[ebp]
  00169	c1 e0 05	 shl	 eax, 5
  0016c	89 4c 30 04	 mov	 DWORD PTR [eax+esi+4], ecx

; 965  : 			this->iItem[a][this->iCount[a]].Index = n[1];

  00170	8b 96 04 af 00
	00		 mov	 edx, DWORD PTR [esi+44804]
  00176	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _n$212917[ebp+4]
  0017c	c1 e2 05	 shl	 edx, 5
  0017f	89 44 32 08	 mov	 DWORD PTR [edx+esi+8], eax

; 966  : 			this->iItem[a][this->iCount[a]].Level = n[2];

  00183	8b 8e 04 af 00
	00		 mov	 ecx, DWORD PTR [esi+44804]
  00189	8b 95 e4 fe ff
	ff		 mov	 edx, DWORD PTR _n$212917[ebp+8]
  0018f	c1 e1 05	 shl	 ecx, 5
  00192	89 54 31 0c	 mov	 DWORD PTR [ecx+esi+12], edx

; 967  : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  00196	8b 86 04 af 00
	00		 mov	 eax, DWORD PTR [esi+44804]
  0019c	8b 8d e8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212917[ebp+12]
  001a2	c1 e0 05	 shl	 eax, 5
  001a5	89 4c 30 10	 mov	 DWORD PTR [eax+esi+16], ecx

; 968  : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  001a9	8b 96 04 af 00
	00		 mov	 edx, DWORD PTR [esi+44804]
  001af	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _n$212917[ebp+16]
  001b5	c1 e2 05	 shl	 edx, 5
  001b8	89 44 32 14	 mov	 DWORD PTR [edx+esi+20], eax

; 969  : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  001bc	8b 8e 04 af 00
	00		 mov	 ecx, DWORD PTR [esi+44804]
  001c2	8b 95 f0 fe ff
	ff		 mov	 edx, DWORD PTR _n$212917[ebp+20]
  001c8	c1 e1 05	 shl	 ecx, 5
  001cb	89 54 31 18	 mov	 DWORD PTR [ecx+esi+24], edx

; 970  : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  001cf	8b 86 04 af 00
	00		 mov	 eax, DWORD PTR [esi+44804]
  001d5	8b 8d f4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212917[ebp+24]
  001db	c1 e0 05	 shl	 eax, 5
  001de	89 4c 30 1c	 mov	 DWORD PTR [eax+esi+28], ecx

; 971  : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  001e2	8b 96 04 af 00
	00		 mov	 edx, DWORD PTR [esi+44804]
  001e8	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _n$212917[ebp+28]
  001ee	03 d3		 add	 edx, ebx
  001f0	c1 e2 05	 shl	 edx, 5
  001f3	83 c4 28	 add	 esp, 40			; 00000028H
  001f6	89 04 32	 mov	 DWORD PTR [edx+esi], eax

; 972  : 			this->iCount[a]++;

  001f9	01 9e 04 af 00
	00		 add	 DWORD PTR [esi+44804], ebx
  001ff	e9 65 06 00 00	 jmp	 $LN1@LoadReward
$LN13@LoadReward:

; 973  : 		}
; 974  : 		else if (Flag == 2)

  00204	83 f8 02	 cmp	 eax, 2
  00207	0f 85 08 01 00
	00		 jne	 $LN11@LoadReward

; 975  : 		{
; 976  : 			int n[8];
; 977  : 			int a = Flag-1;
; 978  : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  0020d	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212922[ebp+28]
  00213	51		 push	 ecx
  00214	8d 95 f4 fe ff
	ff		 lea	 edx, DWORD PTR _n$212922[ebp+24]
  0021a	52		 push	 edx
  0021b	8d 85 f0 fe ff
	ff		 lea	 eax, DWORD PTR _n$212922[ebp+20]
  00221	50		 push	 eax
  00222	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _n$212922[ebp+16]
  00228	51		 push	 ecx
  00229	8d 95 e8 fe ff
	ff		 lea	 edx, DWORD PTR _n$212922[ebp+12]
  0022f	52		 push	 edx
  00230	8d 85 e4 fe ff
	ff		 lea	 eax, DWORD PTR _n$212922[ebp+8]
  00236	50		 push	 eax
  00237	8d 8d e0 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212922[ebp+4]
  0023d	51		 push	 ecx
  0023e	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _n$212922[ebp]
  00244	52		 push	 edx
  00245	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  0024b	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00250	50		 push	 eax
  00251	e8 00 00 00 00	 call	 _sscanf

; 979  : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  00256	8b 8e 08 af 00
	00		 mov	 ecx, DWORD PTR [esi+44808]
  0025c	8b 95 dc fe ff
	ff		 mov	 edx, DWORD PTR _n$212922[ebp]
  00262	c1 e1 05	 shl	 ecx, 5
  00265	89 94 31 04 19
	00 00		 mov	 DWORD PTR [ecx+esi+6404], edx

; 980  : 			this->iItem[a][this->iCount[a]].Index = n[1];

  0026c	8b 86 08 af 00
	00		 mov	 eax, DWORD PTR [esi+44808]
  00272	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212922[ebp+4]
  00278	c1 e0 05	 shl	 eax, 5
  0027b	89 8c 30 08 19
	00 00		 mov	 DWORD PTR [eax+esi+6408], ecx

; 981  : 			this->iItem[a][this->iCount[a]].Level = n[2];

  00282	8b 96 08 af 00
	00		 mov	 edx, DWORD PTR [esi+44808]
  00288	8b 85 e4 fe ff
	ff		 mov	 eax, DWORD PTR _n$212922[ebp+8]
  0028e	c1 e2 05	 shl	 edx, 5
  00291	89 84 32 0c 19
	00 00		 mov	 DWORD PTR [edx+esi+6412], eax

; 982  : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  00298	8b 8e 08 af 00
	00		 mov	 ecx, DWORD PTR [esi+44808]
  0029e	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR _n$212922[ebp+12]
  002a4	c1 e1 05	 shl	 ecx, 5
  002a7	89 94 31 10 19
	00 00		 mov	 DWORD PTR [ecx+esi+6416], edx

; 983  : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  002ae	8b 86 08 af 00
	00		 mov	 eax, DWORD PTR [esi+44808]
  002b4	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _n$212922[ebp+16]
  002ba	c1 e0 05	 shl	 eax, 5
  002bd	89 8c 30 14 19
	00 00		 mov	 DWORD PTR [eax+esi+6420], ecx

; 984  : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  002c4	8b 96 08 af 00
	00		 mov	 edx, DWORD PTR [esi+44808]
  002ca	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _n$212922[ebp+20]
  002d0	c1 e2 05	 shl	 edx, 5
  002d3	89 84 32 18 19
	00 00		 mov	 DWORD PTR [edx+esi+6424], eax

; 985  : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  002da	8b 8e 08 af 00
	00		 mov	 ecx, DWORD PTR [esi+44808]
  002e0	8b 95 f4 fe ff
	ff		 mov	 edx, DWORD PTR _n$212922[ebp+24]
  002e6	c1 e1 05	 shl	 ecx, 5
  002e9	89 94 31 1c 19
	00 00		 mov	 DWORD PTR [ecx+esi+6428], edx

; 986  : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  002f0	8b 86 08 af 00
	00		 mov	 eax, DWORD PTR [esi+44808]
  002f6	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212922[ebp+28]
  002fc	05 c9 00 00 00	 add	 eax, 201		; 000000c9H
  00301	c1 e0 05	 shl	 eax, 5
  00304	83 c4 28	 add	 esp, 40			; 00000028H
  00307	89 0c 30	 mov	 DWORD PTR [eax+esi], ecx

; 987  : 			this->iCount[a]++;

  0030a	01 9e 08 af 00
	00		 add	 DWORD PTR [esi+44808], ebx
  00310	e9 54 05 00 00	 jmp	 $LN1@LoadReward
$LN11@LoadReward:

; 988  : 		}
; 989  : 		else if (Flag == 3)

  00315	83 f8 03	 cmp	 eax, 3
  00318	0f 85 09 01 00
	00		 jne	 $LN9@LoadReward

; 990  : 		{
; 991  : 			int n[8];
; 992  : 			int a = Flag-1;
; 993  : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  0031e	8d 95 f8 fe ff
	ff		 lea	 edx, DWORD PTR _n$212926[ebp+28]
  00324	52		 push	 edx
  00325	8d 85 f4 fe ff
	ff		 lea	 eax, DWORD PTR _n$212926[ebp+24]
  0032b	50		 push	 eax
  0032c	8d 8d f0 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212926[ebp+20]
  00332	51		 push	 ecx
  00333	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _n$212926[ebp+16]
  00339	52		 push	 edx
  0033a	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _n$212926[ebp+12]
  00340	50		 push	 eax
  00341	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212926[ebp+8]
  00347	51		 push	 ecx
  00348	8d 95 e0 fe ff
	ff		 lea	 edx, DWORD PTR _n$212926[ebp+4]
  0034e	52		 push	 edx
  0034f	8d 85 dc fe ff
	ff		 lea	 eax, DWORD PTR _n$212926[ebp]
  00355	50		 push	 eax
  00356	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  0035c	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00361	51		 push	 ecx
  00362	e8 00 00 00 00	 call	 _sscanf

; 994  : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  00367	8b 96 0c af 00
	00		 mov	 edx, DWORD PTR [esi+44812]
  0036d	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR _n$212926[ebp]
  00373	c1 e2 05	 shl	 edx, 5
  00376	89 84 32 04 32
	00 00		 mov	 DWORD PTR [edx+esi+12804], eax

; 995  : 			this->iItem[a][this->iCount[a]].Index = n[1];

  0037d	8b 8e 0c af 00
	00		 mov	 ecx, DWORD PTR [esi+44812]
  00383	8b 95 e0 fe ff
	ff		 mov	 edx, DWORD PTR _n$212926[ebp+4]
  00389	c1 e1 05	 shl	 ecx, 5
  0038c	89 94 31 08 32
	00 00		 mov	 DWORD PTR [ecx+esi+12808], edx

; 996  : 			this->iItem[a][this->iCount[a]].Level = n[2];

  00393	8b 86 0c af 00
	00		 mov	 eax, DWORD PTR [esi+44812]
  00399	8b 8d e4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212926[ebp+8]
  0039f	c1 e0 05	 shl	 eax, 5
  003a2	89 8c 30 0c 32
	00 00		 mov	 DWORD PTR [eax+esi+12812], ecx

; 997  : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  003a9	8b 96 0c af 00
	00		 mov	 edx, DWORD PTR [esi+44812]
  003af	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$212926[ebp+12]
  003b5	c1 e2 05	 shl	 edx, 5
  003b8	89 84 32 10 32
	00 00		 mov	 DWORD PTR [edx+esi+12816], eax

; 998  : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  003bf	8b 8e 0c af 00
	00		 mov	 ecx, DWORD PTR [esi+44812]
  003c5	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _n$212926[ebp+16]
  003cb	c1 e1 05	 shl	 ecx, 5
  003ce	89 94 31 14 32
	00 00		 mov	 DWORD PTR [ecx+esi+12820], edx

; 999  : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  003d5	8b 86 0c af 00
	00		 mov	 eax, DWORD PTR [esi+44812]
  003db	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212926[ebp+20]
  003e1	c1 e0 05	 shl	 eax, 5
  003e4	89 8c 30 18 32
	00 00		 mov	 DWORD PTR [eax+esi+12824], ecx

; 1000 : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  003eb	8b 96 0c af 00
	00		 mov	 edx, DWORD PTR [esi+44812]
  003f1	8b 85 f4 fe ff
	ff		 mov	 eax, DWORD PTR _n$212926[ebp+24]
  003f7	c1 e2 05	 shl	 edx, 5
  003fa	89 84 32 1c 32
	00 00		 mov	 DWORD PTR [edx+esi+12828], eax

; 1001 : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  00401	8b 8e 0c af 00
	00		 mov	 ecx, DWORD PTR [esi+44812]
  00407	8b 95 f8 fe ff
	ff		 mov	 edx, DWORD PTR _n$212926[ebp+28]
  0040d	81 c1 91 01 00
	00		 add	 ecx, 401		; 00000191H
  00413	c1 e1 05	 shl	 ecx, 5
  00416	83 c4 28	 add	 esp, 40			; 00000028H
  00419	89 14 31	 mov	 DWORD PTR [ecx+esi], edx

; 1002 : 			this->iCount[a]++;

  0041c	01 9e 0c af 00
	00		 add	 DWORD PTR [esi+44812], ebx
  00422	e9 42 04 00 00	 jmp	 $LN1@LoadReward
$LN9@LoadReward:

; 1003 : 		}
; 1004 : 		else if (Flag == 4)

  00427	83 f8 04	 cmp	 eax, 4
  0042a	0f 85 09 01 00
	00		 jne	 $LN7@LoadReward

; 1005 : 		{
; 1006 : 			int n[8];
; 1007 : 			int a = Flag-1;
; 1008 : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  00430	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _n$212930[ebp+28]
  00436	50		 push	 eax
  00437	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212930[ebp+24]
  0043d	51		 push	 ecx
  0043e	8d 95 f0 fe ff
	ff		 lea	 edx, DWORD PTR _n$212930[ebp+20]
  00444	52		 push	 edx
  00445	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _n$212930[ebp+16]
  0044b	50		 push	 eax
  0044c	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212930[ebp+12]
  00452	51		 push	 ecx
  00453	8d 95 e4 fe ff
	ff		 lea	 edx, DWORD PTR _n$212930[ebp+8]
  00459	52		 push	 edx
  0045a	8d 85 e0 fe ff
	ff		 lea	 eax, DWORD PTR _n$212930[ebp+4]
  00460	50		 push	 eax
  00461	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _n$212930[ebp]
  00467	51		 push	 ecx
  00468	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  0046e	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00473	52		 push	 edx
  00474	e8 00 00 00 00	 call	 _sscanf

; 1009 : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  00479	8b 86 10 af 00
	00		 mov	 eax, DWORD PTR [esi+44816]
  0047f	8b 8d dc fe ff
	ff		 mov	 ecx, DWORD PTR _n$212930[ebp]
  00485	c1 e0 05	 shl	 eax, 5
  00488	89 8c 30 04 4b
	00 00		 mov	 DWORD PTR [eax+esi+19204], ecx

; 1010 : 			this->iItem[a][this->iCount[a]].Index = n[1];

  0048f	8b 96 10 af 00
	00		 mov	 edx, DWORD PTR [esi+44816]
  00495	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _n$212930[ebp+4]
  0049b	c1 e2 05	 shl	 edx, 5
  0049e	89 84 32 08 4b
	00 00		 mov	 DWORD PTR [edx+esi+19208], eax

; 1011 : 			this->iItem[a][this->iCount[a]].Level = n[2];

  004a5	8b 8e 10 af 00
	00		 mov	 ecx, DWORD PTR [esi+44816]
  004ab	8b 95 e4 fe ff
	ff		 mov	 edx, DWORD PTR _n$212930[ebp+8]
  004b1	c1 e1 05	 shl	 ecx, 5
  004b4	89 94 31 0c 4b
	00 00		 mov	 DWORD PTR [ecx+esi+19212], edx

; 1012 : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  004bb	8b 86 10 af 00
	00		 mov	 eax, DWORD PTR [esi+44816]
  004c1	8b 8d e8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212930[ebp+12]
  004c7	c1 e0 05	 shl	 eax, 5
  004ca	89 8c 30 10 4b
	00 00		 mov	 DWORD PTR [eax+esi+19216], ecx

; 1013 : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  004d1	8b 96 10 af 00
	00		 mov	 edx, DWORD PTR [esi+44816]
  004d7	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _n$212930[ebp+16]
  004dd	c1 e2 05	 shl	 edx, 5
  004e0	89 84 32 14 4b
	00 00		 mov	 DWORD PTR [edx+esi+19220], eax

; 1014 : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  004e7	8b 8e 10 af 00
	00		 mov	 ecx, DWORD PTR [esi+44816]
  004ed	8b 95 f0 fe ff
	ff		 mov	 edx, DWORD PTR _n$212930[ebp+20]
  004f3	c1 e1 05	 shl	 ecx, 5
  004f6	89 94 31 18 4b
	00 00		 mov	 DWORD PTR [ecx+esi+19224], edx

; 1015 : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  004fd	8b 86 10 af 00
	00		 mov	 eax, DWORD PTR [esi+44816]
  00503	8b 8d f4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212930[ebp+24]
  00509	c1 e0 05	 shl	 eax, 5
  0050c	89 8c 30 1c 4b
	00 00		 mov	 DWORD PTR [eax+esi+19228], ecx

; 1016 : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  00513	8b 96 10 af 00
	00		 mov	 edx, DWORD PTR [esi+44816]
  00519	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _n$212930[ebp+28]
  0051f	81 c2 59 02 00
	00		 add	 edx, 601		; 00000259H
  00525	c1 e2 05	 shl	 edx, 5
  00528	83 c4 28	 add	 esp, 40			; 00000028H
  0052b	89 04 32	 mov	 DWORD PTR [edx+esi], eax

; 1017 : 			this->iCount[a]++;

  0052e	01 9e 10 af 00
	00		 add	 DWORD PTR [esi+44816], ebx
  00534	e9 30 03 00 00	 jmp	 $LN1@LoadReward
$LN7@LoadReward:

; 1018 : 		}
; 1019 : 		else if (Flag == 5)

  00539	83 f8 05	 cmp	 eax, 5
  0053c	0f 85 08 01 00
	00		 jne	 $LN5@LoadReward

; 1020 : 		{
; 1021 : 			int n[8];
; 1022 : 			int a = Flag-1;
; 1023 : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  00542	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212934[ebp+28]
  00548	51		 push	 ecx
  00549	8d 95 f4 fe ff
	ff		 lea	 edx, DWORD PTR _n$212934[ebp+24]
  0054f	52		 push	 edx
  00550	8d 85 f0 fe ff
	ff		 lea	 eax, DWORD PTR _n$212934[ebp+20]
  00556	50		 push	 eax
  00557	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _n$212934[ebp+16]
  0055d	51		 push	 ecx
  0055e	8d 95 e8 fe ff
	ff		 lea	 edx, DWORD PTR _n$212934[ebp+12]
  00564	52		 push	 edx
  00565	8d 85 e4 fe ff
	ff		 lea	 eax, DWORD PTR _n$212934[ebp+8]
  0056b	50		 push	 eax
  0056c	8d 8d e0 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212934[ebp+4]
  00572	51		 push	 ecx
  00573	8d 95 dc fe ff
	ff		 lea	 edx, DWORD PTR _n$212934[ebp]
  00579	52		 push	 edx
  0057a	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  00580	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00585	50		 push	 eax
  00586	e8 00 00 00 00	 call	 _sscanf

; 1024 : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  0058b	8b 8e 14 af 00
	00		 mov	 ecx, DWORD PTR [esi+44820]
  00591	8b 95 dc fe ff
	ff		 mov	 edx, DWORD PTR _n$212934[ebp]
  00597	c1 e1 05	 shl	 ecx, 5
  0059a	89 94 31 04 64
	00 00		 mov	 DWORD PTR [ecx+esi+25604], edx

; 1025 : 			this->iItem[a][this->iCount[a]].Index = n[1];

  005a1	8b 86 14 af 00
	00		 mov	 eax, DWORD PTR [esi+44820]
  005a7	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212934[ebp+4]
  005ad	c1 e0 05	 shl	 eax, 5
  005b0	89 8c 30 08 64
	00 00		 mov	 DWORD PTR [eax+esi+25608], ecx

; 1026 : 			this->iItem[a][this->iCount[a]].Level = n[2];

  005b7	8b 96 14 af 00
	00		 mov	 edx, DWORD PTR [esi+44820]
  005bd	8b 85 e4 fe ff
	ff		 mov	 eax, DWORD PTR _n$212934[ebp+8]
  005c3	c1 e2 05	 shl	 edx, 5
  005c6	89 84 32 0c 64
	00 00		 mov	 DWORD PTR [edx+esi+25612], eax

; 1027 : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  005cd	8b 8e 14 af 00
	00		 mov	 ecx, DWORD PTR [esi+44820]
  005d3	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR _n$212934[ebp+12]
  005d9	c1 e1 05	 shl	 ecx, 5
  005dc	89 94 31 10 64
	00 00		 mov	 DWORD PTR [ecx+esi+25616], edx

; 1028 : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  005e3	8b 86 14 af 00
	00		 mov	 eax, DWORD PTR [esi+44820]
  005e9	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _n$212934[ebp+16]
  005ef	c1 e0 05	 shl	 eax, 5
  005f2	89 8c 30 14 64
	00 00		 mov	 DWORD PTR [eax+esi+25620], ecx

; 1029 : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  005f9	8b 96 14 af 00
	00		 mov	 edx, DWORD PTR [esi+44820]
  005ff	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _n$212934[ebp+20]
  00605	c1 e2 05	 shl	 edx, 5
  00608	89 84 32 18 64
	00 00		 mov	 DWORD PTR [edx+esi+25624], eax

; 1030 : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  0060f	8b 8e 14 af 00
	00		 mov	 ecx, DWORD PTR [esi+44820]
  00615	8b 95 f4 fe ff
	ff		 mov	 edx, DWORD PTR _n$212934[ebp+24]
  0061b	c1 e1 05	 shl	 ecx, 5
  0061e	89 94 31 1c 64
	00 00		 mov	 DWORD PTR [ecx+esi+25628], edx

; 1031 : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  00625	8b 86 14 af 00
	00		 mov	 eax, DWORD PTR [esi+44820]
  0062b	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212934[ebp+28]
  00631	05 21 03 00 00	 add	 eax, 801		; 00000321H
  00636	c1 e0 05	 shl	 eax, 5
  00639	83 c4 28	 add	 esp, 40			; 00000028H
  0063c	89 0c 30	 mov	 DWORD PTR [eax+esi], ecx

; 1032 : 			this->iCount[a]++;

  0063f	01 9e 14 af 00
	00		 add	 DWORD PTR [esi+44820], ebx
  00645	e9 1f 02 00 00	 jmp	 $LN1@LoadReward
$LN5@LoadReward:

; 1033 : 		}
; 1034 : 		else if (Flag == 6)

  0064a	83 f8 06	 cmp	 eax, 6
  0064d	0f 85 09 01 00
	00		 jne	 $LN3@LoadReward

; 1035 : 		{
; 1036 : 			int n[8];
; 1037 : 			int a = Flag-1;
; 1038 : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  00653	8d 95 f8 fe ff
	ff		 lea	 edx, DWORD PTR _n$212938[ebp+28]
  00659	52		 push	 edx
  0065a	8d 85 f4 fe ff
	ff		 lea	 eax, DWORD PTR _n$212938[ebp+24]
  00660	50		 push	 eax
  00661	8d 8d f0 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212938[ebp+20]
  00667	51		 push	 ecx
  00668	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _n$212938[ebp+16]
  0066e	52		 push	 edx
  0066f	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _n$212938[ebp+12]
  00675	50		 push	 eax
  00676	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212938[ebp+8]
  0067c	51		 push	 ecx
  0067d	8d 95 e0 fe ff
	ff		 lea	 edx, DWORD PTR _n$212938[ebp+4]
  00683	52		 push	 edx
  00684	8d 85 dc fe ff
	ff		 lea	 eax, DWORD PTR _n$212938[ebp]
  0068a	50		 push	 eax
  0068b	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  00691	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00696	51		 push	 ecx
  00697	e8 00 00 00 00	 call	 _sscanf

; 1039 : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  0069c	8b 96 18 af 00
	00		 mov	 edx, DWORD PTR [esi+44824]
  006a2	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR _n$212938[ebp]
  006a8	c1 e2 05	 shl	 edx, 5
  006ab	89 84 32 04 7d
	00 00		 mov	 DWORD PTR [edx+esi+32004], eax

; 1040 : 			this->iItem[a][this->iCount[a]].Index = n[1];

  006b2	8b 8e 18 af 00
	00		 mov	 ecx, DWORD PTR [esi+44824]
  006b8	8b 95 e0 fe ff
	ff		 mov	 edx, DWORD PTR _n$212938[ebp+4]
  006be	c1 e1 05	 shl	 ecx, 5
  006c1	89 94 31 08 7d
	00 00		 mov	 DWORD PTR [ecx+esi+32008], edx

; 1041 : 			this->iItem[a][this->iCount[a]].Level = n[2];

  006c8	8b 86 18 af 00
	00		 mov	 eax, DWORD PTR [esi+44824]
  006ce	8b 8d e4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212938[ebp+8]
  006d4	c1 e0 05	 shl	 eax, 5
  006d7	89 8c 30 0c 7d
	00 00		 mov	 DWORD PTR [eax+esi+32012], ecx

; 1042 : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  006de	8b 96 18 af 00
	00		 mov	 edx, DWORD PTR [esi+44824]
  006e4	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$212938[ebp+12]
  006ea	c1 e2 05	 shl	 edx, 5
  006ed	89 84 32 10 7d
	00 00		 mov	 DWORD PTR [edx+esi+32016], eax

; 1043 : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  006f4	8b 8e 18 af 00
	00		 mov	 ecx, DWORD PTR [esi+44824]
  006fa	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _n$212938[ebp+16]
  00700	c1 e1 05	 shl	 ecx, 5
  00703	89 94 31 14 7d
	00 00		 mov	 DWORD PTR [ecx+esi+32020], edx

; 1044 : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  0070a	8b 86 18 af 00
	00		 mov	 eax, DWORD PTR [esi+44824]
  00710	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212938[ebp+20]
  00716	c1 e0 05	 shl	 eax, 5
  00719	89 8c 30 18 7d
	00 00		 mov	 DWORD PTR [eax+esi+32024], ecx

; 1045 : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  00720	8b 96 18 af 00
	00		 mov	 edx, DWORD PTR [esi+44824]
  00726	8b 85 f4 fe ff
	ff		 mov	 eax, DWORD PTR _n$212938[ebp+24]
  0072c	c1 e2 05	 shl	 edx, 5
  0072f	89 84 32 1c 7d
	00 00		 mov	 DWORD PTR [edx+esi+32028], eax

; 1046 : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  00736	8b 8e 18 af 00
	00		 mov	 ecx, DWORD PTR [esi+44824]
  0073c	8b 95 f8 fe ff
	ff		 mov	 edx, DWORD PTR _n$212938[ebp+28]
  00742	81 c1 e9 03 00
	00		 add	 ecx, 1001		; 000003e9H
  00748	c1 e1 05	 shl	 ecx, 5
  0074b	83 c4 28	 add	 esp, 40			; 00000028H
  0074e	89 14 31	 mov	 DWORD PTR [ecx+esi], edx

; 1047 : 			this->iCount[a]++;

  00751	01 9e 18 af 00
	00		 add	 DWORD PTR [esi+44824], ebx
  00757	e9 0d 01 00 00	 jmp	 $LN1@LoadReward
$LN3@LoadReward:

; 1048 : 		}
; 1049 : 		else if (Flag == 7)

  0075c	83 f8 07	 cmp	 eax, 7
  0075f	0f 85 04 01 00
	00		 jne	 $LN1@LoadReward

; 1050 : 		{
; 1051 : 			int n[8];
; 1052 : 			int a = Flag-1;
; 1053 : 			sscanf(Buff,"%d %d %d %d %d %d %d %d", &n[0], &n[1], &n[2], &n[3], &n[4], &n[5], &n[6], &n[7]);

  00765	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _n$212942[ebp+28]
  0076b	50		 push	 eax
  0076c	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212942[ebp+24]
  00772	51		 push	 ecx
  00773	8d 95 f0 fe ff
	ff		 lea	 edx, DWORD PTR _n$212942[ebp+20]
  00779	52		 push	 edx
  0077a	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _n$212942[ebp+16]
  00780	50		 push	 eax
  00781	8d 8d e8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$212942[ebp+12]
  00787	51		 push	 ecx
  00788	8d 95 e4 fe ff
	ff		 lea	 edx, DWORD PTR _n$212942[ebp+8]
  0078e	52		 push	 edx
  0078f	8d 85 e0 fe ff
	ff		 lea	 eax, DWORD PTR _n$212942[ebp+4]
  00795	50		 push	 eax
  00796	8d 8d dc fe ff
	ff		 lea	 ecx, DWORD PTR _n$212942[ebp]
  0079c	51		 push	 ecx
  0079d	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  007a3	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  007a8	52		 push	 edx
  007a9	e8 00 00 00 00	 call	 _sscanf

; 1054 : 			this->iItem[a][this->iCount[a]].Type	 = n[0];

  007ae	8b 86 1c af 00
	00		 mov	 eax, DWORD PTR [esi+44828]
  007b4	8b 8d dc fe ff
	ff		 mov	 ecx, DWORD PTR _n$212942[ebp]
  007ba	c1 e0 05	 shl	 eax, 5
  007bd	89 8c 30 04 96
	00 00		 mov	 DWORD PTR [eax+esi+38404], ecx

; 1055 : 			this->iItem[a][this->iCount[a]].Index = n[1];

  007c4	8b 96 1c af 00
	00		 mov	 edx, DWORD PTR [esi+44828]
  007ca	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _n$212942[ebp+4]
  007d0	c1 e2 05	 shl	 edx, 5
  007d3	89 84 32 08 96
	00 00		 mov	 DWORD PTR [edx+esi+38408], eax

; 1056 : 			this->iItem[a][this->iCount[a]].Level = n[2];

  007da	8b 8e 1c af 00
	00		 mov	 ecx, DWORD PTR [esi+44828]
  007e0	8b 95 e4 fe ff
	ff		 mov	 edx, DWORD PTR _n$212942[ebp+8]
  007e6	c1 e1 05	 shl	 ecx, 5
  007e9	89 94 31 0c 96
	00 00		 mov	 DWORD PTR [ecx+esi+38412], edx

; 1057 : 			this->iItem[a][this->iCount[a]].Skill = n[3];

  007f0	8b 86 1c af 00
	00		 mov	 eax, DWORD PTR [esi+44828]
  007f6	8b 8d e8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212942[ebp+12]
  007fc	c1 e0 05	 shl	 eax, 5
  007ff	89 8c 30 10 96
	00 00		 mov	 DWORD PTR [eax+esi+38416], ecx

; 1058 : 			this->iItem[a][this->iCount[a]].Luck = n[4];

  00806	8b 96 1c af 00
	00		 mov	 edx, DWORD PTR [esi+44828]
  0080c	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _n$212942[ebp+16]
  00812	c1 e2 05	 shl	 edx, 5
  00815	89 84 32 14 96
	00 00		 mov	 DWORD PTR [edx+esi+38420], eax

; 1059 : 			this->iItem[a][this->iCount[a]].Opt = n[5];

  0081c	8b 8e 1c af 00
	00		 mov	 ecx, DWORD PTR [esi+44828]
  00822	8b 95 f0 fe ff
	ff		 mov	 edx, DWORD PTR _n$212942[ebp+20]
  00828	c1 e1 05	 shl	 ecx, 5
  0082b	89 94 31 18 96
	00 00		 mov	 DWORD PTR [ecx+esi+38424], edx

; 1060 : 			this->iItem[a][this->iCount[a]].Exl = n[6];

  00832	8b 86 1c af 00
	00		 mov	 eax, DWORD PTR [esi+44828]
  00838	8b 8d f4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$212942[ebp+24]
  0083e	c1 e0 05	 shl	 eax, 5
  00841	89 8c 30 1c 96
	00 00		 mov	 DWORD PTR [eax+esi+38428], ecx

; 1061 : 			this->iItem[a][this->iCount[a]].Anc = n[7];

  00848	8b 96 1c af 00
	00		 mov	 edx, DWORD PTR [esi+44828]
  0084e	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _n$212942[ebp+28]
  00854	81 c2 b1 04 00
	00		 add	 edx, 1201		; 000004b1H
  0085a	c1 e2 05	 shl	 edx, 5
  0085d	83 c4 28	 add	 esp, 40			; 00000028H
  00860	89 04 32	 mov	 DWORD PTR [edx+esi], eax

; 1062 : 			this->iCount[a]++;

  00863	01 9e 1c af 00
	00		 add	 DWORD PTR [esi+44828], ebx
$LN1@LoadReward:

; 955  : 	while (!feof(file))

  00869	57		 push	 edi
  0086a	e8 00 00 00 00	 call	 _feof
  0086f	83 c4 04	 add	 esp, 4
  00872	85 c0		 test	 eax, eax
  00874	0f 84 56 f8 ff
	ff		 je	 $LL16@LoadReward
  0087a	eb 06		 jmp	 SHORT $LN15@LoadReward
$LN32@LoadReward:
  0087c	8b bd d8 fe ff
	ff		 mov	 edi, DWORD PTR _file$[ebp]
$LN15@LoadReward:

; 1063 : 		}
; 1064 : 	}
; 1065 : 
; 1066 : 	fclose(file);

  00882	57		 push	 edi
  00883	e8 00 00 00 00	 call	 _fclose

; 1067 : }

  00888	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0088b	83 c4 04	 add	 esp, 4
  0088e	5f		 pop	 edi
  0088f	5e		 pop	 esi
  00890	33 cd		 xor	 ecx, ebp
  00892	5b		 pop	 ebx
  00893	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00898	8b e5		 mov	 esp, ebp
  0089a	5d		 pop	 ebp
  0089b	c3		 ret	 0
$LN33@LoadReward:
?LoadRewardItem@CImperial@@QAEXXZ ENDP			; CImperial::LoadRewardItem
_TEXT	ENDS
PUBLIC	?ImperialReward@CImperial@@QAE_NPAUOBJECTSTRUCT@@0@Z ; CImperial::ImperialReward
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z:PROC	; ItemSerialCreateSend
EXTRN	?GenExcOpt@@YAHH@Z:PROC				; GenExcOpt
EXTRN	_rand:PROC
; Function compile flags: /Ogtp
;	COMDAT ?ImperialReward@CImperial@@QAE_NPAUOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_Anc$212953 = 12					; size = 4
_lpMobObj$ = 12						; size = 4
?ImperialReward@CImperial@@QAE_NPAUOBJECTSTRUCT@@0@Z PROC ; CImperial::ImperialReward, COMDAT
; _this$ = ecx

; 1070 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	56		 push	 esi
  00005	57		 push	 edi

; 1071 : 	if ( lpMobObj->Class == 505 )	//Jerry Boss

  00006	8b 7d 0c	 mov	 edi, DWORD PTR _lpMobObj$[ebp]
  00009	0f b7 87 b8 00
	00 00		 movzx	 eax, WORD PTR [edi+184]
  00010	8b f1		 mov	 esi, ecx
  00012	b9 f9 01 00 00	 mov	 ecx, 505		; 000001f9H
  00017	66 3b c1	 cmp	 ax, cx
  0001a	0f 85 8d 00 00
	00		 jne	 $LN37@ImperialRe

; 1072 : 	{
; 1073 : 		int k = 0;
; 1074 : 		int n = rand()%iCount[k];

  00020	e8 00 00 00 00	 call	 _rand
  00025	99		 cdq
  00026	f7 be 04 af 00
	00		 idiv	 DWORD PTR [esi+44804]
$LN45@ImperialRe:

; 1075 : 		int Exe = 0;

  0002c	33 c0		 xor	 eax, eax
$LN46@ImperialRe:

; 1076 : 		int Anc = 0;
; 1077 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  0002e	c1 e2 05	 shl	 edx, 5
  00031	8b 5c 16 04	 mov	 ebx, DWORD PTR [esi+edx+4]
  00035	03 f2		 add	 esi, edx
  00037	c1 e3 09	 shl	 ebx, 9
  0003a	03 5e 08	 add	 ebx, DWORD PTR [esi+8]
  0003d	89 45 0c	 mov	 DWORD PTR _Anc$212953[ebp], eax

; 1078 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);

  00040	39 46 1c	 cmp	 DWORD PTR [esi+28], eax
  00043	7e 0c		 jle	 SHORT $LN36@ImperialRe
  00045	8b 56 1c	 mov	 edx, DWORD PTR [esi+28]
  00048	52		 push	 edx
  00049	e8 00 00 00 00	 call	 ?GenExcOpt@@YAHH@Z	; GenExcOpt
  0004e	83 c4 04	 add	 esp, 4
$LN36@ImperialRe:

; 1079 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;

  00051	8b 4e 20	 mov	 ecx, DWORD PTR [esi+32]
  00054	83 f9 05	 cmp	 ecx, 5
  00057	74 05		 je	 SHORT $LN34@ImperialRe
  00059	83 f9 0a	 cmp	 ecx, 10			; 0000000aH
  0005c	75 03		 jne	 SHORT $LN35@ImperialRe
$LN34@ImperialRe:
  0005e	89 4d 0c	 mov	 DWORD PTR _Anc$212953[ebp], ecx
$LN35@ImperialRe:

; 1080 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1081 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);

  00061	8b 55 0c	 mov	 edx, DWORD PTR _Anc$212953[ebp]
  00064	8b 4d 08	 mov	 ecx, DWORD PTR _lpObj$[ebp]
  00067	8b 09		 mov	 ecx, DWORD PTR [ecx]
  00069	52		 push	 edx
  0006a	0f b6 56 14	 movzx	 edx, BYTE PTR [esi+20]
  0006e	50		 push	 eax
  0006f	0f b6 46 18	 movzx	 eax, BYTE PTR [esi+24]
  00073	51		 push	 ecx
  00074	50		 push	 eax
  00075	0f b6 46 10	 movzx	 eax, BYTE PTR [esi+16]
  00079	52		 push	 edx
  0007a	0f b6 56 0c	 movzx	 edx, BYTE PTR [esi+12]
  0007e	50		 push	 eax
  0007f	0f b6 87 46 01
	00 00		 movzx	 eax, BYTE PTR [edi+326]
  00086	6a 00		 push	 0
  00088	52		 push	 edx
  00089	0f b6 97 44 01
	00 00		 movzx	 edx, BYTE PTR [edi+324]
  00090	53		 push	 ebx
  00091	50		 push	 eax
  00092	0f b6 87 49 01
	00 00		 movzx	 eax, BYTE PTR [edi+329]
  00099	52		 push	 edx
  0009a	50		 push	 eax
  0009b	51		 push	 ecx
  0009c	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  000a1	83 c4 34	 add	 esp, 52			; 00000034H
$LN1@ImperialRe:

; 1161 : 	}
; 1162 : 	else if( lpMobObj->Class == 524 || 
; 1163 : 	    lpMobObj->Class == 525 || 
; 1164 : 		lpMobObj->Class == 526 || 
; 1165 : 		lpMobObj->Class == 527 ||
; 1166 : 		lpMobObj->Class == 528 ) return true;

  000a4	5f		 pop	 edi
  000a5	5e		 pop	 esi
  000a6	b0 01		 mov	 al, 1
  000a8	5b		 pop	 ebx

; 1168 : }

  000a9	5d		 pop	 ebp
  000aa	c2 08 00	 ret	 8
$LN37@ImperialRe:

; 1082 : 		return true;
; 1083 : 	}
; 1084 : 	else if ( lpMobObj->Class == 506 )	//Raymond Boss

  000ad	b9 fa 01 00 00	 mov	 ecx, 506		; 000001faH
  000b2	66 3b c1	 cmp	 ax, cx
  000b5	75 17		 jne	 SHORT $LN32@ImperialRe

; 1085 : 	{
; 1086 : 		int k = 1;
; 1087 : 		int n = rand()%iCount[k];

  000b7	e8 00 00 00 00	 call	 _rand
  000bc	99		 cdq
  000bd	f7 be 08 af 00
	00		 idiv	 DWORD PTR [esi+44808]

; 1088 : 		int Exe = 0;
; 1089 : 		int Anc = 0;
; 1090 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  000c3	81 c2 c8 00 00
	00		 add	 edx, 200		; 000000c8H

; 1091 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);
; 1092 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;
; 1093 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1094 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);
; 1095 : 		return true;

  000c9	e9 5e ff ff ff	 jmp	 $LN45@ImperialRe
$LN32@ImperialRe:

; 1096 : 	}
; 1097 : 	else if ( lpMobObj->Class == 507 )	//Lucas Boss

  000ce	b9 fb 01 00 00	 mov	 ecx, 507		; 000001fbH
  000d3	66 3b c1	 cmp	 ax, cx
  000d6	75 19		 jne	 SHORT $LN27@ImperialRe

; 1098 : 	{
; 1099 : 		int k = 2;
; 1100 : 		int n = rand()%iCount[k];

  000d8	e8 00 00 00 00	 call	 _rand
  000dd	99		 cdq
  000de	f7 be 0c af 00
	00		 idiv	 DWORD PTR [esi+44812]

; 1101 : 		int Exe = 0;

  000e4	33 c0		 xor	 eax, eax

; 1102 : 		int Anc = 0;
; 1103 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  000e6	81 c2 90 01 00
	00		 add	 edx, 400		; 00000190H

; 1104 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);
; 1105 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;
; 1106 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1107 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);
; 1108 : 		return true;

  000ec	e9 3d ff ff ff	 jmp	 $LN46@ImperialRe
$LN27@ImperialRe:

; 1109 : 	}	
; 1110 : 	else if ( lpMobObj->Class == 508 )	//Fred Boss

  000f1	b9 fc 01 00 00	 mov	 ecx, 508		; 000001fcH
  000f6	66 3b c1	 cmp	 ax, cx
  000f9	75 19		 jne	 SHORT $LN22@ImperialRe

; 1111 : 	{
; 1112 : 		int k = 3;
; 1113 : 		int n = rand()%iCount[k];

  000fb	e8 00 00 00 00	 call	 _rand
  00100	99		 cdq
  00101	f7 be 10 af 00
	00		 idiv	 DWORD PTR [esi+44816]

; 1114 : 		int Exe = 0;

  00107	33 c0		 xor	 eax, eax

; 1115 : 		int Anc = 0;
; 1116 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  00109	81 c2 58 02 00
	00		 add	 edx, 600		; 00000258H

; 1117 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);
; 1118 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;
; 1119 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1120 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);
; 1121 : 		return true;

  0010f	e9 1a ff ff ff	 jmp	 $LN46@ImperialRe
$LN22@ImperialRe:

; 1122 : 	}	
; 1123 : 	else if ( lpMobObj->Class == 509 )	//Hammerize Boss

  00114	b9 fd 01 00 00	 mov	 ecx, 509		; 000001fdH
  00119	66 3b c1	 cmp	 ax, cx
  0011c	75 19		 jne	 SHORT $LN17@ImperialRe

; 1124 : 	{
; 1125 : 		int k = 4;
; 1126 : 		int n = rand()%iCount[k];

  0011e	e8 00 00 00 00	 call	 _rand
  00123	99		 cdq
  00124	f7 be 14 af 00
	00		 idiv	 DWORD PTR [esi+44820]

; 1127 : 		int Exe = 0;

  0012a	33 c0		 xor	 eax, eax

; 1128 : 		int Anc = 0;
; 1129 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  0012c	81 c2 20 03 00
	00		 add	 edx, 800		; 00000320H

; 1130 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);
; 1131 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;
; 1132 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1133 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);
; 1134 : 		return true;

  00132	e9 f7 fe ff ff	 jmp	 $LN46@ImperialRe
$LN17@ImperialRe:

; 1135 : 	}	
; 1136 : 	else if ( lpMobObj->Class == 510 )	//Dual Berserker Boss

  00137	b9 fe 01 00 00	 mov	 ecx, 510		; 000001feH
  0013c	66 3b c1	 cmp	 ax, cx
  0013f	75 19		 jne	 SHORT $LN12@ImperialRe

; 1137 : 	{
; 1138 : 		int k = 5;
; 1139 : 		int n = rand()%iCount[k];

  00141	e8 00 00 00 00	 call	 _rand
  00146	99		 cdq
  00147	f7 be 18 af 00
	00		 idiv	 DWORD PTR [esi+44824]

; 1140 : 		int Exe = 0;

  0014d	33 c0		 xor	 eax, eax

; 1141 : 		int Anc = 0;
; 1142 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  0014f	81 c2 e8 03 00
	00		 add	 edx, 1000		; 000003e8H

; 1143 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);
; 1144 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;
; 1145 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1146 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);
; 1147 : 		return true;

  00155	e9 d4 fe ff ff	 jmp	 $LN46@ImperialRe
$LN12@ImperialRe:

; 1148 : 	}
; 1149 : 	else if ( lpMobObj->Class == 511 )	//Devil Lord Boss

  0015a	b9 ff 01 00 00	 mov	 ecx, 511		; 000001ffH
  0015f	66 3b c1	 cmp	 ax, cx
  00162	75 19		 jne	 SHORT $LN7@ImperialRe

; 1150 : 	{
; 1151 : 		int k = 6;
; 1152 : 		int n = rand()%iCount[k];

  00164	e8 00 00 00 00	 call	 _rand
  00169	99		 cdq
  0016a	f7 be 1c af 00
	00		 idiv	 DWORD PTR [esi+44828]

; 1153 : 		int Exe = 0;

  00170	33 c0		 xor	 eax, eax

; 1154 : 		int Anc = 0;
; 1155 : 		int t = ITEMGET(this->iItem[k][n].Type,this->iItem[k][n].Index);

  00172	81 c2 b0 04 00
	00		 add	 edx, 1200		; 000004b0H

; 1156 : 		if ( this->iItem[k][n].Exl > 0 ) Exe = GenExcOpt(this->iItem[k][n].Exl);
; 1157 : 		if ( this->iItem[k][n].Anc == 5 || this->iItem[k][n].Anc == 10 ) Anc = this->iItem[k][n].Anc;
; 1158 : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpMobObj->MapNumber,(BYTE)lpMobObj->X,(BYTE)lpMobObj->Y,t,this->iItem[k][n].Level,0,
; 1159 : 			(BYTE)this->iItem[k][n].Skill,(BYTE)this->iItem[k][n].Luck,(BYTE)this->iItem[k][n].Opt,lpObj->m_Index,(BYTE)Exe,(BYTE)Anc);
; 1160 : 		return true;

  00178	e9 b1 fe ff ff	 jmp	 $LN46@ImperialRe
$LN7@ImperialRe:

; 1161 : 	}
; 1162 : 	else if( lpMobObj->Class == 524 || 
; 1163 : 	    lpMobObj->Class == 525 || 
; 1164 : 		lpMobObj->Class == 526 || 
; 1165 : 		lpMobObj->Class == 527 ||
; 1166 : 		lpMobObj->Class == 528 ) return true;

  0017d	b9 0c 02 00 00	 mov	 ecx, 524		; 0000020cH
  00182	66 3b c1	 cmp	 ax, cx
  00185	0f 84 19 ff ff
	ff		 je	 $LN1@ImperialRe
  0018b	ba 0d 02 00 00	 mov	 edx, 525		; 0000020dH
  00190	66 3b c2	 cmp	 ax, dx
  00193	0f 84 0b ff ff
	ff		 je	 $LN1@ImperialRe
  00199	b9 0e 02 00 00	 mov	 ecx, 526		; 0000020eH
  0019e	66 3b c1	 cmp	 ax, cx
  001a1	0f 84 fd fe ff
	ff		 je	 $LN1@ImperialRe
  001a7	ba 0f 02 00 00	 mov	 edx, 527		; 0000020fH
  001ac	66 3b c2	 cmp	 ax, dx
  001af	0f 84 ef fe ff
	ff		 je	 $LN1@ImperialRe
  001b5	b9 10 02 00 00	 mov	 ecx, 528		; 00000210H
  001ba	66 3b c1	 cmp	 ax, cx
  001bd	0f 84 e1 fe ff
	ff		 je	 $LN1@ImperialRe

; 1167 : 	return false;

  001c3	5f		 pop	 edi
  001c4	5e		 pop	 esi
  001c5	32 c0		 xor	 al, al
  001c7	5b		 pop	 ebx

; 1168 : }

  001c8	5d		 pop	 ebp
  001c9	c2 08 00	 ret	 8
?ImperialReward@CImperial@@QAE_NPAUOBJECTSTRUCT@@0@Z ENDP ; CImperial::ImperialReward
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCImperial@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCImperial@@UAEPAXI@Z PROC				; CImperial::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CImperial@@UAE@XZ	; CImperial::~CImperial
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCImperial@@UAEPAXI@Z ENDP				; CImperial::`scalar deleting destructor'
_TEXT	ENDS
PUBLIC	?SetState@CImperial@@QAEXH@Z			; CImperial::SetState
; Function compile flags: /Ogtp
;	COMDAT ?SetState@CImperial@@QAEXH@Z
_TEXT	SEGMENT
_iState$ = 8						; size = 4
?SetState@CImperial@@QAEXH@Z PROC			; CImperial::SetState, COMDAT
; _this$ = ecx

; 36   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 37   : 	switch ( iState )

  00003	8b 45 08	 mov	 eax, DWORD PTR _iState$[ebp]
  00006	83 f8 09	 cmp	 eax, 9
  00009	77 54		 ja	 SHORT $LN11@SetState
  0000b	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN15@SetState[eax*4]
$LN9@SetState:

; 38   : 	{
; 39   : 		case IMPERIAL_STATE_NONE:
; 40   : 			return;
; 41   : 		case IMPERIAL_STATE_OPEN:
; 42   : 			this->SetState_OPEN();

  00012	e8 00 00 00 00	 call	 ?SetState_OPEN@CImperial@@QAEXXZ ; CImperial::SetState_OPEN

; 67   : 			break;
; 68   : 	}
; 69   : }

  00017	5d		 pop	 ebp
  00018	c2 04 00	 ret	 4
$LN8@SetState:

; 43   : 			break;
; 44   : 		case IMPERIAL_STATE_DESTLER:
; 45   : 			this->SetState_DESTLER();

  0001b	e8 00 00 00 00	 call	 ?SetState_DESTLER@CImperial@@QAEXXZ ; CImperial::SetState_DESTLER

; 67   : 			break;
; 68   : 	}
; 69   : }

  00020	5d		 pop	 ebp
  00021	c2 04 00	 ret	 4
$LN7@SetState:

; 46   : 			break;
; 47   : 		case IMPERIAL_STATE_VERMONT:
; 48   : 			this->SetState_VERMONT();

  00024	e8 00 00 00 00	 call	 ?SetState_VERMONT@CImperial@@QAEXXZ ; CImperial::SetState_VERMONT

; 67   : 			break;
; 68   : 	}
; 69   : }

  00029	5d		 pop	 ebp
  0002a	c2 04 00	 ret	 4
$LN6@SetState:

; 49   : 			break;
; 50   : 		case IMPERIAL_STATE_KATO:
; 51   : 			this->SetState_KATO();

  0002d	e8 00 00 00 00	 call	 ?SetState_KATO@CImperial@@QAEXXZ ; CImperial::SetState_KATO

; 67   : 			break;
; 68   : 	}
; 69   : }

  00032	5d		 pop	 ebp
  00033	c2 04 00	 ret	 4
$LN5@SetState:

; 52   : 			break;
; 53   : 		case IMPERIAL_STATE_GALIA:
; 54   : 			this->SetState_GALIA();

  00036	e8 00 00 00 00	 call	 ?SetState_GALIA@CImperial@@QAEXXZ ; CImperial::SetState_GALIA

; 67   : 			break;
; 68   : 	}
; 69   : }

  0003b	5d		 pop	 ebp
  0003c	c2 04 00	 ret	 4
$LN4@SetState:

; 55   : 			break;
; 56   : 		case IMPERIAL_STATE_ERKANNE:
; 57   : 			this->SetState_ERKANNE();

  0003f	e8 00 00 00 00	 call	 ?SetState_ERKANNE@CImperial@@QAEXXZ ; CImperial::SetState_ERKANNE

; 67   : 			break;
; 68   : 	}
; 69   : }

  00044	5d		 pop	 ebp
  00045	c2 04 00	 ret	 4
$LN3@SetState:

; 58   : 			break;
; 59   : 		case IMPERIAL_STATE_RAYMOND:
; 60   : 			this->SetState_RAYMOND();

  00048	e8 00 00 00 00	 call	 ?SetState_RAYMOND@CImperial@@QAEXXZ ; CImperial::SetState_RAYMOND

; 67   : 			break;
; 68   : 	}
; 69   : }

  0004d	5d		 pop	 ebp
  0004e	c2 04 00	 ret	 4
$LN2@SetState:

; 61   : 			break;
; 62   : 		case IMPERIAL_STATE_GAION:
; 63   : 			this->SetState_GAION();

  00051	e8 00 00 00 00	 call	 ?SetState_GAION@CImperial@@QAEXXZ ; CImperial::SetState_GAION

; 67   : 			break;
; 68   : 	}
; 69   : }

  00056	5d		 pop	 ebp
  00057	c2 04 00	 ret	 4
$LN1@SetState:

; 64   : 			break;
; 65   : 		case IMPERIAL_STATE_ENDED:
; 66   : 			this->SetState_ENDED();

  0005a	e8 00 00 00 00	 call	 ?SetState_ENDED@CImperial@@QAEXXZ ; CImperial::SetState_ENDED
$LN11@SetState:

; 67   : 			break;
; 68   : 	}
; 69   : }

  0005f	5d		 pop	 ebp
  00060	c2 04 00	 ret	 4
  00063	90		 npad	 1
$LN15@SetState:
  00064	00 00 00 00	 DD	 $LN11@SetState
  00068	00 00 00 00	 DD	 $LN9@SetState
  0006c	00 00 00 00	 DD	 $LN8@SetState
  00070	00 00 00 00	 DD	 $LN7@SetState
  00074	00 00 00 00	 DD	 $LN6@SetState
  00078	00 00 00 00	 DD	 $LN5@SetState
  0007c	00 00 00 00	 DD	 $LN4@SetState
  00080	00 00 00 00	 DD	 $LN3@SetState
  00084	00 00 00 00	 DD	 $LN2@SetState
  00088	00 00 00 00	 DD	 $LN1@SetState
?SetState@CImperial@@QAEXH@Z ENDP			; CImperial::SetState
_TEXT	ENDS
PUBLIC	?ProcState_OPEN@CImperial@@QAEXXZ		; CImperial::ProcState_OPEN
EXTRN	?GetUserCount@CImperialBattleUserMng@@QAEHXZ:PROC ; CImperialBattleUserMng::GetUserCount
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_OPEN@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_OPEN@CImperial@@QAEXXZ PROC			; CImperial::ProcState_OPEN, COMDAT
; _this$ = ecx

; 224  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 225  : 	if ( g_ImperialBattleUserMng.GetUserCount() > 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0000d	85 c0		 test	 eax, eax
  0000f	7e 5f		 jle	 SHORT $LN8@ProcState_

; 226  : 	{
; 227  : 		int Day = this->GetCurrentDay();

  00011	8b ce		 mov	 ecx, esi
  00013	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay

; 228  : 
; 229  : 		switch ( Day )

  00018	48		 dec	 eax
  00019	83 f8 06	 cmp	 eax, 6
  0001c	77 52		 ja	 SHORT $LN8@ProcState_
  0001e	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN14@ProcState_[eax*4]
$LN7@ProcState_:

; 230  : 		{
; 231  : 			case 1:
; 232  : 				this->SetState(IMPERIAL_STATE_DESTLER);

  00025	6a 02		 push	 2

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  00027	8b ce		 mov	 ecx, esi
  00029	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  0002e	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  0002f	c3		 ret	 0
$LN6@ProcState_:

; 233  : 				break;
; 234  : 			case 2:
; 235  : 				this->SetState(IMPERIAL_STATE_VERMONT);

  00030	6a 03		 push	 3

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  00032	8b ce		 mov	 ecx, esi
  00034	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00039	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  0003a	c3		 ret	 0
$LN5@ProcState_:

; 236  : 				break;
; 237  : 			case 3:
; 238  : 				this->SetState(IMPERIAL_STATE_KATO);

  0003b	6a 04		 push	 4

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  0003d	8b ce		 mov	 ecx, esi
  0003f	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00044	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  00045	c3		 ret	 0
$LN4@ProcState_:

; 239  : 				break;
; 240  : 			case 4:
; 241  : 				this->SetState(IMPERIAL_STATE_GALIA);

  00046	6a 05		 push	 5

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  00048	8b ce		 mov	 ecx, esi
  0004a	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  0004f	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  00050	c3		 ret	 0
$LN3@ProcState_:

; 242  : 				break;
; 243  : 			case 5:
; 244  : 				this->SetState(IMPERIAL_STATE_ERKANNE);

  00051	6a 06		 push	 6

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  00053	8b ce		 mov	 ecx, esi
  00055	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  0005a	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  0005b	c3		 ret	 0
$LN2@ProcState_:

; 245  : 				break;
; 246  : 			case 6:
; 247  : 				this->SetState(IMPERIAL_STATE_RAYMOND);

  0005c	6a 07		 push	 7

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  0005e	8b ce		 mov	 ecx, esi
  00060	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00065	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  00066	c3		 ret	 0
$LN1@ProcState_:

; 248  : 				break;
; 249  : 			case 7:
; 250  : 				this->SetState(IMPERIAL_STATE_GAION);

  00067	6a 08		 push	 8
  00069	8b ce		 mov	 ecx, esi
  0006b	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
$LN8@ProcState_:
  00070	5e		 pop	 esi

; 251  : 				break;
; 252  : 		}
; 253  : 	}
; 254  : }

  00071	c3		 ret	 0
  00072	8b ff		 npad	 2
$LN14@ProcState_:
  00074	00 00 00 00	 DD	 $LN7@ProcState_
  00078	00 00 00 00	 DD	 $LN6@ProcState_
  0007c	00 00 00 00	 DD	 $LN5@ProcState_
  00080	00 00 00 00	 DD	 $LN4@ProcState_
  00084	00 00 00 00	 DD	 $LN3@ProcState_
  00088	00 00 00 00	 DD	 $LN2@ProcState_
  0008c	00 00 00 00	 DD	 $LN1@ProcState_
?ProcState_OPEN@CImperial@@QAEXXZ ENDP			; CImperial::ProcState_OPEN
_TEXT	ENDS
PUBLIC	?ProcState_ENDED@CImperial@@QAEXXZ		; CImperial::ProcState_ENDED
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_ENDED@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_ENDED@CImperial@@QAEXXZ PROC			; CImperial::ProcState_ENDED, COMDAT
; _this$ = ecx

; 449  : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 450  : 	int Tick = GetTickCount() - this->m_ImperialData.Tick;

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  00008	8b f1		 mov	 esi, ecx
  0000a	ff d7		 call	 edi
  0000c	2b 86 28 af 00
	00		 sub	 eax, DWORD PTR [esi+44840]

; 451  : 	if(Tick >= 1000)

  00012	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00017	7c 20		 jl	 SHORT $LN1@ProcState_@2

; 452  : 	{
; 453  : 		this->m_ImperialData.Time -= Tick;

  00019	29 86 2c af 00
	00		 sub	 DWORD PTR [esi+44844], eax

; 454  : 		this->m_ImperialData.Tick = GetTickCount();

  0001f	ff d7		 call	 edi

; 455  : 
; 456  : 		if(this->m_ImperialData.Time <= 0)

  00021	83 be 2c af 00
	00 00		 cmp	 DWORD PTR [esi+44844], 0
  00028	89 86 28 af 00
	00		 mov	 DWORD PTR [esi+44840], eax
  0002e	7f 09		 jg	 SHORT $LN1@ProcState_@2

; 457  : 		{
; 458  : 			this->SetState(IMPERIAL_STATE_OPEN);

  00030	6a 01		 push	 1
  00032	8b ce		 mov	 ecx, esi
  00034	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
$LN1@ProcState_@2:

; 459  : 		}
; 460  : 	}
; 461  : }

  00039	5f		 pop	 edi
  0003a	5e		 pop	 esi
  0003b	c3		 ret	 0
?ProcState_ENDED@CImperial@@QAEXXZ ENDP			; CImperial::ProcState_ENDED
_TEXT	ENDS
PUBLIC	??_C@_0EL@DDPCOPEA@?$FLImperial?$FN?5?$CI?$CFs?$CJ?$CI?$CFs?$CJ?5Entered?5to?5I@ ; `string'
PUBLIC	_this$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?EnterEvent@CImperial@@QAE_NF@Z			; CImperial::EnterEvent
EXTRN	?GCInventoryItemDeleteSend@@YAXHEE@Z:PROC	; GCInventoryItemDeleteSend
EXTRN	?gObjInventoryDeleteItem@@YAEHH@Z:PROC		; gObjInventoryDeleteItem
EXTRN	?AddUserData@CImperialBattleUserMng@@QAEHH@Z:PROC ; CImperialBattleUserMng::AddUserData
EXTRN	?gObjIsConnectedGP@@YAHH@Z:PROC			; gObjIsConnectedGP
EXTRN	?PHeadSubSetB@@YAXPAEEEH@Z:PROC			; PHeadSubSetB
;	COMDAT ??_C@_0EL@DDPCOPEA@?$FLImperial?$FN?5?$CI?$CFs?$CJ?$CI?$CFs?$CJ?5Entered?5to?5I@
CONST	SEGMENT
??_C@_0EL@DDPCOPEA@?$FLImperial?$FN?5?$CI?$CFs?$CJ?$CI?$CFs?$CJ?5Entered?5to?5I@ DB '['
	DB	'Imperial] (%s)(%s) Entered to Imperial Fort Event | Day: %d |'
	DB	' PartyID: %d', 00H				; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?EnterEvent@CImperial@@QAE_NF@Z
_TEXT	SEGMENT
_Day$ = -28						; size = 4
tv359 = -24						; size = 4
_this$GSCopy$ = -20					; size = 4
_pMsg$ = -16						; size = 12
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 2
?EnterEvent@CImperial@@QAE_NF@Z PROC			; CImperial::EnterEvent, COMDAT
; _this$ = ecx

; 464  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	53		 push	 ebx
  00011	56		 push	 esi
  00012	0f b7 75 08	 movzx	 esi, WORD PTR _aIndex$[ebp]
  00016	57		 push	 edi

; 465  : 	PMSG_FORT_ENTER_RESULT pMsg;
; 466  : 	PHeadSubSetB((LPBYTE)&pMsg, 0xF7, 0x02, sizeof(pMsg));

  00017	6a 0c		 push	 12			; 0000000cH
  00019	6a 02		 push	 2
  0001b	8d 45 f0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  0001e	8b f9		 mov	 edi, ecx
  00020	68 f7 00 00 00	 push	 247			; 000000f7H
  00025	50		 push	 eax

; 467  : 
; 468  : 	int Day = this->GetCurrentDay();

  00026	89 7d ec	 mov	 DWORD PTR _this$GSCopy$[ebp], edi
  00029	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  0002e	83 c4 10	 add	 esp, 16			; 00000010H
  00031	8b cf		 mov	 ecx, edi
  00033	e8 00 00 00 00	 call	 ?GetCurrentDay@CImperial@@QAEHXZ ; CImperial::GetCurrentDay
  00038	8b d8		 mov	 ebx, eax
  0003a	89 5d e4	 mov	 DWORD PTR _Day$[ebp], ebx

; 469  : 	int invitationpos = -1;
; 470  : 	pMsg.Index = aIndex;

  0003d	66 89 75 f8	 mov	 WORD PTR _pMsg$[ebp+8], si

; 471  : 	pMsg.Day = Day;

  00041	88 5d f5	 mov	 BYTE PTR _pMsg$[ebp+5], bl

; 472  : 	pMsg.State = 1;

  00044	c6 45 f6 01	 mov	 BYTE PTR _pMsg$[ebp+6], 1

; 473  : 	pMsg.Unk = rand()%4; // weather

  00048	e8 00 00 00 00	 call	 _rand
  0004d	25 03 00 00 80	 and	 eax, -2147483645	; 80000003H
  00052	79 05		 jns	 SHORT $LN32@EnterEvent
  00054	48		 dec	 eax
  00055	83 c8 fc	 or	 eax, -4			; fffffffcH
  00058	40		 inc	 eax
$LN32@EnterEvent:

; 474  : 	if(!gObjIsConnectedGP(aIndex))

  00059	0f bf fe	 movsx	 edi, si
  0005c	57		 push	 edi
  0005d	88 45 f7	 mov	 BYTE PTR _pMsg$[ebp+7], al
  00060	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  00065	83 c4 04	 add	 esp, 4
  00068	85 c0		 test	 eax, eax

; 475  : 	{
; 476  : 		return false;

  0006a	74 33		 je	 SHORT $LN1@EnterEvent

; 477  : 	}
; 478  : 
; 479  : 	if(gObj[aIndex].PartyNumber == -1)

  0006c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00072	8b f7		 mov	 esi, edi
  00074	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0007a	8b 84 0e 2c 04
	00 00		 mov	 eax, DWORD PTR [esi+ecx+1068]
  00081	89 45 e8	 mov	 DWORD PTR tv359[ebp], eax
  00084	83 f8 ff	 cmp	 eax, -1
  00087	75 2b		 jne	 SHORT $LN18@EnterEvent

; 480  : 	{
; 481  : 		pMsg.Result = 6;
; 482  : 		DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00089	0f b6 4d f1	 movzx	 ecx, BYTE PTR _pMsg$[ebp+1]
  0008d	51		 push	 ecx
  0008e	8d 55 f0	 lea	 edx, DWORD PTR _pMsg$[ebp]
  00091	c6 45 f4 06	 mov	 BYTE PTR _pMsg$[ebp+4], 6
  00095	52		 push	 edx
$LN34@EnterEvent:

; 497  : 		{
; 498  : 			pMsg.Result = 2;
; 499  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00096	57		 push	 edi
  00097	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0009c	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN1@EnterEvent:

; 590  : 		return true;
; 591  : 	}
; 592  : 
; 593  : 	return false;

  0009f	5f		 pop	 edi
  000a0	5e		 pop	 esi
  000a1	32 c0		 xor	 al, al
  000a3	5b		 pop	 ebx

; 594  : }

  000a4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000a7	33 cd		 xor	 ecx, ebp
  000a9	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ae	8b e5		 mov	 esp, ebp
  000b0	5d		 pop	 ebp
  000b1	c2 04 00	 ret	 4
$LN18@EnterEvent:

; 483  : 		return false;
; 484  : 	}
; 485  : 
; 486  : 	if(Day == 7)

  000b4	83 fb 07	 cmp	 ebx, 7
  000b7	8b 9c 0e 24 0e
	00 00		 mov	 ebx, DWORD PTR [esi+ecx+3620]

; 487  : 	{
; 488  : 		for(short i = 12 ; i < 76; ++i)

  000be	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  000c3	75 5b		 jne	 SHORT $LL10@EnterEvent
  000c5	eb 09 8d a4 24
	00 00 00 00 8b
	ff		 npad	 11
$LL16@EnterEvent:

; 489  : 		{
; 490  : 			if(gObj[aIndex].pInventory[i].m_Type > 0 && gObj[aIndex].pInventory[i].m_Type == ITEMGET(14,109))

  000d0	0f bf c8	 movsx	 ecx, ax
  000d3	69 c9 d4 00 00
	00		 imul	 ecx, 212		; 000000d4H
  000d9	0f b7 4c 19 06	 movzx	 ecx, WORD PTR [ecx+ebx+6]
  000de	66 85 c9	 test	 cx, cx
  000e1	7e 0a		 jle	 SHORT $LN15@EnterEvent
  000e3	ba 6d 1c 00 00	 mov	 edx, 7277		; 00001c6dH
  000e8	66 3b ca	 cmp	 cx, dx
  000eb	74 16		 je	 SHORT $LN24@EnterEvent
$LN15@EnterEvent:

; 487  : 	{
; 488  : 		for(short i = 12 ; i < 76; ++i)

  000ed	40		 inc	 eax
  000ee	66 83 f8 4c	 cmp	 ax, 76			; 0000004cH
  000f2	7c dc		 jl	 SHORT $LL16@EnterEvent

; 497  : 		{
; 498  : 			pMsg.Result = 2;
; 499  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  000f4	0f b6 45 f1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  000f8	50		 push	 eax
  000f9	8d 4d f0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  000fc	c6 45 f4 02	 mov	 BYTE PTR _pMsg$[ebp+4], 2
  00100	51		 push	 ecx

; 500  : 			return false;

  00101	eb 93		 jmp	 SHORT $LN34@EnterEvent
$LN24@EnterEvent:

; 491  : 			{
; 492  : 				invitationpos = i;

  00103	0f bf d8	 movsx	 ebx, ax

; 493  : 				break;
; 494  : 			}
; 495  : 		}
; 496  : 		if(invitationpos == -1)

  00106	83 fb ff	 cmp	 ebx, -1
  00109	75 4b		 jne	 SHORT $LN30@EnterEvent

; 497  : 		{
; 498  : 			pMsg.Result = 2;
; 499  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0010b	0f b6 45 f1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0010f	50		 push	 eax
  00110	8d 4d f0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00113	c6 45 f4 02	 mov	 BYTE PTR _pMsg$[ebp+4], 2
  00117	51		 push	 ecx

; 500  : 			return false;

  00118	e9 79 ff ff ff	 jmp	 $LN34@EnterEvent
  0011d	8d 49 00	 npad	 3
$LL10@EnterEvent:

; 506  : 		{
; 507  : 			if(gObj[aIndex].pInventory[i].m_Type > 0 && gObj[aIndex].pInventory[i].m_Type == ITEMGET(14,102))

  00120	0f bf d0	 movsx	 edx, ax
  00123	69 d2 d4 00 00
	00		 imul	 edx, 212		; 000000d4H
  00129	0f b7 4c 1a 06	 movzx	 ecx, WORD PTR [edx+ebx+6]
  0012e	66 85 c9	 test	 cx, cx
  00131	7e 0a		 jle	 SHORT $LN9@EnterEvent
  00133	ba 66 1c 00 00	 mov	 edx, 7270		; 00001c66H
  00138	66 3b ca	 cmp	 cx, dx
  0013b	74 c6		 je	 SHORT $LN24@EnterEvent
$LN9@EnterEvent:

; 501  : 		}
; 502  : 	}
; 503  : 	else
; 504  : 	{
; 505  : 		for(short i = 12 ; i < 76; ++i)

  0013d	40		 inc	 eax
  0013e	66 83 f8 4c	 cmp	 ax, 76			; 0000004cH
  00142	7c dc		 jl	 SHORT $LL10@EnterEvent

; 497  : 		{
; 498  : 			pMsg.Result = 2;
; 499  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  00144	0f b6 45 f1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00148	50		 push	 eax
  00149	8d 4d f0	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  0014c	c6 45 f4 02	 mov	 BYTE PTR _pMsg$[ebp+4], 2
  00150	51		 push	 ecx

; 500  : 			return false;

  00151	e9 40 ff ff ff	 jmp	 $LN34@EnterEvent
$LN30@EnterEvent:

; 508  : 			{
; 509  : 				invitationpos = i;
; 510  : 				break;
; 511  : 			}
; 512  : 		}
; 513  : 		if(invitationpos == -1)
; 514  : 		{
; 515  : 			pMsg.Result = 2;
; 516  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 517  : 			return false;
; 518  : 		}
; 519  : 	}
; 520  : 
; 521  : #if(FIX_IMPERIAL)
; 522  : 
; 523  : 	/*
; 524  : 	3 -  
; 525  : 	4 - ? ? 
; 526  : 	5 - D? ? ? ??
; 527  : 	*/
; 528  : 
; 529  : 	if(this->m_ImperialData.PartyID >= 0)

  00156	8b 4d ec	 mov	 ecx, DWORD PTR _this$GSCopy$[ebp]
  00159	0f b7 81 20 af
	00 00		 movzx	 eax, WORD PTR [ecx+44832]
  00160	66 85 c0	 test	 ax, ax
  00163	78 1a		 js	 SHORT $LN4@EnterEvent

; 530  : 	{
; 531  : 		if(gObj[aIndex].PartyNumber != this->m_ImperialData.PartyID)

  00165	0f bf d0	 movsx	 edx, ax
  00168	39 55 e8	 cmp	 DWORD PTR tv359[ebp], edx
  0016b	74 12		 je	 SHORT $LN4@EnterEvent

; 497  : 		{
; 498  : 			pMsg.Result = 2;
; 499  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0016d	0f b6 45 f1	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  00171	50		 push	 eax
  00172	8d 4d f0	 lea	 ecx, DWORD PTR _pMsg$[ebp]

; 532  : 		{
; 533  : 			pMsg.Result = 5;

  00175	c6 45 f4 05	 mov	 BYTE PTR _pMsg$[ebp+4], 5
  00179	51		 push	 ecx
  0017a	e9 17 ff ff ff	 jmp	 $LN34@EnterEvent
$LN4@EnterEvent:

; 534  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 535  : 			return false;
; 536  : 		}
; 537  : 	}
; 538  : 
; 539  : 	if(this->m_ImperialData.iState != IMPERIAL_STATE_OPEN)

  0017f	83 b9 24 af 00
	00 01		 cmp	 DWORD PTR [ecx+44836], 1
  00186	74 4c		 je	 SHORT $LN2@EnterEvent

; 540  : 	{
; 541  : 		if(this->GetSpecificState() != 1)

  00188	e8 00 00 00 00	 call	 ?GetSpecificState@CImperial@@QAEHXZ ; CImperial::GetSpecificState
  0018d	83 f8 01	 cmp	 eax, 1
  00190	74 42		 je	 SHORT $LN2@EnterEvent

; 542  : 		{
; 543  : 			pMsg.Result = 1;
; 544  : 			pMsg.EntryTime = ((this->m_ImperialData.Time / 60) / 1000) + 1;

  00192	8b 89 2c af 00
	00		 mov	 ecx, DWORD PTR [ecx+44844]
  00198	b8 89 88 88 88	 mov	 eax, -2004318071	; 88888889H
  0019d	f7 e9		 imul	 ecx
  0019f	03 d1		 add	 edx, ecx
  001a1	c1 fa 05	 sar	 edx, 5
  001a4	8b ca		 mov	 ecx, edx
  001a6	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  001a9	03 ca		 add	 ecx, edx
  001ab	b8 d3 4d 62 10	 mov	 eax, 274877907		; 10624dd3H
  001b0	f7 e9		 imul	 ecx
  001b2	c1 fa 06	 sar	 edx, 6
  001b5	8b c2		 mov	 eax, edx
  001b7	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  001ba	8d 4c 02 01	 lea	 ecx, DWORD PTR [edx+eax+1]

; 545  : 			DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  001be	0f b6 55 f1	 movzx	 edx, BYTE PTR _pMsg$[ebp+1]
  001c2	52		 push	 edx
  001c3	8d 45 f0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  001c6	c6 45 f4 01	 mov	 BYTE PTR _pMsg$[ebp+4], 1
  001ca	66 89 4d fa	 mov	 WORD PTR _pMsg$[ebp+10], cx
  001ce	50		 push	 eax

; 546  : 			return false;

  001cf	e9 c2 fe ff ff	 jmp	 $LN34@EnterEvent
$LN2@EnterEvent:

; 547  : 		}
; 548  : 	}
; 549  : 
; 550  : 	/*if(this->m_ImperialData.iState > IMPERIAL_STATE_OPEN)
; 551  : 	{
; 552  : 		pMsg.Result = 4;
; 553  : 		DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 554  : 		return false;
; 555  : 	}*/
; 556  : 
; 557  : #else
; 558  : 
; 559  : 	if(this->m_ImperialData.iState != IMPERIAL_STATE_OPEN)
; 560  : 	{
; 561  : 		if(gObj[aIndex].PartyNumber != this->m_ImperialData.PartyID)
; 562  : 		{
; 563  : 			int CurrState = this->GetSpecificState();
; 564  : 			if(CurrState != 1) // STANDBY1
; 565  : 			{
; 566  : 				pMsg.Result = 1;
; 567  : 				pMsg.EntryTime = ((this->m_ImperialData.Time / 60) / 1000);
; 568  : 				DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);
; 569  : 				return false;
; 570  : 			}
; 571  : 		}
; 572  : 	}
; 573  : 
; 574  : #endif
; 575  : 
; 576  : 	if(g_ImperialBattleUserMng.AddUserData(aIndex) )

  001d4	57		 push	 edi
  001d5	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  001da	e8 00 00 00 00	 call	 ?AddUserData@CImperialBattleUserMng@@QAEHH@Z ; CImperialBattleUserMng::AddUserData
  001df	85 c0		 test	 eax, eax
  001e1	0f 84 b8 fe ff
	ff		 je	 $LN1@EnterEvent

; 577  : 	{
; 578  : 		gObjInventoryDeleteItem(aIndex, invitationpos);

  001e7	53		 push	 ebx
  001e8	57		 push	 edi
  001e9	e8 00 00 00 00	 call	 ?gObjInventoryDeleteItem@@YAEHH@Z ; gObjInventoryDeleteItem

; 579  : 		GCInventoryItemDeleteSend(aIndex, invitationpos, 1);

  001ee	6a 01		 push	 1
  001f0	53		 push	 ebx
  001f1	57		 push	 edi
  001f2	e8 00 00 00 00	 call	 ?GCInventoryItemDeleteSend@@YAXHEE@Z ; GCInventoryItemDeleteSend

; 580  : 		gObj[aIndex].TargetShopNumber = 0;

  001f7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 581  : 
; 582  : 		pMsg.Result = 0;
; 583  : 
; 584  : 		this->m_ImperialData.PartyID = gObj[aIndex].PartyNumber;
; 585  : 		this->m_ImperialData.Day = Day;

  001fd	8b 5d e4	 mov	 ebx, DWORD PTR _Day$[ebp]
  00200	33 c9		 xor	 ecx, ecx
  00202	66 89 8c 16 5a
	04 00 00	 mov	 WORD PTR [esi+edx+1114], cx
  0020a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 586  : 
; 587  : 		DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  0020f	0f b6 55 f1	 movzx	 edx, BYTE PTR _pMsg$[ebp+1]
  00213	88 4d f4	 mov	 BYTE PTR _pMsg$[ebp+4], cl
  00216	66 8b 8c 06 2c
	04 00 00	 mov	 cx, WORD PTR [esi+eax+1068]
  0021e	8b 45 ec	 mov	 eax, DWORD PTR _this$GSCopy$[ebp]
  00221	66 89 88 20 af
	00 00		 mov	 WORD PTR [eax+44832], cx
  00228	89 98 30 af 00
	00		 mov	 DWORD PTR [eax+44848], ebx
  0022e	52		 push	 edx
  0022f	8d 45 f0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00232	50		 push	 eax
  00233	57		 push	 edi
  00234	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 588  : 		gObjMoveGate(aIndex, g_ImperialGate[Day-1].Gate);

  00239	8b 0c dd fc ff
	ff ff		 mov	 ecx, DWORD PTR _g_ImperialGate[ebx*8-4]
  00240	51		 push	 ecx
  00241	57		 push	 edi
  00242	e8 00 00 00 00	 call	 ?gObjMoveGate@@YAHHH@Z	; gObjMoveGate

; 589  : 		LogAddTD("[Imperial] (%s)(%s) Entered to Imperial Fort Event | Day: %d | PartyID: %d", gObj[aIndex].AccountID, gObj[aIndex].Name, Day, gObj[aIndex].PartyNumber);

  00247	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0024c	8b 94 06 2c 04
	00 00		 mov	 edx, DWORD PTR [esi+eax+1068]
  00253	52		 push	 edx
  00254	53		 push	 ebx
  00255	8d 4c 06 77	 lea	 ecx, DWORD PTR [esi+eax+119]
  00259	51		 push	 ecx
  0025a	8d 54 06 6c	 lea	 edx, DWORD PTR [esi+eax+108]
  0025e	52		 push	 edx
  0025f	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@DDPCOPEA@?$FLImperial?$FN?5?$CI?$CFs?$CJ?$CI?$CFs?$CJ?5Entered?5to?5I@
  00264	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 594  : }

  0026a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0026d	83 c4 3c	 add	 esp, 60			; 0000003cH
  00270	5f		 pop	 edi
  00271	5e		 pop	 esi
  00272	33 cd		 xor	 ecx, ebp
  00274	b0 01		 mov	 al, 1
  00276	5b		 pop	 ebx
  00277	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0027c	8b e5		 mov	 esp, ebp
  0027e	5d		 pop	 ebp
  0027f	c2 04 00	 ret	 4
?EnterEvent@CImperial@@QAE_NF@Z ENDP			; CImperial::EnterEvent
_TEXT	ENDS
PUBLIC	??_C@_0DI@DGDPBAIK@?$FL?5IMPERIAL?5FORT?5?$FN?$FLGiveRewardExp?$FN@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?GiveRewardExp@CImperial@@QAEHHH@Z		; CImperial::GiveRewardExp
EXTRN	?PHeadSetBE@@YAXPAEEH@Z:PROC			; PHeadSetBE
;	COMDAT ??_C@_0DI@DGDPBAIK@?$FL?5IMPERIAL?5FORT?5?$FN?$FLGiveRewardExp?$FN@
CONST	SEGMENT
??_C@_0DI@DGDPBAIK@?$FL?5IMPERIAL?5FORT?5?$FN?$FLGiveRewardExp?$FN@ DB '['
	DB	' IMPERIAL FORT ][GiveRewardExp] LevelUp Error [%s][%s]', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?GiveRewardExp@CImperial@@QAEHHH@Z
_TEXT	SEGMENT
_this$ = -48						; size = 4
tv195 = -44						; size = 4
_iMAX_LEVCOUNT$ = -40					; size = 4
_pMsg$212817 = -36					; size = 16
_pExp$212825 = -20					; size = 16
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Exp$ = 12						; size = 4
?GiveRewardExp@CImperial@@QAEHHH@Z PROC			; CImperial::GiveRewardExp, COMDAT
; _this$ = ecx

; 729  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 30	 sub	 esp, 48			; 00000030H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _aIndex$[ebp]

; 730  : 	if ( !gObjIsConnected(aIndex))

  00014	56		 push	 esi
  00015	89 4d d0	 mov	 DWORD PTR _this$[ebp], ecx
  00018	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0001d	83 c4 04	 add	 esp, 4
  00020	85 c0		 test	 eax, eax
  00022	75 11		 jne	 SHORT $LN8@GiveReward
  00024	5e		 pop	 esi

; 784  : 	}
; 785  : 	return 1;
; 786  : }

  00025	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00028	33 cd		 xor	 ecx, ebp
  0002a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0002f	8b e5		 mov	 esp, ebp
  00031	5d		 pop	 ebp
  00032	c2 08 00	 ret	 8
$LN8@GiveReward:
  00035	53		 push	 ebx

; 731  : 		return 0;
; 732  : 
; 733  : 	if ( Exp <= -1 )

  00036	8b 5d 0c	 mov	 ebx, DWORD PTR _Exp$[ebp]
  00039	83 fb ff	 cmp	 ebx, -1
  0003c	7f 14		 jg	 SHORT $LN7@GiveReward

; 734  : 		return 0;

  0003e	5b		 pop	 ebx
  0003f	33 c0		 xor	 eax, eax
  00041	5e		 pop	 esi

; 784  : 	}
; 785  : 	return 1;
; 786  : }

  00042	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00045	33 cd		 xor	 ecx, ebp
  00047	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0004c	8b e5		 mov	 esp, ebp
  0004e	5d		 pop	 ebp
  0004f	c2 08 00	 ret	 8
$LN7@GiveReward:
  00052	57		 push	 edi

; 735  : 
; 736  : 	int iRET_EXP = 0;
; 737  : 	int iCAL_EXP = Exp;
; 738  : 	int iMAX_LEVCOUNT = 0;
; 739  : 
; 740  : 	if ( !gObjIsConnected(aIndex))

  00053	56		 push	 esi
  00054	8b fb		 mov	 edi, ebx
  00056	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _iMAX_LEVCOUNT$[ebp], 0
  0005d	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00062	83 c4 04	 add	 esp, 4
  00065	85 c0		 test	 eax, eax
  00067	75 13		 jne	 SHORT $LN6@GiveReward
  00069	5f		 pop	 edi
  0006a	5b		 pop	 ebx
  0006b	5e		 pop	 esi

; 784  : 	}
; 785  : 	return 1;
; 786  : }

  0006c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0006f	33 cd		 xor	 ecx, ebp
  00071	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00076	8b e5		 mov	 esp, ebp
  00078	5d		 pop	 ebp
  00079	c2 08 00	 ret	 8
$LN6@GiveReward:

; 741  : 		return 0;
; 742  : 
; 743  : 	iRET_EXP = iCAL_EXP;
; 744  : 
; 745  : 	if ( gObj[aIndex].Type == OBJ_USER )

  0007c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00082	8b c6		 mov	 eax, esi
  00084	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0008a	66 83 7c 08 68
	01		 cmp	 WORD PTR [eax+ecx+104], 1
  00090	89 45 d4	 mov	 DWORD PTR tv195[ebp], eax
  00093	0f 85 c7 00 00
	00		 jne	 $LN5@GiveReward

; 746  : 	{
; 747  : 		while ( iCAL_EXP > 0 )

  00099	85 db		 test	 ebx, ebx
  0009b	7e 43		 jle	 SHORT $LN3@GiveReward

; 748  : 		{
; 749  : 			if ( iCAL_EXP > 0 )

  0009d	85 ff		 test	 edi, edi
  0009f	7e 0f		 jle	 SHORT $LN2@GiveReward
$LN16@GiveReward:

; 750  : 			{
; 751  : 				iCAL_EXP = this->LevelUp(aIndex, iCAL_EXP);

  000a1	8b 4d d0	 mov	 ecx, DWORD PTR _this$[ebp]
  000a4	57		 push	 edi
  000a5	56		 push	 esi
  000a6	e8 00 00 00 00	 call	 ?LevelUp@CImperial@@QAEHHH@Z ; CImperial::LevelUp
  000ab	8b f8		 mov	 edi, eax
  000ad	8b 45 d4	 mov	 eax, DWORD PTR tv195[ebp]
$LN2@GiveReward:

; 752  : 			}
; 753  : 
; 754  : 			iMAX_LEVCOUNT++;

  000b0	8b 4d d8	 mov	 ecx, DWORD PTR _iMAX_LEVCOUNT$[ebp]
  000b3	41		 inc	 ecx
  000b4	89 4d d8	 mov	 DWORD PTR _iMAX_LEVCOUNT$[ebp], ecx

; 755  : 
; 756  : 			if ( iMAX_LEVCOUNT > 5 )

  000b7	83 f9 05	 cmp	 ecx, 5
  000ba	7f 06		 jg	 SHORT $LN12@GiveReward

; 746  : 	{
; 747  : 		while ( iCAL_EXP > 0 )

  000bc	85 ff		 test	 edi, edi
  000be	7f e1		 jg	 SHORT $LN16@GiveReward

; 755  : 
; 756  : 			if ( iMAX_LEVCOUNT > 5 )

  000c0	eb 1e		 jmp	 SHORT $LN3@GiveReward
$LN12@GiveReward:

; 757  : 			{
; 758  : 				LogAddTD("[ IMPERIAL FORT ][GiveRewardExp] LevelUp Error [%s][%s]",
; 759  : 					gObj[aIndex].AccountID, gObj[aIndex].Name);

  000c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000c8	8d 54 08 77	 lea	 edx, DWORD PTR [eax+ecx+119]
  000cc	52		 push	 edx
  000cd	8d 44 08 6c	 lea	 eax, DWORD PTR [eax+ecx+108]
  000d1	50		 push	 eax
  000d2	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@DGDPBAIK@?$FL?5IMPERIAL?5FORT?5?$FN?$FLGiveRewardExp?$FN@
  000d7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000dd	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@GiveReward:

; 760  : 
; 761  : 				break;
; 762  : 			}
; 763  : 		}
; 764  : 
; 765  : 		PMSG_KILLPLAYER_EXT pMsg;
; 766  : 
; 767  : 		PHeadSetBE((LPBYTE)&pMsg, 0x9C, sizeof(pMsg));

  000e0	6a 10		 push	 16			; 00000010H
  000e2	8d 4d dc	 lea	 ecx, DWORD PTR _pMsg$212817[ebp]
  000e5	68 9c 00 00 00	 push	 156			; 0000009cH
  000ea	51		 push	 ecx
  000eb	e8 00 00 00 00	 call	 ?PHeadSetBE@@YAXPAEEH@Z	; PHeadSetBE

; 768  : 		pMsg.NumberH = -1;
; 769  : 		pMsg.NumberL = -1;
; 770  : 		pMsg.ExpH = SET_NUMBERHW(Exp);
; 771  : 		pMsg.ExpL = SET_NUMBERLW(Exp);
; 772  : 		pMsg.DamageH = 0;
; 773  : 		pMsg.DamageL = 0;
; 774  : 
; 775  : 		pMsg.ExDamage = 0;
; 776  : 
; 777  : 		DataSend(aIndex, (LPBYTE)&pMsg, pMsg.h.size);

  000f0	0f b6 45 dd	 movzx	 eax, BYTE PTR _pMsg$212817[ebp+1]
  000f4	50		 push	 eax
  000f5	8d 4d dc	 lea	 ecx, DWORD PTR _pMsg$212817[ebp]
  000f8	8b d3		 mov	 edx, ebx
  000fa	51		 push	 ecx
  000fb	c1 ea 10	 shr	 edx, 16			; 00000010H
  000fe	56		 push	 esi
  000ff	66 c7 45 df ff
	ff		 mov	 WORD PTR _pMsg$212817[ebp+3], 65535 ; 0000ffffH
  00105	66 89 55 e2	 mov	 WORD PTR _pMsg$212817[ebp+6], dx
  00109	66 89 5d e4	 mov	 WORD PTR _pMsg$212817[ebp+8], bx
  0010d	66 c7 45 e6 00
	00		 mov	 WORD PTR _pMsg$212817[ebp+10], 0
  00113	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _pMsg$212817[ebp+12], 0
  0011a	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend

; 778  : 
; 779  : 		PMSG_FORT_END_MESSAGE pExp = {0};
; 780  : 		PHeadSubSetB((LPBYTE)&pExp, 0xF7, 0x06, sizeof(pExp));

  0011f	6a 10		 push	 16			; 00000010H
  00121	33 c0		 xor	 eax, eax
  00123	6a 06		 push	 6
  00125	8d 55 ec	 lea	 edx, DWORD PTR _pExp$212825[ebp]
  00128	68 f7 00 00 00	 push	 247			; 000000f7H
  0012d	52		 push	 edx
  0012e	c6 45 ec 00	 mov	 BYTE PTR _pExp$212825[ebp], 0
  00132	89 45 ed	 mov	 DWORD PTR _pExp$212825[ebp+1], eax
  00135	89 45 f1	 mov	 DWORD PTR _pExp$212825[ebp+5], eax
  00138	89 45 f5	 mov	 DWORD PTR _pExp$212825[ebp+9], eax
  0013b	66 89 45 f9	 mov	 WORD PTR _pExp$212825[ebp+13], ax
  0013f	88 45 fb	 mov	 BYTE PTR _pExp$212825[ebp+15], al
  00142	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 781  : 		pExp.Type = 2;
; 782  : 		pExp.Experience = Exp;
; 783  : 		DataSend(aIndex, (LPBYTE)&pExp, pExp.h.size);

  00147	0f b6 45 ed	 movzx	 eax, BYTE PTR _pExp$212825[ebp+1]
  0014b	50		 push	 eax
  0014c	8d 4d ec	 lea	 ecx, DWORD PTR _pExp$212825[ebp]
  0014f	51		 push	 ecx
  00150	56		 push	 esi
  00151	c6 45 f0 02	 mov	 BYTE PTR _pExp$212825[ebp+4], 2
  00155	89 5d f4	 mov	 DWORD PTR _pExp$212825[ebp+8], ebx
  00158	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  0015d	83 c4 34	 add	 esp, 52			; 00000034H
$LN5@GiveReward:

; 784  : 	}
; 785  : 	return 1;
; 786  : }

  00160	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00163	5f		 pop	 edi
  00164	5b		 pop	 ebx
  00165	33 cd		 xor	 ecx, ebp
  00167	b8 01 00 00 00	 mov	 eax, 1
  0016c	5e		 pop	 esi
  0016d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00172	8b e5		 mov	 esp, ebp
  00174	5d		 pop	 ebp
  00175	c2 08 00	 ret	 8
?GiveRewardExp@CImperial@@QAEHHH@Z ENDP			; CImperial::GiveRewardExp
_TEXT	ENDS
PUBLIC	?Init@CImperial@@QAEXXZ				; CImperial::Init
; Function compile flags: /Ogtp
;	COMDAT ?Init@CImperial@@QAEXXZ
_TEXT	SEGMENT
?Init@CImperial@@QAEXXZ PROC				; CImperial::Init, COMDAT
; _this$ = ecx

; 30   : 	this->m_ImperialData.Reset();

  00000	83 c8 ff	 or	 eax, -1
  00003	66 89 81 20 af
	00 00		 mov	 WORD PTR [ecx+44832], ax
  0000a	33 c0		 xor	 eax, eax

; 31   : 
; 32   : 	this->SetState(IMPERIAL_STATE_OPEN);

  0000c	6a 01		 push	 1
  0000e	89 81 24 af 00
	00		 mov	 DWORD PTR [ecx+44836], eax
  00014	89 81 28 af 00
	00		 mov	 DWORD PTR [ecx+44840], eax
  0001a	89 81 2c af 00
	00		 mov	 DWORD PTR [ecx+44844], eax
  00020	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState

; 33   : }

  00025	c3		 ret	 0
?Init@CImperial@@QAEXXZ ENDP				; CImperial::Init
_TEXT	ENDS
PUBLIC	?ProcState_DESTLER@CImperial@@QAEXXZ		; CImperial::ProcState_DESTLER
EXTRN	?Run@CImperialBattleOfDestler@@QAEXXZ:PROC	; CImperialBattleOfDestler::Run
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_DESTLER@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_DESTLER@CImperial@@QAEXXZ PROC		; CImperial::ProcState_DESTLER, COMDAT
; _this$ = ecx

; 257  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 258  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount

; 259  : 	{
; 260  : 		this->m_BattleOfDestler.SetState(7);

  0000d	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  00013	85 c0		 test	 eax, eax
  00015	7f 12		 jg	 SHORT $LN6@ProcState_@3
  00017	6a 07		 push	 7
  00019	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfDestler@@QAEXH@Z ; CImperialBattleOfDestler::SetState

; 261  : 		#if(FIX_IMPERIAL)
; 262  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0001e	6a 09		 push	 9
  00020	8b ce		 mov	 ecx, esi
  00022	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00027	5e		 pop	 esi

; 281  : }

  00028	c3		 ret	 0
$LN6@ProcState_@3:
  00029	57		 push	 edi

; 263  : 		#endif
; 264  : 		return;
; 265  : 	}	
; 266  : 	if ( this->m_BattleOfDestler.GetEventState() == 0 )

  0002a	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfDestler@@QAEHXZ ; CImperialBattleOfDestler::GetEventState
  0002f	85 c0		 test	 eax, eax
  00031	75 65		 jne	 SHORT $LN5@ProcState_@3

; 267  : 	{
; 268  : 		if(this->m_BattleOfDestler.GetSuccessValue() == true)

  00033	80 be 8d af 00
	00 01		 cmp	 BYTE PTR [esi+44941], 1
  0003a	75 43		 jne	 SHORT $LN15@ProcState_@3

; 269  : 		{
; 270  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  0003c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00041	33 ff		 xor	 edi, edi
  00043	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00048	85 c0		 test	 eax, eax
  0004a	7e 33		 jle	 SHORT $LN15@ProcState_@3
  0004c	53		 push	 ebx
  0004d	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL3@ProcState_@3:

; 271  : 			{
; 272  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00052	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00058	8b 13		 mov	 edx, DWORD PTR [ebx]
  0005a	c1 e0 04	 shl	 eax, 4
  0005d	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00063	51		 push	 ecx
  00064	52		 push	 edx
  00065	8b ce		 mov	 ecx, esi
  00067	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0006c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00071	47		 inc	 edi
  00072	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00075	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0007a	3b f8		 cmp	 edi, eax
  0007c	7c d4		 jl	 SHORT $LL3@ProcState_@3
  0007e	5b		 pop	 ebx
$LN15@ProcState_@3:

; 273  : 			}
; 274  : 		}
; 275  : 		this->m_BattleOfDestler.SetState(0);

  0007f	6a 00		 push	 0
  00081	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  00087	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfDestler@@QAEXH@Z ; CImperialBattleOfDestler::SetState

; 276  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0008c	6a 09		 push	 9
  0008e	8b ce		 mov	 ecx, esi
  00090	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00095	5f		 pop	 edi
  00096	5e		 pop	 esi

; 281  : }

  00097	c3		 ret	 0
$LN5@ProcState_@3:

; 277  : 		return;
; 278  : 	}
; 279  : 	this->m_ImperialData.Time = this->m_BattleOfDestler.m_BattleData.Time;

  00098	8b 86 6c af 00
	00		 mov	 eax, DWORD PTR [esi+44908]
  0009e	5f		 pop	 edi
  0009f	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 280  : 	this->m_BattleOfDestler.Run();

  000a5	8d 8e 34 af 00
	00		 lea	 ecx, DWORD PTR [esi+44852]
  000ab	5e		 pop	 esi
  000ac	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfDestler@@QAEXXZ ; CImperialBattleOfDestler::Run
?ProcState_DESTLER@CImperial@@QAEXXZ ENDP		; CImperial::ProcState_DESTLER
_TEXT	ENDS
PUBLIC	?ProcState_VERMONT@CImperial@@QAEXXZ		; CImperial::ProcState_VERMONT
EXTRN	?Run@CImperialBattleOfVermont@@QAEXXZ:PROC	; CImperialBattleOfVermont::Run
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_VERMONT@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_VERMONT@CImperial@@QAEXXZ PROC		; CImperial::ProcState_VERMONT, COMDAT
; _this$ = ecx

; 284  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 285  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount

; 286  : 	{
; 287  : 		this->m_BattleOfVermont.SetState(7);

  0000d	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  00013	85 c0		 test	 eax, eax
  00015	7f 12		 jg	 SHORT $LN6@ProcState_@4
  00017	6a 07		 push	 7
  00019	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfVermont@@QAEXH@Z ; CImperialBattleOfVermont::SetState

; 288  : 		#if(FIX_IMPERIAL)
; 289  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0001e	6a 09		 push	 9
  00020	8b ce		 mov	 ecx, esi
  00022	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00027	5e		 pop	 esi

; 308  : }

  00028	c3		 ret	 0
$LN6@ProcState_@4:
  00029	57		 push	 edi

; 290  : 		#endif
; 291  : 		return;
; 292  : 	}	
; 293  : 	if ( this->m_BattleOfVermont.GetEventState() == 0 )

  0002a	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfVermont@@QAEHXZ ; CImperialBattleOfVermont::GetEventState
  0002f	85 c0		 test	 eax, eax
  00031	75 65		 jne	 SHORT $LN5@ProcState_@4

; 294  : 	{
; 295  : 		if(this->m_BattleOfVermont.GetSuccessValue() == true)

  00033	80 be e9 af 00
	00 01		 cmp	 BYTE PTR [esi+45033], 1
  0003a	75 43		 jne	 SHORT $LN15@ProcState_@4

; 296  : 		{
; 297  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  0003c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00041	33 ff		 xor	 edi, edi
  00043	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00048	85 c0		 test	 eax, eax
  0004a	7e 33		 jle	 SHORT $LN15@ProcState_@4
  0004c	53		 push	 ebx
  0004d	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL3@ProcState_@4:

; 298  : 			{
; 299  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00052	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00058	8b 13		 mov	 edx, DWORD PTR [ebx]
  0005a	c1 e0 04	 shl	 eax, 4
  0005d	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00063	51		 push	 ecx
  00064	52		 push	 edx
  00065	8b ce		 mov	 ecx, esi
  00067	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0006c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00071	47		 inc	 edi
  00072	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00075	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0007a	3b f8		 cmp	 edi, eax
  0007c	7c d4		 jl	 SHORT $LL3@ProcState_@4
  0007e	5b		 pop	 ebx
$LN15@ProcState_@4:

; 300  : 			}
; 301  : 		}
; 302  : 		this->m_BattleOfVermont.SetState(0);

  0007f	6a 00		 push	 0
  00081	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  00087	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfVermont@@QAEXH@Z ; CImperialBattleOfVermont::SetState

; 303  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0008c	6a 09		 push	 9
  0008e	8b ce		 mov	 ecx, esi
  00090	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00095	5f		 pop	 edi
  00096	5e		 pop	 esi

; 308  : }

  00097	c3		 ret	 0
$LN5@ProcState_@4:

; 304  : 		return;
; 305  : 	}
; 306  : 	this->m_ImperialData.Time = this->m_BattleOfVermont.m_BattleData.Time;

  00098	8b 86 c8 af 00
	00		 mov	 eax, DWORD PTR [esi+45000]
  0009e	5f		 pop	 edi
  0009f	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 307  : 	this->m_BattleOfVermont.Run();

  000a5	8d 8e 90 af 00
	00		 lea	 ecx, DWORD PTR [esi+44944]
  000ab	5e		 pop	 esi
  000ac	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfVermont@@QAEXXZ ; CImperialBattleOfVermont::Run
?ProcState_VERMONT@CImperial@@QAEXXZ ENDP		; CImperial::ProcState_VERMONT
_TEXT	ENDS
PUBLIC	?ProcState_KATO@CImperial@@QAEXXZ		; CImperial::ProcState_KATO
EXTRN	?Run@CImperialBattleOfKato@@QAEXXZ:PROC		; CImperialBattleOfKato::Run
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_KATO@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_KATO@CImperial@@QAEXXZ PROC			; CImperial::ProcState_KATO, COMDAT
; _this$ = ecx

; 311  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 312  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount

; 313  : 	{
; 314  : 		this->m_BattleOfKato.SetState(7);

  0000d	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  00013	85 c0		 test	 eax, eax
  00015	7f 12		 jg	 SHORT $LN6@ProcState_@5
  00017	6a 07		 push	 7
  00019	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfKato@@QAEXH@Z ; CImperialBattleOfKato::SetState

; 315  : 		#if(FIX_IMPERIAL)
; 316  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0001e	6a 09		 push	 9
  00020	8b ce		 mov	 ecx, esi
  00022	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00027	5e		 pop	 esi

; 336  : }

  00028	c3		 ret	 0
$LN6@ProcState_@5:
  00029	57		 push	 edi

; 317  : 		#endif
; 318  : 		return;
; 319  : 	}	
; 320  : 	if ( this->m_BattleOfKato.GetEventState() == 0 )

  0002a	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfKato@@QAEHXZ ; CImperialBattleOfKato::GetEventState
  0002f	85 c0		 test	 eax, eax
  00031	75 65		 jne	 SHORT $LN5@ProcState_@5

; 321  : 	{
; 322  : 		if(this->m_BattleOfKato.GetSuccessValue() == true)

  00033	80 be 45 b0 00
	00 01		 cmp	 BYTE PTR [esi+45125], 1
  0003a	75 43		 jne	 SHORT $LN15@ProcState_@5

; 323  : 		{
; 324  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  0003c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00041	33 ff		 xor	 edi, edi
  00043	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00048	85 c0		 test	 eax, eax
  0004a	7e 33		 jle	 SHORT $LN15@ProcState_@5
  0004c	53		 push	 ebx
  0004d	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL3@ProcState_@5:

; 325  : 			{
; 326  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00052	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00058	8b 13		 mov	 edx, DWORD PTR [ebx]
  0005a	c1 e0 04	 shl	 eax, 4
  0005d	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00063	51		 push	 ecx
  00064	52		 push	 edx
  00065	8b ce		 mov	 ecx, esi
  00067	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0006c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00071	47		 inc	 edi
  00072	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00075	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0007a	3b f8		 cmp	 edi, eax
  0007c	7c d4		 jl	 SHORT $LL3@ProcState_@5
  0007e	5b		 pop	 ebx
$LN15@ProcState_@5:

; 327  : 			}
; 328  : 		}
; 329  : 
; 330  : 		this->m_BattleOfKato.SetState(0);

  0007f	6a 00		 push	 0
  00081	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  00087	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfKato@@QAEXH@Z ; CImperialBattleOfKato::SetState

; 331  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0008c	6a 09		 push	 9
  0008e	8b ce		 mov	 ecx, esi
  00090	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00095	5f		 pop	 edi
  00096	5e		 pop	 esi

; 336  : }

  00097	c3		 ret	 0
$LN5@ProcState_@5:

; 332  : 		return;
; 333  : 	}
; 334  : 	this->m_ImperialData.Time = this->m_BattleOfKato.m_BattleData.Time;

  00098	8b 86 24 b0 00
	00		 mov	 eax, DWORD PTR [esi+45092]
  0009e	5f		 pop	 edi
  0009f	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 335  : 	this->m_BattleOfKato.Run();

  000a5	8d 8e ec af 00
	00		 lea	 ecx, DWORD PTR [esi+45036]
  000ab	5e		 pop	 esi
  000ac	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfKato@@QAEXXZ ; CImperialBattleOfKato::Run
?ProcState_KATO@CImperial@@QAEXXZ ENDP			; CImperial::ProcState_KATO
_TEXT	ENDS
PUBLIC	?ProcState_GALIA@CImperial@@QAEXXZ		; CImperial::ProcState_GALIA
EXTRN	?Run@CImperialBattleOfGalia@@QAEXXZ:PROC	; CImperialBattleOfGalia::Run
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_GALIA@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_GALIA@CImperial@@QAEXXZ PROC			; CImperial::ProcState_GALIA, COMDAT
; _this$ = ecx

; 339  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 340  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount

; 341  : 	{
; 342  : 		this->m_BattleOfGalia.SetState(7);

  0000d	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  00013	85 c0		 test	 eax, eax
  00015	7f 12		 jg	 SHORT $LN6@ProcState_@6
  00017	6a 07		 push	 7
  00019	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState

; 343  : 		#if(FIX_IMPERIAL)
; 344  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0001e	6a 09		 push	 9
  00020	8b ce		 mov	 ecx, esi
  00022	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00027	5e		 pop	 esi

; 363  : }

  00028	c3		 ret	 0
$LN6@ProcState_@6:
  00029	57		 push	 edi

; 345  : 		#endif
; 346  : 		return;
; 347  : 	}	
; 348  : 	if ( this->m_BattleOfGalia.GetEventState() == 0 )

  0002a	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGalia@@QAEHXZ ; CImperialBattleOfGalia::GetEventState
  0002f	85 c0		 test	 eax, eax
  00031	75 65		 jne	 SHORT $LN5@ProcState_@6

; 349  : 	{
; 350  : 		if(this->m_BattleOfGalia.GetSuccessValue() == true)

  00033	80 be a1 b0 00
	00 01		 cmp	 BYTE PTR [esi+45217], 1
  0003a	75 43		 jne	 SHORT $LN15@ProcState_@6

; 351  : 		{
; 352  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  0003c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00041	33 ff		 xor	 edi, edi
  00043	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00048	85 c0		 test	 eax, eax
  0004a	7e 33		 jle	 SHORT $LN15@ProcState_@6
  0004c	53		 push	 ebx
  0004d	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL3@ProcState_@6:

; 353  : 			{
; 354  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00052	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00058	8b 13		 mov	 edx, DWORD PTR [ebx]
  0005a	c1 e0 04	 shl	 eax, 4
  0005d	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00063	51		 push	 ecx
  00064	52		 push	 edx
  00065	8b ce		 mov	 ecx, esi
  00067	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0006c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00071	47		 inc	 edi
  00072	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00075	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0007a	3b f8		 cmp	 edi, eax
  0007c	7c d4		 jl	 SHORT $LL3@ProcState_@6
  0007e	5b		 pop	 ebx
$LN15@ProcState_@6:

; 355  : 			}
; 356  : 		}
; 357  : 		this->m_BattleOfGalia.SetState(0);

  0007f	6a 00		 push	 0
  00081	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  00087	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGalia@@QAEXH@Z ; CImperialBattleOfGalia::SetState

; 358  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0008c	6a 09		 push	 9
  0008e	8b ce		 mov	 ecx, esi
  00090	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00095	5f		 pop	 edi
  00096	5e		 pop	 esi

; 363  : }

  00097	c3		 ret	 0
$LN5@ProcState_@6:

; 359  : 		return;
; 360  : 	}
; 361  : 	this->m_ImperialData.Time = this->m_BattleOfGalia.m_BattleData.Time;

  00098	8b 86 80 b0 00
	00		 mov	 eax, DWORD PTR [esi+45184]
  0009e	5f		 pop	 edi
  0009f	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 362  : 	this->m_BattleOfGalia.Run();

  000a5	8d 8e 48 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45128]
  000ab	5e		 pop	 esi
  000ac	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfGalia@@QAEXXZ ; CImperialBattleOfGalia::Run
?ProcState_GALIA@CImperial@@QAEXXZ ENDP			; CImperial::ProcState_GALIA
_TEXT	ENDS
PUBLIC	??_C@_0CJ@OFPDEFOD@?$FL?5IMPERIAL?5FORT?5?$FN?5Quest?5Failed?5?9@ ; `string'
PUBLIC	?ProcState_ERKANNE@CImperial@@QAEXXZ		; CImperial::ProcState_ERKANNE
EXTRN	?Run@CImperialBattleOfErkanne@@QAEXXZ:PROC	; CImperialBattleOfErkanne::Run
;	COMDAT ??_C@_0CJ@OFPDEFOD@?$FL?5IMPERIAL?5FORT?5?$FN?5Quest?5Failed?5?9@
; File e:\work\tranet_version\gs\gameserver\imperialbattleuser.h
CONST	SEGMENT
??_C@_0CJ@OFPDEFOD@?$FL?5IMPERIAL?5FORT?5?$FN?5Quest?5Failed?5?9@ DB '[ I'
	DB	'MPERIAL FORT ] Quest Failed - No User', 00H	; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperial.cpp
CONST	ENDS
;	COMDAT ?ProcState_ERKANNE@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_ERKANNE@CImperial@@QAEXXZ PROC		; CImperial::ProcState_ERKANNE, COMDAT
; _this$ = ecx

; 366  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 367  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0000d	85 c0		 test	 eax, eax
  0000f	7f 26		 jg	 SHORT $LN6@ProcState_@7

; 368  : 	{
; 369  : 		LogAddTD("[ IMPERIAL FORT ] Quest Failed - No User");

  00011	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@OFPDEFOD@?$FL?5IMPERIAL?5FORT?5?$FN?5Quest?5Failed?5?9@
  00016	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0001c	83 c4 04	 add	 esp, 4

; 370  : 		this->m_BattleOfErkanne.SetState(7);

  0001f	6a 07		 push	 7
  00021	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  00027	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfErkanne@@QAEXH@Z ; CImperialBattleOfErkanne::SetState

; 371  : 		#if(FIX_IMPERIAL)
; 372  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0002c	6a 09		 push	 9
  0002e	8b ce		 mov	 ecx, esi
  00030	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00035	5e		 pop	 esi

; 391  : }

  00036	c3		 ret	 0
$LN6@ProcState_@7:
  00037	57		 push	 edi

; 373  : 		return;
; 374  : 		#endif
; 375  : 	}	
; 376  : 	if ( this->m_BattleOfErkanne.GetEventState() == 0 )

  00038	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  0003e	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfErkanne@@QAEHXZ ; CImperialBattleOfErkanne::GetEventState
  00043	85 c0		 test	 eax, eax
  00045	75 6f		 jne	 SHORT $LN5@ProcState_@7

; 377  : 	{
; 378  : 		if(this->m_BattleOfErkanne.GetSuccessValue() == true)

  00047	80 be fd b0 00
	00 01		 cmp	 BYTE PTR [esi+45309], 1
  0004e	75 4d		 jne	 SHORT $LN15@ProcState_@7

; 379  : 		{
; 380  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00055	33 ff		 xor	 edi, edi
  00057	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0005c	85 c0		 test	 eax, eax
  0005e	7e 3d		 jle	 SHORT $LN15@ProcState_@7
  00060	53		 push	 ebx
  00061	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
  00066	eb 08 8d a4 24
	00 00 00 00 90	 npad	 10
$LL3@ProcState_@7:

; 381  : 			{
; 382  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00070	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00076	8b 13		 mov	 edx, DWORD PTR [ebx]
  00078	c1 e0 04	 shl	 eax, 4
  0007b	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00081	51		 push	 ecx
  00082	52		 push	 edx
  00083	8b ce		 mov	 ecx, esi
  00085	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0008a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  0008f	47		 inc	 edi
  00090	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00093	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00098	3b f8		 cmp	 edi, eax
  0009a	7c d4		 jl	 SHORT $LL3@ProcState_@7
  0009c	5b		 pop	 ebx
$LN15@ProcState_@7:

; 383  : 			}
; 384  : 		}
; 385  : 		this->m_BattleOfErkanne.SetState(0);

  0009d	6a 00		 push	 0
  0009f	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  000a5	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfErkanne@@QAEXH@Z ; CImperialBattleOfErkanne::SetState

; 386  : 		this->SetState(IMPERIAL_STATE_ENDED);

  000aa	6a 09		 push	 9
  000ac	8b ce		 mov	 ecx, esi
  000ae	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  000b3	5f		 pop	 edi
  000b4	5e		 pop	 esi

; 391  : }

  000b5	c3		 ret	 0
$LN5@ProcState_@7:

; 387  : 		return;
; 388  : 	}
; 389  : 	this->m_ImperialData.Time = this->m_BattleOfErkanne.m_BattleData.Time;

  000b6	8b 86 dc b0 00
	00		 mov	 eax, DWORD PTR [esi+45276]
  000bc	5f		 pop	 edi
  000bd	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 390  : 	this->m_BattleOfErkanne.Run();

  000c3	8d 8e a4 b0 00
	00		 lea	 ecx, DWORD PTR [esi+45220]
  000c9	5e		 pop	 esi
  000ca	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfErkanne@@QAEXXZ ; CImperialBattleOfErkanne::Run
?ProcState_ERKANNE@CImperial@@QAEXXZ ENDP		; CImperial::ProcState_ERKANNE
_TEXT	ENDS
PUBLIC	?ProcState_RAYMOND@CImperial@@QAEXXZ		; CImperial::ProcState_RAYMOND
EXTRN	?Run@CImperialBattleOfRaymond@@QAEXXZ:PROC	; CImperialBattleOfRaymond::Run
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_RAYMOND@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_RAYMOND@CImperial@@QAEXXZ PROC		; CImperial::ProcState_RAYMOND, COMDAT
; _this$ = ecx

; 394  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 395  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0000d	85 c0		 test	 eax, eax
  0000f	7f 26		 jg	 SHORT $LN6@ProcState_@8

; 396  : 	{
; 397  : 		LogAddTD("[ IMPERIAL FORT ] Quest Failed - No User");

  00011	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@OFPDEFOD@?$FL?5IMPERIAL?5FORT?5?$FN?5Quest?5Failed?5?9@
  00016	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0001c	83 c4 04	 add	 esp, 4

; 398  : 		this->m_BattleOfRaymond.SetState(7);

  0001f	6a 07		 push	 7
  00021	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  00027	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfRaymond@@QAEXH@Z ; CImperialBattleOfRaymond::SetState

; 399  : 		#if(FIX_IMPERIAL)
; 400  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0002c	6a 09		 push	 9
  0002e	8b ce		 mov	 ecx, esi
  00030	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00035	5e		 pop	 esi

; 419  : }

  00036	c3		 ret	 0
$LN6@ProcState_@8:
  00037	57		 push	 edi

; 401  : 		return;
; 402  : 		#endif		
; 403  : 	}	
; 404  : 	if ( this->m_BattleOfRaymond.GetEventState() == 0 )

  00038	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  0003e	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfRaymond@@QAEHXZ ; CImperialBattleOfRaymond::GetEventState
  00043	85 c0		 test	 eax, eax
  00045	75 6f		 jne	 SHORT $LN5@ProcState_@8

; 405  : 	{
; 406  : 		if(this->m_BattleOfRaymond.GetSuccessValue() == true)

  00047	80 be 4d b1 00
	00 01		 cmp	 BYTE PTR [esi+45389], 1
  0004e	75 4d		 jne	 SHORT $LN15@ProcState_@8

; 407  : 		{
; 408  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00055	33 ff		 xor	 edi, edi
  00057	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0005c	85 c0		 test	 eax, eax
  0005e	7e 3d		 jle	 SHORT $LN15@ProcState_@8
  00060	53		 push	 ebx
  00061	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
  00066	eb 08 8d a4 24
	00 00 00 00 90	 npad	 10
$LL3@ProcState_@8:

; 409  : 			{
; 410  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00070	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00076	8b 13		 mov	 edx, DWORD PTR [ebx]
  00078	c1 e0 04	 shl	 eax, 4
  0007b	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00081	51		 push	 ecx
  00082	52		 push	 edx
  00083	8b ce		 mov	 ecx, esi
  00085	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0008a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  0008f	47		 inc	 edi
  00090	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00093	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00098	3b f8		 cmp	 edi, eax
  0009a	7c d4		 jl	 SHORT $LL3@ProcState_@8
  0009c	5b		 pop	 ebx
$LN15@ProcState_@8:

; 411  : 			}
; 412  : 		}
; 413  : 		this->m_BattleOfRaymond.SetState(0);

  0009d	6a 00		 push	 0
  0009f	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  000a5	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfRaymond@@QAEXH@Z ; CImperialBattleOfRaymond::SetState

; 414  : 		this->SetState(IMPERIAL_STATE_ENDED);

  000aa	6a 09		 push	 9
  000ac	8b ce		 mov	 ecx, esi
  000ae	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  000b3	5f		 pop	 edi
  000b4	5e		 pop	 esi

; 419  : }

  000b5	c3		 ret	 0
$LN5@ProcState_@8:

; 415  : 		return;
; 416  : 	}
; 417  : 	this->m_ImperialData.Time = this->m_BattleOfRaymond.m_BattleData.Time;

  000b6	8b 86 2c b1 00
	00		 mov	 eax, DWORD PTR [esi+45356]
  000bc	5f		 pop	 edi
  000bd	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 418  : 	this->m_BattleOfRaymond.Run();

  000c3	8d 8e 00 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45312]
  000c9	5e		 pop	 esi
  000ca	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfRaymond@@QAEXXZ ; CImperialBattleOfRaymond::Run
?ProcState_RAYMOND@CImperial@@QAEXXZ ENDP		; CImperial::ProcState_RAYMOND
_TEXT	ENDS
PUBLIC	?ProcState_GAION@CImperial@@QAEXXZ		; CImperial::ProcState_GAION
EXTRN	?Run@CImperialBattleOfGaion@@QAEXXZ:PROC	; CImperialBattleOfGaion::Run
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_GAION@CImperial@@QAEXXZ
_TEXT	SEGMENT
?ProcState_GAION@CImperial@@QAEXXZ PROC			; CImperial::ProcState_GAION, COMDAT
; _this$ = ecx

; 422  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 423  : 	if ( g_ImperialBattleUserMng.GetUserCount() <= 0 )

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0000d	85 c0		 test	 eax, eax
  0000f	7f 26		 jg	 SHORT $LN6@ProcState_@9

; 424  : 	{
; 425  : 		LogAddTD("[ IMPERIAL FORT ] Quest Failed - No User");

  00011	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@OFPDEFOD@?$FL?5IMPERIAL?5FORT?5?$FN?5Quest?5Failed?5?9@
  00016	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0001c	83 c4 04	 add	 esp, 4

; 426  : 		this->m_BattleOfGaion.SetState(9);

  0001f	6a 09		 push	 9
  00021	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  00027	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState

; 427  : 		#if(FIX_IMPERIAL)
; 428  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0002c	6a 09		 push	 9
  0002e	8b ce		 mov	 ecx, esi
  00030	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  00035	5e		 pop	 esi

; 446  : }

  00036	c3		 ret	 0
$LN6@ProcState_@9:
  00037	57		 push	 edi

; 429  : 		return;
; 430  : 		#endif
; 431  : 	}	
; 432  : 	if ( this->m_BattleOfGaion.GetEventState() == 0 )

  00038	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  0003e	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGaion@@QAEHXZ ; CImperialBattleOfGaion::GetEventState
  00043	85 c0		 test	 eax, eax
  00045	75 62		 jne	 SHORT $LN5@ProcState_@9

; 433  : 	{
; 434  : 		if(this->m_BattleOfGaion.GetSuccessValue() == true)

  00047	80 be a1 b1 00
	00 01		 cmp	 BYTE PTR [esi+45473], 1
  0004e	75 4d		 jne	 SHORT $LN1@ProcState_@9

; 435  : 		{
; 436  : 			for(int i=0;i<g_ImperialBattleUserMng.GetUserCount();++i)

  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00055	33 ff		 xor	 edi, edi
  00057	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  0005c	85 c0		 test	 eax, eax
  0005e	7e 3d		 jle	 SHORT $LN1@ProcState_@9
  00060	53		 push	 ebx
  00061	bb 08 00 00 00	 mov	 ebx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
  00066	eb 08 8d a4 24
	00 00 00 00 90	 npad	 10
$LL3@ProcState_@9:

; 437  : 			{
; 438  : 				this->GiveRewardExp(g_ImperialBattleUserMng.m_BattleUser[i].GetIndex(), g_ExpTable[this->m_ImperialData.Day].Experience);

  00070	8b 86 30 af 00
	00		 mov	 eax, DWORD PTR [esi+44848]
  00076	8b 13		 mov	 edx, DWORD PTR [ebx]
  00078	c1 e0 04	 shl	 eax, 4
  0007b	8b 88 08 00 00
	00		 mov	 ecx, DWORD PTR _g_ExpTable[eax+8]
  00081	51		 push	 ecx
  00082	52		 push	 edx
  00083	8b ce		 mov	 ecx, esi
  00085	e8 00 00 00 00	 call	 ?GiveRewardExp@CImperial@@QAEHHH@Z ; CImperial::GiveRewardExp
  0008a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  0008f	47		 inc	 edi
  00090	83 c3 0c	 add	 ebx, 12			; 0000000cH
  00093	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00098	3b f8		 cmp	 edi, eax
  0009a	7c d4		 jl	 SHORT $LL3@ProcState_@9
  0009c	5b		 pop	 ebx
$LN1@ProcState_@9:

; 439  : 			}
; 440  : 		}
; 441  : 		this->SetState(IMPERIAL_STATE_ENDED);

  0009d	6a 09		 push	 9
  0009f	8b ce		 mov	 ecx, esi
  000a1	e8 00 00 00 00	 call	 ?SetState@CImperial@@QAEXH@Z ; CImperial::SetState
  000a6	5f		 pop	 edi
  000a7	5e		 pop	 esi

; 446  : }

  000a8	c3		 ret	 0
$LN5@ProcState_@9:

; 442  : 		return;
; 443  : 	}
; 444  : 	this->m_ImperialData.Time = this->m_BattleOfGaion.m_BattleData.Time;

  000a9	8b 86 80 b1 00
	00		 mov	 eax, DWORD PTR [esi+45440]
  000af	5f		 pop	 edi
  000b0	89 86 2c af 00
	00		 mov	 DWORD PTR [esi+44844], eax

; 445  : 	this->m_BattleOfGaion.Run();

  000b6	8d 8e 50 b1 00
	00		 lea	 ecx, DWORD PTR [esi+45392]
  000bc	5e		 pop	 esi
  000bd	e9 00 00 00 00	 jmp	 ?Run@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::Run
?ProcState_GAION@CImperial@@QAEXXZ ENDP			; CImperial::ProcState_GAION
_TEXT	ENDS
PUBLIC	?Run@CImperial@@QAEXXZ				; CImperial::Run
EXTRN	?CheckUserState@CImperialBattleUserMng@@QAEXXZ:PROC ; CImperialBattleUserMng::CheckUserState
; Function compile flags: /Ogtp
;	COMDAT ?Run@CImperial@@QAEXXZ
_TEXT	SEGMENT
?Run@CImperial@@QAEXXZ PROC				; CImperial::Run, COMDAT
; _this$ = ecx

; 187  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 188  : 	g_ImperialBattleUserMng.CheckUserState();

  00003	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00008	e8 00 00 00 00	 call	 ?CheckUserState@CImperialBattleUserMng@@QAEXXZ ; CImperialBattleUserMng::CheckUserState

; 189  : 	switch ( this->m_ImperialData.iState )

  0000d	8b 86 24 af 00
	00		 mov	 eax, DWORD PTR [esi+44836]
  00013	83 f8 09	 cmp	 eax, 9
  00016	77 4f		 ja	 SHORT $LN11@Run
  00018	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN17@Run[eax*4]
$LN9@Run:

; 190  : 	{
; 191  : 		case IMPERIAL_STATE_NONE:
; 192  : 			return;
; 193  : 		case IMPERIAL_STATE_OPEN:
; 194  : 			this->ProcState_OPEN();

  0001f	8b ce		 mov	 ecx, esi
  00021	5e		 pop	 esi
  00022	e9 00 00 00 00	 jmp	 ?ProcState_OPEN@CImperial@@QAEXXZ ; CImperial::ProcState_OPEN
$LN8@Run:

; 195  : 			break;
; 196  : 		case IMPERIAL_STATE_DESTLER:
; 197  : 			this->ProcState_DESTLER();

  00027	8b ce		 mov	 ecx, esi
  00029	5e		 pop	 esi
  0002a	e9 00 00 00 00	 jmp	 ?ProcState_DESTLER@CImperial@@QAEXXZ ; CImperial::ProcState_DESTLER
$LN7@Run:

; 198  : 			break;
; 199  : 		case IMPERIAL_STATE_VERMONT:
; 200  : 			this->ProcState_VERMONT();

  0002f	8b ce		 mov	 ecx, esi
  00031	5e		 pop	 esi
  00032	e9 00 00 00 00	 jmp	 ?ProcState_VERMONT@CImperial@@QAEXXZ ; CImperial::ProcState_VERMONT
$LN6@Run:

; 201  : 			break;
; 202  : 		case IMPERIAL_STATE_KATO:
; 203  : 			this->ProcState_KATO();

  00037	8b ce		 mov	 ecx, esi
  00039	5e		 pop	 esi
  0003a	e9 00 00 00 00	 jmp	 ?ProcState_KATO@CImperial@@QAEXXZ ; CImperial::ProcState_KATO
$LN5@Run:

; 204  : 			break;
; 205  : 		case IMPERIAL_STATE_GALIA:
; 206  : 			this->ProcState_GALIA();

  0003f	8b ce		 mov	 ecx, esi
  00041	5e		 pop	 esi
  00042	e9 00 00 00 00	 jmp	 ?ProcState_GALIA@CImperial@@QAEXXZ ; CImperial::ProcState_GALIA
$LN4@Run:

; 207  : 			break;
; 208  : 		case IMPERIAL_STATE_ERKANNE:
; 209  : 			this->ProcState_ERKANNE();

  00047	8b ce		 mov	 ecx, esi
  00049	5e		 pop	 esi
  0004a	e9 00 00 00 00	 jmp	 ?ProcState_ERKANNE@CImperial@@QAEXXZ ; CImperial::ProcState_ERKANNE
$LN3@Run:

; 210  : 			break;
; 211  : 		case IMPERIAL_STATE_RAYMOND:
; 212  : 			this->ProcState_RAYMOND();

  0004f	8b ce		 mov	 ecx, esi
  00051	5e		 pop	 esi
  00052	e9 00 00 00 00	 jmp	 ?ProcState_RAYMOND@CImperial@@QAEXXZ ; CImperial::ProcState_RAYMOND
$LN2@Run:

; 213  : 			break;
; 214  : 		case IMPERIAL_STATE_GAION:
; 215  : 			this->ProcState_GAION();

  00057	8b ce		 mov	 ecx, esi
  00059	5e		 pop	 esi
  0005a	e9 00 00 00 00	 jmp	 ?ProcState_GAION@CImperial@@QAEXXZ ; CImperial::ProcState_GAION
$LN1@Run:

; 216  : 			break;
; 217  : 		case IMPERIAL_STATE_ENDED:
; 218  : 			this->ProcState_ENDED();

  0005f	8b ce		 mov	 ecx, esi
  00061	5e		 pop	 esi
  00062	e9 00 00 00 00	 jmp	 ?ProcState_ENDED@CImperial@@QAEXXZ ; CImperial::ProcState_ENDED
$LN11@Run:
  00067	5e		 pop	 esi

; 219  : 			break;
; 220  : 	}
; 221  : }

  00068	c3		 ret	 0
  00069	8d 49 00	 npad	 3
$LN17@Run:
  0006c	00 00 00 00	 DD	 $LN11@Run
  00070	00 00 00 00	 DD	 $LN9@Run
  00074	00 00 00 00	 DD	 $LN8@Run
  00078	00 00 00 00	 DD	 $LN7@Run
  0007c	00 00 00 00	 DD	 $LN6@Run
  00080	00 00 00 00	 DD	 $LN5@Run
  00084	00 00 00 00	 DD	 $LN4@Run
  00088	00 00 00 00	 DD	 $LN3@Run
  0008c	00 00 00 00	 DD	 $LN2@Run
  00090	00 00 00 00	 DD	 $LN1@Run
?Run@CImperial@@QAEXXZ ENDP				; CImperial::Run
_TEXT	ENDS
EXTRN	_atexit:PROC
; Function compile flags: /Ogtp
;	COMDAT ??__Eg_Imperial@@YAXXZ
text$yc	SEGMENT
??__Eg_Imperial@@YAXXZ PROC				; `dynamic initializer for 'g_Imperial'', COMDAT

; 16   : CImperial g_Imperial;

  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_Imperial@@3VCImperial@@A ; g_Imperial
  00005	e8 00 00 00 00	 call	 ??0CImperial@@QAE@XZ	; CImperial::CImperial
  0000a	68 00 00 00 00	 push	 OFFSET ??__Fg_Imperial@@YAXXZ ; `dynamic atexit destructor for 'g_Imperial''
  0000f	e8 00 00 00 00	 call	 _atexit
  00014	59		 pop	 ecx
  00015	c3		 ret	 0
??__Eg_Imperial@@YAXXZ ENDP				; `dynamic initializer for 'g_Imperial''
; Function compile flags: /Ogtp
text$yc	ENDS
;	COMDAT ??__Fg_Imperial@@YAXXZ
text$yd	SEGMENT
??__Fg_Imperial@@YAXXZ PROC				; `dynamic atexit destructor for 'g_Imperial'', COMDAT
  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_Imperial@@3VCImperial@@A ; g_Imperial
  00005	e9 00 00 00 00	 jmp	 ??1CImperial@@UAE@XZ	; CImperial::~CImperial
??__Fg_Imperial@@YAXXZ ENDP				; `dynamic atexit destructor for 'g_Imperial''
text$yd	ENDS
PUBLIC	?g_Imperial@@3VCImperial@@A			; g_Imperial
_BSS	SEGMENT
?g_Imperial@@3VCImperial@@A DB 0b1a4H DUP (?)		; g_Imperial
_BSS	ENDS
CRT$XCU	SEGMENT
_g_Imperial$initializer$ DD FLAT:??__Eg_Imperial@@YAXXZ
CRT$XCU	ENDS
END
