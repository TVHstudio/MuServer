; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\ImperialBattleOfGaion.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_sttBLOODCASTLE_LEVEL DD 0fH
	DD	050H
	DD	0aH
	DD	03cH
	DD	051H
	DD	082H
	DD	03dH
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	03e8H
	DD	0137H
	DD	03e8H
	DD	0fH
	DD	04afH
	DD	0aH
	DD	04afH
_DATA	ENDS
CONST	SEGMENT
_g_GaionGate DD	0210H
	DD	051H
	DD	044H
	DD	03H
	DD	020fH
	DD	032H
	DD	045H
	DD	03H
	DD	0210H
	DD	020H
	DD	05aH
	DD	01H
	DD	0210H
	DD	022H
	DD	0b0H
	DD	01H
	DD	020fH
	DD	034H
	DD	0bfH
	DD	03H
	DD	0210H
	DD	045H
	DD	0a6H
	DD	01H
	DD	0210H
	DD	09cH
	DD	084H
	DD	03H
	DD	020fH
	DD	0c5H
	DD	084H
	DD	03H
	DD	0210H
	DD	0e1H
	DD	09fH
	DD	01H
	DD	0210H
	DD	0d6H
	DD	018H
	DD	03H
_g_GaionMapAttr DD 04dH
	DD	043H
	DD	052H
	DD	045H
	DD	02eH
	DD	044H
	DD	033H
	DD	046H
	DD	01fH
	DD	059H
	DD	021H
	DD	05eH
	DD	021H
	DD	0afH
	DD	023H
	DD	0b4H
	DD	033H
	DD	0beH
	DD	038H
	DD	0c0H
	DD	044H
	DD	0a2H
	DD	045H
	DD	0a7H
	DD	09bH
	DD	083H
	DD	0a0H
	DD	085H
	DD	0c3H
	DD	083H
	DD	0c9H
	DD	085H
	DD	0e0H
	DD	09eH
	DD	0e2H
	DD	0a3H
	DD	0d2H
	DD	017H
	DD	0d7H
	DD	019H
_g_GaionTrap DD	02cH
	DD	04aH
	DD	02cH
	DD	045H
	DD	025H
	DD	042H
	DD	025H
	DD	046H
	DD	01dH
	DD	043H
	DD	01dH
	DD	04bH
	DD	022H
	DD	04bH
	DD	021H
	DD	050H
	DD	021H
	DD	056H
	DD	01dH
	DD	054H
	DD	03aH
	DD	0beH
	DD	040H
	DD	0beH
	DD	045H
	DD	0beH
	DD	045H
	DD	0b8H
	DD	045H
	DD	0b3H
	DD	044H
	DD	0a5H
	DD	044H
	DD	0abH
	DD	0ccH
	DD	083H
	DD	0d0H
	DD	084H
	DD	0d5H
	DD	084H
	DD	0d9H
	DD	085H
	DD	0e1H
	DD	087H
	DD	0e0H
	DD	08cH
	DD	0e0H
	DD	091H
	DD	0e1H
	DD	096H
	DD	0e1H
	DD	099H
CONST	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?Reset@BATTLEOFGAION_DATA@@QAEXXZ		; BATTLEOFGAION_DATA::Reset
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.h
;	COMDAT ?Reset@BATTLEOFGAION_DATA@@QAEXXZ
_TEXT	SEGMENT
?Reset@BATTLEOFGAION_DATA@@QAEXXZ PROC			; BATTLEOFGAION_DATA::Reset, COMDAT
; _this$ = ecx

; 20   : 		for(int n=0;n<10;++n)
; 21   : 		{
; 22   : 			this->GateIndex[n] = -1;

  00000	83 c8 ff	 or	 eax, -1
  00003	89 41 04	 mov	 DWORD PTR [ecx+4], eax
  00006	89 41 08	 mov	 DWORD PTR [ecx+8], eax
  00009	89 41 0c	 mov	 DWORD PTR [ecx+12], eax
  0000c	89 41 10	 mov	 DWORD PTR [ecx+16], eax
  0000f	89 41 14	 mov	 DWORD PTR [ecx+20], eax
  00012	89 41 18	 mov	 DWORD PTR [ecx+24], eax
  00015	89 41 1c	 mov	 DWORD PTR [ecx+28], eax
  00018	89 41 20	 mov	 DWORD PTR [ecx+32], eax
  0001b	89 41 24	 mov	 DWORD PTR [ecx+36], eax
  0001e	89 41 28	 mov	 DWORD PTR [ecx+40], eax

; 23   : 		}
; 24   : 		this->CurrentLeaderIndex = -1;

  00021	89 01		 mov	 DWORD PTR [ecx], eax

; 25   : 		this->MonsterCount = 0;

  00023	c7 41 38 00 00
	00 00		 mov	 DWORD PTR [ecx+56], 0

; 26   : 		this->TrapIndex = -1;

  0002a	89 41 40	 mov	 DWORD PTR [ecx+64], eax

; 27   : 		this->NotifyCount = -1;

  0002d	c6 41 48 ff	 mov	 BYTE PTR [ecx+72], 255	; 000000ffH

; 28   : 	}

  00031	c3		 ret	 0
?Reset@BATTLEOFGAION_DATA@@QAEXXZ ENDP			; BATTLEOFGAION_DATA::Reset
_TEXT	ENDS
PUBLIC	?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ; CImperialBattleOfGaion::SetSuccessValue
; Function compile flags: /Ogtp
;	COMDAT ?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z
_TEXT	SEGMENT
_SuccessValue$ = 8					; size = 1
?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z PROC	; CImperialBattleOfGaion::SetSuccessValue, COMDAT
; _this$ = ecx

; 81   : 	void SetSuccessValue(bool SuccessValue) { this->SuccessValue = SuccessValue; }

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8a 45 08	 mov	 al, BYTE PTR _SuccessValue$[ebp]
  00006	88 41 51	 mov	 BYTE PTR [ecx+81], al
  00009	5d		 pop	 ebp
  0000a	c2 04 00	 ret	 4
?SetSuccessValue@CImperialBattleOfGaion@@QAEX_N@Z ENDP	; CImperialBattleOfGaion::SetSuccessValue
_TEXT	ENDS
PUBLIC	?GetIndex@CImperialBattleUser@@QAEHXZ		; CImperialBattleUser::GetIndex
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleuser.h
;	COMDAT ?GetIndex@CImperialBattleUser@@QAEHXZ
_TEXT	SEGMENT
?GetIndex@CImperialBattleUser@@QAEHXZ PROC		; CImperialBattleUser::GetIndex, COMDAT
; _this$ = ecx

; 23   : 		return this->m_iIndex;

  00000	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]

; 24   : 	}

  00003	c3		 ret	 0
?GetIndex@CImperialBattleUser@@QAEHXZ ENDP		; CImperialBattleUser::GetIndex
_TEXT	ENDS
PUBLIC	??_7CImperialBattleOfGaion@@6B@			; CImperialBattleOfGaion::`vftable'
PUBLIC	??1CImperialBattleOfGaion@@UAE@XZ		; CImperialBattleOfGaion::~CImperialBattleOfGaion
PUBLIC	??_R4CImperialBattleOfGaion@@6B@		; CImperialBattleOfGaion::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCImperialBattleOfGaion@@@8		; CImperialBattleOfGaion `RTTI Type Descriptor'
PUBLIC	??_R3CImperialBattleOfGaion@@8			; CImperialBattleOfGaion::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CImperialBattleOfGaion@@8			; CImperialBattleOfGaion::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CImperialBattleOfGaion@@8		; CImperialBattleOfGaion::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECImperialBattleOfGaion@@UAEPAXI@Z:PROC	; CImperialBattleOfGaion::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CImperialBattleOfGaion@@8
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CImperialBattleOfGaion@@8 DD FLAT:??_R0?AVCImperialBattleOfGaion@@@8 ; CImperialBattleOfGaion::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CImperialBattleOfGaion@@8
rdata$r	ENDS
;	COMDAT ??_R2CImperialBattleOfGaion@@8
rdata$r	SEGMENT
??_R2CImperialBattleOfGaion@@8 DD FLAT:??_R1A@?0A@EA@CImperialBattleOfGaion@@8 ; CImperialBattleOfGaion::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CImperialBattleOfGaion@@8
rdata$r	SEGMENT
??_R3CImperialBattleOfGaion@@8 DD 00H			; CImperialBattleOfGaion::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CImperialBattleOfGaion@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCImperialBattleOfGaion@@@8
_DATA	SEGMENT
??_R0?AVCImperialBattleOfGaion@@@8 DD FLAT:??_7type_info@@6B@ ; CImperialBattleOfGaion `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCImperialBattleOfGaion@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CImperialBattleOfGaion@@6B@
rdata$r	SEGMENT
??_R4CImperialBattleOfGaion@@6B@ DD 00H			; CImperialBattleOfGaion::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCImperialBattleOfGaion@@@8
	DD	FLAT:??_R3CImperialBattleOfGaion@@8
rdata$r	ENDS
;	COMDAT ??_7CImperialBattleOfGaion@@6B@
CONST	SEGMENT
??_7CImperialBattleOfGaion@@6B@ DD FLAT:??_R4CImperialBattleOfGaion@@6B@ ; CImperialBattleOfGaion::`vftable'
	DD	FLAT:??_ECImperialBattleOfGaion@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??1CImperialBattleOfGaion@@UAE@XZ
_TEXT	SEGMENT
??1CImperialBattleOfGaion@@UAE@XZ PROC			; CImperialBattleOfGaion::~CImperialBattleOfGaion, COMDAT
; _this$ = ecx

; 18   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CImperialBattleOfGaion@@6B@

; 19   : }

  00006	c3		 ret	 0
??1CImperialBattleOfGaion@@UAE@XZ ENDP			; CImperialBattleOfGaion::~CImperialBattleOfGaion
_TEXT	ENDS
PUBLIC	?ResetData@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::ResetData
; Function compile flags: /Ogtp
;	COMDAT ?ResetData@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?ResetData@CImperialBattleOfGaion@@QAEXXZ PROC		; CImperialBattleOfGaion::ResetData, COMDAT
; _this$ = ecx

; 23   : 	this->m_BattleData.Reset();

  00000	83 c8 ff	 or	 eax, -1
  00003	89 41 08	 mov	 DWORD PTR [ecx+8], eax
  00006	89 41 0c	 mov	 DWORD PTR [ecx+12], eax
  00009	89 41 10	 mov	 DWORD PTR [ecx+16], eax
  0000c	89 41 14	 mov	 DWORD PTR [ecx+20], eax
  0000f	89 41 18	 mov	 DWORD PTR [ecx+24], eax
  00012	89 41 1c	 mov	 DWORD PTR [ecx+28], eax
  00015	89 41 20	 mov	 DWORD PTR [ecx+32], eax
  00018	89 41 24	 mov	 DWORD PTR [ecx+36], eax
  0001b	89 41 28	 mov	 DWORD PTR [ecx+40], eax
  0001e	89 41 2c	 mov	 DWORD PTR [ecx+44], eax
  00021	89 41 04	 mov	 DWORD PTR [ecx+4], eax
  00024	c7 41 3c 00 00
	00 00		 mov	 DWORD PTR [ecx+60], 0
  0002b	89 41 44	 mov	 DWORD PTR [ecx+68], eax
  0002e	c6 41 4c ff	 mov	 BYTE PTR [ecx+76], 255	; 000000ffH

; 24   : }

  00032	c3		 ret	 0
?ResetData@CImperialBattleOfGaion@@QAEXXZ ENDP		; CImperialBattleOfGaion::ResetData
_TEXT	ENDS
PUBLIC	??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_NONE
EXTRN	?DelGroupInstance@TMonsterAIGroup@@SAHH@Z:PROC	; TMonsterAIGroup::DelGroupInstance
EXTRN	?LogAddC@@3P6AXEPADZZA:DWORD			; LogAddC
;	COMDAT ??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> NONE', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_NONE, COMDAT
; _this$ = ecx

; 64   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 65   : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> NONE", this->m_BattleData.CurrentState);

  00003	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00006	50		 push	 eax
  00007	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OJFBIHEL@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0000c	6a 02		 push	 2
  0000e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00014	83 c4 0c	 add	 esp, 12			; 0000000cH

; 66   : 	this->ResetData();

  00017	8b ce		 mov	 ecx, esi
  00019	e8 00 00 00 00	 call	 ?ResetData@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ResetData

; 67   : 	TMonsterAIGroup::DelGroupInstance(36);

  0001e	6a 24		 push	 36			; 00000024H
  00020	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance

; 68   : 	TMonsterAIGroup::DelGroupInstance(37);

  00025	6a 25		 push	 37			; 00000025H
  00027	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance

; 69   : 	TMonsterAIGroup::DelGroupInstance(38);

  0002c	6a 26		 push	 38			; 00000026H
  0002e	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance

; 70   : 	TMonsterAIGroup::DelGroupInstance(39);

  00033	6a 27		 push	 39			; 00000027H
  00035	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance
  0003a	83 c4 10	 add	 esp, 16			; 00000010H

; 71   : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_NONE;

  0003d	c7 46 38 00 00
	00 00		 mov	 DWORD PTR [esi+56], 0
  00044	5e		 pop	 esi

; 72   : }

  00045	c3		 ret	 0
?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_NONE
_TEXT	ENDS
PUBLIC	??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	?SetState_END@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_END
;	COMDAT ??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> END', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_END@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetState_END@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_END, COMDAT
; _this$ = ecx

; 222  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 223  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> END", this->m_BattleData.CurrentState);

  00003	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00006	50		 push	 eax
  00007	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@BILIMOKF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0000c	6a 02		 push	 2
  0000e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00014	83 c4 0c	 add	 esp, 12			; 0000000cH

; 224  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_END;

  00017	c7 46 38 09 00
	00 00		 mov	 DWORD PTR [esi+56], 9
  0001e	5e		 pop	 esi

; 225  : 	return;
; 226  : }

  0001f	c3		 ret	 0
?SetState_END@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_END
_TEXT	ENDS
PUBLIC	?ProcState_END@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::ProcState_END
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_END@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?ProcState_END@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_END, COMDAT
; _this$ = ecx

; 575  : 	return;
; 576  : }

  00000	c3		 ret	 0
?ProcState_END@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_END
_TEXT	ENDS
PUBLIC	?GetEventTime@CImperialBattleOfGaion@@QAEHXZ	; CImperialBattleOfGaion::GetEventTime
; Function compile flags: /Ogtp
;	COMDAT ?GetEventTime@CImperialBattleOfGaion@@QAEHXZ
_TEXT	SEGMENT
?GetEventTime@CImperialBattleOfGaion@@QAEHXZ PROC	; CImperialBattleOfGaion::GetEventTime, COMDAT
; _this$ = ecx

; 580  : 	return this->m_BattleData.Time / 1000;

  00000	8b 49 30	 mov	 ecx, DWORD PTR [ecx+48]
  00003	b8 d3 4d 62 10	 mov	 eax, 274877907		; 10624dd3H
  00008	f7 e9		 imul	 ecx
  0000a	c1 fa 06	 sar	 edx, 6
  0000d	8b c2		 mov	 eax, edx
  0000f	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  00012	03 c2		 add	 eax, edx

; 581  : }

  00014	c3		 ret	 0
?GetEventTime@CImperialBattleOfGaion@@QAEHXZ ENDP	; CImperialBattleOfGaion::GetEventTime
_TEXT	ENDS
PUBLIC	?GetEventState@CImperialBattleOfGaion@@QAEHXZ	; CImperialBattleOfGaion::GetEventState
; Function compile flags: /Ogtp
;	COMDAT ?GetEventState@CImperialBattleOfGaion@@QAEHXZ
_TEXT	SEGMENT
?GetEventState@CImperialBattleOfGaion@@QAEHXZ PROC	; CImperialBattleOfGaion::GetEventState, COMDAT
; _this$ = ecx

; 585  : 	int CurrState = this->m_BattleData.CurrentState;

  00000	8b 41 38	 mov	 eax, DWORD PTR [ecx+56]

; 586  : 	if(CurrState == 1 || CurrState == 3 || CurrState == 5 || CurrState == 7)

  00003	83 f8 01	 cmp	 eax, 1
  00006	74 34		 je	 SHORT $LN6@GetEventSt
  00008	83 f8 03	 cmp	 eax, 3
  0000b	74 2f		 je	 SHORT $LN6@GetEventSt
  0000d	83 f8 05	 cmp	 eax, 5
  00010	74 2a		 je	 SHORT $LN6@GetEventSt
  00012	83 f8 07	 cmp	 eax, 7
  00015	74 25		 je	 SHORT $LN6@GetEventSt

; 589  : 	}
; 590  : 	else if(CurrState == 2 || CurrState == 4 || CurrState == 6 || CurrState == 8)

  00017	83 f8 02	 cmp	 eax, 2
  0001a	74 1a		 je	 SHORT $LN3@GetEventSt
  0001c	83 f8 04	 cmp	 eax, 4
  0001f	74 15		 je	 SHORT $LN3@GetEventSt
  00021	83 f8 06	 cmp	 eax, 6
  00024	74 10		 je	 SHORT $LN3@GetEventSt
  00026	83 f8 08	 cmp	 eax, 8
  00029	74 0b		 je	 SHORT $LN3@GetEventSt

; 593  : 	}
; 594  : 	else if(CurrState == 9)

  0002b	83 e8 09	 sub	 eax, 9
  0002e	f7 d8		 neg	 eax
  00030	1b c0		 sbb	 eax, eax
  00032	83 e0 03	 and	 eax, 3

; 595  : 	{
; 596  : 		return 0;
; 597  : 	}
; 598  : 	return 3;
; 599  : }

  00035	c3		 ret	 0
$LN3@GetEventSt:

; 591  : 	{
; 592  : 		return 2;

  00036	b8 02 00 00 00	 mov	 eax, 2

; 595  : 	{
; 596  : 		return 0;
; 597  : 	}
; 598  : 	return 3;
; 599  : }

  0003b	c3		 ret	 0
$LN6@GetEventSt:

; 587  : 	{
; 588  : 		return 1;

  0003c	b8 01 00 00 00	 mov	 eax, 1

; 595  : 	{
; 596  : 		return 0;
; 597  : 	}
; 598  : 	return 3;
; 599  : }

  00041	c3		 ret	 0
?GetEventState@CImperialBattleOfGaion@@QAEHXZ ENDP	; CImperialBattleOfGaion::GetEventState
_TEXT	ENDS
PUBLIC	?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?GetUserCount@CImperialBattleUserMng@@QAEHXZ:PROC ; CImperialBattleUserMng::GetUserCount
EXTRN	?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A:BYTE ; g_ImperialBattleUserMng
; Function compile flags: /Ogtp
;	COMDAT ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z
_TEXT	SEGMENT
_lpMsg$ = 8						; size = 4
_iSize$ = 12						; size = 4
?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z PROC ; CImperialBattleOfGaion::SendImperialPlayers, COMDAT
; _this$ = ecx

; 602  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi

; 603  : 	int index;
; 604  : 	for(int i=0; i < g_ImperialBattleUserMng.GetUserCount();++i)

  00004	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00009	33 ff		 xor	 edi, edi
  0000b	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00010	85 c0		 test	 eax, eax
  00012	7e 53		 jle	 SHORT $LN2@SendImperi
  00014	53		 push	 ebx
  00015	8b 5d 0c	 mov	 ebx, DWORD PTR _iSize$[ebp]
  00018	56		 push	 esi
  00019	be 08 00 00 00	 mov	 esi, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
  0001e	8b ff		 npad	 2
$LL4@SendImperi:

; 605  : 	{
; 606  : 		index = g_ImperialBattleUserMng.m_BattleUser[i].GetIndex();

  00020	8b 0e		 mov	 ecx, DWORD PTR [esi]

; 607  : 
; 608  : 		if(IMPERIAL_MAP_RANGE(gObj[index].MapNumber))

  00022	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00028	8b c1		 mov	 eax, ecx
  0002a	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00030	0f b6 84 10 49
	01 00 00	 movzx	 eax, BYTE PTR [eax+edx+329]
  00038	3c 45		 cmp	 al, 69			; 00000045H
  0003a	72 17		 jb	 SHORT $LN3@SendImperi
  0003c	b2 48		 mov	 dl, 72			; 00000048H
  0003e	3a d0		 cmp	 dl, al
  00040	1b c0		 sbb	 eax, eax
  00042	40		 inc	 eax
  00043	74 0e		 je	 SHORT $LN3@SendImperi

; 609  : 		{
; 610  : 			DataSend(index, lpMsg, iSize);

  00045	8b 45 08	 mov	 eax, DWORD PTR _lpMsg$[ebp]
  00048	53		 push	 ebx
  00049	50		 push	 eax
  0004a	51		 push	 ecx
  0004b	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00050	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@SendImperi:

; 603  : 	int index;
; 604  : 	for(int i=0; i < g_ImperialBattleUserMng.GetUserCount();++i)

  00053	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00058	47		 inc	 edi
  00059	83 c6 0c	 add	 esi, 12			; 0000000cH
  0005c	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00061	3b f8		 cmp	 edi, eax
  00063	7c bb		 jl	 SHORT $LL4@SendImperi
  00065	5e		 pop	 esi
  00066	5b		 pop	 ebx
$LN2@SendImperi:
  00067	5f		 pop	 edi

; 611  : 		}	
; 612  : 	}
; 613  : }

  00068	5d		 pop	 ebp
  00069	c2 08 00	 ret	 8
?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ENDP ; CImperialBattleOfGaion::SendImperialPlayers
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface
EXTRN	?PHeadSubSetB@@YAXPAEEEH@Z:PROC			; PHeadSubSetB
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_pMsg$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SendEventInterface, COMDAT
; _this$ = ecx

; 616  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi

; 617  : 	PMSG_FORT_TIMER pMsg;
; 618  : 
; 619  : 	PHeadSubSetB((LPBYTE)&pMsg,0xF7,0x04,sizeof(pMsg));

  00011	6a 10		 push	 16			; 00000010H
  00013	6a 04		 push	 4
  00015	8d 45 ec	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00018	68 f7 00 00 00	 push	 247			; 000000f7H
  0001d	50		 push	 eax
  0001e	8b f1		 mov	 esi, ecx
  00020	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB
  00025	83 c4 10	 add	 esp, 16			; 00000010H

; 620  : 
; 621  : 	int Time = this->GetEventTime() * 4;

  00028	8b ce		 mov	 ecx, esi
  0002a	e8 00 00 00 00	 call	 ?GetEventTime@CImperialBattleOfGaion@@QAEHXZ ; CImperialBattleOfGaion::GetEventTime
  0002f	8b d0		 mov	 edx, eax
  00031	03 d2		 add	 edx, edx

; 622  : 
; 623  : 	pMsg.Status = this->GetEventState();

  00033	8b ce		 mov	 ecx, esi
  00035	03 d2		 add	 edx, edx
  00037	e8 00 00 00 00	 call	 ?GetEventState@CImperialBattleOfGaion@@QAEHXZ ; CImperialBattleOfGaion::GetEventState
  0003c	88 45 f0	 mov	 BYTE PTR _pMsg$[ebp+4], al

; 624  : 	pMsg.Unk1 = 1;

  0003f	b0 01		 mov	 al, 1

; 625  : 	pMsg.Unk2 = 1;
; 626  : 	pMsg.Unk3 = 0;

  00041	32 c0		 xor	 al, al

; 627  : 	pMsg.Unk5 = 0;
; 628  : 	pMsg.TimerH = HIBYTE(Time);

  00043	8b ca		 mov	 ecx, edx
  00045	c1 e9 08	 shr	 ecx, 8

; 629  : 	pMsg.TimerL = LOBYTE(Time);
; 630  : 	pMsg.Unk4 = 0;

  00048	88 45 f7	 mov	 BYTE PTR _pMsg$[ebp+11], al

; 631  : 	pMsg.Monster = this->m_BattleData.MonsterCount;
; 632  : 
; 633  : 	this->SendImperialPlayers((LPBYTE)&pMsg, pMsg.h.size);

  0004b	0f b6 45 ed	 movzx	 eax, BYTE PTR _pMsg$[ebp+1]
  0004f	88 4d f6	 mov	 BYTE PTR _pMsg$[ebp+10], cl
  00052	50		 push	 eax
  00053	8d 4d ec	 lea	 ecx, DWORD PTR _pMsg$[ebp]
  00056	88 55 f5	 mov	 BYTE PTR _pMsg$[ebp+9], dl
  00059	8b 56 3c	 mov	 edx, DWORD PTR [esi+60]
  0005c	51		 push	 ecx
  0005d	8b ce		 mov	 ecx, esi
  0005f	c7 45 f1 01 01
	00 00		 mov	 DWORD PTR _pMsg$[ebp+5], 257 ; 00000101H
  00066	89 55 f8	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  00069	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 634  : }

  0006e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00071	33 cd		 xor	 ecx, ebp
  00073	5e		 pop	 esi
  00074	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00079	8b e5		 mov	 esp, ebp
  0007b	5d		 pop	 ebp
  0007c	c3		 ret	 0
?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SendEventInterface
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z	; CImperialBattleOfGaion::SetMapAttr
; Function compile flags: /Ogtp
;	COMDAT ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z
_TEXT	SEGMENT
_Buff$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
_Gate$ = 8						; size = 4
?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z PROC	; CImperialBattleOfGaion::SetMapAttr, COMDAT
; _this$ = ecx

; 637  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 04 01 00
	00		 sub	 esp, 260		; 00000104H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 638  : 	char Buff[256];
; 639  : 	short PacketSize = 0;
; 640  : 	PMSG_SETMAPATTR_COUNT * lpMsg = (PMSG_SETMAPATTR_COUNT *)(Buff);
; 641  : 	PMSG_SETMAPATTR * lpMsgBody = (PMSG_SETMAPATTR *)(Buff + sizeof(PMSG_SETMAPATTR_COUNT));
; 642  : 
; 643  : 	lpMsgBody[0].btX = g_GaionMapAttr[Gate].StartX;

  00013	8b 45 08	 mov	 eax, DWORD PTR _Gate$[ebp]
  00016	c1 e0 04	 shl	 eax, 4
  00019	0f b6 90 00 00
	00 00		 movzx	 edx, BYTE PTR _g_GaionMapAttr[eax]
  00020	88 95 03 ff ff
	ff		 mov	 BYTE PTR _Buff$[ebp+7], dl

; 644  : 	lpMsgBody[0].btY = g_GaionMapAttr[Gate].StartY;

  00026	0f b6 90 04 00
	00 00		 movzx	 edx, BYTE PTR _g_GaionMapAttr[eax+4]
  0002d	88 95 04 ff ff
	ff		 mov	 BYTE PTR _Buff$[ebp+8], dl

; 645  : 	lpMsgBody[1].btX = g_GaionMapAttr[Gate].EndX;

  00033	0f b6 90 08 00
	00 00		 movzx	 edx, BYTE PTR _g_GaionMapAttr[eax+8]

; 646  : 	lpMsgBody[1].btY = g_GaionMapAttr[Gate].EndY;

  0003a	8a 80 0c 00 00
	00		 mov	 al, BYTE PTR _g_GaionMapAttr[eax+12]
  00040	88 95 05 ff ff
	ff		 mov	 BYTE PTR _Buff$[ebp+9], dl
  00046	88 85 06 ff ff
	ff		 mov	 BYTE PTR _Buff$[ebp+10], al

; 647  : 
; 648  : 	PacketSize = (sizeof(PMSG_SETMAPATTR_COUNT)+6*sizeof(PMSG_SETMAPATTR));
; 649  : 
; 650  : 	lpMsg->btMapAttr = 16;
; 651  : 	lpMsg->btMapSetType = 1;
; 652  : 	lpMsg->btCount = 1;
; 653  : 	lpMsg->btType = 0;
; 654  : 
; 655  : 	lpMsg->h.c = 0xC1;
; 656  : 	lpMsg->h.headcode = 0x46;
; 657  : 	lpMsg->h.size = PacketSize;
; 658  : 
; 659  : 	this->SendImperialPlayers((LPBYTE)Buff, PacketSize);

  0004c	6a 13		 push	 19			; 00000013H
  0004e	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  00054	b0 01		 mov	 al, 1
  00056	52		 push	 edx
  00057	88 85 02 ff ff
	ff		 mov	 BYTE PTR _Buff$[ebp+6], al
  0005d	c7 85 fe fe ff
	ff 46 00 10 01	 mov	 DWORD PTR _Buff$[ebp+2], 17825862 ; 01100046H
  00067	66 c7 85 fc fe
	ff ff c1 13	 mov	 WORD PTR _Buff$[ebp], 5057 ; 000013c1H
  00070	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 660  : }

  00075	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00078	33 cd		 xor	 ecx, ebp
  0007a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007f	8b e5		 mov	 esp, ebp
  00081	5d		 pop	 ebp
  00082	c2 04 00	 ret	 4
?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ENDP	; CImperialBattleOfGaion::SetMapAttr
_TEXT	ENDS
PUBLIC	?MonsterProc@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::MonsterProc
EXTRN	?FindGroupMemberObjectIndex@TMonsterAIGroup@@SAHHH@Z:PROC ; TMonsterAIGroup::FindGroupMemberObjectIndex
EXTRN	?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA:BYTE ; TMonsterAIGroup::s_iMonsterAIGroupMemberCount
; Function compile flags: /Ogtp
;	COMDAT ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?MonsterProc@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::MonsterProc, COMDAT
; _this$ = ecx

; 663  : {

  00000	53		 push	 ebx
  00001	56		 push	 esi
  00002	8b f1		 mov	 esi, ecx

; 664  : 	short alivecount = 0;
; 665  : 	for(int i=0;i<TMonsterAIGroup::s_iMonsterAIGroupMemberCount[this->m_BattleData.CurrentAIGroup];++i)

  00004	8b 46 40	 mov	 eax, DWORD PTR [esi+64]
  00007	57		 push	 edi
  00008	33 db		 xor	 ebx, ebx
  0000a	33 ff		 xor	 edi, edi
  0000c	39 1c 85 00 00
	00 00		 cmp	 DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA[eax*4], ebx
  00013	7e 38		 jle	 SHORT $LN9@MonsterPro
$LL4@MonsterPro:

; 666  : 	{
; 667  : 		if(gObj[TMonsterAIGroup::FindGroupMemberObjectIndex(this->m_BattleData.CurrentAIGroup, i)].Live == true)

  00015	8b 4e 40	 mov	 ecx, DWORD PTR [esi+64]
  00018	57		 push	 edi
  00019	51		 push	 ecx
  0001a	e8 00 00 00 00	 call	 ?FindGroupMemberObjectIndex@TMonsterAIGroup@@SAHHH@Z ; TMonsterAIGroup::FindGroupMemberObjectIndex
  0001f	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00025	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002b	83 c4 08	 add	 esp, 8
  0002e	80 7c 10 6a 01	 cmp	 BYTE PTR [eax+edx+106], 1
  00033	75 01		 jne	 SHORT $LN3@MonsterPro

; 668  : 		{
; 669  : 			++alivecount;

  00035	43		 inc	 ebx
$LN3@MonsterPro:

; 664  : 	short alivecount = 0;
; 665  : 	for(int i=0;i<TMonsterAIGroup::s_iMonsterAIGroupMemberCount[this->m_BattleData.CurrentAIGroup];++i)

  00036	8b 46 40	 mov	 eax, DWORD PTR [esi+64]
  00039	47		 inc	 edi
  0003a	3b 3c 85 00 00
	00 00		 cmp	 edi, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA[eax*4]
  00041	7c d2		 jl	 SHORT $LL4@MonsterPro

; 670  : 		}
; 671  : 	}
; 672  : 	this->m_BattleData.MonsterCount = alivecount;

  00043	0f bf cb	 movsx	 ecx, bx
  00046	5f		 pop	 edi
  00047	89 4e 3c	 mov	 DWORD PTR [esi+60], ecx
  0004a	5e		 pop	 esi
  0004b	5b		 pop	 ebx

; 673  : }

  0004c	c3		 ret	 0
$LN9@MonsterPro:

; 670  : 		}
; 671  : 	}
; 672  : 	this->m_BattleData.MonsterCount = alivecount;

  0004d	0f bf d3	 movsx	 edx, bx
  00050	5f		 pop	 edi
  00051	89 56 3c	 mov	 DWORD PTR [esi+60], edx
  00054	5e		 pop	 esi
  00055	5b		 pop	 ebx

; 673  : }

  00056	c3		 ret	 0
?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::MonsterProc
_TEXT	ENDS
PUBLIC	?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z ; CImperialBattleOfGaion::OperatePortalGate
; Function compile flags: /Ogtp
;	COMDAT ?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z
_TEXT	SEGMENT
_Block$ = 8						; size = 1
_ForAll$ = 12						; size = 1
_aIndex$ = 16						; size = 4
?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z PROC ; CImperialBattleOfGaion::OperatePortalGate, COMDAT
; _this$ = ecx

; 677  : 	return;
; 678  : }

  00000	c2 0c 00	 ret	 12			; 0000000cH
?OperatePortalGate@CImperialBattleOfGaion@@QAEX_N0H@Z ENDP ; CImperialBattleOfGaion::OperatePortalGate
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?SendEventState@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SendEventState
; Function compile flags: /Ogtp
;	COMDAT ?SendEventState@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_State$ = -20						; size = 4
_pMsg$ = -16						; size = 12
__$ArrayPad$ = -4					; size = 4
?SendEventState@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SendEventState, COMDAT
; _this$ = ecx

; 710  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi

; 711  : 	PMSG_FORT_ENTER_RESULT pMsg;
; 712  : 
; 713  : 	PHeadSubSetB((LPBYTE)&pMsg, 0xF7, 0x02, sizeof(pMsg));

  00011	6a 0c		 push	 12			; 0000000cH
  00013	6a 02		 push	 2
  00015	8d 45 f0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00018	68 f7 00 00 00	 push	 247			; 000000f7H
  0001d	50		 push	 eax
  0001e	8b f1		 mov	 esi, ecx
  00020	e8 00 00 00 00	 call	 ?PHeadSubSetB@@YAXPAEEEH@Z ; PHeadSubSetB

; 714  : 
; 715  : 	pMsg.EntryTime = 0;
; 716  : 	pMsg.Day = 7;
; 717  : 	pMsg.Result = 0;
; 718  : 	
; 719  : 	int State;
; 720  : 
; 721  : 	if(this->m_BattleData.CurrentState == 1 || this->m_BattleData.CurrentState == 2)

  00025	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00028	33 c9		 xor	 ecx, ecx
  0002a	83 c4 10	 add	 esp, 16			; 00000010H
  0002d	66 89 4d fa	 mov	 WORD PTR _pMsg$[ebp+10], cx
  00031	66 c7 45 f4 00
	07		 mov	 WORD PTR _pMsg$[ebp+4], 1792 ; 00000700H
  00037	83 f8 01	 cmp	 eax, 1
  0003a	74 31		 je	 SHORT $LN9@SendEventS
  0003c	83 f8 02	 cmp	 eax, 2
  0003f	74 2c		 je	 SHORT $LN9@SendEventS

; 724  : 	}
; 725  : 	else if(this->m_BattleData.CurrentState == 3 || this->m_BattleData.CurrentState == 4)

  00041	83 f8 03	 cmp	 eax, 3
  00044	74 20		 je	 SHORT $LN6@SendEventS
  00046	83 f8 04	 cmp	 eax, 4
  00049	74 1b		 je	 SHORT $LN6@SendEventS

; 728  : 	}
; 729  : 	else if(this->m_BattleData.CurrentState == 5 || this->m_BattleData.CurrentState == 6)

  0004b	83 f8 05	 cmp	 eax, 5
  0004e	74 0f		 je	 SHORT $LN3@SendEventS
  00050	83 f8 06	 cmp	 eax, 6
  00053	74 0a		 je	 SHORT $LN3@SendEventS

; 732  : 	}
; 733  : 	else if(this->m_BattleData.CurrentState == 7)

  00055	83 f8 07	 cmp	 eax, 7
  00058	75 1a		 jne	 SHORT $LN13@SendEventS

; 734  : 	{
; 735  : 		State = 4;

  0005a	8d 41 04	 lea	 eax, DWORD PTR [ecx+4]
  0005d	eb 18		 jmp	 SHORT $LN1@SendEventS
$LN3@SendEventS:

; 730  : 	{
; 731  : 		State = 3;

  0005f	b8 03 00 00 00	 mov	 eax, 3
  00064	eb 11		 jmp	 SHORT $LN1@SendEventS
$LN6@SendEventS:

; 726  : 	{
; 727  : 		State = 2;

  00066	b8 02 00 00 00	 mov	 eax, 2
  0006b	eb 0a		 jmp	 SHORT $LN1@SendEventS
$LN9@SendEventS:

; 722  : 	{
; 723  : 		State = 1;

  0006d	b8 01 00 00 00	 mov	 eax, 1
  00072	eb 03		 jmp	 SHORT $LN1@SendEventS
$LN13@SendEventS:
  00074	8a 45 ec	 mov	 al, BYTE PTR _State$[ebp]
$LN1@SendEventS:

; 736  : 	}
; 737  : 
; 738  : 	pMsg.State = State;
; 739  : 	pMsg.Unk = 3;
; 740  : 
; 741  : 	this->SendImperialPlayers((LPBYTE)&pMsg, pMsg.h.size);

  00077	0f b6 55 f1	 movzx	 edx, BYTE PTR _pMsg$[ebp+1]
  0007b	88 45 f6	 mov	 BYTE PTR _pMsg$[ebp+6], al
  0007e	52		 push	 edx
  0007f	8d 45 f0	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00082	50		 push	 eax
  00083	8b ce		 mov	 ecx, esi
  00085	c6 45 f7 03	 mov	 BYTE PTR _pMsg$[ebp+7], 3
  00089	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 742  : }

  0008e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00091	33 cd		 xor	 ecx, ebp
  00093	5e		 pop	 esi
  00094	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00099	8b e5		 mov	 esp, ebp
  0009b	5d		 pop	 ebp
  0009c	c3		 ret	 0
?SendEventState@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SendEventState
_TEXT	ENDS
PUBLIC	??0CImperialBattleOfGaion@@QAE@XZ		; CImperialBattleOfGaion::CImperialBattleOfGaion
; Function compile flags: /Ogtp
;	COMDAT ??0CImperialBattleOfGaion@@QAE@XZ
_TEXT	SEGMENT
??0CImperialBattleOfGaion@@QAE@XZ PROC			; CImperialBattleOfGaion::CImperialBattleOfGaion, COMDAT
; _this$ = ecx

; 13   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CImperialBattleOfGaion@@6B@

; 14   : 	this->ResetData();

  00006	e8 00 00 00 00	 call	 ?ResetData@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ResetData

; 15   : }

  0000b	8b c1		 mov	 eax, ecx
  0000d	c3		 ret	 0
??0CImperialBattleOfGaion@@QAE@XZ ENDP			; CImperialBattleOfGaion::CImperialBattleOfGaion
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCImperialBattleOfGaion@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCImperialBattleOfGaion@@UAEPAXI@Z PROC		; CImperialBattleOfGaion::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CImperialBattleOfGaion@@UAE@XZ ; CImperialBattleOfGaion::~CImperialBattleOfGaion
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCImperialBattleOfGaion@@UAEPAXI@Z ENDP		; CImperialBattleOfGaion::`scalar deleting destructor'
_TEXT	ENDS
PUBLIC	??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY1
EXTRN	?Init@TMonsterAIGroup@@SAXH@Z:PROC		; TMonsterAIGroup::Init
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
;	COMDAT ??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] Create Gate Index: %d Class'
	DB	': %d', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ I'
	DB	'MPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY1', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY1, COMDAT
; _this$ = ecx

; 76   : {

  00000	53		 push	 ebx
  00001	56		 push	 esi
  00002	8b d9		 mov	 ebx, ecx

; 77   : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY1", this->m_BattleData.CurrentState);

  00004	8b 43 38	 mov	 eax, DWORD PTR [ebx+56]
  00007	57		 push	 edi
  00008	50		 push	 eax
  00009	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@LJGJADD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0000e	6a 02		 push	 2
  00010	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00016	83 c4 0c	 add	 esp, 12			; 0000000cH
  00019	bf 04 00 00 00	 mov	 edi, OFFSET _g_GaionGate+4
  0001e	8d 73 08	 lea	 esi, DWORD PTR [ebx+8]
$LL4@SetState_S:

; 79   : 	{
; 80   : 		this->m_BattleData.GateIndex[i] = gObjAddMonster(72);

  00021	6a 48		 push	 72			; 00000048H
  00023	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  00028	98		 cwde
  00029	83 c4 04	 add	 esp, 4
  0002c	89 06		 mov	 DWORD PTR [esi], eax

; 81   : 		if(this->m_BattleData.GateIndex[i] >= 0)

  0002e	85 c0		 test	 eax, eax
  00030	0f 88 47 01 00
	00		 js	 $LN3@SetState_S

; 82   : 		{
; 83   : 			gObj[this->m_BattleData.GateIndex[i]].MapNumber = 72;

  00036	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0003c	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00042	c6 84 08 49 01
	00 00 48	 mov	 BYTE PTR [eax+ecx+329], 72 ; 00000048H

; 84   : 			gObj[this->m_BattleData.GateIndex[i]].X = g_GaionGate[i].X;

  0004a	8b 16		 mov	 edx, DWORD PTR [esi]
  0004c	0f b7 07	 movzx	 eax, WORD PTR [edi]
  0004f	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00055	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005b	66 89 84 0a 44
	01 00 00	 mov	 WORD PTR [edx+ecx+324], ax

; 85   : 			gObj[this->m_BattleData.GateIndex[i]].Y = g_GaionGate[i].Y;

  00063	8b 16		 mov	 edx, DWORD PTR [esi]
  00065	0f b7 47 04	 movzx	 eax, WORD PTR [edi+4]
  00069	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  0006f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00075	66 89 84 0a 46
	01 00 00	 mov	 WORD PTR [edx+ecx+326], ax

; 86   : 			gObj[this->m_BattleData.GateIndex[i]].Dir = g_GaionGate[i].Dir;

  0007d	8b 16		 mov	 edx, DWORD PTR [esi]
  0007f	0f b6 47 08	 movzx	 eax, BYTE PTR [edi+8]
  00083	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00089	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0008f	88 84 0a 48 01
	00 00		 mov	 BYTE PTR [edx+ecx+328], al

; 87   : 			gObj[this->m_BattleData.GateIndex[i]].TX = g_GaionGate[i].X;

  00096	8b 16		 mov	 edx, DWORD PTR [esi]
  00098	0f b7 07	 movzx	 eax, WORD PTR [edi]
  0009b	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  000a1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000a7	66 89 84 0a 7c
	01 00 00	 mov	 WORD PTR [edx+ecx+380], ax

; 88   : 			gObj[this->m_BattleData.GateIndex[i]].TY = g_GaionGate[i].Y;

  000af	8b 16		 mov	 edx, DWORD PTR [esi]
  000b1	0f b7 47 04	 movzx	 eax, WORD PTR [edi+4]
  000b5	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  000bb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000c1	66 89 84 0a 7e
	01 00 00	 mov	 WORD PTR [edx+ecx+382], ax

; 89   : 			gObj[this->m_BattleData.GateIndex[i]].StartX = g_GaionGate[i].X;

  000c9	8b 16		 mov	 edx, DWORD PTR [esi]
  000cb	0f b6 07	 movzx	 eax, BYTE PTR [edi]
  000ce	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  000d4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000da	88 84 0a 76 01
	00 00		 mov	 BYTE PTR [edx+ecx+374], al

; 90   : 			gObj[this->m_BattleData.GateIndex[i]].StartY = g_GaionGate[i].Y;

  000e1	8b 16		 mov	 edx, DWORD PTR [esi]
  000e3	0f b6 47 04	 movzx	 eax, BYTE PTR [edi+4]
  000e7	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  000ed	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000f3	88 84 0a 77 01
	00 00		 mov	 BYTE PTR [edx+ecx+375], al

; 91   : 			gObj[this->m_BattleData.GateIndex[i]].m_OldX = g_GaionGate[i].X;

  000fa	8b 16		 mov	 edx, DWORD PTR [esi]
  000fc	0f b7 07	 movzx	 eax, WORD PTR [edi]
  000ff	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00105	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0010b	66 89 84 0a 78
	01 00 00	 mov	 WORD PTR [edx+ecx+376], ax

; 92   : 			gObj[this->m_BattleData.GateIndex[i]].m_OldY = g_GaionGate[i].Y;

  00113	8b 16		 mov	 edx, DWORD PTR [esi]
  00115	0f b7 47 04	 movzx	 eax, WORD PTR [edi+4]
  00119	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  0011f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00125	66 89 84 0a 7a
	01 00 00	 mov	 WORD PTR [edx+ecx+378], ax

; 93   : 			gObjSetMonster(this->m_BattleData.GateIndex[i], g_GaionGate[i].Class);

  0012d	8b 57 fc	 mov	 edx, DWORD PTR [edi-4]
  00130	8b 06		 mov	 eax, DWORD PTR [esi]
  00132	52		 push	 edx
  00133	50		 push	 eax
  00134	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster

; 94   : 			gObj[this->m_BattleData.GateIndex[i]].m_ImmuneToHarmCount = 3600; // IMMUNITY FOR GATES

  00139	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0013b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00140	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00146	ba 10 0e 00 00	 mov	 edx, 3600		; 00000e10H
  0014b	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 95   : 			gObj[this->m_BattleData.GateIndex[i]].m_ImmuneToMagicCount = 3600; // IMMUNITY FOR GATES

  00153	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00155	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0015a	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00160	66 89 94 01 82
	22 00 00	 mov	 WORD PTR [ecx+eax+8834], dx

; 96   : 
; 97   : 			LogAddTD("[ IMPERIAL FORT ] [ BattleOfGaion ] Create Gate Index: %d Class: %d",
; 98   : 				this->m_BattleData.GateIndex[i], g_GaionGate[i].Class);

  00168	8b 4f fc	 mov	 ecx, DWORD PTR [edi-4]
  0016b	8b 16		 mov	 edx, DWORD PTR [esi]
  0016d	51		 push	 ecx
  0016e	52		 push	 edx
  0016f	68 00 00 00 00	 push	 OFFSET ??_C@_0EE@NGNADDNM@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  00174	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0017a	83 c4 14	 add	 esp, 20			; 00000014H
$LN3@SetState_S:

; 78   : 	for(int i=0;i<10;++i)

  0017d	83 c7 10	 add	 edi, 16			; 00000010H
  00180	83 c6 04	 add	 esi, 4
  00183	81 ff a4 00 00
	00		 cmp	 edi, OFFSET _g_GaionGate+164
  00189	0f 8c 92 fe ff
	ff		 jl	 $LL4@SetState_S

; 99   : 		}
; 100  : 	}
; 101  : 	this->m_BattleData.Time = 60000;

  0018f	c7 43 30 60 ea
	00 00		 mov	 DWORD PTR [ebx+48], 60000 ; 0000ea60H

; 102  : 	this->m_BattleData.TickCount = GetTickCount();

  00196	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 103  : 	TMonsterAIGroup::Init(36);

  0019c	6a 24		 push	 36			; 00000024H
  0019e	89 43 34	 mov	 DWORD PTR [ebx+52], eax
  001a1	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  001a6	83 c4 04	 add	 esp, 4
  001a9	5f		 pop	 edi
  001aa	5e		 pop	 esi

; 104  : 	this->m_BattleData.MonsterCount = 0;

  001ab	c7 43 3c 00 00
	00 00		 mov	 DWORD PTR [ebx+60], 0

; 105  : 	this->m_BattleData.CurrentAIGroup = 36;

  001b2	c7 43 40 24 00
	00 00		 mov	 DWORD PTR [ebx+64], 36	; 00000024H

; 106  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY1;

  001b9	c7 43 38 01 00
	00 00		 mov	 DWORD PTR [ebx+56], 1

; 107  : 	this->SendEventState();

  001c0	8b cb		 mov	 ecx, ebx
  001c2	5b		 pop	 ebx
  001c3	e9 00 00 00 00	 jmp	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState
?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY1
_TEXT	ENDS
PUBLIC	??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY2
;	COMDAT ??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY2', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY2, COMDAT
; _this$ = ecx

; 111  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 112  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY2", this->m_BattleData.CurrentState);

  00003	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00006	50		 push	 eax
  00007	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@CALLMDPA@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0000c	6a 02		 push	 2
  0000e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00014	83 c4 0c	 add	 esp, 12			; 0000000cH

; 113  : 	this->m_BattleData.Time = 60000;

  00017	c7 46 30 60 ea
	00 00		 mov	 DWORD PTR [esi+48], 60000 ; 0000ea60H

; 114  : 	this->m_BattleData.TickCount = GetTickCount();

  0001e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 115  : 	TMonsterAIGroup::DelGroupInstance(36);

  00024	6a 24		 push	 36			; 00000024H
  00026	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00029	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance

; 116  : 	TMonsterAIGroup::Init(37);

  0002e	6a 25		 push	 37			; 00000025H
  00030	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init
  00035	83 c4 08	 add	 esp, 8

; 117  : 	this->m_BattleData.MonsterCount = 0;

  00038	c7 46 3c 00 00
	00 00		 mov	 DWORD PTR [esi+60], 0

; 118  : 	this->m_BattleData.CurrentAIGroup = 37;

  0003f	c7 46 40 25 00
	00 00		 mov	 DWORD PTR [esi+64], 37	; 00000025H

; 119  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY2;

  00046	c7 46 38 03 00
	00 00		 mov	 DWORD PTR [esi+56], 3

; 120  : 	this->SendEventState();

  0004d	8b ce		 mov	 ecx, esi
  0004f	5e		 pop	 esi
  00050	e9 00 00 00 00	 jmp	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState
?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY2
_TEXT	ENDS
PUBLIC	??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@ ; `string'
PUBLIC	??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY3
EXTRN	?FindGroupLeader@TMonsterAIGroup@@SAHH@Z:PROC	; TMonsterAIGroup::FindGroupLeader
;	COMDAT ??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@
CONST	SEGMENT
??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@ DB '['
	DB	' IMPERIAL FORT ] Create BOSS %s Index: %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY3', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY3, COMDAT
; _this$ = ecx

; 124  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 125  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY3", this->m_BattleData.CurrentState);

  00003	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00006	50		 push	 eax
  00007	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@DJKAPCLB@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0000c	6a 02		 push	 2
  0000e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00014	83 c4 0c	 add	 esp, 12			; 0000000cH

; 126  : 	this->m_BattleData.Time = 60000;

  00017	c7 46 30 60 ea
	00 00		 mov	 DWORD PTR [esi+48], 60000 ; 0000ea60H

; 127  : 	this->m_BattleData.TickCount = GetTickCount();

  0001e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 128  : 	TMonsterAIGroup::DelGroupInstance(37);

  00024	6a 25		 push	 37			; 00000025H
  00026	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00029	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance

; 129  : 	TMonsterAIGroup::Init(38);

  0002e	6a 26		 push	 38			; 00000026H
  00030	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init

; 130  : 	this->m_BattleData.MonsterCount = 0;
; 131  : 	this->m_BattleData.CurrentLeaderIndex = TMonsterAIGroup::FindGroupLeader(38);

  00035	6a 26		 push	 38			; 00000026H
  00037	c7 46 3c 00 00
	00 00		 mov	 DWORD PTR [esi+60], 0
  0003e	e8 00 00 00 00	 call	 ?FindGroupLeader@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::FindGroupLeader

; 132  : 	LogAddTD("[ IMPERIAL FORT ] Create BOSS %s Index: %d", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.CurrentLeaderIndex);

  00043	50		 push	 eax
  00044	89 46 04	 mov	 DWORD PTR [esi+4], eax
  00047	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0004d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00053	8d 54 08 77	 lea	 edx, DWORD PTR [eax+ecx+119]
  00057	52		 push	 edx
  00058	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@KEAFHCPG@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5BOSS?5?$CFs@
  0005d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00063	83 c4 18	 add	 esp, 24			; 00000018H

; 133  : 	this->m_BattleData.CurrentAIGroup = 38;

  00066	c7 46 40 26 00
	00 00		 mov	 DWORD PTR [esi+64], 38	; 00000026H

; 134  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY3;

  0006d	c7 46 38 05 00
	00 00		 mov	 DWORD PTR [esi+56], 5

; 135  : 	this->SendEventState();

  00074	8b ce		 mov	 ecx, esi
  00076	5e		 pop	 esi
  00077	e9 00 00 00 00	 jmp	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState
?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY3
_TEXT	ENDS
PUBLIC	??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@ ; `string'
PUBLIC	??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY4
;	COMDAT ??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@
CONST	SEGMENT
??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@ DB '[ IMP'
	DB	'ERIAL FORT ] Create Imperial Fort Boss %s Index: %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY4', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_STANDBY4, COMDAT
; _this$ = ecx

; 139  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 140  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> STANDBY4", this->m_BattleData.CurrentState);

  00003	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00006	50		 push	 eax
  00007	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@HGOBGEHG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0000c	6a 02		 push	 2
  0000e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC
  00014	83 c4 0c	 add	 esp, 12			; 0000000cH

; 141  : 	this->m_BattleData.Time = 60000;

  00017	c7 46 30 60 ea
	00 00		 mov	 DWORD PTR [esi+48], 60000 ; 0000ea60H

; 142  : 	this->m_BattleData.TickCount = GetTickCount();

  0001e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 143  : 	TMonsterAIGroup::DelGroupInstance(38);

  00024	6a 26		 push	 38			; 00000026H
  00026	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00029	e8 00 00 00 00	 call	 ?DelGroupInstance@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::DelGroupInstance

; 144  : 	TMonsterAIGroup::Init(39);

  0002e	6a 27		 push	 39			; 00000027H
  00030	e8 00 00 00 00	 call	 ?Init@TMonsterAIGroup@@SAXH@Z ; TMonsterAIGroup::Init

; 145  : 	this->m_BattleData.MonsterCount = 0;
; 146  : 	this->m_BattleData.CurrentLeaderIndex = TMonsterAIGroup::FindGroupLeader(39);

  00035	6a 27		 push	 39			; 00000027H
  00037	c7 46 3c 00 00
	00 00		 mov	 DWORD PTR [esi+60], 0
  0003e	e8 00 00 00 00	 call	 ?FindGroupLeader@TMonsterAIGroup@@SAHH@Z ; TMonsterAIGroup::FindGroupLeader

; 147  : 	LogAddTD("[ IMPERIAL FORT ] Create Imperial Fort Boss %s Index: %d", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.CurrentLeaderIndex);

  00043	50		 push	 eax
  00044	89 46 04	 mov	 DWORD PTR [esi+4], eax
  00047	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0004d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00053	8d 54 08 77	 lea	 edx, DWORD PTR [eax+ecx+119]
  00057	52		 push	 edx
  00058	68 00 00 00 00	 push	 OFFSET ??_C@_0DJ@CIJFJHFD@?$FL?5IMPERIAL?5FORT?5?$FN?5Create?5Imperia@
  0005d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00063	83 c4 18	 add	 esp, 24			; 00000018H

; 148  : 	this->m_BattleData.CurrentAIGroup = 38;

  00066	c7 46 40 26 00
	00 00		 mov	 DWORD PTR [esi+64], 38	; 00000026H

; 149  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_STANDBY4;

  0006d	c7 46 38 07 00
	00 00		 mov	 DWORD PTR [esi+56], 7

; 150  : 	this->SendEventState();

  00074	8b ce		 mov	 ecx, esi
  00076	5e		 pop	 esi
  00077	e9 00 00 00 00	 jmp	 ?SendEventState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventState
?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_STANDBY4
_TEXT	ENDS
PUBLIC	??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@	; `string'
PUBLIC	??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE1
EXTRN	?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z:PROC	; TNotice::MakeNoticeMsg
EXTRN	?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z:PROC	; TMonsterAIGroup::ChangeAIOrder
;	COMDAT ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
CONST	SEGMENT
??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@ DB 'Quest Started!', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE1', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_pNotice$ = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE1, COMDAT
; _this$ = ecx

; 154  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 01 00
	00		 sub	 esp, 276		; 00000114H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b f1		 mov	 esi, ecx

; 155  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE1", this->m_BattleData.CurrentState);

  00016	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00019	50		 push	 eax
  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@HAJDCGLG@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0001f	6a 02		 push	 2
  00021	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC

; 156  : 	gObj[this->m_BattleData.GateIndex[0]].m_ImmuneToHarmCount = 0;

  00027	8b 4e 08	 mov	 ecx, DWORD PTR [esi+8]
  0002a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002f	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00035	33 d2		 xor	 edx, edx
  00037	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 157  : 	gObj[this->m_BattleData.GateIndex[0]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  0003f	8b 4e 08	 mov	 ecx, DWORD PTR [esi+8]
  00042	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00047	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0004d	66 89 94 01 82
	22 00 00	 mov	 WORD PTR [ecx+eax+8834], dx
  00055	83 c4 0c	 add	 esp, 12			; 0000000cH

; 158  : 	this->m_BattleData.Time = 600000;

  00058	c7 46 30 c0 27
	09 00		 mov	 DWORD PTR [esi+48], 600000 ; 000927c0H

; 159  : 	this->m_BattleData.TickCount = GetTickCount();

  0005f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 160  : 	TMonsterAIGroup::ChangeAIOrder(36, 1);

  00065	6a 01		 push	 1
  00067	6a 24		 push	 36			; 00000024H
  00069	89 46 34	 mov	 DWORD PTR [esi+52], eax
  0006c	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder

; 161  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[36];

  00071	8b 0d 90 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+144

; 162  : 	this->m_BattleData.PhazeStep = 0;
; 163  : 	this->m_BattleData.NotifyCount = -1;
; 164  : 	PMSG_NOTICE pNotice;
; 165  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00077	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0007c	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$[ebp]
  00082	6a 00		 push	 0
  00084	52		 push	 edx
  00085	89 4e 3c	 mov	 DWORD PTR [esi+60], ecx
  00088	c7 46 48 00 00
	00 00		 mov	 DWORD PTR [esi+72], 0
  0008f	c6 46 4c ff	 mov	 BYTE PTR [esi+76], 255	; 000000ffH
  00093	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg

; 166  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00098	0f b6 85 ed fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  0009f	83 c4 14	 add	 esp, 20			; 00000014H
  000a2	50		 push	 eax
  000a3	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  000a9	51		 push	 ecx
  000aa	8b ce		 mov	 ecx, esi
  000ac	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 167  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE1;
; 168  : }

  000b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b4	c7 46 38 02 00
	00 00		 mov	 DWORD PTR [esi+56], 2
  000bb	33 cd		 xor	 ecx, ebp
  000bd	5e		 pop	 esi
  000be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c3	8b e5		 mov	 esp, ebp
  000c5	5d		 pop	 ebp
  000c6	c3		 ret	 0
?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE1
_TEXT	ENDS
PUBLIC	??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE2
;	COMDAT ??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE2', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_pNotice$ = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE2, COMDAT
; _this$ = ecx

; 171  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 01 00
	00		 sub	 esp, 276		; 00000114H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b f1		 mov	 esi, ecx

; 172  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE2", this->m_BattleData.CurrentState);

  00016	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00019	50		 push	 eax
  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@FLLOHFHF@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0001f	6a 02		 push	 2
  00021	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC

; 173  : 	gObj[this->m_BattleData.GateIndex[3]].m_ImmuneToHarmCount = 0;

  00027	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  0002a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002f	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00035	33 d2		 xor	 edx, edx
  00037	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 174  : 	gObj[this->m_BattleData.GateIndex[3]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  0003f	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  00042	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00047	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0004d	66 89 94 01 82
	22 00 00	 mov	 WORD PTR [ecx+eax+8834], dx
  00055	83 c4 0c	 add	 esp, 12			; 0000000cH

; 175  : 	this->m_BattleData.Time = 600000;

  00058	c7 46 30 c0 27
	09 00		 mov	 DWORD PTR [esi+48], 600000 ; 000927c0H

; 176  : 	this->m_BattleData.TickCount = GetTickCount();

  0005f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 177  : 	TMonsterAIGroup::ChangeAIOrder(37, 1);

  00065	6a 01		 push	 1
  00067	6a 25		 push	 37			; 00000025H
  00069	89 46 34	 mov	 DWORD PTR [esi+52], eax
  0006c	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder

; 178  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[37];

  00071	8b 0d 94 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+148

; 179  : 	this->m_BattleData.PhazeStep = 0;
; 180  : 	this->m_BattleData.NotifyCount = -1;
; 181  : 	PMSG_NOTICE pNotice;
; 182  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00077	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0007c	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$[ebp]
  00082	6a 00		 push	 0
  00084	52		 push	 edx
  00085	89 4e 3c	 mov	 DWORD PTR [esi+60], ecx
  00088	c7 46 48 00 00
	00 00		 mov	 DWORD PTR [esi+72], 0
  0008f	c6 46 4c ff	 mov	 BYTE PTR [esi+76], 255	; 000000ffH
  00093	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg

; 183  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00098	0f b6 85 ed fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  0009f	83 c4 14	 add	 esp, 20			; 00000014H
  000a2	50		 push	 eax
  000a3	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  000a9	51		 push	 ecx
  000aa	8b ce		 mov	 ecx, esi
  000ac	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 184  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE2;
; 185  : }

  000b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b4	c7 46 38 04 00
	00 00		 mov	 DWORD PTR [esi+56], 4
  000bb	33 cd		 xor	 ecx, ebp
  000bd	5e		 pop	 esi
  000be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c3	8b e5		 mov	 esp, ebp
  000c5	5d		 pop	 ebp
  000c6	c3		 ret	 0
?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE2
_TEXT	ENDS
PUBLIC	??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE3
;	COMDAT ??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ '
	DB	'IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE3', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_pNotice$ = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE3, COMDAT
; _this$ = ecx

; 188  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 01 00
	00		 sub	 esp, 276		; 00000114H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b f1		 mov	 esi, ecx

; 189  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE3", this->m_BattleData.CurrentState);

  00016	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00019	50		 push	 eax
  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@ECKFEEDE@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0001f	6a 02		 push	 2
  00021	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC

; 190  : 	gObj[this->m_BattleData.GateIndex[6]].m_ImmuneToHarmCount = 0;

  00027	8b 4e 20	 mov	 ecx, DWORD PTR [esi+32]
  0002a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002f	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00035	33 d2		 xor	 edx, edx
  00037	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 191  : 	gObj[this->m_BattleData.GateIndex[6]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  0003f	8b 4e 20	 mov	 ecx, DWORD PTR [esi+32]
  00042	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00047	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0004d	66 89 94 01 82
	22 00 00	 mov	 WORD PTR [ecx+eax+8834], dx
  00055	83 c4 0c	 add	 esp, 12			; 0000000cH

; 192  : 	this->m_BattleData.Time = 600000;

  00058	c7 46 30 c0 27
	09 00		 mov	 DWORD PTR [esi+48], 600000 ; 000927c0H

; 193  : 	this->m_BattleData.TickCount = GetTickCount();

  0005f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 194  : 	TMonsterAIGroup::ChangeAIOrder(38, 1);

  00065	6a 01		 push	 1
  00067	6a 26		 push	 38			; 00000026H
  00069	89 46 34	 mov	 DWORD PTR [esi+52], eax
  0006c	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder

; 195  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[38];

  00071	8b 0d 98 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+152

; 196  : 	this->m_BattleData.PhazeStep = 0;
; 197  : 	this->m_BattleData.NotifyCount = -1;
; 198  : 	PMSG_NOTICE pNotice;
; 199  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00077	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0007c	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$[ebp]
  00082	6a 00		 push	 0
  00084	52		 push	 edx
  00085	89 4e 3c	 mov	 DWORD PTR [esi+60], ecx
  00088	c7 46 48 00 00
	00 00		 mov	 DWORD PTR [esi+72], 0
  0008f	c6 46 4c ff	 mov	 BYTE PTR [esi+76], 255	; 000000ffH
  00093	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg

; 200  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00098	0f b6 85 ed fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  0009f	83 c4 14	 add	 esp, 20			; 00000014H
  000a2	50		 push	 eax
  000a3	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  000a9	51		 push	 ecx
  000aa	8b ce		 mov	 ecx, esi
  000ac	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 201  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE3;
; 202  : }

  000b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b4	c7 46 38 06 00
	00 00		 mov	 DWORD PTR [esi+56], 6
  000bb	33 cd		 xor	 ecx, ebp
  000bd	5e		 pop	 esi
  000be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c3	8b e5		 mov	 esp, ebp
  000c5	5d		 pop	 ebp
  000c6	c3		 ret	 0
?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE3
_TEXT	ENDS
PUBLIC	??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetState_PHAZE4
;	COMDAT ??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
CONST	SEGMENT
??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@ DB '[ I'
	DB	'MPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE4', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_pNotice$ = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetState_PHAZE4, COMDAT
; _this$ = ecx

; 205  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 01 00
	00		 sub	 esp, 276		; 00000114H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	8b f1		 mov	 esi, ecx

; 206  : 	LogAddC(2, "[ IMPERIAL FORT ] [ BattleOfGaion ] State(%d) -> PHAZE4", this->m_BattleData.CurrentState);

  00016	8b 46 38	 mov	 eax, DWORD PTR [esi+56]
  00019	50		 push	 eax
  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0DI@NOENCPD@?$FL?5IMPERIAL?5FORT?5?$FN?5?$FL?5BattleOfGaio@
  0001f	6a 02		 push	 2
  00021	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC

; 207  : 	gObj[this->m_BattleData.GateIndex[9]].m_ImmuneToHarmCount = 0;

  00027	8b 4e 2c	 mov	 ecx, DWORD PTR [esi+44]
  0002a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002f	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00035	33 d2		 xor	 edx, edx
  00037	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 208  : 	gObj[this->m_BattleData.GateIndex[9]].m_ImmuneToMagicCount = 0; // REMOVE IMMUNITY

  0003f	8b 4e 2c	 mov	 ecx, DWORD PTR [esi+44]
  00042	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00047	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0004d	66 89 94 01 82
	22 00 00	 mov	 WORD PTR [ecx+eax+8834], dx
  00055	83 c4 0c	 add	 esp, 12			; 0000000cH

; 209  : 	this->m_BattleData.Time = 600000;

  00058	c7 46 30 c0 27
	09 00		 mov	 DWORD PTR [esi+48], 600000 ; 000927c0H

; 210  : 	this->m_BattleData.TickCount = GetTickCount();

  0005f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 211  : 	TMonsterAIGroup::ChangeAIOrder(39, 1);

  00065	6a 01		 push	 1
  00067	6a 27		 push	 39			; 00000027H
  00069	89 46 34	 mov	 DWORD PTR [esi+52], eax
  0006c	e8 00 00 00 00	 call	 ?ChangeAIOrder@TMonsterAIGroup@@SAXHH@Z ; TMonsterAIGroup::ChangeAIOrder

; 212  : 	this->m_BattleData.MonsterCount = TMonsterAIGroup::s_iMonsterAIGroupMemberCount[39];

  00071	8b 0d 9c 00 00
	00		 mov	 ecx, DWORD PTR ?s_iMonsterAIGroupMemberCount@TMonsterAIGroup@@2PAHA+156

; 213  : 	this->m_BattleData.PhazeStep = 0;
; 214  : 	this->m_BattleData.NotifyCount = -1;
; 215  : 	PMSG_NOTICE pNotice;
; 216  : 	TNotice::MakeNoticeMsg(&pNotice, 0, "Quest Started!");

  00077	68 00 00 00 00	 push	 OFFSET ??_C@_0P@PLCJDIGB@Quest?5Started?$CB?$AA@
  0007c	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$[ebp]
  00082	6a 00		 push	 0
  00084	52		 push	 edx
  00085	89 4e 3c	 mov	 DWORD PTR [esi+60], ecx
  00088	c7 46 48 00 00
	00 00		 mov	 DWORD PTR [esi+72], 0
  0008f	c6 46 4c ff	 mov	 BYTE PTR [esi+76], 255	; 000000ffH
  00093	e8 00 00 00 00	 call	 ?MakeNoticeMsg@TNotice@@SAXPAXEPAD@Z ; TNotice::MakeNoticeMsg

; 217  : 	this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00098	0f b6 85 ed fe
	ff ff		 movzx	 eax, BYTE PTR _pNotice$[ebp+1]
  0009f	83 c4 14	 add	 esp, 20			; 00000014H
  000a2	50		 push	 eax
  000a3	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$[ebp]
  000a9	51		 push	 ecx
  000aa	8b ce		 mov	 ecx, esi
  000ac	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 218  : 	this->m_BattleData.CurrentState = BATTLEOFGAION_STATE_PHAZE4;
; 219  : }

  000b1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b4	c7 46 38 08 00
	00 00		 mov	 DWORD PTR [esi+56], 8
  000bb	33 cd		 xor	 ecx, ebp
  000bd	5e		 pop	 esi
  000be	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c3	8b e5		 mov	 esp, ebp
  000c5	5d		 pop	 ebp
  000c6	c3		 ret	 0
?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetState_PHAZE4
_TEXT	ENDS
PUBLIC	?SetState@CImperialBattleOfGaion@@QAEXH@Z	; CImperialBattleOfGaion::SetState
; Function compile flags: /Ogtp
;	COMDAT ?SetState@CImperialBattleOfGaion@@QAEXH@Z
_TEXT	SEGMENT
_iState$ = 8						; size = 4
?SetState@CImperialBattleOfGaion@@QAEXH@Z PROC		; CImperialBattleOfGaion::SetState, COMDAT
; _this$ = ecx

; 27   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 28   : 	switch ( iState )

  00003	8b 45 08	 mov	 eax, DWORD PTR _iState$[ebp]
  00006	83 f8 09	 cmp	 eax, 9
  00009	77 5d		 ja	 SHORT $LN11@SetState
  0000b	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN15@SetState[eax*4]
$LN10@SetState:

; 29   : 	{
; 30   : 		case 0:
; 31   : 			this->SetState_NONE();

  00012	e8 00 00 00 00	 call	 ?SetState_NONE@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_NONE

; 59   : 			break;
; 60   : 	}
; 61   : }

  00017	5d		 pop	 ebp
  00018	c2 04 00	 ret	 4
$LN9@SetState:

; 32   : 			break;
; 33   : 		case 1:
; 34   : 			this->SetState_STANDBY1();

  0001b	e8 00 00 00 00	 call	 ?SetState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY1

; 59   : 			break;
; 60   : 	}
; 61   : }

  00020	5d		 pop	 ebp
  00021	c2 04 00	 ret	 4
$LN8@SetState:

; 35   : 			break;
; 36   : 		case 2:
; 37   : 			this->SetState_PHAZE1();

  00024	e8 00 00 00 00	 call	 ?SetState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE1

; 59   : 			break;
; 60   : 	}
; 61   : }

  00029	5d		 pop	 ebp
  0002a	c2 04 00	 ret	 4
$LN7@SetState:

; 38   : 			break;
; 39   : 		case 3:
; 40   : 			this->SetState_STANDBY2();

  0002d	e8 00 00 00 00	 call	 ?SetState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY2

; 59   : 			break;
; 60   : 	}
; 61   : }

  00032	5d		 pop	 ebp
  00033	c2 04 00	 ret	 4
$LN6@SetState:

; 41   : 			break;
; 42   : 		case 4:
; 43   : 			this->SetState_PHAZE2();

  00036	e8 00 00 00 00	 call	 ?SetState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE2

; 59   : 			break;
; 60   : 	}
; 61   : }

  0003b	5d		 pop	 ebp
  0003c	c2 04 00	 ret	 4
$LN5@SetState:

; 44   : 			break;
; 45   : 		case 5: 
; 46   : 			this->SetState_STANDBY3();

  0003f	e8 00 00 00 00	 call	 ?SetState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY3

; 59   : 			break;
; 60   : 	}
; 61   : }

  00044	5d		 pop	 ebp
  00045	c2 04 00	 ret	 4
$LN4@SetState:

; 47   : 			break;
; 48   : 		case 6:
; 49   : 			this->SetState_PHAZE3();

  00048	e8 00 00 00 00	 call	 ?SetState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE3

; 59   : 			break;
; 60   : 	}
; 61   : }

  0004d	5d		 pop	 ebp
  0004e	c2 04 00	 ret	 4
$LN3@SetState:

; 50   : 			break;
; 51   : 		case 7:
; 52   : 			this->SetState_STANDBY4();

  00051	e8 00 00 00 00	 call	 ?SetState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_STANDBY4

; 59   : 			break;
; 60   : 	}
; 61   : }

  00056	5d		 pop	 ebp
  00057	c2 04 00	 ret	 4
$LN2@SetState:

; 53   : 			break;
; 54   : 		case 8:
; 55   : 			this->SetState_PHAZE4();

  0005a	e8 00 00 00 00	 call	 ?SetState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_PHAZE4

; 59   : 			break;
; 60   : 	}
; 61   : }

  0005f	5d		 pop	 ebp
  00060	c2 04 00	 ret	 4
$LN1@SetState:

; 56   : 			break;
; 57   : 		case 9:
; 58   : 			this->SetState_END();

  00063	e8 00 00 00 00	 call	 ?SetState_END@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetState_END
$LN11@SetState:

; 59   : 			break;
; 60   : 	}
; 61   : }

  00068	5d		 pop	 ebp
  00069	c2 04 00	 ret	 4
$LN15@SetState:
  0006c	00 00 00 00	 DD	 $LN10@SetState
  00070	00 00 00 00	 DD	 $LN9@SetState
  00074	00 00 00 00	 DD	 $LN8@SetState
  00078	00 00 00 00	 DD	 $LN7@SetState
  0007c	00 00 00 00	 DD	 $LN6@SetState
  00080	00 00 00 00	 DD	 $LN5@SetState
  00084	00 00 00 00	 DD	 $LN4@SetState
  00088	00 00 00 00	 DD	 $LN3@SetState
  0008c	00 00 00 00	 DD	 $LN2@SetState
  00090	00 00 00 00	 DD	 $LN1@SetState
?SetState@CImperialBattleOfGaion@@QAEXH@Z ENDP		; CImperialBattleOfGaion::SetState
_TEXT	ENDS
PUBLIC	?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY1
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY1, COMDAT
; _this$ = ecx

; 267  : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 268  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  00008	8b f1		 mov	 esi, ecx
  0000a	ff d7		 call	 edi
  0000c	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 269  : 	if(Tick >= 1000)

  0000f	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00014	7c 1e		 jl	 SHORT $LN1@ProcState_

; 270  : 	{
; 271  : 		this->m_BattleData.Time -= Tick;

  00016	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 272  : 		this->m_BattleData.TickCount = GetTickCount();

  00019	ff d7		 call	 edi

; 273  : 
; 274  : 		this->SendEventInterface();

  0001b	8b ce		 mov	 ecx, esi
  0001d	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00020	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 275  : 
; 276  : 		if(this->m_BattleData.Time <= 0)

  00025	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  00029	7f 09		 jg	 SHORT $LN1@ProcState_

; 277  : 		{
; 278  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE1);

  0002b	6a 02		 push	 2
  0002d	8b ce		 mov	 ecx, esi
  0002f	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_:

; 279  : 		}
; 280  : 	}
; 281  : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	c3		 ret	 0
?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY1
_TEXT	ENDS
PUBLIC	??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE1
EXTRN	?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ:PROC	; TNotice::MakeNoticeMsgEx
EXTRN	?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z:PROC ; gObjAttack
;	COMDAT ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.h
CONST	SEGMENT
??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@ DB 'Portal '
	DB	'will be closed after %d minutes', 00H	; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.cpp
CONST	ENDS
;	COMDAT ?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_n$204277 = -284					; size = 4
tv567 = -280						; size = 4
_pNotice$204283 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE1, COMDAT
; _this$ = ecx

; 284  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 1c 01 00
	00		 sub	 esp, 284		; 0000011cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi

; 285  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00015	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  0001b	8b f1		 mov	 esi, ecx
  0001d	ff d7		 call	 edi
  0001f	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 286  : 	if(Tick >= 1000)

  00022	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00027	0f 8c 4f 02 00
	00		 jl	 $LN1@ProcState_@2

; 287  : 	{
; 288  : 		this->m_BattleData.Time -= Tick;

  0002d	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 289  : 		this->m_BattleData.TickCount = GetTickCount();

  00030	ff d7		 call	 edi

; 290  : 
; 291  : 		this->SendEventInterface();

  00032	8b ce		 mov	 ecx, esi
  00034	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00037	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 292  : 		this->MonsterProc();

  0003c	8b ce		 mov	 ecx, esi
  0003e	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc
  00043	c7 85 e8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv567[ebp], 0
  0004d	53		 push	 ebx
  0004e	8b ff		 npad	 2
$LL36@ProcState_@2:

; 295  : 		{
; 296  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00055	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _n$204277[ebp], 0
  0005f	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00064	85 c0		 test	 eax, eax
  00066	0f 8e 9e 00 00
	00		 jle	 $LN12@ProcState_@2
  0006c	bf 08 00 00 00	 mov	 edi, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL33@ProcState_@2:

; 297  : 			{
; 298  : 
; 299  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_GaionTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_GaionTrap[i].X+5
; 300  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_GaionTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_GaionTrap[i].Y+5)

  00071	8b 07		 mov	 eax, DWORD PTR [edi]
  00073	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv567[ebp]
  00079	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0007f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00085	8b 92 00 00 00
	00		 mov	 edx, DWORD PTR _g_GaionTrap[edx]
  0008b	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00092	8d 5a fb	 lea	 ebx, DWORD PTR [edx-5]
  00095	3b cb		 cmp	 ecx, ebx
  00097	7c 4f		 jl	 SHORT $LN9@ProcState_@2
  00099	83 c2 05	 add	 edx, 5
  0009c	3b ca		 cmp	 ecx, edx
  0009e	7f 48		 jg	 SHORT $LN9@ProcState_@2
  000a0	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv567[ebp]
  000a6	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  000ad	8b 92 04 00 00
	00		 mov	 edx, DWORD PTR _g_GaionTrap[edx+4]
  000b3	8d 5a fb	 lea	 ebx, DWORD PTR [edx-5]
  000b6	3b cb		 cmp	 ecx, ebx
  000b8	7c 2e		 jl	 SHORT $LN9@ProcState_@2
  000ba	83 c2 05	 add	 edx, 5
  000bd	3b ca		 cmp	 ecx, edx
  000bf	7f 27		 jg	 SHORT $LN9@ProcState_@2

; 301  : 				{
; 302  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  000c1	6a 00		 push	 0
  000c3	6a 00		 push	 0
  000c5	6a 00		 push	 0
  000c7	6a 00		 push	 0
  000c9	6a 00		 push	 0
  000cb	6a 00		 push	 0
  000cd	6a 00		 push	 0
  000cf	50		 push	 eax
  000d0	8b 46 44	 mov	 eax, DWORD PTR [esi+68]
  000d3	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000d9	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000df	50		 push	 eax
  000e0	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  000e5	83 c4 24	 add	 esp, 36			; 00000024H
$LN9@ProcState_@2:

; 295  : 		{
; 296  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  000e8	8b 9d e4 fe ff
	ff		 mov	 ebx, DWORD PTR _n$204277[ebp]
  000ee	43		 inc	 ebx
  000ef	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  000f4	89 9d e4 fe ff
	ff		 mov	 DWORD PTR _n$204277[ebp], ebx
  000fa	83 c7 0c	 add	 edi, 12			; 0000000cH
  000fd	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00102	3b d8		 cmp	 ebx, eax
  00104	0f 8c 67 ff ff
	ff		 jl	 $LL33@ProcState_@2
$LN12@ProcState_@2:

; 293  : 
; 294  : 		for(int i=0;i<26;++i)

  0010a	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR tv567[ebp]
  00110	83 c0 08	 add	 eax, 8
  00113	89 85 e8 fe ff
	ff		 mov	 DWORD PTR tv567[ebp], eax
  00119	3d d0 00 00 00	 cmp	 eax, 208		; 000000d0H
  0011e	0f 8c 2c ff ff
	ff		 jl	 $LL36@ProcState_@2

; 303  : 				}
; 304  : 			}
; 305  : 		}
; 306  : 
; 307  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00124	8b 4e 30	 mov	 ecx, DWORD PTR [esi+48]
  00127	5b		 pop	 ebx
  00128	85 c9		 test	 ecx, ecx
  0012a	7e 55		 jle	 SHORT $LN35@ProcState_@2
  0012c	b8 73 b2 e7 45	 mov	 eax, 1172812403		; 45e7b273H
  00131	f7 e9		 imul	 ecx
  00133	0f b6 4e 4c	 movzx	 ecx, BYTE PTR [esi+76]
  00137	c1 fa 0e	 sar	 edx, 14			; 0000000eH
  0013a	8b c2		 mov	 eax, edx
  0013c	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0013f	03 c2		 add	 eax, edx
  00141	3b c1		 cmp	 eax, ecx
  00143	74 3c		 je	 SHORT $LN35@ProcState_@2

; 308  : 		{
; 309  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;
; 310  : 			PMSG_NOTICE pNotice;
; 311  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  00145	0f b6 d0	 movzx	 edx, al
  00148	bf 01 00 00 00	 mov	 edi, 1
  0014d	03 d7		 add	 edx, edi
  0014f	52		 push	 edx
  00150	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  00155	88 46 4c	 mov	 BYTE PTR [esi+76], al
  00158	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$204283[ebp]
  0015e	6a 00		 push	 0
  00160	50		 push	 eax
  00161	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx

; 312  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00166	0f b6 8d ed fe
	ff ff		 movzx	 ecx, BYTE PTR _pNotice$204283[ebp+1]
  0016d	83 c4 10	 add	 esp, 16			; 00000010H
  00170	51		 push	 ecx
  00171	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$204283[ebp]
  00177	52		 push	 edx
  00178	8b ce		 mov	 ecx, esi
  0017a	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
  0017f	eb 05		 jmp	 SHORT $LN6@ProcState_@2
$LN35@ProcState_@2:
  00181	bf 01 00 00 00	 mov	 edi, 1
$LN6@ProcState_@2:

; 313  : 		}
; 314  : 
; 315  : 		if(gObj[this->m_BattleData.GateIndex[0]].Live == false && this->m_BattleData.PhazeStep == 0)

  00186	8b 4e 08	 mov	 ecx, DWORD PTR [esi+8]
  00189	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0018e	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00194	80 7c 01 6a 00	 cmp	 BYTE PTR [ecx+eax+106], 0
  00199	75 17		 jne	 SHORT $LN5@ProcState_@2
  0019b	83 7e 48 00	 cmp	 DWORD PTR [esi+72], 0
  0019f	75 11		 jne	 SHORT $LN5@ProcState_@2

; 316  : 		{
; 317  : 			this->SetMapAttr(0);

  001a1	6a 00		 push	 0
  001a3	8b ce		 mov	 ecx, esi
  001a5	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 318  : 			this->m_BattleData.PhazeStep++;

  001aa	01 7e 48	 add	 DWORD PTR [esi+72], edi
  001ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN5@ProcState_@2:

; 319  : 		}
; 320  : 
; 321  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  001b2	83 7e 3c 00	 cmp	 DWORD PTR [esi+60], 0
  001b6	7f 39		 jg	 SHORT $LN4@ProcState_@2
  001b8	39 7e 48	 cmp	 DWORD PTR [esi+72], edi
  001bb	75 34		 jne	 SHORT $LN4@ProcState_@2

; 322  : 		{
; 323  : 			gObj[this->m_BattleData.GateIndex[1]].m_ImmuneToHarmCount = 0;

  001bd	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  001c0	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001c6	33 c9		 xor	 ecx, ecx
  001c8	66 89 8c 02 84
	22 00 00	 mov	 WORD PTR [edx+eax+8836], cx

; 324  : 			gObj[this->m_BattleData.GateIndex[1]].m_ImmuneToMagicCount = 0;

  001d0	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  001d3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001d9	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001df	33 c0		 xor	 eax, eax
  001e1	66 89 84 0a 82
	22 00 00	 mov	 WORD PTR [edx+ecx+8834], ax

; 325  : 			this->m_BattleData.PhazeStep++;

  001e9	01 7e 48	 add	 DWORD PTR [esi+72], edi
  001ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN4@ProcState_@2:

; 326  : 		}
; 327  : 		if(gObj[this->m_BattleData.GateIndex[1]].Live == false && this->m_BattleData.PhazeStep == 2)

  001f1	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  001f4	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001fa	80 7c 02 6a 00	 cmp	 BYTE PTR [edx+eax+106], 0
  001ff	75 42		 jne	 SHORT $LN3@ProcState_@2
  00201	83 7e 48 02	 cmp	 DWORD PTR [esi+72], 2
  00205	75 3c		 jne	 SHORT $LN3@ProcState_@2

; 328  : 		{
; 329  : 			gObj[this->m_BattleData.GateIndex[2]].m_ImmuneToHarmCount = 0;

  00207	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  0020a	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00210	33 d2		 xor	 edx, edx
  00212	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 330  : 			gObj[this->m_BattleData.GateIndex[2]].m_ImmuneToMagicCount = 0;

  0021a	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  0021d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00223	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00229	33 c9		 xor	 ecx, ecx
  0022b	66 89 8c 10 82
	22 00 00	 mov	 WORD PTR [eax+edx+8834], cx

; 331  : 			this->SetMapAttr(1);

  00233	57		 push	 edi
  00234	8b ce		 mov	 ecx, esi
  00236	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 332  : 			this->m_BattleData.PhazeStep++;

  0023b	01 7e 48	 add	 DWORD PTR [esi+72], edi
  0023e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN3@ProcState_@2:

; 333  : 		}
; 334  : 		if(gObj[this->m_BattleData.GateIndex[2]].Live == false && this->m_BattleData.PhazeStep == 3)

  00243	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00246	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0024c	80 7c 01 6a 00	 cmp	 BYTE PTR [ecx+eax+106], 0
  00251	75 16		 jne	 SHORT $LN2@ProcState_@2
  00253	83 7e 48 03	 cmp	 DWORD PTR [esi+72], 3
  00257	75 10		 jne	 SHORT $LN2@ProcState_@2

; 335  : 		{
; 336  : 			this->SetMapAttr(2);

  00259	6a 02		 push	 2
  0025b	8b ce		 mov	 ecx, esi
  0025d	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 337  : 			this->PortalSetState = false;
; 338  : 			this->m_BattleData.PhazeStep++;

  00262	01 7e 48	 add	 DWORD PTR [esi+72], edi
  00265	c6 46 50 00	 mov	 BYTE PTR [esi+80], 0
$LN2@ProcState_@2:

; 339  : 		}
; 340  : 
; 341  : 		if(this->m_BattleData.Time <= 0)

  00269	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  0026d	7f 0d		 jg	 SHORT $LN1@ProcState_@2

; 342  : 		{
; 343  : 			this->SetSuccessValue(false);
; 344  : 			this->SetState(BATTLEOFGAION_STATE_END);

  0026f	6a 09		 push	 9
  00271	8b ce		 mov	 ecx, esi
  00273	c6 46 51 00	 mov	 BYTE PTR [esi+81], 0
  00277	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@2:

; 345  : 		}
; 346  : 	}
; 347  : }

  0027c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0027f	5f		 pop	 edi
  00280	33 cd		 xor	 ecx, ebp
  00282	5e		 pop	 esi
  00283	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00288	8b e5		 mov	 esp, ebp
  0028a	5d		 pop	 ebp
  0028b	c3		 ret	 0
?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE1
_TEXT	ENDS
PUBLIC	?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY2
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY2, COMDAT
; _this$ = ecx

; 350  : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 351  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  00008	8b f1		 mov	 esi, ecx
  0000a	ff d7		 call	 edi
  0000c	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 352  : 	if(Tick >= 1000)

  0000f	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00014	7c 1e		 jl	 SHORT $LN1@ProcState_@3

; 353  : 	{
; 354  : 		this->m_BattleData.Time -= Tick;

  00016	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 355  : 		this->m_BattleData.TickCount = GetTickCount();

  00019	ff d7		 call	 edi

; 356  : 
; 357  : 		this->SendEventInterface();

  0001b	8b ce		 mov	 ecx, esi
  0001d	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00020	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 358  : 
; 359  : 		if(this->m_BattleData.Time <= 0)

  00025	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  00029	7f 09		 jg	 SHORT $LN1@ProcState_@3

; 360  : 		{
; 361  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE2);

  0002b	6a 04		 push	 4
  0002d	8b ce		 mov	 ecx, esi
  0002f	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@3:

; 362  : 		}
; 363  : 	}
; 364  : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	c3		 ret	 0
?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY2
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE2
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_n$204306 = -284					; size = 4
tv567 = -280						; size = 4
_pNotice$204312 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE2, COMDAT
; _this$ = ecx

; 367  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 1c 01 00
	00		 sub	 esp, 284		; 0000011cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi

; 368  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00015	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  0001b	8b f1		 mov	 esi, ecx
  0001d	ff d7		 call	 edi
  0001f	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 369  : 	if(Tick >= 1000)

  00022	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00027	0f 8c 50 02 00
	00		 jl	 $LN1@ProcState_@4

; 370  : 	{
; 371  : 		this->m_BattleData.Time -= Tick;

  0002d	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 372  : 		this->m_BattleData.TickCount = GetTickCount();

  00030	ff d7		 call	 edi

; 373  : 
; 374  : 		this->SendEventInterface();

  00032	8b ce		 mov	 ecx, esi
  00034	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00037	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 375  : 		this->MonsterProc();

  0003c	8b ce		 mov	 ecx, esi
  0003e	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc
  00043	c7 85 e8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv567[ebp], 0
  0004d	53		 push	 ebx
  0004e	8b ff		 npad	 2
$LL36@ProcState_@4:

; 378  : 		{
; 379  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00055	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _n$204306[ebp], 0
  0005f	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00064	85 c0		 test	 eax, eax
  00066	0f 8e 9e 00 00
	00		 jle	 $LN12@ProcState_@4
  0006c	bf 08 00 00 00	 mov	 edi, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL33@ProcState_@4:

; 380  : 			{
; 381  : 
; 382  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_GaionTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_GaionTrap[i].X+5
; 383  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_GaionTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_GaionTrap[i].Y+5)

  00071	8b 07		 mov	 eax, DWORD PTR [edi]
  00073	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv567[ebp]
  00079	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0007f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00085	8b 92 00 00 00
	00		 mov	 edx, DWORD PTR _g_GaionTrap[edx]
  0008b	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00092	8d 5a fb	 lea	 ebx, DWORD PTR [edx-5]
  00095	3b cb		 cmp	 ecx, ebx
  00097	7c 4f		 jl	 SHORT $LN9@ProcState_@4
  00099	83 c2 05	 add	 edx, 5
  0009c	3b ca		 cmp	 ecx, edx
  0009e	7f 48		 jg	 SHORT $LN9@ProcState_@4
  000a0	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv567[ebp]
  000a6	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  000ad	8b 92 04 00 00
	00		 mov	 edx, DWORD PTR _g_GaionTrap[edx+4]
  000b3	8d 5a fb	 lea	 ebx, DWORD PTR [edx-5]
  000b6	3b cb		 cmp	 ecx, ebx
  000b8	7c 2e		 jl	 SHORT $LN9@ProcState_@4
  000ba	83 c2 05	 add	 edx, 5
  000bd	3b ca		 cmp	 ecx, edx
  000bf	7f 27		 jg	 SHORT $LN9@ProcState_@4

; 384  : 				{
; 385  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  000c1	6a 00		 push	 0
  000c3	6a 00		 push	 0
  000c5	6a 00		 push	 0
  000c7	6a 00		 push	 0
  000c9	6a 00		 push	 0
  000cb	6a 00		 push	 0
  000cd	6a 00		 push	 0
  000cf	50		 push	 eax
  000d0	8b 46 44	 mov	 eax, DWORD PTR [esi+68]
  000d3	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000d9	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000df	50		 push	 eax
  000e0	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  000e5	83 c4 24	 add	 esp, 36			; 00000024H
$LN9@ProcState_@4:

; 378  : 		{
; 379  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  000e8	8b 9d e4 fe ff
	ff		 mov	 ebx, DWORD PTR _n$204306[ebp]
  000ee	43		 inc	 ebx
  000ef	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  000f4	89 9d e4 fe ff
	ff		 mov	 DWORD PTR _n$204306[ebp], ebx
  000fa	83 c7 0c	 add	 edi, 12			; 0000000cH
  000fd	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00102	3b d8		 cmp	 ebx, eax
  00104	0f 8c 67 ff ff
	ff		 jl	 $LL33@ProcState_@4
$LN12@ProcState_@4:

; 376  : 
; 377  : 		for(int i=0;i<26;++i)

  0010a	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR tv567[ebp]
  00110	83 c0 08	 add	 eax, 8
  00113	89 85 e8 fe ff
	ff		 mov	 DWORD PTR tv567[ebp], eax
  00119	3d d0 00 00 00	 cmp	 eax, 208		; 000000d0H
  0011e	0f 8c 2c ff ff
	ff		 jl	 $LL36@ProcState_@4

; 386  : 				}
; 387  : 			}
; 388  : 		}
; 389  : 
; 390  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00124	8b 4e 30	 mov	 ecx, DWORD PTR [esi+48]
  00127	5b		 pop	 ebx
  00128	85 c9		 test	 ecx, ecx
  0012a	7e 55		 jle	 SHORT $LN35@ProcState_@4
  0012c	b8 73 b2 e7 45	 mov	 eax, 1172812403		; 45e7b273H
  00131	f7 e9		 imul	 ecx
  00133	0f b6 4e 4c	 movzx	 ecx, BYTE PTR [esi+76]
  00137	c1 fa 0e	 sar	 edx, 14			; 0000000eH
  0013a	8b c2		 mov	 eax, edx
  0013c	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0013f	03 c2		 add	 eax, edx
  00141	3b c1		 cmp	 eax, ecx
  00143	74 3c		 je	 SHORT $LN35@ProcState_@4

; 391  : 		{
; 392  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;
; 393  : 			PMSG_NOTICE pNotice;
; 394  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  00145	0f b6 d0	 movzx	 edx, al
  00148	bf 01 00 00 00	 mov	 edi, 1
  0014d	03 d7		 add	 edx, edi
  0014f	52		 push	 edx
  00150	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  00155	88 46 4c	 mov	 BYTE PTR [esi+76], al
  00158	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$204312[ebp]
  0015e	6a 00		 push	 0
  00160	50		 push	 eax
  00161	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx

; 395  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00166	0f b6 8d ed fe
	ff ff		 movzx	 ecx, BYTE PTR _pNotice$204312[ebp+1]
  0016d	83 c4 10	 add	 esp, 16			; 00000010H
  00170	51		 push	 ecx
  00171	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$204312[ebp]
  00177	52		 push	 edx
  00178	8b ce		 mov	 ecx, esi
  0017a	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
  0017f	eb 05		 jmp	 SHORT $LN6@ProcState_@4
$LN35@ProcState_@4:
  00181	bf 01 00 00 00	 mov	 edi, 1
$LN6@ProcState_@4:

; 396  : 		}
; 397  : 
; 398  : 		if(gObj[this->m_BattleData.GateIndex[3]].Live == false && this->m_BattleData.PhazeStep == 0)

  00186	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  00189	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0018e	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00194	80 7c 01 6a 00	 cmp	 BYTE PTR [ecx+eax+106], 0
  00199	75 17		 jne	 SHORT $LN5@ProcState_@4
  0019b	83 7e 48 00	 cmp	 DWORD PTR [esi+72], 0
  0019f	75 11		 jne	 SHORT $LN5@ProcState_@4

; 399  : 		{
; 400  : 			this->SetMapAttr(3);

  001a1	6a 03		 push	 3
  001a3	8b ce		 mov	 ecx, esi
  001a5	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 401  : 			this->m_BattleData.PhazeStep++;

  001aa	01 7e 48	 add	 DWORD PTR [esi+72], edi
  001ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN5@ProcState_@4:

; 402  : 		}
; 403  : 
; 404  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  001b2	83 7e 3c 00	 cmp	 DWORD PTR [esi+60], 0
  001b6	7f 39		 jg	 SHORT $LN4@ProcState_@4
  001b8	39 7e 48	 cmp	 DWORD PTR [esi+72], edi
  001bb	75 34		 jne	 SHORT $LN4@ProcState_@4

; 405  : 		{
; 406  : 			gObj[this->m_BattleData.GateIndex[4]].m_ImmuneToHarmCount = 0;

  001bd	8b 56 18	 mov	 edx, DWORD PTR [esi+24]
  001c0	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001c6	33 c9		 xor	 ecx, ecx
  001c8	66 89 8c 02 84
	22 00 00	 mov	 WORD PTR [edx+eax+8836], cx

; 407  : 			gObj[this->m_BattleData.GateIndex[4]].m_ImmuneToMagicCount = 0;

  001d0	8b 56 18	 mov	 edx, DWORD PTR [esi+24]
  001d3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001d9	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001df	33 c0		 xor	 eax, eax
  001e1	66 89 84 0a 82
	22 00 00	 mov	 WORD PTR [edx+ecx+8834], ax

; 408  : 			this->m_BattleData.PhazeStep++;

  001e9	01 7e 48	 add	 DWORD PTR [esi+72], edi
  001ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN4@ProcState_@4:

; 409  : 		}
; 410  : 		if(gObj[this->m_BattleData.GateIndex[4]].Live == false && this->m_BattleData.PhazeStep == 2)

  001f1	8b 56 18	 mov	 edx, DWORD PTR [esi+24]
  001f4	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001fa	80 7c 02 6a 00	 cmp	 BYTE PTR [edx+eax+106], 0
  001ff	75 43		 jne	 SHORT $LN3@ProcState_@4
  00201	83 7e 48 02	 cmp	 DWORD PTR [esi+72], 2
  00205	75 3d		 jne	 SHORT $LN3@ProcState_@4

; 411  : 		{
; 412  : 			gObj[this->m_BattleData.GateIndex[5]].m_ImmuneToHarmCount = 0;

  00207	8b 4e 1c	 mov	 ecx, DWORD PTR [esi+28]
  0020a	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00210	33 d2		 xor	 edx, edx
  00212	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 413  : 			gObj[this->m_BattleData.GateIndex[5]].m_ImmuneToMagicCount = 0;

  0021a	8b 46 1c	 mov	 eax, DWORD PTR [esi+28]
  0021d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00223	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00229	33 c9		 xor	 ecx, ecx
  0022b	66 89 8c 10 82
	22 00 00	 mov	 WORD PTR [eax+edx+8834], cx

; 414  : 			this->SetMapAttr(4);

  00233	6a 04		 push	 4
  00235	8b ce		 mov	 ecx, esi
  00237	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 415  : 			this->m_BattleData.PhazeStep++;

  0023c	01 7e 48	 add	 DWORD PTR [esi+72], edi
  0023f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN3@ProcState_@4:

; 416  : 		}
; 417  : 		if(gObj[this->m_BattleData.GateIndex[5]].Live == false && this->m_BattleData.PhazeStep == 3)

  00244	8b 4e 1c	 mov	 ecx, DWORD PTR [esi+28]
  00247	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0024d	80 7c 01 6a 00	 cmp	 BYTE PTR [ecx+eax+106], 0
  00252	75 16		 jne	 SHORT $LN2@ProcState_@4
  00254	83 7e 48 03	 cmp	 DWORD PTR [esi+72], 3
  00258	75 10		 jne	 SHORT $LN2@ProcState_@4

; 418  : 		{
; 419  : 			this->SetMapAttr(5);

  0025a	6a 05		 push	 5
  0025c	8b ce		 mov	 ecx, esi
  0025e	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 420  : 			this->PortalSetState = false;
; 421  : 			this->m_BattleData.PhazeStep++;

  00263	01 7e 48	 add	 DWORD PTR [esi+72], edi
  00266	c6 46 50 00	 mov	 BYTE PTR [esi+80], 0
$LN2@ProcState_@4:

; 422  : 		}
; 423  : 
; 424  : 		if(this->m_BattleData.Time <= 0)

  0026a	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  0026e	7f 0d		 jg	 SHORT $LN1@ProcState_@4

; 425  : 		{
; 426  : 			this->SetSuccessValue(false);
; 427  : 			this->SetState(BATTLEOFGAION_STATE_END);

  00270	6a 09		 push	 9
  00272	8b ce		 mov	 ecx, esi
  00274	c6 46 51 00	 mov	 BYTE PTR [esi+81], 0
  00278	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@4:

; 428  : 		}
; 429  : 	}
; 430  : }

  0027d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00280	5f		 pop	 edi
  00281	33 cd		 xor	 ecx, ebp
  00283	5e		 pop	 esi
  00284	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00289	8b e5		 mov	 esp, ebp
  0028b	5d		 pop	 ebp
  0028c	c3		 ret	 0
?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE2
_TEXT	ENDS
PUBLIC	?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY3
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY3, COMDAT
; _this$ = ecx

; 433  : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 434  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  00008	8b f1		 mov	 esi, ecx
  0000a	ff d7		 call	 edi
  0000c	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 435  : 	if(Tick >= 1000)

  0000f	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00014	7c 1e		 jl	 SHORT $LN1@ProcState_@5

; 436  : 	{
; 437  : 		this->m_BattleData.Time -= Tick;

  00016	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 438  : 		this->m_BattleData.TickCount = GetTickCount();

  00019	ff d7		 call	 edi

; 439  : 
; 440  : 		this->SendEventInterface();

  0001b	8b ce		 mov	 ecx, esi
  0001d	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00020	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 441  : 
; 442  : 		if(this->m_BattleData.Time <= 0)

  00025	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  00029	7f 09		 jg	 SHORT $LN1@ProcState_@5

; 443  : 		{
; 444  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE3);

  0002b	6a 06		 push	 6
  0002d	8b ce		 mov	 ecx, esi
  0002f	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@5:

; 445  : 		}
; 446  : 	}
; 447  : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	c3		 ret	 0
?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY3
_TEXT	ENDS
PUBLIC	??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE3
;	COMDAT ??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.h
CONST	SEGMENT
??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@ DB '%s is'
	DB	' dead, go to Gaion''s castle and kill him!', 00H ; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.cpp
CONST	ENDS
;	COMDAT ?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_n$204334 = -284					; size = 4
tv606 = -280						; size = 4
_pNotice$204344 = -276					; size = 272
_pNotice$204340 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE3, COMDAT
; _this$ = ecx

; 450  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 1c 01 00
	00		 sub	 esp, 284		; 0000011cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi

; 451  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00015	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  0001b	8b f1		 mov	 esi, ecx
  0001d	ff d7		 call	 edi
  0001f	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 452  : 	if(Tick >= 1000)

  00022	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00027	0f 8c 8c 02 00
	00		 jl	 $LN1@ProcState_@6

; 453  : 	{
; 454  : 		this->m_BattleData.Time -= Tick;

  0002d	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 455  : 		this->m_BattleData.TickCount = GetTickCount();

  00030	ff d7		 call	 edi

; 456  : 
; 457  : 		this->SendEventInterface();

  00032	8b ce		 mov	 ecx, esi
  00034	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00037	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 458  : 		this->MonsterProc();

  0003c	8b ce		 mov	 ecx, esi
  0003e	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc
  00043	c7 85 e8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv606[ebp], 0
  0004d	53		 push	 ebx
  0004e	8b ff		 npad	 2
$LL36@ProcState_@6:

; 461  : 		{
; 462  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  00055	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _n$204334[ebp], 0
  0005f	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00064	85 c0		 test	 eax, eax
  00066	0f 8e 9e 00 00
	00		 jle	 $LN12@ProcState_@6
  0006c	bf 08 00 00 00	 mov	 edi, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A+8
$LL33@ProcState_@6:

; 463  : 			{
; 464  : 
; 465  : 				if(gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X >= g_GaionTrap[i].X-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].X <= g_GaionTrap[i].X+5
; 466  : 					&& gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y >= g_GaionTrap[i].Y-5 && gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()].Y <= g_GaionTrap[i].Y+5)

  00071	8b 07		 mov	 eax, DWORD PTR [edi]
  00073	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv606[ebp]
  00079	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0007f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00085	8b 92 00 00 00
	00		 mov	 edx, DWORD PTR _g_GaionTrap[edx]
  0008b	0f bf 88 44 01
	00 00		 movsx	 ecx, WORD PTR [eax+324]
  00092	8d 5a fb	 lea	 ebx, DWORD PTR [edx-5]
  00095	3b cb		 cmp	 ecx, ebx
  00097	7c 4f		 jl	 SHORT $LN9@ProcState_@6
  00099	83 c2 05	 add	 edx, 5
  0009c	3b ca		 cmp	 ecx, edx
  0009e	7f 48		 jg	 SHORT $LN9@ProcState_@6
  000a0	8b 95 e8 fe ff
	ff		 mov	 edx, DWORD PTR tv606[ebp]
  000a6	0f bf 88 46 01
	00 00		 movsx	 ecx, WORD PTR [eax+326]
  000ad	8b 92 04 00 00
	00		 mov	 edx, DWORD PTR _g_GaionTrap[edx+4]
  000b3	8d 5a fb	 lea	 ebx, DWORD PTR [edx-5]
  000b6	3b cb		 cmp	 ecx, ebx
  000b8	7c 2e		 jl	 SHORT $LN9@ProcState_@6
  000ba	83 c2 05	 add	 edx, 5
  000bd	3b ca		 cmp	 ecx, edx
  000bf	7f 27		 jg	 SHORT $LN9@ProcState_@6

; 467  : 				{
; 468  : 					gObjAttack(&gObj[this->m_BattleData.TrapIndex], &gObj[g_ImperialBattleUserMng.m_BattleUser[n].GetIndex()], NULL, 0, 0, 0, 0,0,0);

  000c1	6a 00		 push	 0
  000c3	6a 00		 push	 0
  000c5	6a 00		 push	 0
  000c7	6a 00		 push	 0
  000c9	6a 00		 push	 0
  000cb	6a 00		 push	 0
  000cd	6a 00		 push	 0
  000cf	50		 push	 eax
  000d0	8b 46 44	 mov	 eax, DWORD PTR [esi+68]
  000d3	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000d9	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000df	50		 push	 eax
  000e0	e8 00 00 00 00	 call	 ?gObjAttack@@YAHPAUOBJECTSTRUCT@@0PAVCMagicInf@@HEHHEE@Z ; gObjAttack
  000e5	83 c4 24	 add	 esp, 36			; 00000024H
$LN9@ProcState_@6:

; 461  : 		{
; 462  : 			for(int n=0;n<g_ImperialBattleUserMng.GetUserCount();++n)

  000e8	8b 9d e4 fe ff
	ff		 mov	 ebx, DWORD PTR _n$204334[ebp]
  000ee	43		 inc	 ebx
  000ef	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ImperialBattleUserMng@@3VCImperialBattleUserMng@@A ; g_ImperialBattleUserMng
  000f4	89 9d e4 fe ff
	ff		 mov	 DWORD PTR _n$204334[ebp], ebx
  000fa	83 c7 0c	 add	 edi, 12			; 0000000cH
  000fd	e8 00 00 00 00	 call	 ?GetUserCount@CImperialBattleUserMng@@QAEHXZ ; CImperialBattleUserMng::GetUserCount
  00102	3b d8		 cmp	 ebx, eax
  00104	0f 8c 67 ff ff
	ff		 jl	 $LL33@ProcState_@6
$LN12@ProcState_@6:

; 459  : 
; 460  : 		for(int i=0;i<26;++i)

  0010a	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR tv606[ebp]
  00110	83 c0 08	 add	 eax, 8
  00113	89 85 e8 fe ff
	ff		 mov	 DWORD PTR tv606[ebp], eax
  00119	3d d0 00 00 00	 cmp	 eax, 208		; 000000d0H
  0011e	0f 8c 2c ff ff
	ff		 jl	 $LL36@ProcState_@6

; 469  : 				}
; 470  : 			}
; 471  : 		}
; 472  : 
; 473  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00124	8b 4e 30	 mov	 ecx, DWORD PTR [esi+48]
  00127	5b		 pop	 ebx
  00128	85 c9		 test	 ecx, ecx
  0012a	7e 55		 jle	 SHORT $LN35@ProcState_@6
  0012c	b8 73 b2 e7 45	 mov	 eax, 1172812403		; 45e7b273H
  00131	f7 e9		 imul	 ecx
  00133	0f b6 4e 4c	 movzx	 ecx, BYTE PTR [esi+76]
  00137	c1 fa 0e	 sar	 edx, 14			; 0000000eH
  0013a	8b c2		 mov	 eax, edx
  0013c	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0013f	03 c2		 add	 eax, edx
  00141	3b c1		 cmp	 eax, ecx
  00143	74 3c		 je	 SHORT $LN35@ProcState_@6

; 474  : 		{
; 475  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;
; 476  : 			PMSG_NOTICE pNotice;
; 477  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "Portal will be closed after %d minutes", this->m_BattleData.NotifyCount+1);

  00145	0f b6 d0	 movzx	 edx, al
  00148	bf 01 00 00 00	 mov	 edi, 1
  0014d	03 d7		 add	 edx, edi
  0014f	52		 push	 edx
  00150	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LFMFLPDA@Portal?5will?5be?5closed?5after?5?$CFd?5m@
  00155	88 46 4c	 mov	 BYTE PTR [esi+76], al
  00158	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$204340[ebp]
  0015e	6a 00		 push	 0
  00160	50		 push	 eax
  00161	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx

; 478  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00166	0f b6 8d ed fe
	ff ff		 movzx	 ecx, BYTE PTR _pNotice$204340[ebp+1]
  0016d	83 c4 10	 add	 esp, 16			; 00000010H
  00170	51		 push	 ecx
  00171	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$204340[ebp]
  00177	52		 push	 edx
  00178	8b ce		 mov	 ecx, esi
  0017a	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
  0017f	eb 05		 jmp	 SHORT $LN6@ProcState_@6
$LN35@ProcState_@6:
  00181	bf 01 00 00 00	 mov	 edi, 1
$LN6@ProcState_@6:

; 479  : 		}
; 480  : 
; 481  : 		if(gObj[this->m_BattleData.GateIndex[6]].Live == false && this->m_BattleData.PhazeStep == 0)

  00186	8b 4e 20	 mov	 ecx, DWORD PTR [esi+32]
  00189	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0018e	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00194	80 7c 01 6a 00	 cmp	 BYTE PTR [ecx+eax+106], 0
  00199	75 17		 jne	 SHORT $LN5@ProcState_@6
  0019b	83 7e 48 00	 cmp	 DWORD PTR [esi+72], 0
  0019f	75 11		 jne	 SHORT $LN5@ProcState_@6

; 482  : 		{
; 483  : 			this->SetMapAttr(6);

  001a1	6a 06		 push	 6
  001a3	8b ce		 mov	 ecx, esi
  001a5	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 484  : 			this->m_BattleData.PhazeStep++;

  001aa	01 7e 48	 add	 DWORD PTR [esi+72], edi
  001ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN5@ProcState_@6:

; 485  : 		}
; 486  : 
; 487  : 		if(this->m_BattleData.MonsterCount <= 0 && this->m_BattleData.PhazeStep == 1)

  001b2	83 7e 3c 00	 cmp	 DWORD PTR [esi+60], 0
  001b6	7f 75		 jg	 SHORT $LN4@ProcState_@6
  001b8	39 7e 48	 cmp	 DWORD PTR [esi+72], edi
  001bb	75 70		 jne	 SHORT $LN4@ProcState_@6

; 488  : 		{
; 489  : 			PMSG_NOTICE pNotice;
; 490  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "%s is dead, go to Gaion's castle and kill him!", gObj[this->m_BattleData.CurrentLeaderIndex].Name);

  001bd	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  001c0	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  001c6	8d 44 02 77	 lea	 eax, DWORD PTR [edx+eax+119]
  001ca	50		 push	 eax
  001cb	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@OOPKMNCK@?$CFs?5is?5dead?0?5go?5to?5Gaion?8s?5castle@
  001d0	8d 8d ec fe ff
	ff		 lea	 ecx, DWORD PTR _pNotice$204344[ebp]
  001d6	6a 00		 push	 0
  001d8	51		 push	 ecx
  001d9	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx

; 491  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  001de	0f b6 95 ed fe
	ff ff		 movzx	 edx, BYTE PTR _pNotice$204344[ebp+1]
  001e5	83 c4 10	 add	 esp, 16			; 00000010H
  001e8	52		 push	 edx
  001e9	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$204344[ebp]
  001ef	50		 push	 eax
  001f0	8b ce		 mov	 ecx, esi
  001f2	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers

; 492  : 			gObj[this->m_BattleData.GateIndex[7]].m_ImmuneToHarmCount = 0;

  001f7	8b 4e 24	 mov	 ecx, DWORD PTR [esi+36]
  001fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001ff	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00205	33 d2		 xor	 edx, edx
  00207	66 89 94 01 84
	22 00 00	 mov	 WORD PTR [ecx+eax+8836], dx

; 493  : 			gObj[this->m_BattleData.GateIndex[7]].m_ImmuneToMagicCount = 0;

  0020f	8b 4e 24	 mov	 ecx, DWORD PTR [esi+36]
  00212	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00217	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0021d	66 89 94 01 82
	22 00 00	 mov	 WORD PTR [ecx+eax+8834], dx

; 494  : 			this->m_BattleData.PhazeStep++;

  00225	01 7e 48	 add	 DWORD PTR [esi+72], edi
  00228	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN4@ProcState_@6:

; 495  : 		}
; 496  : 		if(gObj[this->m_BattleData.GateIndex[7]].Live == false && this->m_BattleData.PhazeStep == 2)

  0022d	8b 4e 24	 mov	 ecx, DWORD PTR [esi+36]
  00230	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00236	80 7c 01 6a 00	 cmp	 BYTE PTR [ecx+eax+106], 0
  0023b	75 43		 jne	 SHORT $LN3@ProcState_@6
  0023d	83 7e 48 02	 cmp	 DWORD PTR [esi+72], 2
  00241	75 3d		 jne	 SHORT $LN3@ProcState_@6

; 497  : 		{
; 498  : 			gObj[this->m_BattleData.GateIndex[8]].m_ImmuneToHarmCount = 0;

  00243	8b 56 28	 mov	 edx, DWORD PTR [esi+40]
  00246	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  0024c	33 c9		 xor	 ecx, ecx
  0024e	66 89 8c 02 84
	22 00 00	 mov	 WORD PTR [edx+eax+8836], cx

; 499  : 			gObj[this->m_BattleData.GateIndex[8]].m_ImmuneToMagicCount = 0;

  00256	8b 56 28	 mov	 edx, DWORD PTR [esi+40]
  00259	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0025f	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00265	33 c0		 xor	 eax, eax
  00267	66 89 84 0a 82
	22 00 00	 mov	 WORD PTR [edx+ecx+8834], ax

; 500  : 			this->SetMapAttr(7);

  0026f	6a 07		 push	 7
  00271	8b ce		 mov	 ecx, esi
  00273	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 501  : 			this->m_BattleData.PhazeStep++;

  00278	01 7e 48	 add	 DWORD PTR [esi+72], edi
  0027b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN3@ProcState_@6:

; 502  : 		}
; 503  : 		if(gObj[this->m_BattleData.GateIndex[8]].Live == false && this->m_BattleData.PhazeStep == 3)

  00280	8b 56 28	 mov	 edx, DWORD PTR [esi+40]
  00283	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00289	80 7c 02 6a 00	 cmp	 BYTE PTR [edx+eax+106], 0
  0028e	75 16		 jne	 SHORT $LN2@ProcState_@6
  00290	83 7e 48 03	 cmp	 DWORD PTR [esi+72], 3
  00294	75 10		 jne	 SHORT $LN2@ProcState_@6

; 504  : 		{
; 505  : 			this->SetMapAttr(8);

  00296	6a 08		 push	 8
  00298	8b ce		 mov	 ecx, esi
  0029a	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 506  : 			this->PortalSetState = false;
; 507  : 			this->m_BattleData.PhazeStep++;

  0029f	01 7e 48	 add	 DWORD PTR [esi+72], edi
  002a2	c6 46 50 00	 mov	 BYTE PTR [esi+80], 0
$LN2@ProcState_@6:

; 508  : 		}
; 509  : 
; 510  : 		if(this->m_BattleData.Time <= 0)

  002a6	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  002aa	7f 0d		 jg	 SHORT $LN1@ProcState_@6

; 511  : 		{
; 512  : 			this->SetSuccessValue(false);
; 513  : 			this->SetState(BATTLEOFGAION_STATE_END);

  002ac	6a 09		 push	 9
  002ae	8b ce		 mov	 ecx, esi
  002b0	c6 46 51 00	 mov	 BYTE PTR [esi+81], 0
  002b4	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@6:

; 514  : 		}
; 515  : 	}
; 516  : }

  002b9	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002bc	5f		 pop	 edi
  002bd	33 cd		 xor	 ecx, ebp
  002bf	5e		 pop	 esi
  002c0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002c5	8b e5		 mov	 esp, ebp
  002c7	5d		 pop	 ebp
  002c8	c3		 ret	 0
?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE3
_TEXT	ENDS
PUBLIC	?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY4
; Function compile flags: /Ogtp
;	COMDAT ?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_STANDBY4, COMDAT
; _this$ = ecx

; 519  : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 520  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  00008	8b f1		 mov	 esi, ecx
  0000a	ff d7		 call	 edi
  0000c	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 521  : 	if(Tick >= 1000)

  0000f	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00014	7c 1e		 jl	 SHORT $LN1@ProcState_@7

; 522  : 	{
; 523  : 		this->m_BattleData.Time -= Tick;

  00016	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 524  : 		this->m_BattleData.TickCount = GetTickCount();

  00019	ff d7		 call	 edi

; 525  : 
; 526  : 		this->SendEventInterface();

  0001b	8b ce		 mov	 ecx, esi
  0001d	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00020	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 527  : 
; 528  : 		if(this->m_BattleData.Time <= 0)

  00025	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  00029	7f 09		 jg	 SHORT $LN1@ProcState_@7

; 529  : 		{
; 530  : 			this->SetState(BATTLEOFGAION_STATE_PHAZE4);

  0002b	6a 08		 push	 8
  0002d	8b ce		 mov	 ecx, esi
  0002f	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@7:

; 531  : 		}
; 532  : 	}
; 533  : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	c3		 ret	 0
?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_STANDBY4
_TEXT	ENDS
PUBLIC	??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE4
;	COMDAT ??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.h
CONST	SEGMENT
??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@ DB '%s'
	DB	' will escape after %d minutes!', 00H	; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\imperialbattleofgaion.cpp
CONST	ENDS
;	COMDAT ?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
_pNotice$204362 = -276					; size = 272
__$ArrayPad$ = -4					; size = 4
?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::ProcState_PHAZE4, COMDAT
; _this$ = ecx

; 536  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 01 00
	00		 sub	 esp, 276		; 00000114H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi

; 537  : 	int Tick = GetTickCount() - this->m_BattleData.TickCount;

  00015	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetTickCount@0
  0001b	8b f1		 mov	 esi, ecx
  0001d	ff d7		 call	 edi
  0001f	2b 46 34	 sub	 eax, DWORD PTR [esi+52]

; 538  : 	if(Tick >= 1000)

  00022	3d e8 03 00 00	 cmp	 eax, 1000		; 000003e8H
  00027	0f 8c f1 00 00
	00		 jl	 $LN1@ProcState_@8

; 539  : 	{
; 540  : 		this->m_BattleData.Time -= Tick;

  0002d	29 46 30	 sub	 DWORD PTR [esi+48], eax

; 541  : 		this->m_BattleData.TickCount = GetTickCount();

  00030	ff d7		 call	 edi

; 542  : 
; 543  : 		this->SendEventInterface();

  00032	8b ce		 mov	 ecx, esi
  00034	89 46 34	 mov	 DWORD PTR [esi+52], eax
  00037	e8 00 00 00 00	 call	 ?SendEventInterface@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SendEventInterface

; 544  : 		this->MonsterProc();

  0003c	8b ce		 mov	 ecx, esi
  0003e	e8 00 00 00 00	 call	 ?MonsterProc@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::MonsterProc

; 545  : 
; 546  : 		if(this->m_BattleData.Time > 0 && (this->m_BattleData.Time/60000) !=this->m_BattleData.NotifyCount)

  00043	8b 4e 30	 mov	 ecx, DWORD PTR [esi+48]
  00046	85 c9		 test	 ecx, ecx
  00048	7e 61		 jle	 SHORT $LN4@ProcState_@8
  0004a	b8 73 b2 e7 45	 mov	 eax, 1172812403		; 45e7b273H
  0004f	f7 e9		 imul	 ecx
  00051	0f b6 4e 4c	 movzx	 ecx, BYTE PTR [esi+76]
  00055	c1 fa 0e	 sar	 edx, 14			; 0000000eH
  00058	8b c2		 mov	 eax, edx
  0005a	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0005d	03 c2		 add	 eax, edx
  0005f	3b c1		 cmp	 eax, ecx
  00061	74 48		 je	 SHORT $LN4@ProcState_@8

; 547  : 		{
; 548  : 			this->m_BattleData.NotifyCount = this->m_BattleData.Time / 60000;

  00063	88 46 4c	 mov	 BYTE PTR [esi+76], al

; 549  : 			PMSG_NOTICE pNotice;
; 550  : 			TNotice::MakeNoticeMsgEx(&pNotice, 0, "%s will escape after %d minutes!", gObj[this->m_BattleData.CurrentLeaderIndex].Name, this->m_BattleData.NotifyCount+1);

  00066	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0006c	0f b6 d0	 movzx	 edx, al
  0006f	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  00072	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00078	42		 inc	 edx
  00079	52		 push	 edx
  0007a	8d 54 08 77	 lea	 edx, DWORD PTR [eax+ecx+119]
  0007e	52		 push	 edx
  0007f	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@CCDBDGNC@?$CFs?5will?5escape?5after?5?$CFd?5minutes?$CB@
  00084	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _pNotice$204362[ebp]
  0008a	6a 00		 push	 0
  0008c	50		 push	 eax
  0008d	e8 00 00 00 00	 call	 ?MakeNoticeMsgEx@TNotice@@SAXPAXEPADZZ ; TNotice::MakeNoticeMsgEx

; 551  : 			this->SendImperialPlayers((LPBYTE)&pNotice, pNotice.h.size);

  00092	0f b6 8d ed fe
	ff ff		 movzx	 ecx, BYTE PTR _pNotice$204362[ebp+1]
  00099	83 c4 14	 add	 esp, 20			; 00000014H
  0009c	51		 push	 ecx
  0009d	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _pNotice$204362[ebp]
  000a3	52		 push	 edx
  000a4	8b ce		 mov	 ecx, esi
  000a6	e8 00 00 00 00	 call	 ?SendImperialPlayers@CImperialBattleOfGaion@@QAEXPAEH@Z ; CImperialBattleOfGaion::SendImperialPlayers
$LN4@ProcState_@8:

; 552  : 		}
; 553  : 
; 554  : 		if(gObj[this->m_BattleData.GateIndex[9]].Live == false && this->m_BattleData.PhazeStep == 0)

  000ab	8b 46 2c	 mov	 eax, DWORD PTR [esi+44]
  000ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000b4	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  000ba	80 7c 08 6a 00	 cmp	 BYTE PTR [eax+ecx+106], 0
  000bf	75 12		 jne	 SHORT $LN3@ProcState_@8
  000c1	83 7e 48 00	 cmp	 DWORD PTR [esi+72], 0
  000c5	75 0c		 jne	 SHORT $LN3@ProcState_@8

; 555  : 		{
; 556  : 			this->SetMapAttr(9);

  000c7	6a 09		 push	 9
  000c9	8b ce		 mov	 ecx, esi
  000cb	e8 00 00 00 00	 call	 ?SetMapAttr@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetMapAttr

; 557  : 			this->m_BattleData.PhazeStep++;

  000d0	ff 46 48	 inc	 DWORD PTR [esi+72]
$LN3@ProcState_@8:

; 558  : 		}
; 559  : 
; 560  : 		if(gObj[this->m_BattleData.CurrentLeaderIndex].Live == false)

  000d3	8b 56 04	 mov	 edx, DWORD PTR [esi+4]
  000d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000db	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  000e1	80 7c 02 6a 00	 cmp	 BYTE PTR [edx+eax+106], 0
  000e6	75 0d		 jne	 SHORT $LN2@ProcState_@8

; 561  : 		{
; 562  : 			this->SetSuccessValue(true);
; 563  : 			this->SetState(BATTLEOFGAION_STATE_END);

  000e8	6a 09		 push	 9
  000ea	8b ce		 mov	 ecx, esi
  000ec	c6 46 51 01	 mov	 BYTE PTR [esi+81], 1
  000f0	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN2@ProcState_@8:

; 564  : 		}
; 565  : 		if(this->m_BattleData.Time <= 0 && gObj[this->m_BattleData.CurrentLeaderIndex].Live == true)

  000f5	83 7e 30 00	 cmp	 DWORD PTR [esi+48], 0
  000f9	7f 23		 jg	 SHORT $LN1@ProcState_@8
  000fb	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  000fe	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00104	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  0010a	80 7c 11 6a 01	 cmp	 BYTE PTR [ecx+edx+106], 1
  0010f	75 0d		 jne	 SHORT $LN1@ProcState_@8

; 566  : 		{
; 567  : 			this->SetSuccessValue(false);
; 568  : 			this->SetState(BATTLEOFGAION_STATE_END);

  00111	6a 09		 push	 9
  00113	8b ce		 mov	 ecx, esi
  00115	c6 46 51 00	 mov	 BYTE PTR [esi+81], 0
  00119	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState
$LN1@ProcState_@8:

; 569  : 		}
; 570  : 	}
; 571  : }

  0011e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00121	5f		 pop	 edi
  00122	33 cd		 xor	 ecx, ebp
  00124	5e		 pop	 esi
  00125	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0012a	8b e5		 mov	 esp, ebp
  0012c	5d		 pop	 ebp
  0012d	c3		 ret	 0
?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::ProcState_PHAZE4
_TEXT	ENDS
PUBLIC	?SetNextState@CImperialBattleOfGaion@@QAEXXZ	; CImperialBattleOfGaion::SetNextState
; Function compile flags: /Ogtp
;	COMDAT ?SetNextState@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?SetNextState@CImperialBattleOfGaion@@QAEXXZ PROC	; CImperialBattleOfGaion::SetNextState, COMDAT
; _this$ = ecx

; 682  : 	int iNextState = this->m_BattleData.CurrentState + 1;

  00000	8b 41 38	 mov	 eax, DWORD PTR [ecx+56]
  00003	40		 inc	 eax

; 683  : 
; 684  : 	if ( iNextState >= BATTLEOFGAION_STATE_END )

  00004	83 f8 09	 cmp	 eax, 9
  00007	7c 02		 jl	 SHORT $LN1@SetNextSta

; 685  : 	{
; 686  : 		iNextState = BATTLEOFGAION_STATE_NONE;

  00009	33 c0		 xor	 eax, eax
$LN1@SetNextSta:

; 687  : 	}
; 688  : 
; 689  : 	this->SetState(iNextState);

  0000b	50		 push	 eax
  0000c	e8 00 00 00 00	 call	 ?SetState@CImperialBattleOfGaion@@QAEXH@Z ; CImperialBattleOfGaion::SetState

; 690  : }

  00011	c3		 ret	 0
?SetNextState@CImperialBattleOfGaion@@QAEXXZ ENDP	; CImperialBattleOfGaion::SetNextState
_TEXT	ENDS
PUBLIC	?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z ; CImperialBattleOfGaion::EnterPortal
; Function compile flags: /Ogtp
;	COMDAT ?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z PROC ; CImperialBattleOfGaion::EnterPortal, COMDAT
; _this$ = ecx

; 693  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 694  : 	if(this->m_BattleData.MonsterCount > 0)

  00003	83 7e 3c 00	 cmp	 DWORD PTR [esi+60], 0
  00007	7e 06		 jle	 SHORT $LN2@EnterPorta

; 695  : 		return false;

  00009	32 c0		 xor	 al, al
  0000b	5e		 pop	 esi

; 707  : }

  0000c	c2 04 00	 ret	 4
$LN2@EnterPorta:

; 696  : 	
; 697  : 	//if(this->m_BattleData.PhazeStep != 4)	//DeBug
; 698  : 	//	return false;
; 699  : 
; 700  : 	if(!this->PortalSetState)

  0000f	80 7e 50 00	 cmp	 BYTE PTR [esi+80], 0
  00013	75 09		 jne	 SHORT $LN1@EnterPorta

; 701  : 	{
; 702  : 		this->SetNextState();

  00015	e8 00 00 00 00	 call	 ?SetNextState@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::SetNextState

; 703  : 		this->PortalSetState = true;

  0001a	c6 46 50 01	 mov	 BYTE PTR [esi+80], 1
$LN1@EnterPorta:

; 704  : 	}
; 705  : 
; 706  : 	return true;

  0001e	b0 01		 mov	 al, 1
  00020	5e		 pop	 esi

; 707  : }

  00021	c2 04 00	 ret	 4
?EnterPortal@CImperialBattleOfGaion@@QAE_NPAUOBJECTSTRUCT@@@Z ENDP ; CImperialBattleOfGaion::EnterPortal
_TEXT	ENDS
PUBLIC	?Run@CImperialBattleOfGaion@@QAEXXZ		; CImperialBattleOfGaion::Run
; Function compile flags: /Ogtp
;	COMDAT ?Run@CImperialBattleOfGaion@@QAEXXZ
_TEXT	SEGMENT
?Run@CImperialBattleOfGaion@@QAEXXZ PROC		; CImperialBattleOfGaion::Run, COMDAT
; _this$ = ecx

; 232  : 	switch ( this->m_BattleData.CurrentState )

  00000	8b 41 38	 mov	 eax, DWORD PTR [ecx+56]
  00003	83 f8 09	 cmp	 eax, 9
  00006	77 2f		 ja	 SHORT $LN1@Run
  00008	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN16@Run[eax*4]
$LN9@Run:

; 233  : 	{
; 234  : 		case 0:
; 235  : 			return;
; 236  : 		case 1:
; 237  : 			this->ProcState_STANDBY1();

  0000f	e9 00 00 00 00	 jmp	 ?ProcState_STANDBY1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY1
$LN8@Run:

; 238  : 			break;
; 239  : 		case 2:
; 240  : 			this->ProcState_PHAZE1();

  00014	e9 00 00 00 00	 jmp	 ?ProcState_PHAZE1@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE1
$LN7@Run:

; 241  : 			break;
; 242  : 		case 3:
; 243  : 			this->ProcState_STANDBY2();

  00019	e9 00 00 00 00	 jmp	 ?ProcState_STANDBY2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY2
$LN6@Run:

; 244  : 			break;
; 245  : 		case 4:
; 246  : 			this->ProcState_PHAZE2();

  0001e	e9 00 00 00 00	 jmp	 ?ProcState_PHAZE2@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE2
$LN5@Run:

; 247  : 			break;
; 248  : 		case 5:
; 249  : 			this->ProcState_STANDBY3();

  00023	e9 00 00 00 00	 jmp	 ?ProcState_STANDBY3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY3
$LN4@Run:

; 250  : 			break;
; 251  : 		case 6:
; 252  : 			this->ProcState_PHAZE3();

  00028	e9 00 00 00 00	 jmp	 ?ProcState_PHAZE3@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE3
$LN3@Run:

; 253  : 			break;
; 254  : 		case 7:
; 255  : 			this->ProcState_STANDBY4();

  0002d	e9 00 00 00 00	 jmp	 ?ProcState_STANDBY4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_STANDBY4
$LN2@Run:

; 256  : 			break;
; 257  : 		case 8:
; 258  : 			this->ProcState_PHAZE4();

  00032	e9 00 00 00 00	 jmp	 ?ProcState_PHAZE4@CImperialBattleOfGaion@@QAEXXZ ; CImperialBattleOfGaion::ProcState_PHAZE4
$LN1@Run:

; 259  : 			break;
; 260  : 		case 9:
; 261  : 			this->ProcState_END();
; 262  : 			break;
; 263  : 	}
; 264  : }

  00037	c3		 ret	 0
$LN16@Run:
  00038	00 00 00 00	 DD	 $LN1@Run
  0003c	00 00 00 00	 DD	 $LN9@Run
  00040	00 00 00 00	 DD	 $LN8@Run
  00044	00 00 00 00	 DD	 $LN7@Run
  00048	00 00 00 00	 DD	 $LN6@Run
  0004c	00 00 00 00	 DD	 $LN5@Run
  00050	00 00 00 00	 DD	 $LN4@Run
  00054	00 00 00 00	 DD	 $LN3@Run
  00058	00 00 00 00	 DD	 $LN2@Run
  0005c	00 00 00 00	 DD	 $LN1@Run
?Run@CImperialBattleOfGaion@@QAEXXZ ENDP		; CImperialBattleOfGaion::Run
_TEXT	ENDS
END
