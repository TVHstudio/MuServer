; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\KalimaGate.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_g_sttKALIMAGATE_LEVEL DD 028H
	DD	082H
	DD	014H
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	015dH
	DD	0137H
	DD	015dH
	DD	015eH
	DD	03e8H
	DD	015eH
	DD	03e8H
_g_iKalimaGateGateIndex DD 058H
	DD	059H
	DD	05aH
	DD	05bH
	DD	05cH
	DD	05dH
	DD	074H
_g_iChaosCastle_EnterCost DD 061a8H
	DD	013880H
	DD	0249f0H
	DD	03d090H
	DD	061a80H
	DD	09eb10H
	DD	0f4240H
_g_sttDEVILSQUARE_LEVEL DD 0fH
	DD	082H
	DD	0aH
	DD	06eH
	DD	03aH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	03bH
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	03cH
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	03dH
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	06fH
	DD	014bH
	DD	03e8H
	DD	0137H
	DD	03e8H
	DD	070H
	DD	0fH
	DD	04afH
	DD	0aH
	DD	04afH
	DD	010eH
_g_iChaosCastle_GuardSetValue DD 09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
	DD	09c4H
_g_sttBLOODCASTLE_LEVEL DD 0fH
	DD	050H
	DD	0aH
	DD	03cH
	DD	051H
	DD	082H
	DD	03dH
	DD	06eH
	DD	083H
	DD	0b4H
	DD	06fH
	DD	0a0H
	DD	0b5H
	DD	0e6H
	DD	0a1H
	DD	0d2H
	DD	0e7H
	DD	0118H
	DD	0d3H
	DD	0104H
	DD	0119H
	DD	014aH
	DD	0105H
	DD	0136H
	DD	014bH
	DD	03e8H
	DD	0137H
	DD	03e8H
	DD	0fH
	DD	04afH
	DD	0aH
	DD	04afH
_g_sttCHAOSCASTLE_LEVEL DD 0fH
	DD	031H
	DD	0fH
	DD	01dH
	DD	032H
	DD	077H
	DD	01eH
	DD	063H
	DD	078H
	DD	0b3H
	DD	064H
	DD	09fH
	DD	0b4H
	DD	0efH
	DD	0a0H
	DD	0dbH
	DD	0f0H
	DD	012bH
	DD	0dcH
	DD	0117H
	DD	012cH
	DD	03e8H
	DD	0118H
	DD	03e8H
	DD	03e8H
	DD	04afH
	DD	03e8H
	DD	04afH
_g_iChaosCastle_BlowOutDistance DD 03H
	DD	04H
	DD	03H
	DD	04H
	DD	02H
	DD	03H
	DD	00H
	DD	01H
_g_iChaosCastle_BlowOutDamage DD 0fH
	DD	0fH
	DD	0aH
	DD	05H
_g_iChaosCastle_MonsterItems DD 01c0dH
	DD	01H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	03H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	04H
_g_iChaosCastle_MonsterItemsNewServer DD 00H
	DD	00H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	01H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	01H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	01H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	02H
	DD	01c0dH
	DD	02H
	DD	01c0eH
	DD	03H
_g_iChaosCastle_GroundAxis DD 017H
	DD	04bH
	DD	02cH
	DD	06cH
_g_iChaosCastle_DamageAxis DD 017H
	DD	04bH
	DD	02cH
	DD	06cH
	DD	019H
	DD	04dH
	DD	02aH
	DD	06aH
	DD	01bH
	DD	04fH
	DD	028H
	DD	068H
	DD	01dH
	DD	051H
	DD	026H
	DD	066H
_g_iChaosCastle_MapHollowZone DD 017H
	DD	04bH
	DD	02cH
	DD	04cH
	DD	02bH
	DD	04dH
	DD	02cH
	DD	06cH
	DD	017H
	DD	06bH
	DD	02aH
	DD	06cH
	DD	017H
	DD	04dH
	DD	018H
	DD	06aH
	DD	017H
	DD	04bH
	DD	02cH
	DD	04cH
	DD	02bH
	DD	04dH
	DD	02cH
	DD	06cH
	DD	017H
	DD	06bH
	DD	02aH
	DD	06cH
	DD	017H
	DD	04dH
	DD	018H
	DD	06aH
	DD	019H
	DD	04dH
	DD	02aH
	DD	04eH
	DD	029H
	DD	04fH
	DD	02aH
	DD	06aH
	DD	019H
	DD	069H
	DD	028H
	DD	06aH
	DD	019H
	DD	04fH
	DD	01aH
	DD	068H
	DD	01bH
	DD	04fH
	DD	028H
	DD	050H
	DD	027H
	DD	051H
	DD	028H
	DD	068H
	DD	01bH
	DD	067H
	DD	026H
	DD	068H
	DD	01bH
	DD	051H
	DD	01cH
	DD	066H
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_7CKalimaGate@@6B@				; CKalimaGate::`vftable'
PUBLIC	??0CKalimaGate@@QAE@XZ				; CKalimaGate::CKalimaGate
PUBLIC	??_R4CKalimaGate@@6B@				; CKalimaGate::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCKalimaGate@@@8				; CKalimaGate `RTTI Type Descriptor'
PUBLIC	??_R3CKalimaGate@@8				; CKalimaGate::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CKalimaGate@@8				; CKalimaGate::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CKalimaGate@@8			; CKalimaGate::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	__imp__InitializeCriticalSection@4:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECKalimaGate@@UAEPAXI@Z:PROC			; CKalimaGate::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CKalimaGate@@8
; File e:\work\tranet_version\gs\gameserver\kalimagate.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CKalimaGate@@8 DD FLAT:??_R0?AVCKalimaGate@@@8 ; CKalimaGate::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CKalimaGate@@8
rdata$r	ENDS
;	COMDAT ??_R2CKalimaGate@@8
rdata$r	SEGMENT
??_R2CKalimaGate@@8 DD FLAT:??_R1A@?0A@EA@CKalimaGate@@8 ; CKalimaGate::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CKalimaGate@@8
rdata$r	SEGMENT
??_R3CKalimaGate@@8 DD 00H				; CKalimaGate::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CKalimaGate@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCKalimaGate@@@8
_DATA	SEGMENT
??_R0?AVCKalimaGate@@@8 DD FLAT:??_7type_info@@6B@	; CKalimaGate `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCKalimaGate@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CKalimaGate@@6B@
rdata$r	SEGMENT
??_R4CKalimaGate@@6B@ DD 00H				; CKalimaGate::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCKalimaGate@@@8
	DD	FLAT:??_R3CKalimaGate@@8
rdata$r	ENDS
;	COMDAT ??_7CKalimaGate@@6B@
CONST	SEGMENT
??_7CKalimaGate@@6B@ DD FLAT:??_R4CKalimaGate@@6B@	; CKalimaGate::`vftable'
	DD	FLAT:??_ECKalimaGate@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??0CKalimaGate@@QAE@XZ
_TEXT	SEGMENT
??0CKalimaGate@@QAE@XZ PROC				; CKalimaGate::CKalimaGate, COMDAT
; _this$ = ecx

; 16   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 17   : 	InitializeCriticalSection(&this->m_critKalimaGate );

  00003	8d 46 04	 lea	 eax, DWORD PTR [esi+4]
  00006	50		 push	 eax
  00007	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7CKalimaGate@@6B@
  0000d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__InitializeCriticalSection@4

; 18   : }

  00013	8b c6		 mov	 eax, esi
  00015	5e		 pop	 esi
  00016	c3		 ret	 0
??0CKalimaGate@@QAE@XZ ENDP				; CKalimaGate::CKalimaGate
_TEXT	ENDS
PUBLIC	??1CKalimaGate@@UAE@XZ				; CKalimaGate::~CKalimaGate
EXTRN	__imp__DeleteCriticalSection@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ??1CKalimaGate@@UAE@XZ
_TEXT	SEGMENT
??1CKalimaGate@@UAE@XZ PROC				; CKalimaGate::~CKalimaGate, COMDAT
; _this$ = ecx

; 21   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CKalimaGate@@6B@

; 22   : 	DeleteCriticalSection(&this->m_critKalimaGate );

  00006	83 c1 04	 add	 ecx, 4
  00009	51		 push	 ecx
  0000a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__DeleteCriticalSection@4

; 23   : }

  00010	c3		 ret	 0
??1CKalimaGate@@UAE@XZ ENDP				; CKalimaGate::~CKalimaGate
_TEXT	ENDS
PUBLIC	?CheckOverlapKundunMark@CKalimaGate@@QAEHHE@Z	; CKalimaGate::CheckOverlapKundunMark
EXTRN	?IsItem@CItem@@QAEHXZ:PROC			; CItem::IsItem
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	__ftol2_sse:PROC
; Function compile flags: /Ogtp
;	COMDAT ?CheckOverlapKundunMark@CKalimaGate@@QAEHHE@Z
_TEXT	SEGMENT
_x$214216 = -4						; size = 4
_iIndex$ = 8						; size = 4
_btLevel$ = 12						; size = 1
?CheckOverlapKundunMark@CKalimaGate@@QAEHHE@Z PROC	; CKalimaGate::CheckOverlapKundunMark, COMDAT
; _this$ = ecx

; 331  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	53		 push	 ebx

; 332  : 	for ( int x = 0;x<MAIN_INVENTORY_SIZE;x++ )

  00005	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0000b	56		 push	 esi
  0000c	57		 push	 edi
  0000d	8b 7d 08	 mov	 edi, DWORD PTR _iIndex$[ebp]
  00010	33 f6		 xor	 esi, esi
  00012	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  00018	89 75 fc	 mov	 DWORD PTR _x$214216[ebp], esi
  0001b	eb 03 8d 49 00	 npad	 5
$LL7@CheckOverl:

; 333  : 	{
; 334  : 		if ( gObj[iIndex].pInventory[x].IsItem() == TRUE )

  00020	8b 8c 1f 24 0e
	00 00		 mov	 ecx, DWORD PTR [edi+ebx+3620]
  00027	03 ce		 add	 ecx, esi
  00029	e8 00 00 00 00	 call	 ?IsItem@CItem@@QAEHXZ	; CItem::IsItem
  0002e	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00034	83 f8 01	 cmp	 eax, 1
  00037	75 39		 jne	 SHORT $LN6@CheckOverl

; 335  : 		{
; 336  : 			if ( gObj[iIndex].pInventory[x].m_Type == ITEMGET(14, 29) )

  00039	8b 84 1f 24 0e
	00 00		 mov	 eax, DWORD PTR [edi+ebx+3620]
  00040	b9 1d 1c 00 00	 mov	 ecx, 7197		; 00001c1dH
  00045	66 39 4c 30 06	 cmp	 WORD PTR [eax+esi+6], cx
  0004a	75 26		 jne	 SHORT $LN6@CheckOverl

; 337  : 			{
; 338  : 				if ( gObj[iIndex].pInventory[x].m_Level == btLevel )

  0004c	0f b6 55 0c	 movzx	 edx, BYTE PTR _btLevel$[ebp]
  00050	66 39 54 30 08	 cmp	 WORD PTR [eax+esi+8], dx
  00055	75 1b		 jne	 SHORT $LN6@CheckOverl

; 339  : 				{
; 340  : 					int iITEM_DUR = (int)gObj[iIndex].pInventory[x].m_Durability;

  00057	d9 44 30 24	 fld	 DWORD PTR [eax+esi+36]
  0005b	e8 00 00 00 00	 call	 __ftol2_sse

; 341  : 
; 342  : 					if ( KUNDUN_MARK_RANGE(iITEM_DUR) != FALSE )

  00060	85 c0		 test	 eax, eax
  00062	78 0e		 js	 SHORT $LN6@CheckOverl
  00064	33 c9		 xor	 ecx, ecx
  00066	83 f8 04	 cmp	 eax, 4
  00069	0f 9e c1	 setle	 cl
  0006c	8b c1		 mov	 eax, ecx
  0006e	85 c0		 test	 eax, eax
  00070	75 1d		 jne	 SHORT $LN13@CheckOverl
$LN6@CheckOverl:

; 332  : 	for ( int x = 0;x<MAIN_INVENTORY_SIZE;x++ )

  00072	ff 45 fc	 inc	 DWORD PTR _x$214216[ebp]
  00075	81 c6 d4 00 00
	00		 add	 esi, 212		; 000000d4H
  0007b	81 fe f0 a8 00
	00		 cmp	 esi, 43248		; 0000a8f0H
  00081	7c 9d		 jl	 SHORT $LL7@CheckOverl

; 345  : 					}
; 346  : 				}
; 347  : 			}
; 348  : 		}
; 349  : 	}
; 350  : 
; 351  : 	return -1;

  00083	5f		 pop	 edi
  00084	5e		 pop	 esi
  00085	83 c8 ff	 or	 eax, -1
  00088	5b		 pop	 ebx

; 352  : }

  00089	8b e5		 mov	 esp, ebp
  0008b	5d		 pop	 ebp
  0008c	c2 08 00	 ret	 8
$LN13@CheckOverl:

; 343  : 					{
; 344  : 						return x;

  0008f	8b 45 fc	 mov	 eax, DWORD PTR _x$214216[ebp]
  00092	5f		 pop	 edi
  00093	5e		 pop	 esi
  00094	5b		 pop	 ebx

; 352  : }

  00095	8b e5		 mov	 esp, ebp
  00097	5d		 pop	 ebp
  00098	c2 08 00	 ret	 8
?CheckOverlapKundunMark@CKalimaGate@@QAEHHE@Z ENDP	; CKalimaGate::CheckOverlapKundunMark
_TEXT	ENDS
PUBLIC	?GetRandomLocation@CKalimaGate@@AAEHHAAE0@Z	; CKalimaGate::GetRandomLocation
EXTRN	?GetAttr@MapClass@@QAEEHH@Z:PROC		; MapClass::GetAttr
EXTRN	_rand:PROC
EXTRN	?MapC@@3PAVMapClass@@A:BYTE			; MapC
; Function compile flags: /Ogtp
;	COMDAT ?GetRandomLocation@CKalimaGate@@AAEHHAAE0@Z
_TEXT	SEGMENT
_iUY$ = -4						; size = 4
tv211 = 8						; size = 4
_iMapNumber$ = 8					; size = 4
_iUX$ = 12						; size = 4
_cX$ = 12						; size = 4
_cY$ = 16						; size = 4
?GetRandomLocation@CKalimaGate@@AAEHHAAE0@Z PROC	; CKalimaGate::GetRandomLocation, COMDAT
; _this$ = ecx

; 359  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 360  : 	int iCount = 100;
; 361  : 	int iUX = cX;
; 362  : 	int iUY = cY;

  00004	8b 4d 10	 mov	 ecx, DWORD PTR _cY$[ebp]
  00007	0f b6 11	 movzx	 edx, BYTE PTR [ecx]
  0000a	53		 push	 ebx
  0000b	56		 push	 esi
  0000c	8b 75 0c	 mov	 esi, DWORD PTR _cX$[ebp]
  0000f	0f b6 06	 movzx	 eax, BYTE PTR [esi]
  00012	89 45 0c	 mov	 DWORD PTR _iUX$[ebp], eax
  00015	8b 45 08	 mov	 eax, DWORD PTR _iMapNumber$[ebp]
  00018	69 c0 48 3d 05
	00		 imul	 eax, 343368		; 00053d48H
  0001e	8d 88 00 00 00
	00		 lea	 ecx, DWORD PTR ?MapC@@3PAVMapClass@@A[eax]
  00024	57		 push	 edi
  00025	bf 64 00 00 00	 mov	 edi, 100		; 00000064H
  0002a	89 55 fc	 mov	 DWORD PTR _iUY$[ebp], edx

; 363  : 
; 364  : 	while ( iCount-- > 0 )

  0002d	89 4d 08	 mov	 DWORD PTR tv211[ebp], ecx
$LL3@GetRandomL:
  00030	4f		 dec	 edi

; 365  : 	{
; 366  : 		cX = ( rand() %6) * (((rand()%2==0)?-1:1)) + iUX;

  00031	e8 00 00 00 00	 call	 _rand
  00036	8b d8		 mov	 ebx, eax
  00038	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  0003e	79 05		 jns	 SHORT $LN9@GetRandomL
  00040	4b		 dec	 ebx
  00041	83 cb fe	 or	 ebx, -2			; fffffffeH
  00044	43		 inc	 ebx
$LN9@GetRandomL:
  00045	f7 db		 neg	 ebx
  00047	1a db		 sbb	 bl, bl
  00049	80 e3 02	 and	 bl, 2
  0004c	fe cb		 dec	 bl
  0004e	e8 00 00 00 00	 call	 _rand
  00053	99		 cdq
  00054	b9 06 00 00 00	 mov	 ecx, 6
  00059	f7 f9		 idiv	 ecx
  0005b	8a c2		 mov	 al, dl
  0005d	f6 eb		 imul	 bl
  0005f	02 45 0c	 add	 al, BYTE PTR _iUX$[ebp]
  00062	88 06		 mov	 BYTE PTR [esi], al

; 367  : 		cY = (rand()%6) * (((rand()%2==0)?-1:1)) + iUY;

  00064	e8 00 00 00 00	 call	 _rand
  00069	8b d8		 mov	 ebx, eax
  0006b	81 e3 01 00 00
	80		 and	 ebx, -2147483647	; 80000001H
  00071	79 05		 jns	 SHORT $LN10@GetRandomL
  00073	4b		 dec	 ebx
  00074	83 cb fe	 or	 ebx, -2			; fffffffeH
  00077	43		 inc	 ebx
$LN10@GetRandomL:
  00078	f7 db		 neg	 ebx
  0007a	1a db		 sbb	 bl, bl
  0007c	80 e3 02	 and	 bl, 2
  0007f	fe cb		 dec	 bl
  00081	e8 00 00 00 00	 call	 _rand
  00086	99		 cdq
  00087	b9 06 00 00 00	 mov	 ecx, 6
  0008c	f7 f9		 idiv	 ecx
  0008e	8a c2		 mov	 al, dl
  00090	8b 55 10	 mov	 edx, DWORD PTR _cY$[ebp]
  00093	f6 eb		 imul	 bl
  00095	02 45 fc	 add	 al, BYTE PTR _iUY$[ebp]
  00098	88 02		 mov	 BYTE PTR [edx], al

; 368  : 
; 369  : 		BYTE btMapAttr = MapC[iMapNumber].GetAttr(cX,cY);
; 370  : 
; 371  : 		if ( btMapAttr == 0 )

  0009a	0f b6 0e	 movzx	 ecx, BYTE PTR [esi]
  0009d	0f b6 c0	 movzx	 eax, al
  000a0	50		 push	 eax
  000a1	51		 push	 ecx
  000a2	8b 4d 08	 mov	 ecx, DWORD PTR tv211[ebp]
  000a5	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr
  000aa	84 c0		 test	 al, al
  000ac	74 13		 je	 SHORT $LN7@GetRandomL

; 363  : 
; 364  : 	while ( iCount-- > 0 )

  000ae	85 ff		 test	 edi, edi
  000b0	0f 8f 7a ff ff
	ff		 jg	 $LL3@GetRandomL

; 374  : 		}
; 375  : 	}
; 376  : 
; 377  : 	return FALSE;

  000b6	5f		 pop	 edi
  000b7	5e		 pop	 esi
  000b8	33 c0		 xor	 eax, eax
  000ba	5b		 pop	 ebx

; 378  : }

  000bb	8b e5		 mov	 esp, ebp
  000bd	5d		 pop	 ebp
  000be	c2 0c 00	 ret	 12			; 0000000cH
$LN7@GetRandomL:
  000c1	5f		 pop	 edi
  000c2	5e		 pop	 esi

; 372  : 		{
; 373  : 			return TRUE;

  000c3	b8 01 00 00 00	 mov	 eax, 1
  000c8	5b		 pop	 ebx

; 378  : }

  000c9	8b e5		 mov	 esp, ebp
  000cb	5d		 pop	 ebp
  000cc	c2 0c 00	 ret	 12			; 0000000cH
?GetRandomLocation@CKalimaGate@@AAEHHAAE0@Z ENDP	; CKalimaGate::GetRandomLocation
_TEXT	ENDS
PUBLIC	?GetKalimaGateLevel@CKalimaGate@@AAEHH@Z	; CKalimaGate::GetKalimaGateLevel
; Function compile flags: /Ogtp
;	COMDAT ?GetKalimaGateLevel@CKalimaGate@@AAEHH@Z
_TEXT	SEGMENT
_iIndex$ = 8						; size = 4
?GetKalimaGateLevel@CKalimaGate@@AAEHH@Z PROC		; CKalimaGate::GetKalimaGateLevel, COMDAT
; _this$ = ecx

; 388  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 389  : 	if ( gObj[iIndex].Class == CLASS_MAGUMSA 
; 390  : #ifdef MONK
; 391  : 		|| gObj[iIndex].Class == CLASS_MONK
; 392  : #endif
; 393  : 		|| gObj[iIndex].Class == CLASS_DARKLORD )	// DarkLord and MagicGLadiaro

  00003	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00006	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0000c	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00012	03 c8		 add	 ecx, eax
  00014	0f b7 81 b8 00
	00 00		 movzx	 eax, WORD PTR [ecx+184]
  0001b	83 f8 03	 cmp	 eax, 3
  0001e	74 34		 je	 SHORT $LN12@GetKalimaG
  00020	83 f8 06	 cmp	 eax, 6
  00023	74 2f		 je	 SHORT $LN12@GetKalimaG
  00025	83 f8 04	 cmp	 eax, 4
  00028	74 2a		 je	 SHORT $LN12@GetKalimaG

; 400  : 				{
; 401  : 					return i;
; 402  : 				}
; 403  : 			}
; 404  : 		}
; 405  : 	}
; 406  : 	else
; 407  : 	{
; 408  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  0002a	0f bf 91 be 00
	00 00		 movsx	 edx, WORD PTR [ecx+190]
  00031	33 c0		 xor	 eax, eax
  00033	b9 04 00 00 00	 mov	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+4
$LL5@GetKalimaG:

; 409  : 		{
; 410  : 			if ( gObj[iIndex].Level >= g_sttKALIMAGATE_LEVEL[i].iLOWER_BOUND )

  00038	3b 51 fc	 cmp	 edx, DWORD PTR [ecx-4]
  0003b	7c 04		 jl	 SHORT $LN4@GetKalimaG

; 411  : 			{
; 412  : 				if ( gObj[iIndex].Level <= g_sttKALIMAGATE_LEVEL[i].iUPPER_BOUND )

  0003d	3b 11		 cmp	 edx, DWORD PTR [ecx]
  0003f	7e 39		 jle	 SHORT $LN14@GetKalimaG
$LN4@GetKalimaG:

; 400  : 				{
; 401  : 					return i;
; 402  : 				}
; 403  : 			}
; 404  : 		}
; 405  : 	}
; 406  : 	else
; 407  : 	{
; 408  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  00041	83 c1 10	 add	 ecx, 16			; 00000010H
  00044	40		 inc	 eax
  00045	81 f9 74 00 00
	00		 cmp	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+116
  0004b	7c eb		 jl	 SHORT $LL5@GetKalimaG

; 413  : 				{
; 414  : 					return i;
; 415  : 				}
; 416  : 			}
; 417  : 		}
; 418  : 	}
; 419  : 	return -1;

  0004d	83 c8 ff	 or	 eax, -1

; 420  : }

  00050	5d		 pop	 ebp
  00051	c2 04 00	 ret	 4
$LN12@GetKalimaG:

; 394  : 	{
; 395  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  00054	0f bf 91 be 00
	00 00		 movsx	 edx, WORD PTR [ecx+190]
  0005b	33 c0		 xor	 eax, eax
  0005d	b9 0c 00 00 00	 mov	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+12
$LL11@GetKalimaG:

; 396  : 		{
; 397  : 			if ( gObj[iIndex].Level >= g_sttKALIMAGATE_LEVEL[i].iLOWER_BOUND_MAGUMSA )

  00062	3b 51 fc	 cmp	 edx, DWORD PTR [ecx-4]
  00065	7c 04		 jl	 SHORT $LN10@GetKalimaG

; 398  : 			{
; 399  : 				if ( gObj[iIndex].Level <= g_sttKALIMAGATE_LEVEL[i].iUPPER_BOUND_MAGUMSA )

  00067	3b 11		 cmp	 edx, DWORD PTR [ecx]
  00069	7e 0f		 jle	 SHORT $LN14@GetKalimaG
$LN10@GetKalimaG:

; 394  : 	{
; 395  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  0006b	83 c1 10	 add	 ecx, 16			; 00000010H
  0006e	40		 inc	 eax
  0006f	81 f9 7c 00 00
	00		 cmp	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+124
  00075	7c eb		 jl	 SHORT $LL11@GetKalimaG

; 413  : 				{
; 414  : 					return i;
; 415  : 				}
; 416  : 			}
; 417  : 		}
; 418  : 	}
; 419  : 	return -1;

  00077	83 c8 ff	 or	 eax, -1
$LN14@GetKalimaG:

; 420  : }

  0007a	5d		 pop	 ebp
  0007b	c2 04 00	 ret	 4
?GetKalimaGateLevel@CKalimaGate@@AAEHH@Z ENDP		; CKalimaGate::GetKalimaGateLevel
_TEXT	ENDS
PUBLIC	??_C@_0FF@FPKJHAJK@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@ ; `string'
PUBLIC	?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z		; CKalimaGate::DeleteKalimaGate
EXTRN	__imp__LeaveCriticalSection@4:PROC
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObjCharZeroSet@@YAXH@Z:PROC			; gObjCharZeroSet
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
EXTRN	?GCDiePlayerSend@@YAXPAUOBJECTSTRUCT@@HEH@Z:PROC ; GCDiePlayerSend
EXTRN	__imp__EnterCriticalSection@4:PROC
EXTRN	___security_cookie:DWORD
EXTRN	__except_handler4:PROC
EXTRN	__local_unwind4:PROC
;	COMDAT ??_C@_0FF@FPKJHAJK@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@
CONST	SEGMENT
??_C@_0FF@FPKJHAJK@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@ DB '['
	DB	'Kalima] DeleteKalimaGate() - out of Index (iKalimaGateIndex:%'
	DB	'd, iCallOwnerIndex:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__sehtable$?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z DD 0fffffffeH
	DD	00H
	DD	0ffffffd4H
	DD	00H
	DD	0fffffffeH
	DD	00H
	DD	FLAT:$LN11@DeleteKali
; Function compile flags: /Ogtp
xdata$x	ENDS
;	COMDAT ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z
_TEXT	SEGMENT
_this$ = -28						; size = 4
__$SEHRec$ = -24					; size = 24
_iKalimaGateIndex$ = 8					; size = 4
_iCallOwnerIndex$ = 12					; size = 4
?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z PROC		; CKalimaGate::DeleteKalimaGate, COMDAT
; _this$ = ecx

; 429  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a fe		 push	 -2			; fffffffeH
  00005	68 00 00 00 00	 push	 OFFSET __sehtable$?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z
  0000a	68 00 00 00 00	 push	 OFFSET __except_handler4
  0000f	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00015	50		 push	 eax
  00016	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00019	53		 push	 ebx
  0001a	56		 push	 esi
  0001b	57		 push	 edi
  0001c	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00021	31 45 f8	 xor	 DWORD PTR __$SEHRec$[ebp+16], eax
  00024	33 c5		 xor	 eax, ebp
  00026	50		 push	 eax
  00027	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  0002a	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00030	89 4d e4	 mov	 DWORD PTR _this$[ebp], ecx

; 430  : 	EnterCriticalSection(&this->m_critKalimaGate);

  00033	83 c1 04	 add	 ecx, 4
  00036	51		 push	 ecx
  00037	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EnterCriticalSection@4

; 431  : 
; 432  : 	__try

  0003d	33 db		 xor	 ebx, ebx
  0003f	89 5d fc	 mov	 DWORD PTR __$SEHRec$[ebp+20], ebx

; 433  : 	{
; 434  : 		if ( !OBJMAX_RANGE(iKalimaGateIndex ) || !OBJMAX_RANGE(iCallOwnerIndex ))

  00042	8b 75 08	 mov	 esi, DWORD PTR _iKalimaGateIndex$[ebp]
  00045	3b f3		 cmp	 esi, ebx
  00047	0f 8c 9e 00 00
	00		 jl	 $LN15@DeleteKali
  0004d	33 c0		 xor	 eax, eax
  0004f	81 fe 97 3a 00
	00		 cmp	 esi, 14999		; 00003a97H
  00055	0f 9e c0	 setle	 al
  00058	3b c3		 cmp	 eax, ebx
  0005a	0f 84 8b 00 00
	00		 je	 $LN15@DeleteKali
  00060	8b 7d 0c	 mov	 edi, DWORD PTR _iCallOwnerIndex$[ebp]
  00063	3b fb		 cmp	 edi, ebx
  00065	0f 8c 83 00 00
	00		 jl	 $LN1@DeleteKali
  0006b	33 c0		 xor	 eax, eax
  0006d	81 ff 97 3a 00
	00		 cmp	 edi, 14999		; 00003a97H
  00073	0f 9e c0	 setle	 al
  00076	3b c3		 cmp	 eax, ebx
  00078	74 74		 je	 SHORT $LN1@DeleteKali

; 438  : 		}
; 439  : 
; 440  : 		GCDiePlayerSend( &gObj[iKalimaGateIndex], iKalimaGateIndex, 0 , 0);

  0007a	53		 push	 ebx
  0007b	53		 push	 ebx
  0007c	56		 push	 esi
  0007d	8b c6		 mov	 eax, esi
  0007f	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00085	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0008b	50		 push	 eax
  0008c	e8 00 00 00 00	 call	 ?GCDiePlayerSend@@YAXPAUOBJECTSTRUCT@@HEH@Z ; GCDiePlayerSend

; 441  : 		gObj[iCallOwnerIndex].m_cKalimaGateExist = FALSE;

  00091	8b c7		 mov	 eax, edi
  00093	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00099	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0009f	88 9c 08 ca 03
	00 00		 mov	 BYTE PTR [eax+ecx+970], bl

; 442  : 		gObj[iCallOwnerIndex].m_iKalimaGateIndex = -1;

  000a6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000ac	c7 84 10 cc 03
	00 00 ff ff ff
	ff		 mov	 DWORD PTR [eax+edx+972], -1

; 443  : 		gObjDel(iKalimaGateIndex);

  000b7	56		 push	 esi
  000b8	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel

; 444  : 		gObjCharZeroSet(iKalimaGateIndex);

  000bd	56		 push	 esi
  000be	e8 00 00 00 00	 call	 ?gObjCharZeroSet@@YAXH@Z ; gObjCharZeroSet
  000c3	83 c4 18	 add	 esp, 24			; 00000018H

; 445  : 	}
; 446  : 	__finally

  000c6	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
  000cd	e8 52 00 00 00	 call	 $LN13@DeleteKali
$LN14@DeleteKali:

; 449  : 	}
; 450  : 	return true;

  000d2	b8 01 00 00 00	 mov	 eax, 1

; 451  : }

  000d7	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  000da	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  000e1	59		 pop	 ecx
  000e2	5f		 pop	 edi
  000e3	5e		 pop	 esi
  000e4	5b		 pop	 ebx
  000e5	8b e5		 mov	 esp, ebp
  000e7	5d		 pop	 ebp
  000e8	c2 08 00	 ret	 8
$LN15@DeleteKali:

; 445  : 	}
; 446  : 	__finally

  000eb	8b 7d 0c	 mov	 edi, DWORD PTR _iCallOwnerIndex$[ebp]
$LN1@DeleteKali:

; 435  : 		{
; 436  : 			LogAddTD("[Kalima] DeleteKalimaGate() - out of Index (iKalimaGateIndex:%d, iCallOwnerIndex:%d)", iKalimaGateIndex, iCallOwnerIndex);

  000ee	57		 push	 edi
  000ef	56		 push	 esi
  000f0	68 00 00 00 00	 push	 OFFSET ??_C@_0FF@FPKJHAJK@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@
  000f5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 437  : 			return 0;

  000fb	6a fe		 push	 -2			; fffffffeH
  000fd	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  00100	50		 push	 eax
  00101	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00106	e8 00 00 00 00	 call	 __local_unwind4
  0010b	83 c4 18	 add	 esp, 24			; 00000018H
  0010e	33 c0		 xor	 eax, eax

; 451  : }

  00110	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00113	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0011a	59		 pop	 ecx
  0011b	5f		 pop	 edi
  0011c	5e		 pop	 esi
  0011d	5b		 pop	 ebx
  0011e	8b e5		 mov	 esp, ebp
  00120	5d		 pop	 ebp
  00121	c2 08 00	 ret	 8
$LN11@DeleteKali:
$LN17@DeleteKali:
$LN13@DeleteKali:

; 447  : 	{
; 448  : 		LeaveCriticalSection(&this->m_critKalimaGate);

  00124	8b 4d e4	 mov	 ecx, DWORD PTR _this$[ebp]
  00127	83 c1 04	 add	 ecx, 4
  0012a	51		 push	 ecx
  0012b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__LeaveCriticalSection@4
$LN12@DeleteKali:
$LN16@DeleteKali:
  00131	c3		 ret	 0
?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ENDP		; CKalimaGate::DeleteKalimaGate
_TEXT	ENDS
PUBLIC	??_C@_0EA@CCDLFCDJ@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@ ; `string'
PUBLIC	?DeleteKalimaGate@CKalimaGate@@QAEHH@Z		; CKalimaGate::DeleteKalimaGate
;	COMDAT ??_C@_0EA@CCDLFCDJ@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@
CONST	SEGMENT
??_C@_0EA@CCDLFCDJ@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@ DB '['
	DB	'Kalima] DeleteKalimaGate() - out of Index (iCallOwnerIndex:%d'
	DB	')', 00H					; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DeleteKalimaGate@CKalimaGate@@QAEHH@Z
_TEXT	SEGMENT
_iCallOwnerIndex$ = 8					; size = 4
?DeleteKalimaGate@CKalimaGate@@QAEHH@Z PROC		; CKalimaGate::DeleteKalimaGate, COMDAT
; _this$ = ecx

; 459  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 460  : 	if ( OBJMAX_RANGE(iCallOwnerIndex ) == FALSE )

  00004	8b 75 08	 mov	 esi, DWORD PTR _iCallOwnerIndex$[ebp]
  00007	85 f6		 test	 esi, esi
  00009	78 0f		 js	 SHORT $LN13@DeleteKali@2
  0000b	33 c0		 xor	 eax, eax
  0000d	81 fe 97 3a 00
	00		 cmp	 esi, 14999		; 00003a97H
  00013	0f 9e c0	 setle	 al
  00016	85 c0		 test	 eax, eax
  00018	75 16		 jne	 SHORT $LN4@DeleteKali@2
$LN13@DeleteKali@2:

; 461  : 	{	
; 462  : 		LogAddTD("[Kalima] DeleteKalimaGate() - out of Index (iCallOwnerIndex:%d)",	iCallOwnerIndex);

  0001a	56		 push	 esi
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EA@CCDLFCDJ@?$FLKalima?$FN?5DeleteKalimaGate?$CI?$CJ?5?9?5ou@
  00020	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00026	83 c4 08	 add	 esp, 8

; 463  : 		return false;

  00029	33 c0		 xor	 eax, eax
  0002b	5e		 pop	 esi

; 479  : }

  0002c	5d		 pop	 ebp
  0002d	c2 04 00	 ret	 4
$LN4@DeleteKali@2:

; 464  : 	}
; 465  : 
; 466  : 	int iKalimaGateIndex = gObj[iCallOwnerIndex].m_iKalimaGateIndex;

  00030	8b c6		 mov	 eax, esi
  00032	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00038	57		 push	 edi
  00039	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0003f	8b 84 38 cc 03
	00 00		 mov	 eax, DWORD PTR [eax+edi+972]

; 467  : 
; 468  : 	if (  OBJMAX_RANGE (iKalimaGateIndex ) == FALSE )

  00046	85 c0		 test	 eax, eax
  00048	78 49		 js	 SHORT $LN1@DeleteKali@2
  0004a	33 d2		 xor	 edx, edx
  0004c	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  00051	0f 9e c2	 setle	 dl
  00054	85 d2		 test	 edx, edx

; 469  : 	{	
; 470  : 		return false;

  00056	74 3b		 je	 SHORT $LN1@DeleteKali@2

; 471  : 	}
; 472  : 
; 473  : 	if ( gObj[iKalimaGateIndex].Live == FALSE || !KALIMA_ATTRIBUTE_RANGE(gObj[iKalimaGateIndex].m_Attribute) )

  00058	8b d0		 mov	 edx, eax
  0005a	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  00060	80 7c 3a 6a 00	 cmp	 BYTE PTR [edx+edi+106], 0
  00065	74 2c		 je	 SHORT $LN1@DeleteKali@2
  00067	0f b7 94 3a b6
	04 00 00	 movzx	 edx, WORD PTR [edx+edi+1206]
  0006f	66 83 fa 33	 cmp	 dx, 51			; 00000033H
  00073	7c 1e		 jl	 SHORT $LN1@DeleteKali@2
  00075	53		 push	 ebx
  00076	33 db		 xor	 ebx, ebx
  00078	66 83 fa 3a	 cmp	 dx, 58			; 0000003aH
  0007c	0f 9e c3	 setle	 bl
  0007f	8b d3		 mov	 edx, ebx
  00081	5b		 pop	 ebx
  00082	85 d2		 test	 edx, edx
  00084	74 0d		 je	 SHORT $LN1@DeleteKali@2

; 476  : 	}
; 477  : 
; 478  : 	return this->DeleteKalimaGate(iKalimaGateIndex, iCallOwnerIndex);

  00086	56		 push	 esi
  00087	50		 push	 eax
  00088	e8 00 00 00 00	 call	 ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ; CKalimaGate::DeleteKalimaGate
  0008d	5f		 pop	 edi
  0008e	5e		 pop	 esi

; 479  : }

  0008f	5d		 pop	 ebp
  00090	c2 04 00	 ret	 4
$LN1@DeleteKali@2:
  00093	5f		 pop	 edi

; 474  : 	{
; 475  : 		return FALSE;

  00094	33 c0		 xor	 eax, eax
  00096	5e		 pop	 esi

; 479  : }

  00097	5d		 pop	 ebp
  00098	c2 04 00	 ret	 4
?DeleteKalimaGate@CKalimaGate@@QAEHH@Z ENDP		; CKalimaGate::DeleteKalimaGate
_TEXT	ENDS
PUBLIC	??_C@_0FA@KLLHPHHL@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0JC@FDOJEAMO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@ ; `string'
PUBLIC	__real@447a0000
PUBLIC	??_C@_0FE@DCIHOCIF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ ; `string'
PUBLIC	??_C@_0GN@ELAOECBK@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0FO@JJMJIIJC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0DG@GKLFNKKH@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@ ; `string'
PUBLIC	?CreateKalimaGate2@CKalimaGate@@QAEHHHEE@Z	; CKalimaGate::CreateKalimaGate2
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	?GetAttr@CMonsterAttr@@QAEPAUMONSTER_ATTRIBUTE@@H@Z:PROC ; CMonsterAttr::GetAttr
EXTRN	?gMAttr@@3VCMonsterAttr@@A:BYTE			; gMAttr
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	?gObjIsConnected@@YAHH@Z:PROC			; gObjIsConnected
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0FA@KLLHPHHL@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0FA@KLLHPHHL@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate (NextMap) - Map'
	DB	'Number Error : %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0JC@FDOJEAMO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@
CONST	SEGMENT
??_C@_0JC@FDOJEAMO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@ DB '['
	DB	'Kalima] [%s][%s] Create Kalima Gate Successfuly (NextMap) (Li'
	DB	've:%d, GateTick:%u, DieRegen:%d, Map:%d, X:%d, Y:%d, SummonIn'
	DB	'dex:%d, OwnerIndex:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT __real@447a0000
CONST	SEGMENT
__real@447a0000 DD 0447a0000r			; 1000
CONST	ENDS
;	COMDAT ??_C@_0FE@DCIHOCIF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
CONST	SEGMENT
??_C@_0FE@DCIHOCIF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ DB '['
	DB	'Kalima] [%s][%s] Kalima Gate Vanished (NextMap) - lpMATTR == '
	DB	'NULL (SummonIndex:%d)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0GN@ELAOECBK@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0GN@ELAOECBK@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate (NextMap) - Fai'
	DB	'led to get Location (MapNumber:%d, X:%d, Y:%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0FO@JJMJIIJC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0FO@JJMJIIJC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate (NextMap) - Alr'
	DB	'eady Have Gate (SummonIndex:%d)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DG@GKLFNKKH@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@
CONST	SEGMENT
??_C@_0DG@GKLFNKKH@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@ DB '['
	DB	'Kalima] [%s][%s] Try to Create Kalima Gate (NextMap)', 00H ; `string'
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__sehtable$?CreateKalimaGate2@CKalimaGate@@QAEHHHEE@Z DD 0fffffffeH
	DD	00H
	DD	0ffffffd0H
	DD	00H
	DD	0fffffffeH
	DD	00H
	DD	FLAT:$LN13@CreateKali
; Function compile flags: /Ogtp
xdata$x	ENDS
;	COMDAT ?CreateKalimaGate2@CKalimaGate@@QAEHHHEE@Z
_TEXT	SEGMENT
_lpMATTR$214319 = -32					; size = 4
_this$ = -28						; size = 4
__$SEHRec$ = -24					; size = 24
_iIndex$ = 8						; size = 4
_iMonMapNumber$ = 12					; size = 4
_cTX$ = 16						; size = 1
_cX$214312 = 19						; size = 1
_cTY$ = 20						; size = 1
_cY$214313 = 23						; size = 1
?CreateKalimaGate2@CKalimaGate@@QAEHHHEE@Z PROC		; CKalimaGate::CreateKalimaGate2, COMDAT
; _this$ = ecx

; 484  : {	

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a fe		 push	 -2			; fffffffeH
  00005	68 00 00 00 00	 push	 OFFSET __sehtable$?CreateKalimaGate2@CKalimaGate@@QAEHHHEE@Z
  0000a	68 00 00 00 00	 push	 OFFSET __except_handler4
  0000f	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00015	50		 push	 eax
  00016	83 ec 10	 sub	 esp, 16			; 00000010H
  00019	53		 push	 ebx
  0001a	56		 push	 esi
  0001b	57		 push	 edi
  0001c	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00021	31 45 f8	 xor	 DWORD PTR __$SEHRec$[ebp+16], eax
  00024	33 c5		 xor	 eax, ebp
  00026	50		 push	 eax
  00027	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  0002a	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00030	89 4d e4	 mov	 DWORD PTR _this$[ebp], ecx

; 485  : 	BOOL bKalimaGateCreateSucceed = FALSE;
; 486  : 	int iMonsterIndex = -1;
; 487  : 
; 488  : 	EnterCriticalSection(&this->m_critKalimaGate);

  00033	83 c1 04	 add	 ecx, 4
  00036	51		 push	 ecx
  00037	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EnterCriticalSection@4

; 489  : 
; 490  : 	__try

  0003d	9b		 fwait
  0003e	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$SEHRec$[ebp+20], 0

; 491  : 	{
; 492  : 		if ( !gObjIsConnected(iIndex))

  00045	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]
  00048	56		 push	 esi
  00049	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0004e	83 c4 04	 add	 esp, 4
  00051	85 c0		 test	 eax, eax
  00053	75 2a		 jne	 SHORT $LN8@CreateKali

; 493  : 			return FALSE;

  00055	6a fe		 push	 -2			; fffffffeH
  00057	9b		 fwait
  00058	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  0005b	50		 push	 eax
  0005c	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00061	e8 00 00 00 00	 call	 __local_unwind4
  00066	83 c4 0c	 add	 esp, 12			; 0000000cH
  00069	33 c0		 xor	 eax, eax

; 587  : }

  0006b	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0006e	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00075	59		 pop	 ecx
  00076	5f		 pop	 edi
  00077	5e		 pop	 esi
  00078	5b		 pop	 ebx
  00079	8b e5		 mov	 esp, ebp
  0007b	5d		 pop	 ebp
  0007c	c2 10 00	 ret	 16			; 00000010H
$LN8@CreateKali:

; 494  : 
; 495  : 		LogAddTD("[Kalima] [%s][%s] Try to Create Kalima Gate (NextMap)", gObj[iIndex].AccountID, gObj[iIndex].Name);

  0007f	8b fe		 mov	 edi, esi
  00081	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  00087	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0008c	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  00090	51		 push	 ecx
  00091	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  00095	52		 push	 edx
  00096	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@GKLFNKKH@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@
  0009b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000a1	83 c4 0c	 add	 esp, 12			; 0000000cH

; 496  : 
; 497  : 		if ( iMonMapNumber < MAP_INDEX_KALIMA1 || iMonMapNumber > MAP_INDEX_KALIMA6-1 )

  000a4	8b 5d 0c	 mov	 ebx, DWORD PTR _iMonMapNumber$[ebp]
  000a7	8d 43 e8	 lea	 eax, DWORD PTR [ebx-24]
  000aa	83 f8 04	 cmp	 eax, 4
  000ad	0f 87 a3 03 00
	00		 ja	 $LN6@CreateKali

; 502  : 		}
; 503  : 
; 504  : 		if ( gObj[iIndex].m_cKalimaGateExist == TRUE )

  000b3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000b9	80 bc 0f ca 03
	00 00 01	 cmp	 BYTE PTR [edi+ecx+970], 1
  000c1	75 64		 jne	 SHORT $LN5@CreateKali

; 505  : 		{
; 506  : 			GCServerMsgStringSend(lMsg.Get(MSGGET(4, 224)), iIndex, 1);

  000c3	6a 01		 push	 1
  000c5	56		 push	 esi
  000c6	68 e0 04 00 00	 push	 1248			; 000004e0H
  000cb	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000d0	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000d5	50		 push	 eax
  000d6	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend

; 507  : 
; 508  : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate (NextMap) - Already Have Gate (SummonIndex:%d)", gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iIndex].m_iKalimaGateIndex);

  000db	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000e0	8b 94 07 cc 03
	00 00		 mov	 edx, DWORD PTR [edi+eax+972]
  000e7	52		 push	 edx
  000e8	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  000ec	51		 push	 ecx
  000ed	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  000f1	52		 push	 edx
  000f2	68 00 00 00 00	 push	 OFFSET ??_C@_0FO@JJMJIIJC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  000f7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 509  : 	
; 510  : 			return FALSE;

  000fd	6a fe		 push	 -2			; fffffffeH
  000ff	9b		 fwait
  00100	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  00103	50		 push	 eax
  00104	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00109	e8 00 00 00 00	 call	 __local_unwind4
  0010e	83 c4 28	 add	 esp, 40			; 00000028H
  00111	33 c0		 xor	 eax, eax

; 587  : }

  00113	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00116	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0011d	59		 pop	 ecx
  0011e	5f		 pop	 edi
  0011f	5e		 pop	 esi
  00120	5b		 pop	 ebx
  00121	8b e5		 mov	 esp, ebp
  00123	5d		 pop	 ebp
  00124	c2 10 00	 ret	 16			; 00000010H
$LN5@CreateKali:

; 511  : 		}
; 512  : 
; 513  : 		int iMonsterType = iMonMapNumber + 129;

  00127	8d b3 81 00 00
	00		 lea	 esi, DWORD PTR [ebx+129]

; 514  : 		BYTE cX = cTX;

  0012d	8a 45 10	 mov	 al, BYTE PTR _cTX$[ebp]
  00130	88 45 13	 mov	 BYTE PTR _cX$214312[ebp], al

; 515  : 		BYTE cY = cTY;

  00133	8a 4d 14	 mov	 cl, BYTE PTR _cTY$[ebp]
  00136	88 4d 17	 mov	 BYTE PTR _cY$214313[ebp], cl

; 516  : 		BYTE btMapAttr = MapC[iMonMapNumber].GetAttr(cX, cY);

  00139	0f b6 c9	 movzx	 ecx, cl
  0013c	51		 push	 ecx
  0013d	0f b6 d0	 movzx	 edx, al
  00140	52		 push	 edx
  00141	8b cb		 mov	 ecx, ebx
  00143	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00149	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  0014f	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr

; 517  : 
; 518  : 		if ( btMapAttr != 0 )

  00154	84 c0		 test	 al, al
  00156	74 64		 je	 SHORT $LN3@CreateKali

; 519  : 		{
; 520  : 			if ( this->GetRandomLocation(iMonMapNumber, cX, cY) == FALSE )

  00158	8d 45 17	 lea	 eax, DWORD PTR _cY$214313[ebp]
  0015b	50		 push	 eax
  0015c	8d 4d 13	 lea	 ecx, DWORD PTR _cX$214312[ebp]
  0015f	51		 push	 ecx
  00160	53		 push	 ebx
  00161	8b 4d e4	 mov	 ecx, DWORD PTR _this$[ebp]
  00164	e8 00 00 00 00	 call	 ?GetRandomLocation@CKalimaGate@@AAEHHAAE0@Z ; CKalimaGate::GetRandomLocation
  00169	85 c0		 test	 eax, eax
  0016b	75 4f		 jne	 SHORT $LN3@CreateKali

; 521  : 			{
; 522  : 				LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate (NextMap) - Failed to get Location (MapNumber:%d, X:%d, Y:%d)", gObj[iIndex].AccountID, gObj[iIndex].Name, iMonMapNumber, cX, cY);

  0016d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00172	0f b6 55 17	 movzx	 edx, BYTE PTR _cY$214313[ebp]
  00176	52		 push	 edx
  00177	0f b6 4d 13	 movzx	 ecx, BYTE PTR _cX$214312[ebp]
  0017b	51		 push	 ecx
  0017c	53		 push	 ebx
  0017d	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  00181	52		 push	 edx
  00182	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  00186	50		 push	 eax
  00187	68 00 00 00 00	 push	 OFFSET ??_C@_0GN@ELAOECBK@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  0018c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 523  : 
; 524  : 				return FALSE;

  00192	6a fe		 push	 -2			; fffffffeH
  00194	9b		 fwait
  00195	8d 4d f0	 lea	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00198	51		 push	 ecx
  00199	68 00 00 00 00	 push	 OFFSET ___security_cookie
  0019e	e8 00 00 00 00	 call	 __local_unwind4
  001a3	83 c4 24	 add	 esp, 36			; 00000024H
  001a6	33 c0		 xor	 eax, eax

; 587  : }

  001a8	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  001ab	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  001b2	59		 pop	 ecx
  001b3	5f		 pop	 edi
  001b4	5e		 pop	 esi
  001b5	5b		 pop	 ebx
  001b6	8b e5		 mov	 esp, ebp
  001b8	5d		 pop	 ebp
  001b9	c2 10 00	 ret	 16			; 00000010H
$LN3@CreateKali:

; 525  : 			}
; 526  : 		}
; 527  : 
; 528  : 		iMonsterIndex = gObjAddMonster(iMonMapNumber);

  001bc	53		 push	 ebx
  001bd	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  001c2	83 c4 04	 add	 esp, 4
  001c5	0f bf d8	 movsx	 ebx, ax

; 529  : 
; 530  : 		if ( iMonsterIndex >= 0 )

  001c8	85 db		 test	 ebx, ebx
  001ca	0f 88 60 02 00
	00		 js	 $LN2@CreateKali

; 531  : 		{
; 532  : 			MONSTER_ATTRIBUTE * lpMATTR = gMAttr.GetAttr(iMonsterType);

  001d0	56		 push	 esi
  001d1	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMAttr@@3VCMonsterAttr@@A ; gMAttr
  001d6	e8 00 00 00 00	 call	 ?GetAttr@CMonsterAttr@@QAEPAUMONSTER_ATTRIBUTE@@H@Z ; CMonsterAttr::GetAttr
  001db	89 45 e0	 mov	 DWORD PTR _lpMATTR$214319[ebp], eax

; 533  : 
; 534  : 			if ( !lpMATTR )

  001de	85 c0		 test	 eax, eax
  001e0	75 4b		 jne	 SHORT $LN1@CreateKali

; 535  : 			{
; 536  : 				gObjDel(iMonsterIndex);

  001e2	53		 push	 ebx
  001e3	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel

; 537  : 
; 538  : 				LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished (NextMap) - lpMATTR == NULL (SummonIndex:%d)",	gObj[iIndex].AccountID, gObj[iIndex].Name, iMonsterIndex);

  001e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001ed	53		 push	 ebx
  001ee	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  001f2	52		 push	 edx
  001f3	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  001f7	50		 push	 eax
  001f8	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@DCIHOCIF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  001fd	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 539  : 
; 540  : 				return FALSE;

  00203	6a fe		 push	 -2			; fffffffeH
  00205	9b		 fwait
  00206	8d 4d f0	 lea	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00209	51		 push	 ecx
  0020a	68 00 00 00 00	 push	 OFFSET ___security_cookie
  0020f	e8 00 00 00 00	 call	 __local_unwind4
  00214	83 c4 20	 add	 esp, 32			; 00000020H
  00217	33 c0		 xor	 eax, eax

; 587  : }

  00219	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0021c	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00223	59		 pop	 ecx
  00224	5f		 pop	 edi
  00225	5e		 pop	 esi
  00226	5b		 pop	 ebx
  00227	8b e5		 mov	 esp, ebp
  00229	5d		 pop	 ebp
  0022a	c2 10 00	 ret	 16			; 00000010H
$LN1@CreateKali:

; 541  : 			}
; 542  : 
; 543  : 			gObjSetMonster(iMonsterIndex, iMonsterType);

  0022d	56		 push	 esi
  0022e	53		 push	 ebx
  0022f	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  00234	83 c4 08	 add	 esp, 8

; 544  : 			gObj[iMonsterIndex].Live = TRUE;

  00237	8b f3		 mov	 esi, ebx
  00239	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0023f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00245	c6 44 16 6a 01	 mov	 BYTE PTR [esi+edx+106], 1

; 545  : 			gObj[iMonsterIndex].Life = 1000.0;

  0024a	d9 05 00 00 00
	00		 fld	 DWORD PTR __real@447a0000
  00250	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00255	d9 94 06 fc 00
	00 00		 fst	 DWORD PTR [esi+eax+252]

; 546  : 			gObj[iMonsterIndex].MaxLife = 1000.0;

  0025c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00262	d9 9c 0e 00 01
	00 00		 fstp	 DWORD PTR [esi+ecx+256]

; 547  : 			gObj[iMonsterIndex].m_PosNum = -1;

  00269	83 ca ff	 or	 edx, -1
  0026c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00271	66 89 94 06 b0
	03 00 00	 mov	 WORD PTR [esi+eax+944], dx

; 548  : 			gObj[iMonsterIndex].X = cX;

  00279	0f b6 45 13	 movzx	 eax, BYTE PTR _cX$214312[ebp]
  0027d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00283	66 89 84 0e 44
	01 00 00	 mov	 WORD PTR [esi+ecx+324], ax

; 549  : 			gObj[iMonsterIndex].Y = cY;

  0028b	0f b6 4d 17	 movzx	 ecx, BYTE PTR _cY$214313[ebp]
  0028f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00295	66 89 8c 16 46
	01 00 00	 mov	 WORD PTR [esi+edx+326], cx

; 550  : 			gObj[iMonsterIndex].MTX = cX;

  0029d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002a3	66 89 84 16 80
	01 00 00	 mov	 WORD PTR [esi+edx+384], ax

; 551  : 			gObj[iMonsterIndex].MTY = cY;

  002ab	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002b1	66 89 8c 16 82
	01 00 00	 mov	 WORD PTR [esi+edx+386], cx

; 552  : 			gObj[iMonsterIndex].TX = cX;

  002b9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002bf	66 89 84 16 7c
	01 00 00	 mov	 WORD PTR [esi+edx+380], ax

; 553  : 			gObj[iMonsterIndex].TY = cY;

  002c7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002cd	66 89 8c 16 7e
	01 00 00	 mov	 WORD PTR [esi+edx+382], cx

; 554  : 			gObj[iMonsterIndex].m_OldX = cX;

  002d5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002db	66 89 84 16 78
	01 00 00	 mov	 WORD PTR [esi+edx+376], ax

; 555  : 			gObj[iMonsterIndex].m_OldY = cY;

  002e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002e8	66 89 8c 06 7a
	01 00 00	 mov	 WORD PTR [esi+eax+378], cx

; 556  : 			gObj[iMonsterIndex].StartX = cX;

  002f0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002f6	8a 55 13	 mov	 dl, BYTE PTR _cX$214312[ebp]
  002f9	88 94 0e 76 01
	00 00		 mov	 BYTE PTR [esi+ecx+374], dl

; 557  : 			gObj[iMonsterIndex].StartY = cY;

  00300	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00305	8a 4d 17	 mov	 cl, BYTE PTR _cY$214313[ebp]
  00308	88 8c 06 77 01
	00 00		 mov	 BYTE PTR [esi+eax+375], cl

; 558  : 			gObj[iMonsterIndex].MapNumber = iMonMapNumber;

  0030f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00315	8a 45 0c	 mov	 al, BYTE PTR _iMonMapNumber$[ebp]
  00318	88 84 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], al

; 559  : 			gObj[iMonsterIndex].m_MoveRange = 0;

  0031f	33 c9		 xor	 ecx, ecx
  00321	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00327	66 89 8c 16 ae
	04 00 00	 mov	 WORD PTR [esi+edx+1198], cx

; 560  : 			gObj[iMonsterIndex].m_cKalimaGateEnterCount = 0;

  0032f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00334	88 8c 06 d0 03
	00 00		 mov	 BYTE PTR [esi+eax+976], cl

; 561  : 
; 562  : 			gObj[iIndex].m_cKalimaGateExist = TRUE;

  0033b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00341	c6 84 0f ca 03
	00 00 01	 mov	 BYTE PTR [edi+ecx+970], 1

; 563  : 			gObj[iIndex].m_iKalimaGateIndex = iMonsterIndex;

  00349	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0034f	89 9c 17 cc 03
	00 00		 mov	 DWORD PTR [edi+edx+972], ebx

; 564  : 
; 565  : 			gObj[iMonsterIndex].Level = lpMATTR->m_Level;

  00356	8b 45 e0	 mov	 eax, DWORD PTR _lpMATTR$214319[ebp]
  00359	0f b7 48 1c	 movzx	 ecx, WORD PTR [eax+28]
  0035d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00363	66 89 8c 16 be
	00 00 00	 mov	 WORD PTR [esi+edx+190], cx

; 566  : 			gObj[iMonsterIndex].Type = OBJ_MONSTER;

  0036b	b8 02 00 00 00	 mov	 eax, 2
  00370	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00376	66 89 44 0e 68	 mov	 WORD PTR [esi+ecx+104], ax

; 567  : 			gObj[iMonsterIndex].MaxRegenTime = 1000;

  0037b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00381	c7 84 16 ac 03
	00 00 e8 03 00
	00		 mov	 DWORD PTR [esi+edx+940], 1000 ; 000003e8H

; 568  : 			gObj[iMonsterIndex].Dir = 1;

  0038c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00391	c6 84 06 48 01
	00 00 01	 mov	 BYTE PTR [esi+eax+328], 1

; 569  : 
; 570  : 			gObj[iMonsterIndex].m_RecallMon = iIndex;

  00399	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0039f	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  003a2	89 94 0e 50 04
	00 00		 mov	 DWORD PTR [esi+ecx+1104], edx

; 571  : 			gObj[iMonsterIndex].RegenTime = GetTickCount();

  003a9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  003af	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003b5	89 84 0e a8 03
	00 00		 mov	 DWORD PTR [esi+ecx+936], eax

; 572  : 			gObj[iMonsterIndex].m_Attribute = 58;

  003bc	ba 3a 00 00 00	 mov	 edx, 58			; 0000003aH
  003c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003c6	66 89 94 06 b6
	04 00 00	 mov	 WORD PTR [esi+eax+1206], dx

; 573  : 			gObj[iMonsterIndex].DieRegen = FALSE;

  003ce	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003d4	c6 84 0e a2 03
	00 00 00	 mov	 BYTE PTR [esi+ecx+930], 0

; 574  : 			
; 575  : 			LogAddTD("[Kalima] [%s][%s] Create Kalima Gate Successfuly (NextMap) (Live:%d, GateTick:%u, DieRegen:%d, Map:%d, X:%d, Y:%d, SummonIndex:%d, OwnerIndex:%d)", gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iMonsterIndex].Live, gObj[iMonsterIndex].RegenTime,	gObj[iMonsterIndex].DieRegen, gObj[iMonsterIndex].MapNumber, gObj[iMonsterIndex].X,	gObj[iMonsterIndex].Y, iMonsterIndex, iIndex);

  003dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003e1	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  003e4	52		 push	 edx
  003e5	53		 push	 ebx
  003e6	0f bf 8c 06 46
	01 00 00	 movsx	 ecx, WORD PTR [esi+eax+326]
  003ee	51		 push	 ecx
  003ef	0f bf 94 06 44
	01 00 00	 movsx	 edx, WORD PTR [esi+eax+324]
  003f7	52		 push	 edx
  003f8	0f b6 8c 06 49
	01 00 00	 movzx	 ecx, BYTE PTR [esi+eax+329]
  00400	51		 push	 ecx
  00401	0f be 94 06 a2
	03 00 00	 movsx	 edx, BYTE PTR [esi+eax+930]
  00409	52		 push	 edx
  0040a	8b 8c 06 a8 03
	00 00		 mov	 ecx, DWORD PTR [esi+eax+936]
  00411	51		 push	 ecx
  00412	0f b6 54 06 6a	 movzx	 edx, BYTE PTR [esi+eax+106]
  00417	52		 push	 edx
  00418	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  0041c	51		 push	 ecx
  0041d	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  00421	52		 push	 edx
  00422	68 00 00 00 00	 push	 OFFSET ??_C@_0JC@FDOJEAMO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@
  00427	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0042d	83 c4 2c	 add	 esp, 44			; 0000002cH
$LN2@CreateKali:

; 576  : 			bKalimaGateCreateSucceed = TRUE;
; 577  : 
; 578  : 
; 579  : 		}
; 580  : 	}
; 581  : 	__finally

  00430	9b		 fwait
  00431	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
  00438	e8 5e 00 00 00	 call	 $LN15@CreateKali
$LN16@CreateKali:

; 584  : 	}
; 585  : 
; 586  : 	return TRUE;

  0043d	b8 01 00 00 00	 mov	 eax, 1

; 587  : }

  00442	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00445	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0044c	59		 pop	 ecx
  0044d	5f		 pop	 edi
  0044e	5e		 pop	 esi
  0044f	5b		 pop	 ebx
  00450	8b e5		 mov	 esp, ebp
  00452	5d		 pop	 ebp
  00453	c2 10 00	 ret	 16			; 00000010H
$LN6@CreateKali:

; 498  : 		{
; 499  : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate (NextMap) - MapNumber Error : %d",	gObj[iIndex].AccountID, gObj[iIndex].Name, iMonMapNumber);

  00456	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0045b	53		 push	 ebx
  0045c	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  00460	51		 push	 ecx
  00461	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  00465	52		 push	 edx
  00466	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@KLLHPHHL@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  0046b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 500  : 
; 501  : 			return FALSE;

  00471	6a fe		 push	 -2			; fffffffeH
  00473	9b		 fwait
  00474	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  00477	50		 push	 eax
  00478	68 00 00 00 00	 push	 OFFSET ___security_cookie
  0047d	e8 00 00 00 00	 call	 __local_unwind4
  00482	83 c4 1c	 add	 esp, 28			; 0000001cH
  00485	33 c0		 xor	 eax, eax

; 587  : }

  00487	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0048a	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00491	59		 pop	 ecx
  00492	5f		 pop	 edi
  00493	5e		 pop	 esi
  00494	5b		 pop	 ebx
  00495	8b e5		 mov	 esp, ebp
  00497	5d		 pop	 ebp
  00498	c2 10 00	 ret	 16			; 00000010H
$LN13@CreateKali:
$LN19@CreateKali:
$LN15@CreateKali:

; 582  : 	{
; 583  : 		LeaveCriticalSection(&this->m_critKalimaGate);

  0049b	8b 4d e4	 mov	 ecx, DWORD PTR _this$[ebp]
  0049e	83 c1 04	 add	 ecx, 4
  004a1	51		 push	 ecx
  004a2	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__LeaveCriticalSection@4
$LN14@CreateKali:
$LN18@CreateKali:
  004a8	c3		 ret	 0
?CreateKalimaGate2@CKalimaGate@@QAEHHHEE@Z ENDP		; CKalimaGate::CreateKalimaGate2
_TEXT	ENDS
PUBLIC	??_C@_0GN@EGMLLHID@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@ ; `string'
PUBLIC	??_C@_0DG@DFEBENJO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5mov@ ; `string'
PUBLIC	??_C@_0FM@NAJNPHPN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ ; `string'
PUBLIC	??_C@_0FK@FFJOIHJB@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ ; `string'
PUBLIC	??_C@_0FM@NCEGFJNE@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?$CIN@ ; `string'
PUBLIC	?KalimaGateAct2@CKalimaGate@@QAEXH@Z		; CKalimaGate::KalimaGateAct2
EXTRN	?gObjMoveGate@@YAHHH@Z:PROC			; gObjMoveGate
;	COMDAT ??_C@_0GN@EGMLLHID@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@
CONST	SEGMENT
??_C@_0GN@EGMLLHID@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@ DB '['
	DB	'Kalima] [%s][%s] - [%s][%s] Transported by Kalima Gate (NextM'
	DB	'ap) (SummonIndex:%d, GateNo.:%d, MapNumber:%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DG@DFEBENJO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5mov@
CONST	SEGMENT
??_C@_0DG@DFEBENJO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5mov@ DB '['
	DB	'Kalima] [%s][%s] - [%s][%s] move fail (MapNumber:%d)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0FM@NAJNPHPN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
CONST	SEGMENT
??_C@_0FM@NAJNPHPN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ DB '['
	DB	'Kalima] [%s][%s] Kalima Gate Vanished (NextMap) - Time Out (S'
	DB	'ummonIndex:%d, EnterCount:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0FK@FFJOIHJB@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
CONST	SEGMENT
??_C@_0FK@FFJOIHJB@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ DB '['
	DB	'Kalima] [%s][%s] Kalima Gate Vanished - Enter Count Over (Sum'
	DB	'monIndex:%d, EnterCount:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0FM@NCEGFJNE@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?$CIN@
CONST	SEGMENT
??_C@_0FM@NCEGFJNE@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?$CIN@ DB '[Ka'
	DB	'lima] Kalima Gate Vanished (NextMap) - Summoner Vanished (Sum'
	DB	'monIndex:%d, EnterCount:%d)', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?KalimaGateAct2@CKalimaGate@@QAEXH@Z
_TEXT	SEGMENT
tv355 = -16						; size = 4
_iMoveMapLevel$214352 = -12				; size = 4
_i$214341 = -8						; size = 4
tv523 = -4						; size = 4
_this$ = -4						; size = 4
_iIndex$ = 8						; size = 4
?KalimaGateAct2@CKalimaGate@@QAEXH@Z PROC		; CKalimaGate::KalimaGateAct2, COMDAT
; _this$ = ecx

; 593  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H
  00006	57		 push	 edi

; 594  : 	LPOBJ lpObj = NULL;
; 595  : 	LPOBJ lpObjCallOwner = NULL;
; 596  : 
; 597  : 	if ( OBJMAX_RANGE(iIndex) == FALSE )

  00007	8b 7d 08	 mov	 edi, DWORD PTR _iIndex$[ebp]
  0000a	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  0000d	85 ff		 test	 edi, edi
  0000f	0f 88 e3 02 00
	00		 js	 $LN27@KalimaGate
  00015	33 c0		 xor	 eax, eax
  00017	81 ff 97 3a 00
	00		 cmp	 edi, 14999		; 00003a97H
  0001d	0f 9e c0	 setle	 al
  00020	85 c0		 test	 eax, eax
  00022	0f 84 d0 02 00
	00		 je	 $LN27@KalimaGate

; 598  : 		return;
; 599  : 
; 600  : 	if ( gObj[iIndex].Live == 0 )

  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002d	56		 push	 esi
  0002e	8b f7		 mov	 esi, edi
  00030	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00036	80 7c 06 6a 00	 cmp	 BYTE PTR [esi+eax+106], 0
  0003b	89 75 f0	 mov	 DWORD PTR tv355[ebp], esi
  0003e	0f 84 b3 02 00
	00		 je	 $LN33@KalimaGate

; 601  : 		return;
; 602  : 
; 603  : 	if ( !gObjIsConnected(gObj[iIndex].m_RecallMon ) )

  00044	8b 84 06 50 04
	00 00		 mov	 eax, DWORD PTR [esi+eax+1104]
  0004b	50		 push	 eax
  0004c	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00051	83 c4 04	 add	 esp, 4
  00054	85 c0		 test	 eax, eax
  00056	75 43		 jne	 SHORT $LN19@KalimaGate

; 604  : 	{
; 605  : 		LogAddTD("[Kalima] Kalima Gate Vanished (NextMap) - Summoner Vanished (SummonIndex:%d, EnterCount:%d)",
; 606  : 			iIndex, gObj[iIndex].m_cKalimaGateEnterCount);

  00058	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005e	0f be 94 0e d0
	03 00 00	 movsx	 edx, BYTE PTR [esi+ecx+976]
  00066	52		 push	 edx
  00067	57		 push	 edi
  00068	68 00 00 00 00	 push	 OFFSET ??_C@_0FM@NCEGFJNE@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?$CIN@
  0006d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 607  : 
; 608  : 		GCDiePlayerSend(&gObj[iIndex], iIndex, 0, 0);

  00073	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00079	6a 00		 push	 0
  0007b	6a 00		 push	 0
  0007d	57		 push	 edi
  0007e	56		 push	 esi
  0007f	e8 00 00 00 00	 call	 ?GCDiePlayerSend@@YAXPAUOBJECTSTRUCT@@HEH@Z ; GCDiePlayerSend

; 609  : 		gObjDel(iIndex);

  00084	57		 push	 edi
  00085	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel

; 610  : 		gObjCharZeroSet(iIndex);

  0008a	57		 push	 edi
  0008b	e8 00 00 00 00	 call	 ?gObjCharZeroSet@@YAXH@Z ; gObjCharZeroSet
  00090	83 c4 24	 add	 esp, 36			; 00000024H
  00093	5e		 pop	 esi
  00094	5f		 pop	 edi

; 690  : 										break;
; 691  : 								}
; 692  : 							}
; 693  : 						}
; 694  : 					}
; 695  : 				}
; 696  : 			}
; 697  : 		}
; 698  : 	}
; 699  : }

  00095	8b e5		 mov	 esp, ebp
  00097	5d		 pop	 ebp
  00098	c2 04 00	 ret	 4
$LN19@KalimaGate:

; 611  : 
; 612  : 		return;
; 613  : 	}
; 614  : 
; 615  : 	lpObj = &gObj[iIndex];

  0009b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 616  : 	lpObjCallOwner = &gObj[lpObj->m_RecallMon];

  000a0	8b bc 06 50 04
	00 00		 mov	 edi, DWORD PTR [esi+eax+1104]
  000a7	53		 push	 ebx
  000a8	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  000ae	8d 1c 06	 lea	 ebx, DWORD PTR [esi+eax]
  000b1	03 f8		 add	 edi, eax

; 617  : 
; 618  : 	if ( gObj[iIndex].m_cKalimaGateEnterCount >= MAX_KALIMA_ENTER )

  000b3	80 bb d0 03 00
	00 05		 cmp	 BYTE PTR [ebx+976], 5
  000ba	7c 54		 jl	 SHORT $LN18@KalimaGate

; 619  : 	{
; 620  : 		lpObjCallOwner->AccountID[MAX_ACCOUNT_LEN]=0;
; 621  : 		lpObjCallOwner->Name[MAX_ACCOUNT_LEN]=0;
; 622  : 
; 623  : 		LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished - Enter Count Over (SummonIndex:%d, EnterCount:%d)",
; 624  : 			lpObjCallOwner->AccountID, lpObjCallOwner->Name, iIndex, gObj[iIndex].m_cKalimaGateEnterCount);

  000bc	8b 5d 08	 mov	 ebx, DWORD PTR _iIndex$[ebp]
  000bf	c6 47 76 00	 mov	 BYTE PTR [edi+118], 0
  000c3	c6 87 81 00 00
	00 00		 mov	 BYTE PTR [edi+129], 0
  000ca	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000d0	0f be 94 0e d0
	03 00 00	 movsx	 edx, BYTE PTR [esi+ecx+976]
  000d8	52		 push	 edx
  000d9	53		 push	 ebx
  000da	8d 47 77	 lea	 eax, DWORD PTR [edi+119]
  000dd	50		 push	 eax
  000de	83 c7 6c	 add	 edi, 108		; 0000006cH
  000e1	57		 push	 edi
  000e2	68 00 00 00 00	 push	 OFFSET ??_C@_0FK@FFJOIHJB@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  000e7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 625  : 
; 626  : 		this->DeleteKalimaGate(iIndex, gObj[iIndex].m_RecallMon);

  000ed	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000f3	8b 94 0e 50 04
	00 00		 mov	 edx, DWORD PTR [esi+ecx+1104]
  000fa	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000fd	83 c4 14	 add	 esp, 20			; 00000014H
  00100	52		 push	 edx
  00101	53		 push	 ebx
  00102	e8 00 00 00 00	 call	 ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ; CKalimaGate::DeleteKalimaGate
  00107	5b		 pop	 ebx
  00108	5e		 pop	 esi
  00109	5f		 pop	 edi

; 690  : 										break;
; 691  : 								}
; 692  : 							}
; 693  : 						}
; 694  : 					}
; 695  : 				}
; 696  : 			}
; 697  : 		}
; 698  : 	}
; 699  : }

  0010a	8b e5		 mov	 esp, ebp
  0010c	5d		 pop	 ebp
  0010d	c2 04 00	 ret	 4
$LN18@KalimaGate:

; 627  : 
; 628  : 		return;
; 629  : 	}
; 630  : 
; 631  : 	DWORD dwTickCount = GetTickCount();

  00110	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 632  : 
; 633  : 	if ( dwTickCount > (lpObj->RegenTime+60000) )

  00116	8b 8b a8 03 00
	00		 mov	 ecx, DWORD PTR [ebx+936]
  0011c	81 c1 60 ea 00
	00		 add	 ecx, 60000		; 0000ea60H
  00122	3b c1		 cmp	 eax, ecx
  00124	76 4b		 jbe	 SHORT $LN17@KalimaGate

; 634  : 	{
; 635  : 		lpObjCallOwner->AccountID[MAX_ACCOUNT_LEN]=0;
; 636  : 		lpObjCallOwner->Name[MAX_ACCOUNT_LEN]=0;
; 637  : 
; 638  : 		LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished (NextMap) - Time Out (SummonIndex:%d, EnterCount:%d)",
; 639  : 			lpObjCallOwner->AccountID, lpObjCallOwner->Name, iIndex, gObj[iIndex].m_cKalimaGateEnterCount);

  00126	8b 4d 08	 mov	 ecx, DWORD PTR _iIndex$[ebp]
  00129	c6 47 76 00	 mov	 BYTE PTR [edi+118], 0
  0012d	c6 87 81 00 00
	00 00		 mov	 BYTE PTR [edi+129], 0
  00134	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0013a	0f be 84 16 d0
	03 00 00	 movsx	 eax, BYTE PTR [esi+edx+976]
  00142	50		 push	 eax
  00143	51		 push	 ecx
  00144	8d 57 77	 lea	 edx, DWORD PTR [edi+119]
  00147	52		 push	 edx
  00148	8d 47 6c	 lea	 eax, DWORD PTR [edi+108]
  0014b	50		 push	 eax
  0014c	68 00 00 00 00	 push	 OFFSET ??_C@_0FM@NAJNPHPN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  00151	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 640  : 
; 641  : 		this->DeleteKalimaGate(lpObj->m_Index, lpObjCallOwner->m_Index);

  00157	8b 0f		 mov	 ecx, DWORD PTR [edi]
  00159	8b 13		 mov	 edx, DWORD PTR [ebx]
  0015b	83 c4 14	 add	 esp, 20			; 00000014H
  0015e	51		 push	 ecx
  0015f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00162	52		 push	 edx
  00163	e8 00 00 00 00	 call	 ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ; CKalimaGate::DeleteKalimaGate
  00168	5b		 pop	 ebx
  00169	5e		 pop	 esi
  0016a	5f		 pop	 edi

; 690  : 										break;
; 691  : 								}
; 692  : 							}
; 693  : 						}
; 694  : 					}
; 695  : 				}
; 696  : 			}
; 697  : 		}
; 698  : 	}
; 699  : }

  0016b	8b e5		 mov	 esp, ebp
  0016d	5d		 pop	 ebp
  0016e	c2 04 00	 ret	 4
$LN17@KalimaGate:

; 642  : 
; 643  : 		return;
; 644  : 	}
; 645  : 
; 646  : 	if ( lpObj->VPCount < 1 )

  00171	83 bb 30 0c 00
	00 01		 cmp	 DWORD PTR [ebx+3120], 1
  00178	0f 8c 78 01 00
	00		 jl	 $LN34@KalimaGate

; 647  : 		return;
; 648  : 
; 649  : 	if ( lpObj->MapNumber < MAP_INDEX_KALIMA1 || lpObj->MapNumber > MAP_INDEX_KALIMA6-1 )

  0017e	8a 83 49 01 00
	00		 mov	 al, BYTE PTR [ebx+329]
  00184	3c 18		 cmp	 al, 24			; 00000018H
  00186	0f 82 6a 01 00
	00		 jb	 $LN34@KalimaGate
  0018c	3c 1c		 cmp	 al, 28			; 0000001cH
  0018e	0f 87 62 01 00
	00		 ja	 $LN34@KalimaGate

; 650  : 		return;
; 651  : 
; 652  : 	int tObjNum = -1;
; 653  : 
; 654  : 	for ( int i=0;i<MAX_VIEWPORT_MONSTER;i++)

  00194	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0019a	8d 83 2a 05 00
	00		 lea	 eax, DWORD PTR [ebx+1322]
  001a0	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _i$214341[ebp], 0
  001a7	89 45 fc	 mov	 DWORD PTR tv523[ebp], eax
  001aa	8d 9b 00 00 00
	00		 npad	 6
$LL32@KalimaGate:

; 655  : 	{
; 656  : 		tObjNum = lpObj->VpPlayer[i].number;

  001b0	8b 55 fc	 mov	 edx, DWORD PTR tv523[ebp]
  001b3	0f bf 32	 movsx	 esi, WORD PTR [edx]

; 657  : 
; 658  : 		if ( tObjNum >= 0 )

  001b6	85 f6		 test	 esi, esi
  001b8	0f 88 24 01 00
	00		 js	 $LN12@KalimaGate

; 659  : 		{
; 660  : 			if ( gObj[tObjNum].Type == OBJ_USER )

  001be	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  001c4	66 83 7c 0e 68
	01		 cmp	 WORD PTR [esi+ecx+104], 1
  001ca	0f 85 12 01 00
	00		 jne	 $LN12@KalimaGate

; 661  : 			{
; 662  : 				if ( gObj[tObjNum].Live )

  001d0	80 7c 0e 6a 00	 cmp	 BYTE PTR [esi+ecx+106], 0
  001d5	0f 84 07 01 00
	00		 je	 $LN12@KalimaGate

; 663  : 				{
; 664  : 					if ( abs(lpObj->Y - gObj[tObjNum].Y) < 2 )

  001db	0f bf 94 0e 46
	01 00 00	 movsx	 edx, WORD PTR [esi+ecx+326]
  001e3	0f bf 83 46 01
	00 00		 movsx	 eax, WORD PTR [ebx+326]
  001ea	2b c2		 sub	 eax, edx
  001ec	99		 cdq
  001ed	33 c2		 xor	 eax, edx
  001ef	2b c2		 sub	 eax, edx
  001f1	83 f8 02	 cmp	 eax, 2
  001f4	0f 8d e8 00 00
	00		 jge	 $LN12@KalimaGate

; 665  : 					{
; 666  : 						if ( abs(lpObj->X - gObj[tObjNum].X) < 2 )

  001fa	0f bf 94 0e 44
	01 00 00	 movsx	 edx, WORD PTR [esi+ecx+324]
  00202	0f bf 83 44 01
	00 00		 movsx	 eax, WORD PTR [ebx+324]
  00209	2b c2		 sub	 eax, edx
  0020b	99		 cdq
  0020c	33 c2		 xor	 eax, edx
  0020e	2b c2		 sub	 eax, edx
  00210	83 f8 02	 cmp	 eax, 2
  00213	0f 8d c9 00 00
	00		 jge	 $LN12@KalimaGate

; 667  : 						{
; 668  : 							if ( lpObj->m_RecallMon == tObjNum || (gObj[tObjNum].PartyNumber != -1 && lpObjCallOwner->PartyNumber == gObj[tObjNum].PartyNumber ))

  00219	8b 45 fc	 mov	 eax, DWORD PTR tv523[ebp]
  0021c	0f bf 10	 movsx	 edx, WORD PTR [eax]
  0021f	39 93 50 04 00
	00		 cmp	 DWORD PTR [ebx+1104], edx
  00225	74 1c		 je	 SHORT $LN4@KalimaGate
  00227	8b 84 0e 2c 04
	00 00		 mov	 eax, DWORD PTR [esi+ecx+1068]
  0022e	83 f8 ff	 cmp	 eax, -1
  00231	0f 84 ab 00 00
	00		 je	 $LN12@KalimaGate
  00237	39 87 2c 04 00
	00		 cmp	 DWORD PTR [edi+1068], eax
  0023d	0f 85 9f 00 00
	00		 jne	 $LN12@KalimaGate
$LN4@KalimaGate:

; 669  : 							{
; 670  : 								int iMoveMapLevel = lpObj->MapNumber - MAP_INDEX_KALIMA1+1;

  00243	0f b6 83 49 01
	00 00		 movzx	 eax, BYTE PTR [ebx+329]
  0024a	83 e8 17	 sub	 eax, 23			; 00000017H
  0024d	89 45 f4	 mov	 DWORD PTR _iMoveMapLevel$214352[ebp], eax

; 671  : 								int iGateNumber = g_iKalimaGateGateIndex[iMoveMapLevel];

  00250	8b 04 85 00 00
	00 00		 mov	 eax, DWORD PTR _g_iKalimaGateGateIndex[eax*4]

; 672  : 
; 673  : 								if ( !gObjMoveGate(tObjNum, iGateNumber))

  00257	50		 push	 eax
  00258	52		 push	 edx
  00259	e8 00 00 00 00	 call	 ?gObjMoveGate@@YAHHH@Z	; gObjMoveGate

; 674  : 								{
; 675  : 									LogAddTD("[Kalima] [%s][%s] - [%s][%s] move fail (MapNumber:%d)",
; 676  : 										lpObjCallOwner->AccountID, lpObjCallOwner->Name,
; 677  : 										gObj[tObjNum].AccountID, gObj[tObjNum].Name,
; 678  : 										lpObj->MapNumber);

  0025e	0f b6 8b 49 01
	00 00		 movzx	 ecx, BYTE PTR [ebx+329]
  00265	83 c4 08	 add	 esp, 8
  00268	85 c0		 test	 eax, eax
  0026a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0026f	51		 push	 ecx
  00270	75 28		 jne	 SHORT $LN3@KalimaGate
  00272	8d 54 06 77	 lea	 edx, DWORD PTR [esi+eax+119]
  00276	52		 push	 edx
  00277	8d 44 06 6c	 lea	 eax, DWORD PTR [esi+eax+108]
  0027b	50		 push	 eax
  0027c	8d 4f 77	 lea	 ecx, DWORD PTR [edi+119]
  0027f	51		 push	 ecx
  00280	8d 57 6c	 lea	 edx, DWORD PTR [edi+108]
  00283	52		 push	 edx
  00284	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@DFEBENJO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5mov@
  00289	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 679  : 								}
; 680  : 								else

  0028f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00295	83 c4 18	 add	 esp, 24			; 00000018H
  00298	eb 48		 jmp	 SHORT $LN12@KalimaGate
$LN3@KalimaGate:

; 681  : 								{
; 682  : 									LogAddTD("[Kalima] [%s][%s] - [%s][%s] Transported by Kalima Gate (NextMap) (SummonIndex:%d, GateNo.:%d, MapNumber:%d)",
; 683  : 										lpObjCallOwner->AccountID, lpObjCallOwner->Name,
; 684  : 										gObj[tObjNum].AccountID, gObj[tObjNum].Name,
; 685  : 										iIndex, iMoveMapLevel+1, lpObj->MapNumber);

  0029a	8b 55 f4	 mov	 edx, DWORD PTR _iMoveMapLevel$214352[ebp]
  0029d	8b 4d 08	 mov	 ecx, DWORD PTR _iIndex$[ebp]
  002a0	42		 inc	 edx
  002a1	52		 push	 edx
  002a2	51		 push	 ecx
  002a3	8d 54 06 77	 lea	 edx, DWORD PTR [esi+eax+119]
  002a7	52		 push	 edx
  002a8	8d 44 06 6c	 lea	 eax, DWORD PTR [esi+eax+108]
  002ac	50		 push	 eax
  002ad	8d 4f 77	 lea	 ecx, DWORD PTR [edi+119]
  002b0	51		 push	 ecx
  002b1	8d 57 6c	 lea	 edx, DWORD PTR [edi+108]
  002b4	52		 push	 edx
  002b5	68 00 00 00 00	 push	 OFFSET ??_C@_0GN@EGMLLHID@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@
  002ba	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 686  : 
; 687  : 									gObj[iIndex].m_cKalimaGateEnterCount++;

  002c0	8b 55 f0	 mov	 edx, DWORD PTR tv355[ebp]
  002c3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002c8	fe 84 02 d0 03
	00 00		 inc	 BYTE PTR [edx+eax+976]

; 688  : 
; 689  : 									if ( gObj[iIndex].m_cKalimaGateEnterCount >= MAX_KALIMA_ENTER )

  002cf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002d5	83 c4 20	 add	 esp, 32			; 00000020H
  002d8	80 bc 0a d0 03
	00 00 05	 cmp	 BYTE PTR [edx+ecx+976], 5
  002e0	7d 14		 jge	 SHORT $LN34@KalimaGate
$LN12@KalimaGate:

; 650  : 		return;
; 651  : 
; 652  : 	int tObjNum = -1;
; 653  : 
; 654  : 	for ( int i=0;i<MAX_VIEWPORT_MONSTER;i++)

  002e2	8b 45 f8	 mov	 eax, DWORD PTR _i$214341[ebp]
  002e5	83 45 fc 0c	 add	 DWORD PTR tv523[ebp], 12 ; 0000000cH
  002e9	40		 inc	 eax
  002ea	89 45 f8	 mov	 DWORD PTR _i$214341[ebp], eax
  002ed	83 f8 4b	 cmp	 eax, 75			; 0000004bH
  002f0	0f 8c ba fe ff
	ff		 jl	 $LL32@KalimaGate
$LN34@KalimaGate:
  002f6	5b		 pop	 ebx
$LN33@KalimaGate:
  002f7	5e		 pop	 esi
$LN27@KalimaGate:
  002f8	5f		 pop	 edi

; 690  : 										break;
; 691  : 								}
; 692  : 							}
; 693  : 						}
; 694  : 					}
; 695  : 				}
; 696  : 			}
; 697  : 		}
; 698  : 	}
; 699  : }

  002f9	8b e5		 mov	 esp, ebp
  002fb	5d		 pop	 ebp
  002fc	c2 04 00	 ret	 4
?KalimaGateAct2@CKalimaGate@@QAEXH@Z ENDP		; CKalimaGate::KalimaGateAct2
_TEXT	ENDS
PUBLIC	?GetKalimaGateLevel2@CKalimaGate@@QAEHH@Z	; CKalimaGate::GetKalimaGateLevel2
; Function compile flags: /Ogtp
;	COMDAT ?GetKalimaGateLevel2@CKalimaGate@@QAEHH@Z
_TEXT	SEGMENT
_iIndex$ = 8						; size = 4
?GetKalimaGateLevel2@CKalimaGate@@QAEHH@Z PROC		; CKalimaGate::GetKalimaGateLevel2, COMDAT
; _this$ = ecx

; 705  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 706  : 	if ( gObj[iIndex].Class == CLASS_MAGUMSA 
; 707  : #ifdef MONK
; 708  : 		|| gObj[iIndex].Class == CLASS_MONK
; 709  : #endif
; 710  : 		|| gObj[iIndex].Class == CLASS_DARKLORD )	// DarkLord and MagicGLadiaro

  00003	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00006	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0000c	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00012	03 c8		 add	 ecx, eax
  00014	0f b7 81 b8 00
	00 00		 movzx	 eax, WORD PTR [ecx+184]
  0001b	83 f8 03	 cmp	 eax, 3
  0001e	74 34		 je	 SHORT $LN12@GetKalimaG@2
  00020	83 f8 06	 cmp	 eax, 6
  00023	74 2f		 je	 SHORT $LN12@GetKalimaG@2
  00025	83 f8 04	 cmp	 eax, 4
  00028	74 2a		 je	 SHORT $LN12@GetKalimaG@2

; 717  : 				{
; 718  : 					return i;
; 719  : 				}
; 720  : 			}
; 721  : 		}
; 722  : 	}
; 723  : 	else
; 724  : 	{
; 725  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  0002a	0f bf 91 be 00
	00 00		 movsx	 edx, WORD PTR [ecx+190]
  00031	33 c0		 xor	 eax, eax
  00033	b9 04 00 00 00	 mov	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+4
$LL5@GetKalimaG@2:

; 726  : 		{
; 727  : 			if ( gObj[iIndex].Level >= g_sttKALIMAGATE_LEVEL[i].iLOWER_BOUND )

  00038	3b 51 fc	 cmp	 edx, DWORD PTR [ecx-4]
  0003b	7c 04		 jl	 SHORT $LN4@GetKalimaG@2

; 728  : 			{
; 729  : 				if ( gObj[iIndex].Level <= g_sttKALIMAGATE_LEVEL[i].iUPPER_BOUND )

  0003d	3b 11		 cmp	 edx, DWORD PTR [ecx]
  0003f	7e 39		 jle	 SHORT $LN14@GetKalimaG@2
$LN4@GetKalimaG@2:

; 717  : 				{
; 718  : 					return i;
; 719  : 				}
; 720  : 			}
; 721  : 		}
; 722  : 	}
; 723  : 	else
; 724  : 	{
; 725  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  00041	83 c1 10	 add	 ecx, 16			; 00000010H
  00044	40		 inc	 eax
  00045	81 f9 74 00 00
	00		 cmp	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+116
  0004b	7c eb		 jl	 SHORT $LL5@GetKalimaG@2

; 730  : 				{
; 731  : 					return i;
; 732  : 				}
; 733  : 			}
; 734  : 		}
; 735  : 	}
; 736  : 	return -1;

  0004d	83 c8 ff	 or	 eax, -1

; 737  : }

  00050	5d		 pop	 ebp
  00051	c2 04 00	 ret	 4
$LN12@GetKalimaG@2:

; 711  : 	{
; 712  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  00054	0f bf 91 be 00
	00 00		 movsx	 edx, WORD PTR [ecx+190]
  0005b	33 c0		 xor	 eax, eax
  0005d	b9 0c 00 00 00	 mov	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+12
$LL11@GetKalimaG@2:

; 713  : 		{
; 714  : 			if ( gObj[iIndex].Level >= g_sttKALIMAGATE_LEVEL[i].iLOWER_BOUND_MAGUMSA )

  00062	3b 51 fc	 cmp	 edx, DWORD PTR [ecx-4]
  00065	7c 04		 jl	 SHORT $LN10@GetKalimaG@2

; 715  : 			{
; 716  : 				if ( gObj[iIndex].Level <= g_sttKALIMAGATE_LEVEL[i].iUPPER_BOUND_MAGUMSA )

  00067	3b 11		 cmp	 edx, DWORD PTR [ecx]
  00069	7e 0f		 jle	 SHORT $LN14@GetKalimaG@2
$LN10@GetKalimaG@2:

; 711  : 	{
; 712  : 		for ( int i =0;i<KALIMA_FLOORS;i++)

  0006b	83 c1 10	 add	 ecx, 16			; 00000010H
  0006e	40		 inc	 eax
  0006f	81 f9 7c 00 00
	00		 cmp	 ecx, OFFSET _g_sttKALIMAGATE_LEVEL+124
  00075	7c eb		 jl	 SHORT $LL11@GetKalimaG@2

; 730  : 				{
; 731  : 					return i;
; 732  : 				}
; 733  : 			}
; 734  : 		}
; 735  : 	}
; 736  : 	return -1;

  00077	83 c8 ff	 or	 eax, -1
$LN14@GetKalimaG@2:

; 737  : }

  0007a	5d		 pop	 ebp
  0007b	c2 04 00	 ret	 4
?GetKalimaGateLevel2@CKalimaGate@@QAEHH@Z ENDP		; CKalimaGate::GetKalimaGateLevel2
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCKalimaGate@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCKalimaGate@@UAEPAXI@Z PROC				; CKalimaGate::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CKalimaGate@@UAE@XZ	; CKalimaGate::~CKalimaGate
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCKalimaGate@@UAEPAXI@Z ENDP				; CKalimaGate::`scalar deleting destructor'
_TEXT	ENDS
PUBLIC	??_C@_0JE@GBKKIBCM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@ ; `string'
PUBLIC	??_C@_0EK@OMOPGPDM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ ; `string'
PUBLIC	??_C@_0FM@OJLJJEMN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0GD@BNDCCFJF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0FE@NNCGKIKM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0FM@IGFLMFGN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0EN@GPHOBJAE@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ ; `string'
PUBLIC	??_C@_0CM@PDFGAPNC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@ ; `string'
PUBLIC	?CreateKalimaGate@CKalimaGate@@QAEHHEEE@Z	; CKalimaGate::CreateKalimaGate
;	COMDAT ??_C@_0JE@GBKKIBCM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@
CONST	SEGMENT
??_C@_0JE@GBKKIBCM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@ DB '['
	DB	'Kalima] [%s][%s] Create Kalima Gate Successfuly (Live:%d, Gat'
	DB	'eTick:%u, DieRegen:%d, Map:%d, X:%d, Y:%d, SummonIndex:%d, Ow'
	DB	'nerIndex:%d, GateNo.:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EK@OMOPGPDM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
CONST	SEGMENT
??_C@_0EK@OMOPGPDM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ DB '['
	DB	'Kalima] [%s][%s] Kalima Gate Vanished - lpMATTR == NULL (Summ'
	DB	'onIndex:%d)', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0FM@OJLJJEMN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0FM@OJLJJEMN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate - Uable to Summ'
	DB	'on in this Map (MapNumber:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0GD@BNDCCFJF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0GD@BNDCCFJF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate - Failed to get'
	DB	' Location (MapNumber:%d, X:%d, Y:%d)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0FE@NNCGKIKM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0FE@NNCGKIKM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate - Already Have '
	DB	'Gate (SummonIndex:%d)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0FM@IGFLMFGN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0FM@IGFLMFGN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate - Called in Saf'
	DB	'tey Area (Map:%d, X:%d, Y:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@GPHOBJAE@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
CONST	SEGMENT
??_C@_0EN@GPHOBJAE@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@ DB '['
	DB	'Kalima] [%s][%s] Failed to Summon Kalima Gate - Gate Level Ch'
	DB	'eck Error : %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CM@PDFGAPNC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@
CONST	SEGMENT
??_C@_0CM@PDFGAPNC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@ DB '['
	DB	'Kalima] [%s][%s] Try to Create Kalima Gate', 00H ; `string'
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__sehtable$?CreateKalimaGate@CKalimaGate@@QAEHHEEE@Z DD 0fffffffeH
	DD	00H
	DD	0ffffffccH
	DD	00H
	DD	0fffffffeH
	DD	00H
	DD	FLAT:$LN33@CreateKali@2
; Function compile flags: /Ogtp
xdata$x	ENDS
;	COMDAT ?CreateKalimaGate@CKalimaGate@@QAEHHEEE@Z
_TEXT	SEGMENT
tv615 = -36						; size = 4
_this$ = -32						; size = 4
_iMapNumber$214127 = -28				; size = 4
__$SEHRec$ = -24					; size = 24
_iIndex$ = 8						; size = 4
_btLevel$ = 12						; size = 1
_cX$214130 = 15						; size = 1
_cTX$ = 16						; size = 1
_cY$214131 = 19						; size = 1
_lpMATTR$214167 = 20					; size = 4
_cTY$ = 20						; size = 1
?CreateKalimaGate@CKalimaGate@@QAEHHEEE@Z PROC		; CKalimaGate::CreateKalimaGate, COMDAT
; _this$ = ecx

; 26   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a fe		 push	 -2			; fffffffeH
  00005	68 00 00 00 00	 push	 OFFSET __sehtable$?CreateKalimaGate@CKalimaGate@@QAEHHEEE@Z
  0000a	68 00 00 00 00	 push	 OFFSET __except_handler4
  0000f	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00015	50		 push	 eax
  00016	83 ec 14	 sub	 esp, 20			; 00000014H
  00019	53		 push	 ebx
  0001a	56		 push	 esi
  0001b	57		 push	 edi
  0001c	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00021	31 45 f8	 xor	 DWORD PTR __$SEHRec$[ebp+16], eax
  00024	33 c5		 xor	 eax, ebp
  00026	50		 push	 eax
  00027	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  0002a	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00030	8b d9		 mov	 ebx, ecx
  00032	89 5d e0	 mov	 DWORD PTR _this$[ebp], ebx

; 27   : 	BOOL bKalimaGateCreateSucceed=FALSE;
; 28   : 	int iMonsterIndex=-1;
; 29   : 
; 30   : 	
; 31   : 	EnterCriticalSection(&this->m_critKalimaGate );

  00035	8d 43 04	 lea	 eax, DWORD PTR [ebx+4]
  00038	50		 push	 eax
  00039	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EnterCriticalSection@4

; 32   : 	
; 33   : 	__try

  0003f	9b		 fwait
  00040	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$SEHRec$[ebp+20], 0

; 34   : 	{
; 35   : 		int iKalimaGateLevel;
; 36   : 		int iMapNumber;
; 37   : 		BYTE btMapAttr;
; 38   : 		int iMonsterType;
; 39   : 		BYTE cX;
; 40   : 		BYTE cY;
; 41   : 
; 42   : 		if ( gObjIsConnected(iIndex) == PLAYER_EMPTY )

  00047	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]
  0004a	56		 push	 esi
  0004b	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00050	83 c4 04	 add	 esp, 4
  00053	85 c0		 test	 eax, eax
  00055	75 2a		 jne	 SHORT $LN14@CreateKali@2
$LN44@CreateKali@2:

; 43   : 		{
; 44   : 			return false;

  00057	6a fe		 push	 -2			; fffffffeH
  00059	9b		 fwait
  0005a	8d 4d f0	 lea	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0005d	51		 push	 ecx
  0005e	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00063	e8 00 00 00 00	 call	 __local_unwind4
  00068	83 c4 0c	 add	 esp, 12			; 0000000cH
  0006b	33 c0		 xor	 eax, eax

; 192  : }

  0006d	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00070	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00077	59		 pop	 ecx
  00078	5f		 pop	 edi
  00079	5e		 pop	 esi
  0007a	5b		 pop	 ebx
  0007b	8b e5		 mov	 esp, ebp
  0007d	5d		 pop	 ebp
  0007e	c2 10 00	 ret	 16			; 00000010H
$LN14@CreateKali@2:

; 45   : 		}
; 46   : 
; 47   : 		LogAddTD("[Kalima] [%s][%s] Try to Create Kalima Gate", gObj[iIndex].AccountID, gObj[iIndex].Name);

  00081	8b fe		 mov	 edi, esi
  00083	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  00089	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0008e	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  00092	52		 push	 edx
  00093	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  00097	50		 push	 eax
  00098	68 00 00 00 00	 push	 OFFSET ??_C@_0CM@PDFGAPNC@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Try?5to?5Create?5@
  0009d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000a3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 48   : 		iKalimaGateLevel = this->GetKalimaGateLevel(iIndex);

  000a6	56		 push	 esi
  000a7	8b cb		 mov	 ecx, ebx
  000a9	e8 00 00 00 00	 call	 ?GetKalimaGateLevel@CKalimaGate@@AAEHH@Z ; CKalimaGate::GetKalimaGateLevel

; 49   : 
; 50   : 		if ( iKalimaGateLevel < btLevel-1 )

  000ae	0f b6 75 0c	 movzx	 esi, BYTE PTR _btLevel$[ebp]
  000b2	4e		 dec	 esi
  000b3	89 75 dc	 mov	 DWORD PTR tv615[ebp], esi
  000b6	3b c6		 cmp	 eax, esi

; 51   : 		{
; 52   : 			return false;

  000b8	7c 9d		 jl	 SHORT $LN44@CreateKali@2

; 53   : 		}
; 54   : 
; 55   : 		iKalimaGateLevel = btLevel-1;
; 56   : 
; 57   : 		if (  DS_MAP_RANGE(gObj[iIndex].MapNumber) )

  000ba	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000c0	8a 84 17 49 01
	00 00		 mov	 al, BYTE PTR [edi+edx+329]
  000c7	3c 09		 cmp	 al, 9
  000c9	74 0b		 je	 SHORT $LN37@CreateKali@2
  000cb	33 c9		 xor	 ecx, ecx
  000cd	3c 20		 cmp	 al, 32			; 00000020H
  000cf	0f 94 c1	 sete	 cl
  000d2	85 c9		 test	 ecx, ecx
  000d4	74 2a		 je	 SHORT $LN12@CreateKali@2
$LN37@CreateKali@2:

; 58   : 		{
; 59   : 			return false;

  000d6	6a fe		 push	 -2			; fffffffeH
  000d8	9b		 fwait
  000d9	8d 55 f0	 lea	 edx, DWORD PTR __$SEHRec$[ebp+8]
  000dc	52		 push	 edx
  000dd	68 00 00 00 00	 push	 OFFSET ___security_cookie
  000e2	e8 00 00 00 00	 call	 __local_unwind4
  000e7	83 c4 0c	 add	 esp, 12			; 0000000cH
  000ea	33 c0		 xor	 eax, eax

; 192  : }

  000ec	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  000ef	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  000f6	59		 pop	 ecx
  000f7	5f		 pop	 edi
  000f8	5e		 pop	 esi
  000f9	5b		 pop	 ebx
  000fa	8b e5		 mov	 esp, ebp
  000fc	5d		 pop	 ebp
  000fd	c2 10 00	 ret	 16			; 00000010H
$LN12@CreateKali@2:

; 60   : 		}
; 61   : 
; 62   : 		if ( BC_MAP_RANGE(gObj[iIndex].MapNumber) )

  00100	3c 34		 cmp	 al, 52			; 00000034H
  00102	74 d2		 je	 SHORT $LN37@CreateKali@2
  00104	3c 0b		 cmp	 al, 11			; 0000000bH
  00106	72 0c		 jb	 SHORT $LN11@CreateKali@2
  00108	b9 11 00 00 00	 mov	 ecx, 17			; 00000011H
  0010d	3a c8		 cmp	 cl, al
  0010f	1b c9		 sbb	 ecx, ecx
  00111	41		 inc	 ecx

; 63   : 		{
; 64   : 			return false;

  00112	75 c2		 jne	 SHORT $LN37@CreateKali@2
$LN11@CreateKali@2:

; 65   : 		}
; 66   : 
; 67   : 		if ( CC_MAP_RANGE(gObj[iIndex].MapNumber) )

  00114	3c 35		 cmp	 al, 53			; 00000035H
  00116	74 be		 je	 SHORT $LN37@CreateKali@2
  00118	3c 12		 cmp	 al, 18			; 00000012H
  0011a	72 0c		 jb	 SHORT $LN10@CreateKali@2
  0011c	b9 17 00 00 00	 mov	 ecx, 23			; 00000017H
  00121	3a c8		 cmp	 cl, al
  00123	1b c9		 sbb	 ecx, ecx
  00125	41		 inc	 ecx

; 68   : 		{
; 69   : 			return false;

  00126	75 ae		 jne	 SHORT $LN37@CreateKali@2
$LN10@CreateKali@2:

; 70   : 		}
; 71   : 
; 72   : 		if ( IT_MAP_RANGE(gObj[iIndex].MapNumber) )//4.5

  00128	3c 2d		 cmp	 al, 45			; 0000002dH
  0012a	72 0c		 jb	 SHORT $LN9@CreateKali@2
  0012c	b9 32 00 00 00	 mov	 ecx, 50			; 00000032H
  00131	3a c8		 cmp	 cl, al
  00133	1b c9		 sbb	 ecx, ecx
  00135	41		 inc	 ecx

; 73   : 		{
; 74   : 			return false;

  00136	75 9e		 jne	 SHORT $LN37@CreateKali@2
$LN9@CreateKali@2:

; 75   : 		}
; 76   : #ifdef IMPERIAL_CONFLICT_NEW
; 77   : 		if( CImperialGuardian::IsEventMap(gObj[iIndex].MapNumber) )
; 78   : 		{
; 79   : 			return false;
; 80   : 		}
; 81   : #endif
; 82   : 
; 83   : 		if ( KALIMA_FLOOR_RANGE(iKalimaGateLevel)== FALSE )

  00138	85 f6		 test	 esi, esi
  0013a	78 0c		 js	 SHORT $LN40@CreateKali@2
  0013c	33 c9		 xor	 ecx, ecx
  0013e	83 fe 06	 cmp	 esi, 6
  00141	0f 9e c1	 setle	 cl
  00144	85 c9		 test	 ecx, ecx
  00146	75 41		 jne	 SHORT $LN8@CreateKali@2
$LN40@CreateKali@2:

; 84   : 		{
; 85   : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate - Gate Level Check Error : %d",
; 86   : 				gObj[iIndex].AccountID, gObj[iIndex].Name, iKalimaGateLevel+1);

  00148	46		 inc	 esi
  00149	56		 push	 esi
  0014a	8d 44 17 77	 lea	 eax, DWORD PTR [edi+edx+119]
  0014e	50		 push	 eax
  0014f	8d 4c 17 6c	 lea	 ecx, DWORD PTR [edi+edx+108]
  00153	51		 push	 ecx
  00154	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@GPHOBJAE@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  00159	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 87   : 			return false;

  0015f	6a fe		 push	 -2			; fffffffeH
  00161	9b		 fwait
  00162	8d 55 f0	 lea	 edx, DWORD PTR __$SEHRec$[ebp+8]
  00165	52		 push	 edx
  00166	68 00 00 00 00	 push	 OFFSET ___security_cookie
  0016b	e8 00 00 00 00	 call	 __local_unwind4
  00170	83 c4 1c	 add	 esp, 28			; 0000001cH
  00173	33 c0		 xor	 eax, eax

; 192  : }

  00175	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00178	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0017f	59		 pop	 ecx
  00180	5f		 pop	 edi
  00181	5e		 pop	 esi
  00182	5b		 pop	 ebx
  00183	8b e5		 mov	 esp, ebp
  00185	5d		 pop	 ebp
  00186	c2 10 00	 ret	 16			; 00000010H
$LN8@CreateKali@2:

; 88   : 		}
; 89   : 
; 90   : 		iMapNumber = gObj[iIndex].MapNumber;

  00189	0f b6 c0	 movzx	 eax, al
  0018c	89 45 e4	 mov	 DWORD PTR _iMapNumber$214127[ebp], eax

; 91   : 
; 92   : 		btMapAttr = MapC[iMapNumber].GetAttr(gObj[iIndex].X, gObj[iIndex].Y);

  0018f	69 c0 48 3d 05
	00		 imul	 eax, 343368		; 00053d48H
  00195	8d 98 00 00 00
	00		 lea	 ebx, DWORD PTR ?MapC@@3PAVMapClass@@A[eax]
  0019b	0f bf 84 17 46
	01 00 00	 movsx	 eax, WORD PTR [edi+edx+326]
  001a3	50		 push	 eax
  001a4	0f bf 8c 17 44
	01 00 00	 movsx	 ecx, WORD PTR [edi+edx+324]
  001ac	51		 push	 ecx
  001ad	8b cb		 mov	 ecx, ebx
  001af	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr

; 93   : 
; 94   : 		if ( btMapAttr &1 != 0 )

  001b4	a8 01		 test	 al, 1
  001b6	74 5f		 je	 SHORT $LN7@CreateKali@2

; 95   : 		{
; 96   : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate - Called in Saftey Area (Map:%d, X:%d, Y:%d)",
; 97   : 				gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iIndex].MapNumber,
; 98   : 				gObj[iIndex].X, gObj[iIndex].Y);

  001b8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001bd	0f bf 94 07 46
	01 00 00	 movsx	 edx, WORD PTR [edi+eax+326]
  001c5	52		 push	 edx
  001c6	0f bf 8c 07 44
	01 00 00	 movsx	 ecx, WORD PTR [edi+eax+324]
  001ce	51		 push	 ecx
  001cf	0f b6 94 07 49
	01 00 00	 movzx	 edx, BYTE PTR [edi+eax+329]
  001d7	52		 push	 edx
  001d8	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  001dc	51		 push	 ecx
  001dd	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  001e1	52		 push	 edx
  001e2	68 00 00 00 00	 push	 OFFSET ??_C@_0FM@IGFLMFGN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  001e7	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 99   : 			return false;

  001ed	6a fe		 push	 -2			; fffffffeH
  001ef	9b		 fwait
  001f0	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  001f3	50		 push	 eax
  001f4	68 00 00 00 00	 push	 OFFSET ___security_cookie
  001f9	e8 00 00 00 00	 call	 __local_unwind4
  001fe	83 c4 24	 add	 esp, 36			; 00000024H
  00201	33 c0		 xor	 eax, eax

; 192  : }

  00203	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00206	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0020d	59		 pop	 ecx
  0020e	5f		 pop	 edi
  0020f	5e		 pop	 esi
  00210	5b		 pop	 ebx
  00211	8b e5		 mov	 esp, ebp
  00213	5d		 pop	 ebp
  00214	c2 10 00	 ret	 16			; 00000010H
$LN7@CreateKali@2:

; 100  : 		}
; 101  : 
; 102  : 		if ( gObj[iIndex].m_cKalimaGateExist == TRUE )

  00217	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0021d	80 bc 0f ca 03
	00 00 01	 cmp	 BYTE PTR [edi+ecx+970], 1
  00225	75 67		 jne	 SHORT $LN6@CreateKali@2

; 103  : 		{
; 104  : 			GCServerMsgStringSend(lMsg.Get( MSGGET( 4, 224)), iIndex, 1);

  00227	6a 01		 push	 1
  00229	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  0022c	52		 push	 edx
  0022d	68 e0 04 00 00	 push	 1248			; 000004e0H
  00232	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00237	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0023c	50		 push	 eax
  0023d	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend

; 105  : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate - Already Have Gate (SummonIndex:%d)",
; 106  : 				gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iIndex].m_iKalimaGateIndex);

  00242	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00247	8b 8c 07 cc 03
	00 00		 mov	 ecx, DWORD PTR [edi+eax+972]
  0024e	51		 push	 ecx
  0024f	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  00253	52		 push	 edx
  00254	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  00258	50		 push	 eax
  00259	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@NNCGKIKM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  0025e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 107  : 			return false;

  00264	6a fe		 push	 -2			; fffffffeH
  00266	9b		 fwait
  00267	8d 4d f0	 lea	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0026a	51		 push	 ecx
  0026b	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00270	e8 00 00 00 00	 call	 __local_unwind4
  00275	83 c4 28	 add	 esp, 40			; 00000028H
  00278	33 c0		 xor	 eax, eax

; 192  : }

  0027a	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0027d	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00284	59		 pop	 ecx
  00285	5f		 pop	 edi
  00286	5e		 pop	 esi
  00287	5b		 pop	 ebx
  00288	8b e5		 mov	 esp, ebp
  0028a	5d		 pop	 ebp
  0028b	c2 10 00	 ret	 16			; 00000010H
$LN6@CreateKali@2:

; 108  : 		}
; 109  : 
; 110  : 		iMonsterType = iKalimaGateLevel+152;

  0028e	81 c6 98 00 00
	00		 add	 esi, 152		; 00000098H

; 111  : 		cX = cTX;

  00294	8a 45 10	 mov	 al, BYTE PTR _cTX$[ebp]
  00297	88 45 0f	 mov	 BYTE PTR _cX$214130[ebp], al

; 112  : 		cY = cTY;

  0029a	8a 4d 14	 mov	 cl, BYTE PTR _cTY$[ebp]
  0029d	88 4d 13	 mov	 BYTE PTR _cY$214131[ebp], cl

; 113  : 
; 114  : 		btMapAttr = MapC[iMapNumber].GetAttr(cX, cY);

  002a0	0f b6 d1	 movzx	 edx, cl
  002a3	52		 push	 edx
  002a4	0f b6 c0	 movzx	 eax, al
  002a7	50		 push	 eax
  002a8	8b cb		 mov	 ecx, ebx
  002aa	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr

; 115  : 
; 116  : 		if ( btMapAttr != 0 )

  002af	84 c0		 test	 al, al
  002b1	74 6f		 je	 SHORT $LN4@CreateKali@2

; 117  : 		{
; 118  : 			if (this->GetRandomLocation(iMapNumber, cX, cY) == 0)

  002b3	8d 4d 13	 lea	 ecx, DWORD PTR _cY$214131[ebp]
  002b6	51		 push	 ecx
  002b7	8d 55 0f	 lea	 edx, DWORD PTR _cX$214130[ebp]
  002ba	52		 push	 edx
  002bb	8b 45 e4	 mov	 eax, DWORD PTR _iMapNumber$214127[ebp]
  002be	50		 push	 eax
  002bf	8b 4d e0	 mov	 ecx, DWORD PTR _this$[ebp]
  002c2	e8 00 00 00 00	 call	 ?GetRandomLocation@CKalimaGate@@AAEHHAAE0@Z ; CKalimaGate::GetRandomLocation
  002c7	85 c0		 test	 eax, eax
  002c9	75 57		 jne	 SHORT $LN4@CreateKali@2

; 119  : 			{
; 120  : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate - Failed to get Location (MapNumber:%d, X:%d, Y:%d)",
; 121  : 				gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iIndex].MapNumber, cX, cY);

  002cb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002d0	0f b6 4d 13	 movzx	 ecx, BYTE PTR _cY$214131[ebp]
  002d4	51		 push	 ecx
  002d5	0f b6 55 0f	 movzx	 edx, BYTE PTR _cX$214130[ebp]
  002d9	52		 push	 edx
  002da	0f b6 8c 07 49
	01 00 00	 movzx	 ecx, BYTE PTR [edi+eax+329]
  002e2	51		 push	 ecx
  002e3	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  002e7	52		 push	 edx
  002e8	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  002ec	50		 push	 eax
  002ed	68 00 00 00 00	 push	 OFFSET ??_C@_0GD@BNDCCFJF@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  002f2	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 122  : 			return false;

  002f8	6a fe		 push	 -2			; fffffffeH
  002fa	9b		 fwait
  002fb	8d 4d f0	 lea	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  002fe	51		 push	 ecx
  002ff	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00304	e8 00 00 00 00	 call	 __local_unwind4
  00309	83 c4 24	 add	 esp, 36			; 00000024H
  0030c	33 c0		 xor	 eax, eax

; 192  : }

  0030e	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00311	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00318	59		 pop	 ecx
  00319	5f		 pop	 edi
  0031a	5e		 pop	 esi
  0031b	5b		 pop	 ebx
  0031c	8b e5		 mov	 esp, ebp
  0031e	5d		 pop	 ebp
  0031f	c2 10 00	 ret	 16			; 00000010H
$LN4@CreateKali@2:

; 123  : 			}
; 124  : 		}
; 125  : 
; 126  : 		if ( gObj[iIndex].MapNumber == 10 )

  00322	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00327	80 bc 07 49 01
	00 00 0a	 cmp	 BYTE PTR [edi+eax+329], 10 ; 0000000aH
  0032f	75 41		 jne	 SHORT $LN3@CreateKali@2

; 127  : 		{
; 128  : 			LogAddTD("[Kalima] [%s][%s] Failed to Summon Kalima Gate - Uable to Summon in this Map (MapNumber:%d)",
; 129  : 				gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iIndex].MapNumber);

  00331	6a 0a		 push	 10			; 0000000aH
  00333	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  00337	52		 push	 edx
  00338	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  0033c	50		 push	 eax
  0033d	68 00 00 00 00	 push	 OFFSET ??_C@_0FM@OJLJJEMN@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Failed?5to?5Summ@
  00342	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 130  : 			return false;

  00348	6a fe		 push	 -2			; fffffffeH
  0034a	9b		 fwait
  0034b	8d 4d f0	 lea	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  0034e	51		 push	 ecx
  0034f	68 00 00 00 00	 push	 OFFSET ___security_cookie
  00354	e8 00 00 00 00	 call	 __local_unwind4
  00359	83 c4 1c	 add	 esp, 28			; 0000001cH
  0035c	33 c0		 xor	 eax, eax

; 192  : }

  0035e	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00361	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00368	59		 pop	 ecx
  00369	5f		 pop	 edi
  0036a	5e		 pop	 esi
  0036b	5b		 pop	 ebx
  0036c	8b e5		 mov	 esp, ebp
  0036e	5d		 pop	 ebp
  0036f	c2 10 00	 ret	 16			; 00000010H
$LN3@CreateKali@2:

; 131  : 		}
; 132  : 
; 133  : 		iMonsterIndex = gObjAddMonster(iMapNumber);

  00372	8b 55 e4	 mov	 edx, DWORD PTR _iMapNumber$214127[ebp]
  00375	52		 push	 edx
  00376	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  0037b	83 c4 04	 add	 esp, 4
  0037e	0f bf d8	 movsx	 ebx, ax

; 134  : 
; 135  : 		if ( iMonsterIndex >= 0 )

  00381	85 db		 test	 ebx, ebx
  00383	0f 88 64 02 00
	00		 js	 $LN2@CreateKali@2

; 136  : 		{
; 137  : 			LPMONSTER_ATTRIBUTE lpMATTR = gMAttr.GetAttr(iMonsterType);

  00389	56		 push	 esi
  0038a	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMAttr@@3VCMonsterAttr@@A ; gMAttr
  0038f	e8 00 00 00 00	 call	 ?GetAttr@CMonsterAttr@@QAEPAUMONSTER_ATTRIBUTE@@H@Z ; CMonsterAttr::GetAttr
  00394	89 45 14	 mov	 DWORD PTR _lpMATTR$214167[ebp], eax

; 138  : 			
; 139  : 			if ( lpMATTR == NULL )

  00397	85 c0		 test	 eax, eax
  00399	75 4b		 jne	 SHORT $LN1@CreateKali@2

; 140  : 			{
; 141  : 				gObjDel(iMonsterIndex);

  0039b	53		 push	 ebx
  0039c	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel

; 142  : 				LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished - lpMATTR == NULL (SummonIndex:%d)",
; 143  : 					gObj[iIndex].AccountID, gObj[iIndex].Name, iMonsterIndex);

  003a1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003a6	53		 push	 ebx
  003a7	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  003ab	51		 push	 ecx
  003ac	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  003b0	52		 push	 edx
  003b1	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@OMOPGPDM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  003b6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 144  : 				return false;

  003bc	6a fe		 push	 -2			; fffffffeH
  003be	9b		 fwait
  003bf	8d 45 f0	 lea	 eax, DWORD PTR __$SEHRec$[ebp+8]
  003c2	50		 push	 eax
  003c3	68 00 00 00 00	 push	 OFFSET ___security_cookie
  003c8	e8 00 00 00 00	 call	 __local_unwind4
  003cd	83 c4 20	 add	 esp, 32			; 00000020H
  003d0	33 c0		 xor	 eax, eax

; 192  : }

  003d2	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  003d5	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  003dc	59		 pop	 ecx
  003dd	5f		 pop	 edi
  003de	5e		 pop	 esi
  003df	5b		 pop	 ebx
  003e0	8b e5		 mov	 esp, ebp
  003e2	5d		 pop	 ebp
  003e3	c2 10 00	 ret	 16			; 00000010H
$LN1@CreateKali@2:

; 145  : 			}
; 146  : 
; 147  : 			gObjSetMonster(iMonsterIndex, iMonsterType);

  003e6	56		 push	 esi
  003e7	53		 push	 ebx
  003e8	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  003ed	83 c4 08	 add	 esp, 8

; 148  : 			gObj[iMonsterIndex].Live = TRUE;

  003f0	8b f3		 mov	 esi, ebx
  003f2	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  003f8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  003fe	c6 44 0e 6a 01	 mov	 BYTE PTR [esi+ecx+106], 1

; 149  : 			gObj[iMonsterIndex].Life = 1000.0;

  00403	d9 05 00 00 00
	00		 fld	 DWORD PTR __real@447a0000
  00409	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0040f	d9 94 16 fc 00
	00 00		 fst	 DWORD PTR [esi+edx+252]

; 150  : 			gObj[iMonsterIndex].MaxLife = 1000.0;

  00416	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0041b	d9 9c 06 00 01
	00 00		 fstp	 DWORD PTR [esi+eax+256]

; 151  : 			gObj[iMonsterIndex].m_PosNum = -1;

  00422	83 c9 ff	 or	 ecx, -1
  00425	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0042b	66 89 8c 16 b0
	03 00 00	 mov	 WORD PTR [esi+edx+944], cx

; 152  : 			gObj[iMonsterIndex].X = cX;

  00433	0f b6 45 0f	 movzx	 eax, BYTE PTR _cX$214130[ebp]
  00437	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0043d	66 89 84 0e 44
	01 00 00	 mov	 WORD PTR [esi+ecx+324], ax

; 153  : 			gObj[iMonsterIndex].Y = cY;

  00445	0f b6 4d 13	 movzx	 ecx, BYTE PTR _cY$214131[ebp]
  00449	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0044f	66 89 8c 16 46
	01 00 00	 mov	 WORD PTR [esi+edx+326], cx

; 154  : 			gObj[iMonsterIndex].MTX = cX;

  00457	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0045d	66 89 84 16 80
	01 00 00	 mov	 WORD PTR [esi+edx+384], ax

; 155  : 			gObj[iMonsterIndex].MTY = cY;

  00465	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0046b	66 89 8c 16 82
	01 00 00	 mov	 WORD PTR [esi+edx+386], cx

; 156  : 			gObj[iMonsterIndex].TX = cX;

  00473	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00479	66 89 84 16 7c
	01 00 00	 mov	 WORD PTR [esi+edx+380], ax

; 157  : 			gObj[iMonsterIndex].TY = cY;

  00481	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00487	66 89 8c 16 7e
	01 00 00	 mov	 WORD PTR [esi+edx+382], cx

; 158  : 			gObj[iMonsterIndex].m_OldX = cX;

  0048f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00495	66 89 84 16 78
	01 00 00	 mov	 WORD PTR [esi+edx+376], ax

; 159  : 			gObj[iMonsterIndex].m_OldY = cY;

  0049d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004a2	66 89 8c 06 7a
	01 00 00	 mov	 WORD PTR [esi+eax+378], cx

; 160  : 			gObj[iMonsterIndex].StartX = cX;

  004aa	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004b0	8a 55 0f	 mov	 dl, BYTE PTR _cX$214130[ebp]
  004b3	88 94 0e 76 01
	00 00		 mov	 BYTE PTR [esi+ecx+374], dl

; 161  : 			gObj[iMonsterIndex].StartY = cY;

  004ba	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004bf	8a 4d 13	 mov	 cl, BYTE PTR _cY$214131[ebp]
  004c2	88 8c 06 77 01
	00 00		 mov	 BYTE PTR [esi+eax+375], cl

; 162  : 			gObj[iMonsterIndex].MapNumber = iMapNumber;

  004c9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004cf	8a 45 e4	 mov	 al, BYTE PTR _iMapNumber$214127[ebp]
  004d2	88 84 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], al

; 163  : 			gObj[iMonsterIndex].m_MoveRange = 0;

  004d9	33 c9		 xor	 ecx, ecx
  004db	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004e1	66 89 8c 16 ae
	04 00 00	 mov	 WORD PTR [esi+edx+1198], cx

; 164  : 			gObj[iMonsterIndex].m_cKalimaGateEnterCount = 0;

  004e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004ee	88 8c 06 d0 03
	00 00		 mov	 BYTE PTR [esi+eax+976], cl

; 165  : 
; 166  : 			gObj[iIndex].m_cKalimaGateExist = TRUE;

  004f5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  004fb	c6 84 0f ca 03
	00 00 01	 mov	 BYTE PTR [edi+ecx+970], 1

; 167  : 			gObj[iIndex].m_iKalimaGateIndex = iMonsterIndex;

  00503	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00509	89 9c 17 cc 03
	00 00		 mov	 DWORD PTR [edi+edx+972], ebx

; 168  : 
; 169  : 			gObj[iMonsterIndex].Level = lpMATTR->m_Level;

  00510	8b 45 14	 mov	 eax, DWORD PTR _lpMATTR$214167[ebp]
  00513	0f b7 48 1c	 movzx	 ecx, WORD PTR [eax+28]
  00517	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0051d	66 89 8c 16 be
	00 00 00	 mov	 WORD PTR [esi+edx+190], cx

; 170  : 			gObj[iMonsterIndex].Type = OBJ_MONSTER;

  00525	b8 02 00 00 00	 mov	 eax, 2
  0052a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00530	66 89 44 0e 68	 mov	 WORD PTR [esi+ecx+104], ax

; 171  : 			gObj[iMonsterIndex].MaxRegenTime = 1000;

  00535	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0053b	c7 84 16 ac 03
	00 00 e8 03 00
	00		 mov	 DWORD PTR [esi+edx+940], 1000 ; 000003e8H

; 172  : 			gObj[iMonsterIndex].Dir = 1;

  00546	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0054b	c6 84 06 48 01
	00 00 01	 mov	 BYTE PTR [esi+eax+328], 1

; 173  : 
; 174  : 			gObj[iMonsterIndex].m_RecallMon = iIndex;

  00553	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00559	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  0055c	89 94 0e 50 04
	00 00		 mov	 DWORD PTR [esi+ecx+1104], edx

; 175  : 			gObj[iMonsterIndex].RegenTime = GetTickCount();

  00563	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  00569	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0056f	89 84 0e a8 03
	00 00		 mov	 DWORD PTR [esi+ecx+936], eax

; 176  : 			gObj[iMonsterIndex].m_Attribute = iKalimaGateLevel + 51;

  00576	8b 4d dc	 mov	 ecx, DWORD PTR tv615[ebp]
  00579	8d 51 33	 lea	 edx, DWORD PTR [ecx+51]
  0057c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00581	66 89 94 06 b6
	04 00 00	 mov	 WORD PTR [esi+eax+1206], dx

; 177  : 			gObj[iMonsterIndex].DieRegen = FALSE;

  00589	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0058f	c6 84 16 a2 03
	00 00 00	 mov	 BYTE PTR [esi+edx+930], 0

; 178  : 			
; 179  : 			LogAddTD("[Kalima] [%s][%s] Create Kalima Gate Successfuly (Live:%d, GateTick:%u, DieRegen:%d, Map:%d, X:%d, Y:%d, SummonIndex:%d, OwnerIndex:%d, GateNo.:%d)",
; 180  : 				gObj[iIndex].AccountID, gObj[iIndex].Name, gObj[iMonsterIndex].Live, gObj[iMonsterIndex].RegenTime,
; 181  : 				gObj[iMonsterIndex].DieRegen, gObj[iMonsterIndex].MapNumber, gObj[iMonsterIndex].X,
; 182  : 				gObj[iMonsterIndex].Y, iMonsterIndex, iIndex, iKalimaGateLevel+1);

  00597	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0059c	41		 inc	 ecx
  0059d	51		 push	 ecx
  0059e	8b 4d 08	 mov	 ecx, DWORD PTR _iIndex$[ebp]
  005a1	51		 push	 ecx
  005a2	53		 push	 ebx
  005a3	0f bf 94 06 46
	01 00 00	 movsx	 edx, WORD PTR [esi+eax+326]
  005ab	52		 push	 edx
  005ac	0f bf 8c 06 44
	01 00 00	 movsx	 ecx, WORD PTR [esi+eax+324]
  005b4	51		 push	 ecx
  005b5	0f b6 94 06 49
	01 00 00	 movzx	 edx, BYTE PTR [esi+eax+329]
  005bd	52		 push	 edx
  005be	0f be 8c 06 a2
	03 00 00	 movsx	 ecx, BYTE PTR [esi+eax+930]
  005c6	51		 push	 ecx
  005c7	8b 94 06 a8 03
	00 00		 mov	 edx, DWORD PTR [esi+eax+936]
  005ce	52		 push	 edx
  005cf	0f b6 4c 06 6a	 movzx	 ecx, BYTE PTR [esi+eax+106]
  005d4	51		 push	 ecx
  005d5	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  005d9	52		 push	 edx
  005da	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  005de	50		 push	 eax
  005df	68 00 00 00 00	 push	 OFFSET ??_C@_0JE@GBKKIBCM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Create?5Kalima?5@
  005e4	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  005ea	83 c4 30	 add	 esp, 48			; 00000030H
$LN2@CreateKali@2:

; 183  : 			bKalimaGateCreateSucceed = TRUE;
; 184  : 		}
; 185  : 	}
; 186  : 	__finally

  005ed	9b		 fwait
  005ee	c7 45 fc fe ff
	ff ff		 mov	 DWORD PTR __$SEHRec$[ebp+20], -2 ; fffffffeH
  005f5	e8 19 00 00 00	 call	 $LN35@CreateKali@2
$LN36@CreateKali@2:

; 189  : 	}
; 190  : 
; 191  : 	return true;

  005fa	b8 01 00 00 00	 mov	 eax, 1

; 192  : }

  005ff	8b 4d f0	 mov	 ecx, DWORD PTR __$SEHRec$[ebp+8]
  00602	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00609	59		 pop	 ecx
  0060a	5f		 pop	 edi
  0060b	5e		 pop	 esi
  0060c	5b		 pop	 ebx
  0060d	8b e5		 mov	 esp, ebp
  0060f	5d		 pop	 ebp
  00610	c2 10 00	 ret	 16			; 00000010H
$LN33@CreateKali@2:
$LN45@CreateKali@2:
$LN35@CreateKali@2:

; 187  : 	{
; 188  : 		LeaveCriticalSection(&this->m_critKalimaGate);

  00613	8b 4d e0	 mov	 ecx, DWORD PTR _this$[ebp]
  00616	83 c1 04	 add	 ecx, 4
  00619	51		 push	 ecx
  0061a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__LeaveCriticalSection@4
$LN34@CreateKali@2:
$LN43@CreateKali@2:
  00620	c3		 ret	 0
?CreateKalimaGate@CKalimaGate@@QAEHHEEE@Z ENDP		; CKalimaGate::CreateKalimaGate
_TEXT	ENDS
PUBLIC	??_C@_0GD@MOAKLAME@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@ ; `string'
PUBLIC	??_C@_0FC@CCIHPNEM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ ; `string'
PUBLIC	??_C@_0FH@INKPFMP@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ ; `string'
PUBLIC	??_C@_0FC@ILNKILMI@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?9?5@ ; `string'
PUBLIC	?KalimaGateAct@CKalimaGate@@QAEXH@Z		; CKalimaGate::KalimaGateAct
;	COMDAT ??_C@_0GD@MOAKLAME@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@
CONST	SEGMENT
??_C@_0GD@MOAKLAME@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@ DB '['
	DB	'Kalima] [%s][%s] - [%s][%s] Transported by Kalima Gate (Summo'
	DB	'nIndex:%d, GateNo.:%d, MapNumber:%d)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0FC@CCIHPNEM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
CONST	SEGMENT
??_C@_0FC@CCIHPNEM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ DB '['
	DB	'Kalima] [%s][%s] Kalima Gate Vanished - Time Out (SummonIndex'
	DB	':%d, EnterCount:%d)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0FH@INKPFMP@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
CONST	SEGMENT
??_C@_0FH@INKPFMP@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@ DB '['
	DB	'Kalima] [%s][%s] Kalima Gate Vanished - Summoner Died (Summon'
	DB	'Index:%d, EnterCount:%d)', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0FC@ILNKILMI@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?9?5@
CONST	SEGMENT
??_C@_0FC@ILNKILMI@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?9?5@ DB '[Kal'
	DB	'ima] Kalima Gate Vanished - Summoner Vanished (SummonIndex:%d'
	DB	', EnterCount:%d)', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?KalimaGateAct@CKalimaGate@@QAEXH@Z
_TEXT	SEGMENT
tv387 = -24						; size = 4
_i$214190 = -20						; size = 4
tv505 = -16						; size = 4
_iMapNumber$214202 = -16				; size = 4
tv561 = -12						; size = 4
_this$ = -8						; size = 4
tv388 = -4						; size = 4
_iIndex$ = 8						; size = 4
?KalimaGateAct@CKalimaGate@@QAEXH@Z PROC		; CKalimaGate::KalimaGateAct, COMDAT
; _this$ = ecx

; 201  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	53		 push	 ebx

; 202  : 	LPOBJ lpObj=NULL;
; 203  : 	LPOBJ lpObjCallOwner=NULL;
; 204  : 
; 205  : 	if ( OBJMAX_RANGE(iIndex ) == FALSE)

  00007	8b 5d 08	 mov	 ebx, DWORD PTR _iIndex$[ebp]
  0000a	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx
  0000d	85 db		 test	 ebx, ebx
  0000f	0f 88 51 03 00
	00		 js	 $LN27@KalimaGate@2
  00015	33 c0		 xor	 eax, eax
  00017	81 fb 97 3a 00
	00		 cmp	 ebx, 14999		; 00003a97H
  0001d	0f 9e c0	 setle	 al
  00020	85 c0		 test	 eax, eax
  00022	0f 84 3e 03 00
	00		 je	 $LN27@KalimaGate@2

; 206  : 	{
; 207  : 		return;
; 208  : 	}
; 209  : 
; 210  : 	if ( gObj[iIndex].Live == FALSE )

  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002d	57		 push	 edi
  0002e	8b fb		 mov	 edi, ebx
  00030	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  00036	80 7c 07 6a 00	 cmp	 BYTE PTR [edi+eax+106], 0
  0003b	89 7d e8	 mov	 DWORD PTR tv387[ebp], edi
  0003e	0f 84 21 03 00
	00		 je	 $LN32@KalimaGate@2

; 211  : 	{
; 212  : 		return;
; 213  : 	}
; 214  : 
; 215  : 	if ( gObjIsConnected( gObj[iIndex].m_RecallMon ) == PLAYER_EMPTY )

  00044	8b 84 07 50 04
	00 00		 mov	 eax, DWORD PTR [edi+eax+1104]
  0004b	50		 push	 eax
  0004c	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00051	83 c4 04	 add	 esp, 4
  00054	85 c0		 test	 eax, eax
  00056	75 43		 jne	 SHORT $LN19@KalimaGate@2

; 216  : 	{
; 217  : 		LogAddTD("[Kalima] Kalima Gate Vanished - Summoner Vanished (SummonIndex:%d, EnterCount:%d)",
; 218  : 			iIndex, gObj[iIndex].m_cKalimaGateEnterCount );

  00058	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005e	0f be 94 0f d0
	03 00 00	 movsx	 edx, BYTE PTR [edi+ecx+976]
  00066	52		 push	 edx
  00067	53		 push	 ebx
  00068	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@ILNKILMI@?$FLKalima?$FN?5Kalima?5Gate?5Vanished?5?9?5@
  0006d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 219  : 		GCDiePlayerSend( &gObj[iIndex], iIndex, 0, 0);

  00073	03 3d 00 00 00
	00		 add	 edi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00079	6a 00		 push	 0
  0007b	6a 00		 push	 0
  0007d	53		 push	 ebx
  0007e	57		 push	 edi
  0007f	e8 00 00 00 00	 call	 ?GCDiePlayerSend@@YAXPAUOBJECTSTRUCT@@HEH@Z ; GCDiePlayerSend

; 220  : 		gObjDel(iIndex);

  00084	53		 push	 ebx
  00085	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel

; 221  : 		gObjCharZeroSet(iIndex);

  0008a	53		 push	 ebx
  0008b	e8 00 00 00 00	 call	 ?gObjCharZeroSet@@YAXH@Z ; gObjCharZeroSet
  00090	83 c4 24	 add	 esp, 36			; 00000024H
  00093	5f		 pop	 edi
  00094	5b		 pop	 ebx

; 310  : 										{
; 311  : 											return;
; 312  : 										}
; 313  : 									}
; 314  : 								}
; 315  : 							}
; 316  : 						}
; 317  : 					}
; 318  : 				}
; 319  : 			}
; 320  : 		}
; 321  : 	}
; 322  : }

  00095	8b e5		 mov	 esp, ebp
  00097	5d		 pop	 ebp
  00098	c2 04 00	 ret	 4
$LN19@KalimaGate@2:

; 222  : 		return;
; 223  : 	}
; 224  : 
; 225  : 	lpObj = &gObj[iIndex];

  0009b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 226  : 	lpObjCallOwner = &gObj[lpObj->m_RecallMon];
; 227  : 
; 228  : 	if ( gObj[gObj[iIndex].m_RecallMon].DieRegen > 0 )

  000a0	8b 94 07 50 04
	00 00		 mov	 edx, DWORD PTR [edi+eax+1104]
  000a7	8d 0c 07	 lea	 ecx, DWORD PTR [edi+eax]
  000aa	69 d2 50 2b 00
	00		 imul	 edx, 11088		; 00002b50H
  000b0	56		 push	 esi
  000b1	8b b1 50 04 00
	00		 mov	 esi, DWORD PTR [ecx+1104]
  000b7	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  000bd	03 f0		 add	 esi, eax
  000bf	80 bc 02 a2 03
	00 00 00	 cmp	 BYTE PTR [edx+eax+930], 0
  000c7	89 4d fc	 mov	 DWORD PTR tv388[ebp], ecx
  000ca	7e 4f		 jle	 SHORT $LN18@KalimaGate@2

; 229  : 	{
; 230  : 		lpObjCallOwner->AccountID[MAX_ACCOUNT_LEN]=0;

  000cc	c6 46 76 00	 mov	 BYTE PTR [esi+118], 0

; 231  : 		lpObjCallOwner->Name[MAX_ACCOUNT_LEN]=0;

  000d0	c6 86 81 00 00
	00 00		 mov	 BYTE PTR [esi+129], 0

; 232  : 
; 233  : 		LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished - Summoner Died (SummonIndex:%d, EnterCount:%d)",
; 234  : 			lpObjCallOwner->AccountID, lpObjCallOwner->Name,
; 235  : 			iIndex, gObj[iIndex].m_cKalimaGateEnterCount );

  000d7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000dc	0f be 8c 07 d0
	03 00 00	 movsx	 ecx, BYTE PTR [edi+eax+976]
  000e4	51		 push	 ecx
  000e5	53		 push	 ebx
  000e6	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  000e9	52		 push	 edx
  000ea	83 c6 6c	 add	 esi, 108		; 0000006cH
  000ed	56		 push	 esi
  000ee	68 00 00 00 00	 push	 OFFSET ??_C@_0FH@INKPFMP@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  000f3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 236  : 		this->DeleteKalimaGate(iIndex, gObj[iIndex].m_RecallMon);

  000f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000fe	8b 8c 07 50 04
	00 00		 mov	 ecx, DWORD PTR [edi+eax+1104]
  00105	83 c4 14	 add	 esp, 20			; 00000014H
  00108	51		 push	 ecx
  00109	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  0010c	53		 push	 ebx
  0010d	e8 00 00 00 00	 call	 ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ; CKalimaGate::DeleteKalimaGate
  00112	5e		 pop	 esi
  00113	5f		 pop	 edi
  00114	5b		 pop	 ebx

; 310  : 										{
; 311  : 											return;
; 312  : 										}
; 313  : 									}
; 314  : 								}
; 315  : 							}
; 316  : 						}
; 317  : 					}
; 318  : 				}
; 319  : 			}
; 320  : 		}
; 321  : 	}
; 322  : }

  00115	8b e5		 mov	 esp, ebp
  00117	5d		 pop	 ebp
  00118	c2 04 00	 ret	 4
$LN18@KalimaGate@2:

; 237  : 		return;
; 238  : 	}
; 239  : 
; 240  : 	if ( gObj[iIndex].m_cKalimaGateEnterCount >= MAX_KALIMA_ENTER )

  0011b	80 b9 d0 03 00
	00 05		 cmp	 BYTE PTR [ecx+976], 5
  00122	7c 51		 jl	 SHORT $LN17@KalimaGate@2

; 241  : 	{
; 242  : 		lpObjCallOwner->AccountID[MAX_ACCOUNT_LEN]=0;

  00124	c6 46 76 00	 mov	 BYTE PTR [esi+118], 0

; 243  : 		lpObjCallOwner->Name[MAX_ACCOUNT_LEN]=0;

  00128	c6 86 81 00 00
	00 00		 mov	 BYTE PTR [esi+129], 0

; 244  : 		
; 245  : 		LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished - Enter Count Over (SummonIndex:%d, EnterCount:%d)",
; 246  : 			lpObjCallOwner->AccountID, lpObjCallOwner->Name,
; 247  : 			iIndex, gObj[iIndex].m_cKalimaGateEnterCount );

  0012f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00135	0f be 84 17 d0
	03 00 00	 movsx	 eax, BYTE PTR [edi+edx+976]
  0013d	50		 push	 eax
  0013e	53		 push	 ebx
  0013f	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  00142	51		 push	 ecx
  00143	83 c6 6c	 add	 esi, 108		; 0000006cH
  00146	56		 push	 esi
  00147	68 00 00 00 00	 push	 OFFSET ??_C@_0FK@FFJOIHJB@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  0014c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 248  : 		this->DeleteKalimaGate(iIndex, gObj[iIndex].m_RecallMon);

  00152	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00158	8b 84 17 50 04
	00 00		 mov	 eax, DWORD PTR [edi+edx+1104]
  0015f	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00162	83 c4 14	 add	 esp, 20			; 00000014H
  00165	50		 push	 eax
  00166	53		 push	 ebx
  00167	e8 00 00 00 00	 call	 ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ; CKalimaGate::DeleteKalimaGate
  0016c	5e		 pop	 esi
  0016d	5f		 pop	 edi
  0016e	5b		 pop	 ebx

; 310  : 										{
; 311  : 											return;
; 312  : 										}
; 313  : 									}
; 314  : 								}
; 315  : 							}
; 316  : 						}
; 317  : 					}
; 318  : 				}
; 319  : 			}
; 320  : 		}
; 321  : 	}
; 322  : }

  0016f	8b e5		 mov	 esp, ebp
  00171	5d		 pop	 ebp
  00172	c2 04 00	 ret	 4
$LN17@KalimaGate@2:

; 249  : 		return;
; 250  : 	}
; 251  : 		
; 252  : 	DWORD dwTickCount = GetTickCount();

  00175	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0

; 253  : 
; 254  : 	if ( dwTickCount > lpObj->RegenTime + KALIMA_GATE_TIMEOUT )

  0017b	8b 55 fc	 mov	 edx, DWORD PTR tv388[ebp]
  0017e	8b 8a a8 03 00
	00		 mov	 ecx, DWORD PTR [edx+936]
  00184	81 c1 20 bf 02
	00		 add	 ecx, 180000		; 0002bf20H
  0018a	3b c1		 cmp	 eax, ecx
  0018c	76 4b		 jbe	 SHORT $LN16@KalimaGate@2

; 255  : 	{
; 256  : 		lpObjCallOwner->AccountID[MAX_ACCOUNT_LEN]=0;

  0018e	c6 46 76 00	 mov	 BYTE PTR [esi+118], 0

; 257  : 		lpObjCallOwner->Name[MAX_ACCOUNT_LEN]=0;

  00192	c6 86 81 00 00
	00 00		 mov	 BYTE PTR [esi+129], 0

; 258  : 		
; 259  : 		LogAddTD("[Kalima] [%s][%s] Kalima Gate Vanished - Time Out (SummonIndex:%d, EnterCount:%d)",
; 260  : 			lpObjCallOwner->AccountID, lpObjCallOwner->Name,
; 261  : 			iIndex, gObj[iIndex].m_cKalimaGateEnterCount );

  00199	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0019f	0f be 84 17 d0
	03 00 00	 movsx	 eax, BYTE PTR [edi+edx+976]
  001a7	50		 push	 eax
  001a8	53		 push	 ebx
  001a9	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  001ac	51		 push	 ecx
  001ad	8d 56 6c	 lea	 edx, DWORD PTR [esi+108]
  001b0	52		 push	 edx
  001b1	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@CCIHPNEM@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Kalima?5Gate?5Va@
  001b6	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 262  : 		this->DeleteKalimaGate(lpObj->m_Index, lpObjCallOwner->m_Index);

  001bc	8b 06		 mov	 eax, DWORD PTR [esi]
  001be	8b 4d fc	 mov	 ecx, DWORD PTR tv388[ebp]
  001c1	8b 11		 mov	 edx, DWORD PTR [ecx]
  001c3	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  001c6	83 c4 14	 add	 esp, 20			; 00000014H
  001c9	50		 push	 eax
  001ca	52		 push	 edx
  001cb	e8 00 00 00 00	 call	 ?DeleteKalimaGate@CKalimaGate@@QAEHHH@Z ; CKalimaGate::DeleteKalimaGate
  001d0	5e		 pop	 esi
  001d1	5f		 pop	 edi
  001d2	5b		 pop	 ebx

; 310  : 										{
; 311  : 											return;
; 312  : 										}
; 313  : 									}
; 314  : 								}
; 315  : 							}
; 316  : 						}
; 317  : 					}
; 318  : 				}
; 319  : 			}
; 320  : 		}
; 321  : 	}
; 322  : }

  001d3	8b e5		 mov	 esp, ebp
  001d5	5d		 pop	 ebp
  001d6	c2 04 00	 ret	 4
$LN16@KalimaGate@2:

; 263  : 		return;
; 264  : 	}
; 265  : 
; 266  : 	if ( lpObj->VPCount < 1 )

  001d9	83 ba 30 0c 00
	00 01		 cmp	 DWORD PTR [edx+3120], 1
  001e0	0f 8c 7e 01 00
	00		 jl	 $LN33@KalimaGate@2

; 267  : 	{
; 268  : 		return;
; 269  : 	}
; 270  : 
; 271  : 	int tObjNum=-1;
; 272  : 
; 273  : 	for ( int i=0;i<MAX_VIEWPORT_MONSTER;i++)

  001e6	8d 82 2a 05 00
	00		 lea	 eax, DWORD PTR [edx+1322]
  001ec	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _i$214190[ebp], 0
  001f3	89 45 f4	 mov	 DWORD PTR tv561[ebp], eax
  001f6	eb 0b		 jmp	 SHORT $LN14@KalimaGate@2
  001f8	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL31@KalimaGate@2:
  00200	8b 55 fc	 mov	 edx, DWORD PTR tv388[ebp]
$LN14@KalimaGate@2:

; 274  : 	{
; 275  : 		tObjNum = lpObj->VpPlayer[i].number;

  00203	8b 4d f4	 mov	 ecx, DWORD PTR tv561[ebp]
  00206	0f bf 09	 movsx	 ecx, WORD PTR [ecx]

; 276  : 
; 277  : 		if ( tObjNum >= 0 )

  00209	85 c9		 test	 ecx, ecx
  0020b	0f 88 3f 01 00
	00		 js	 $LN13@KalimaGate@2

; 278  : 		{
; 279  : 			if ( gObj[tObjNum].Type == OBJ_USER )

  00211	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00217	8b f9		 mov	 edi, ecx
  00219	69 ff 50 2b 00
	00		 imul	 edi, 11088		; 00002b50H
  0021f	66 83 7c 1f 68
	01		 cmp	 WORD PTR [edi+ebx+104], 1
  00225	0f 85 25 01 00
	00		 jne	 $LN13@KalimaGate@2

; 280  : 			{
; 281  : 				if ( gObj[tObjNum].Live != FALSE )

  0022b	80 7c 1f 6a 00	 cmp	 BYTE PTR [edi+ebx+106], 0
  00230	0f 84 1a 01 00
	00		 je	 $LN13@KalimaGate@2

; 282  : 				{
; 283  : 					if ( abs(lpObj->Y - gObj[tObjNum].Y) < 2 )

  00236	0f bf 84 1f 46
	01 00 00	 movsx	 eax, WORD PTR [edi+ebx+326]
  0023e	89 45 f0	 mov	 DWORD PTR tv505[ebp], eax
  00241	0f bf 82 46 01
	00 00		 movsx	 eax, WORD PTR [edx+326]
  00248	2b 45 f0	 sub	 eax, DWORD PTR tv505[ebp]
  0024b	99		 cdq
  0024c	33 c2		 xor	 eax, edx
  0024e	2b c2		 sub	 eax, edx
  00250	83 f8 02	 cmp	 eax, 2
  00253	0f 8d f7 00 00
	00		 jge	 $LN13@KalimaGate@2

; 284  : 					{
; 285  : 						if ( abs(lpObj->X - gObj[tObjNum].X) < 2 )

  00259	8b 45 fc	 mov	 eax, DWORD PTR tv388[ebp]
  0025c	0f bf 80 44 01
	00 00		 movsx	 eax, WORD PTR [eax+324]
  00263	0f bf 94 1f 44
	01 00 00	 movsx	 edx, WORD PTR [edi+ebx+324]
  0026b	2b c2		 sub	 eax, edx
  0026d	99		 cdq
  0026e	33 c2		 xor	 eax, edx
  00270	2b c2		 sub	 eax, edx
  00272	83 f8 02	 cmp	 eax, 2
  00275	0f 8d d5 00 00
	00		 jge	 $LN13@KalimaGate@2

; 286  : 						{
; 287  : 							if ( lpObj->m_RecallMon == tObjNum || (gObj[tObjNum].PartyNumber != -1 && lpObjCallOwner->PartyNumber == gObj[tObjNum].PartyNumber ))

  0027b	8b 55 fc	 mov	 edx, DWORD PTR tv388[ebp]
  0027e	39 8a 50 04 00
	00		 cmp	 DWORD PTR [edx+1104], ecx
  00284	74 1c		 je	 SHORT $LN5@KalimaGate@2
  00286	8b 9c 1f 2c 04
	00 00		 mov	 ebx, DWORD PTR [edi+ebx+1068]
  0028d	83 fb ff	 cmp	 ebx, -1
  00290	0f 84 ba 00 00
	00		 je	 $LN13@KalimaGate@2
  00296	39 9e 2c 04 00
	00		 cmp	 DWORD PTR [esi+1068], ebx
  0029c	0f 85 ae 00 00
	00		 jne	 $LN13@KalimaGate@2
$LN5@KalimaGate@2:

; 288  : 							{
; 289  : 								int iMoveMapLevel = lpObj->m_Attribute -51;

  002a2	8b c2		 mov	 eax, edx
  002a4	0f bf 98 b6 04
	00 00		 movsx	 ebx, WORD PTR [eax+1206]
  002ab	83 eb 33	 sub	 ebx, 51			; 00000033H

; 290  : 								int iMapNumber = iMoveMapLevel + 24;

  002ae	8d 53 18	 lea	 edx, DWORD PTR [ebx+24]

; 291  : 								int iGateNumber = g_iKalimaGateGateIndex[iMoveMapLevel];
; 292  : 								int iOverLevel = this->GetKalimaGateLevel(tObjNum);

  002b1	51		 push	 ecx
  002b2	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  002b5	89 55 f0	 mov	 DWORD PTR _iMapNumber$214202[ebp], edx
  002b8	e8 00 00 00 00	 call	 ?GetKalimaGateLevel@CKalimaGate@@AAEHH@Z ; CKalimaGate::GetKalimaGateLevel

; 293  : 
; 294  : 								if ( iOverLevel >= iMoveMapLevel )

  002bd	3b c3		 cmp	 eax, ebx
  002bf	0f 8c 8b 00 00
	00		 jl	 $LN13@KalimaGate@2

; 295  : 								{
; 296  : 									if ( gObjMoveGate(tObjNum, iGateNumber) == FALSE )

  002c5	8b 04 9d 00 00
	00 00		 mov	 eax, DWORD PTR _g_iKalimaGateGateIndex[ebx*4]
  002cc	50		 push	 eax
  002cd	8b 45 f4	 mov	 eax, DWORD PTR tv561[ebp]
  002d0	0f bf 00	 movsx	 eax, WORD PTR [eax]
  002d3	50		 push	 eax
  002d4	e8 00 00 00 00	 call	 ?gObjMoveGate@@YAHHH@Z	; gObjMoveGate

; 297  : 									{
; 298  : 										LogAddTD("[Kalima] [%s][%s] - [%s][%s] move fail (MapNumber:%d)", 
; 299  : 											lpObjCallOwner->AccountID, lpObjCallOwner->Name,
; 300  : 											gObj[tObjNum].AccountID, gObj[tObjNum].Name, iMapNumber);

  002d9	8b 4d f0	 mov	 ecx, DWORD PTR _iMapNumber$214202[ebp]
  002dc	83 c4 08	 add	 esp, 8
  002df	85 c0		 test	 eax, eax
  002e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002e6	51		 push	 ecx
  002e7	75 22		 jne	 SHORT $LN3@KalimaGate@2
  002e9	8d 54 07 77	 lea	 edx, DWORD PTR [edi+eax+119]
  002ed	52		 push	 edx
  002ee	8d 44 07 6c	 lea	 eax, DWORD PTR [edi+eax+108]
  002f2	50		 push	 eax
  002f3	8d 4e 77	 lea	 ecx, DWORD PTR [esi+119]
  002f6	51		 push	 ecx
  002f7	8d 56 6c	 lea	 edx, DWORD PTR [esi+108]
  002fa	52		 push	 edx
  002fb	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@DFEBENJO@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5mov@
  00300	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00306	83 c4 18	 add	 esp, 24			; 00000018H

; 301  : 									}
; 302  : 									else

  00309	eb 45		 jmp	 SHORT $LN13@KalimaGate@2
$LN3@KalimaGate@2:

; 303  : 									{
; 304  : 										LogAddTD("[Kalima] [%s][%s] - [%s][%s] Transported by Kalima Gate (SummonIndex:%d, GateNo.:%d, MapNumber:%d)",
; 305  : 											lpObjCallOwner->AccountID, lpObjCallOwner->Name, 
; 306  : 											gObj[tObjNum].AccountID, gObj[tObjNum].Name, iIndex, iMoveMapLevel + 1, iMapNumber);

  0030b	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  0030e	43		 inc	 ebx
  0030f	53		 push	 ebx
  00310	52		 push	 edx
  00311	8d 4c 07 77	 lea	 ecx, DWORD PTR [edi+eax+119]
  00315	51		 push	 ecx
  00316	8d 54 07 6c	 lea	 edx, DWORD PTR [edi+eax+108]
  0031a	52		 push	 edx
  0031b	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  0031e	50		 push	 eax
  0031f	8d 4e 6c	 lea	 ecx, DWORD PTR [esi+108]
  00322	51		 push	 ecx
  00323	68 00 00 00 00	 push	 OFFSET ??_C@_0GD@MOAKLAME@?$FLKalima?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5?9?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5Tra@
  00328	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 307  : 										gObj[iIndex].m_cKalimaGateEnterCount ++;

  0032e	8b 4d e8	 mov	 ecx, DWORD PTR tv387[ebp]
  00331	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00336	fe 84 01 d0 03
	00 00		 inc	 BYTE PTR [ecx+eax+976]

; 308  : 
; 309  : 										if ( gObj[iIndex].m_cKalimaGateEnterCount >= MAX_KALIMA_ENTER )

  0033d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00343	83 c4 20	 add	 esp, 32			; 00000020H
  00346	80 bc 11 d0 03
	00 00 05	 cmp	 BYTE PTR [ecx+edx+976], 5
  0034e	7d 14		 jge	 SHORT $LN33@KalimaGate@2
$LN13@KalimaGate@2:

; 267  : 	{
; 268  : 		return;
; 269  : 	}
; 270  : 
; 271  : 	int tObjNum=-1;
; 272  : 
; 273  : 	for ( int i=0;i<MAX_VIEWPORT_MONSTER;i++)

  00350	8b 45 ec	 mov	 eax, DWORD PTR _i$214190[ebp]
  00353	83 45 f4 0c	 add	 DWORD PTR tv561[ebp], 12 ; 0000000cH
  00357	40		 inc	 eax
  00358	89 45 ec	 mov	 DWORD PTR _i$214190[ebp], eax
  0035b	83 f8 4b	 cmp	 eax, 75			; 0000004bH
  0035e	0f 8c 9c fe ff
	ff		 jl	 $LL31@KalimaGate@2
$LN33@KalimaGate@2:
  00364	5e		 pop	 esi
$LN32@KalimaGate@2:
  00365	5f		 pop	 edi
$LN27@KalimaGate@2:
  00366	5b		 pop	 ebx

; 310  : 										{
; 311  : 											return;
; 312  : 										}
; 313  : 									}
; 314  : 								}
; 315  : 							}
; 316  : 						}
; 317  : 					}
; 318  : 				}
; 319  : 			}
; 320  : 		}
; 321  : 	}
; 322  : }

  00367	8b e5		 mov	 esp, ebp
  00369	5d		 pop	 ebp
  0036a	c2 04 00	 ret	 4
?KalimaGateAct@CKalimaGate@@QAEXH@Z ENDP		; CKalimaGate::KalimaGateAct
_TEXT	ENDS
EXTRN	_atexit:PROC
; Function compile flags: /Ogtp
;	COMDAT ??__Eg_KalimaGate@@YAXXZ
text$yc	SEGMENT
??__Eg_KalimaGate@@YAXXZ PROC				; `dynamic initializer for 'g_KalimaGate'', COMDAT

; 13   : CKalimaGate g_KalimaGate;

  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_KalimaGate@@3VCKalimaGate@@A ; g_KalimaGate
  00005	e8 00 00 00 00	 call	 ??0CKalimaGate@@QAE@XZ	; CKalimaGate::CKalimaGate
  0000a	68 00 00 00 00	 push	 OFFSET ??__Fg_KalimaGate@@YAXXZ ; `dynamic atexit destructor for 'g_KalimaGate''
  0000f	e8 00 00 00 00	 call	 _atexit
  00014	59		 pop	 ecx
  00015	c3		 ret	 0
??__Eg_KalimaGate@@YAXXZ ENDP				; `dynamic initializer for 'g_KalimaGate''
; Function compile flags: /Ogtp
text$yc	ENDS
;	COMDAT ??__Fg_KalimaGate@@YAXXZ
text$yd	SEGMENT
??__Fg_KalimaGate@@YAXXZ PROC				; `dynamic atexit destructor for 'g_KalimaGate'', COMDAT
  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_KalimaGate@@3VCKalimaGate@@A ; g_KalimaGate
  00005	e9 00 00 00 00	 jmp	 ??1CKalimaGate@@UAE@XZ	; CKalimaGate::~CKalimaGate
??__Fg_KalimaGate@@YAXXZ ENDP				; `dynamic atexit destructor for 'g_KalimaGate''
text$yd	ENDS
PUBLIC	?g_KalimaGate@@3VCKalimaGate@@A			; g_KalimaGate
_BSS	SEGMENT
?g_KalimaGate@@3VCKalimaGate@@A DB 01cH DUP (?)		; g_KalimaGate
_BSS	ENDS
CRT$XCU	SEGMENT
_g_KalimaGate$initializer$ DD FLAT:??__Eg_KalimaGate@@YAXXZ
CRT$XCU	ENDS
END
