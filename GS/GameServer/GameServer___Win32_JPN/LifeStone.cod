; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\LifeStone.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?GetCastleState@CCastleSiegeSync@@QAEHXZ	; CCastleSiegeSync::GetCastleState
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\castlesiegesync.h
;	COMDAT ?GetCastleState@CCastleSiegeSync@@QAEHXZ
_TEXT	SEGMENT
?GetCastleState@CCastleSiegeSync@@QAEHXZ PROC		; CCastleSiegeSync::GetCastleState, COMDAT
; _this$ = ecx

; 34   : 	int  GetCastleState(){return this->m_iCurCastleState;};	// line : 70

  00000	8b 41 04	 mov	 eax, DWORD PTR [ecx+4]
  00003	c3		 ret	 0
?GetCastleState@CCastleSiegeSync@@QAEHXZ ENDP		; CCastleSiegeSync::GetCastleState
_TEXT	ENDS
PUBLIC	??_7CLifeStone@@6B@				; CLifeStone::`vftable'
PUBLIC	??0CLifeStone@@QAE@XZ				; CLifeStone::CLifeStone
PUBLIC	??_R4CLifeStone@@6B@				; CLifeStone::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCLifeStone@@@8				; CLifeStone `RTTI Type Descriptor'
PUBLIC	??_R3CLifeStone@@8				; CLifeStone::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CLifeStone@@8				; CLifeStone::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CLifeStone@@8			; CLifeStone::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECLifeStone@@UAEPAXI@Z:PROC			; CLifeStone::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CLifeStone@@8
; File e:\work\tranet_version\gs\gameserver\lifestone.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CLifeStone@@8 DD FLAT:??_R0?AVCLifeStone@@@8 ; CLifeStone::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CLifeStone@@8
rdata$r	ENDS
;	COMDAT ??_R2CLifeStone@@8
rdata$r	SEGMENT
??_R2CLifeStone@@8 DD FLAT:??_R1A@?0A@EA@CLifeStone@@8	; CLifeStone::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CLifeStone@@8
rdata$r	SEGMENT
??_R3CLifeStone@@8 DD 00H				; CLifeStone::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CLifeStone@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCLifeStone@@@8
_DATA	SEGMENT
??_R0?AVCLifeStone@@@8 DD FLAT:??_7type_info@@6B@	; CLifeStone `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCLifeStone@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CLifeStone@@6B@
rdata$r	SEGMENT
??_R4CLifeStone@@6B@ DD 00H				; CLifeStone::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCLifeStone@@@8
	DD	FLAT:??_R3CLifeStone@@8
rdata$r	ENDS
;	COMDAT ??_7CLifeStone@@6B@
CONST	SEGMENT
??_7CLifeStone@@6B@ DD FLAT:??_R4CLifeStone@@6B@	; CLifeStone::`vftable'
	DD	FLAT:??_ECLifeStone@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??0CLifeStone@@QAE@XZ
_TEXT	SEGMENT
??0CLifeStone@@QAE@XZ PROC				; CLifeStone::CLifeStone, COMDAT
; _this$ = ecx

; 22   : {

  00000	8b c1		 mov	 eax, ecx
  00002	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CLifeStone@@6B@

; 23   : 
; 24   : }

  00008	c3		 ret	 0
??0CLifeStone@@QAE@XZ ENDP				; CLifeStone::CLifeStone
_TEXT	ENDS
PUBLIC	??1CLifeStone@@UAE@XZ				; CLifeStone::~CLifeStone
; Function compile flags: /Ogtp
;	COMDAT ??1CLifeStone@@UAE@XZ
_TEXT	SEGMENT
??1CLifeStone@@UAE@XZ PROC				; CLifeStone::~CLifeStone, COMDAT
; _this$ = ecx

; 27   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CLifeStone@@6B@

; 28   : 
; 29   : }

  00006	c3		 ret	 0
??1CLifeStone@@UAE@XZ ENDP				; CLifeStone::~CLifeStone
_TEXT	ENDS
PUBLIC	??_C@_0EI@CHDCMOII@?$FLCastleSiege?$FN?5LifeStone?5is?5creat@ ; `string'
PUBLIC	?CreateLifeStone@CLifeStone@@QAEHH@Z		; CLifeStone::CreateLifeStone
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
EXTRN	?GetAttr@CMonsterAttr@@QAEPAUMONSTER_ATTRIBUTE@@H@Z:PROC ; CMonsterAttr::GetAttr
EXTRN	?gMAttr@@3VCMonsterAttr@@A:BYTE			; gMAttr
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
EXTRN	?GetAttr@MapClass@@QAEEHH@Z:PROC		; MapClass::GetAttr
EXTRN	?MapC@@3PAVMapClass@@A:BYTE			; MapC
EXTRN	?MsgOutput@@YAXHPADZZ:PROC			; MsgOutput
EXTRN	?Get@CMsg@@QAEPADH@Z:PROC			; CMsg::Get
EXTRN	?lMsg@@3VCMsg@@A:BYTE				; lMsg
EXTRN	?g_CastleSiegeSync@@3VCCastleSiegeSync@@A:BYTE	; g_CastleSiegeSync
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0EI@CHDCMOII@?$FLCastleSiege?$FN?5LifeStone?5is?5creat@
; File e:\work\tranet_version\gs\gameserver\castlesiegesync.h
CONST	SEGMENT
??_C@_0EI@CHDCMOII@?$FLCastleSiege?$FN?5LifeStone?5is?5creat@ DB '[Castle'
	DB	'Siege] LifeStone is created - [%s] [%s][%s] (Map:%d)(X:%d, Y:'
	DB	'%d)', 00H					; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\lifestone.cpp
CONST	ENDS
;	COMDAT ?CreateLifeStone@CLifeStone@@QAEHH@Z
_TEXT	SEGMENT
tv413 = -16						; size = 4
tv412 = -12						; size = 4
_MAttr$209051 = -8					; size = 4
_cY$ = -1						; size = 1
_iIndex$ = 8						; size = 4
?CreateLifeStone@CLifeStone@@QAEHH@Z PROC		; CLifeStone::CreateLifeStone, COMDAT
; _this$ = ecx

; 32   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H

; 33   : 	LPOBJ lpObj = &gObj[iIndex];

  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0000b	53		 push	 ebx
  0000c	56		 push	 esi
  0000d	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]
  00010	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H

; 34   : 	int iMonsterIndex = -1;
; 35   : 	BYTE cX = lpObj->X;
; 36   : 	BYTE cY = lpObj->Y;
; 37   : 
; 38   : 	if ( g_CastleSiegeSync.GetCastleState() != CASTLESIEGE_STATE_STARTSIEGE )

  00016	83 3d 04 00 00
	00 07		 cmp	 DWORD PTR ?g_CastleSiegeSync@@3VCCastleSiegeSync@@A+4, 7
  0001d	8a 9c 06 44 01
	00 00		 mov	 bl, BYTE PTR [esi+eax+324]
  00024	57		 push	 edi
  00025	8d 3c 06	 lea	 edi, DWORD PTR [esi+eax]
  00028	8a 87 46 01 00
	00		 mov	 al, BYTE PTR [edi+326]
  0002e	88 45 ff	 mov	 BYTE PTR _cY$[ebp], al
  00031	74 0a		 je	 SHORT $LN10@CreateLife

; 39   : 	{
; 40   : 		MsgOutput(iIndex, lMsg.Get(1645));

  00033	68 6d 06 00 00	 push	 1645			; 0000066dH

; 41   : 		return FALSE;

  00038	e9 94 03 00 00	 jmp	 $LN15@CreateLife
$LN10@CreateLife:

; 42   : 	}
; 43   : 
; 44   : 	if ( lpObj->GuildStatus != G_MASTER )

  0003d	81 bf 48 04 00
	00 80 00 00 00	 cmp	 DWORD PTR [edi+1096], 128 ; 00000080H

; 45   : 	{
; 46   : 		return FALSE;

  00047	0f 85 9b 03 00
	00		 jne	 $LN16@CreateLife

; 47   : 	}
; 48   : 
; 49   : 	if ( lpObj->m_btCsJoinSide < 2 )

  0004d	80 bf 02 1c 00
	00 02		 cmp	 BYTE PTR [edi+7170], 2
  00054	73 27		 jae	 SHORT $LN8@CreateLife

; 50   : 	{
; 51   : 		MsgOutput(iIndex, lMsg.Get(1641)); //HermeX Fix

  00056	68 69 06 00 00	 push	 1641			; 00000669H
  0005b	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00060	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  00065	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  00068	50		 push	 eax
  00069	52		 push	 edx

; 129  : 	}
; 130  : 	else
; 131  : 	{
; 132  : 		MsgOutput(iIndex, lMsg.Get(1647));

  0006a	e8 00 00 00 00	 call	 ?MsgOutput@@YAXHPADZZ	; MsgOutput
  0006f	83 c4 08	 add	 esp, 8
  00072	5f		 pop	 edi
  00073	5e		 pop	 esi

; 133  : 		return FALSE;

  00074	33 c0		 xor	 eax, eax
  00076	5b		 pop	 ebx

; 136  : }

  00077	8b e5		 mov	 esp, ebp
  00079	5d		 pop	 ebp
  0007a	c2 04 00	 ret	 4
$LN8@CreateLife:

; 52   : 		return FALSE;
; 53   : 	}
; 54   : 
; 55   : 	if ( lpObj->lpGuild->lpLifeStone  ) //HermeX Fix

  0007d	8b 8f 38 04 00
	00		 mov	 ecx, DWORD PTR [edi+1080]
  00083	83 b9 34 07 00
	00 00		 cmp	 DWORD PTR [ecx+1844], 0
  0008a	74 27		 je	 SHORT $LN7@CreateLife

; 56   : 	{
; 57   : 		MsgOutput(iIndex, lMsg.Get(1642)); //HermeX Fix

  0008c	68 6a 06 00 00	 push	 1642			; 0000066aH
  00091	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00096	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0009b	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  0009e	50		 push	 eax
  0009f	52		 push	 edx

; 129  : 	}
; 130  : 	else
; 131  : 	{
; 132  : 		MsgOutput(iIndex, lMsg.Get(1647));

  000a0	e8 00 00 00 00	 call	 ?MsgOutput@@YAXHPADZZ	; MsgOutput
  000a5	83 c4 08	 add	 esp, 8
  000a8	5f		 pop	 edi
  000a9	5e		 pop	 esi

; 133  : 		return FALSE;

  000aa	33 c0		 xor	 eax, eax
  000ac	5b		 pop	 ebx

; 136  : }

  000ad	8b e5		 mov	 esp, ebp
  000af	5d		 pop	 ebp
  000b0	c2 04 00	 ret	 4
$LN7@CreateLife:

; 58   : 		return FALSE;
; 59   : 	}
; 60   : 	
; 61   : 	if( cX > 150 && cX < 210 && cY > 175 && cY < 230 )

  000b3	8d 4b 69	 lea	 ecx, DWORD PTR [ebx+105]
  000b6	80 f9 3a	 cmp	 cl, 58			; 0000003aH
  000b9	77 2f		 ja	 SHORT $LN6@CreateLife
  000bb	8d 50 50	 lea	 edx, DWORD PTR [eax+80]
  000be	80 fa 35	 cmp	 dl, 53			; 00000035H
  000c1	77 27		 ja	 SHORT $LN6@CreateLife

; 62   : 	{
; 63   : 		MsgOutput(iIndex, lMsg.Get(1644)); //HermeX Fix

  000c3	68 6c 06 00 00	 push	 1644			; 0000066cH
  000c8	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  000cd	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  000d2	50		 push	 eax
  000d3	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  000d6	50		 push	 eax

; 129  : 	}
; 130  : 	else
; 131  : 	{
; 132  : 		MsgOutput(iIndex, lMsg.Get(1647));

  000d7	e8 00 00 00 00	 call	 ?MsgOutput@@YAXHPADZZ	; MsgOutput
  000dc	83 c4 08	 add	 esp, 8
  000df	5f		 pop	 edi
  000e0	5e		 pop	 esi

; 133  : 		return FALSE;

  000e1	33 c0		 xor	 eax, eax
  000e3	5b		 pop	 ebx

; 136  : }

  000e4	8b e5		 mov	 esp, ebp
  000e6	5d		 pop	 ebp
  000e7	c2 04 00	 ret	 4
$LN6@CreateLife:

; 64   : 		return FALSE;
; 65   : 	}
; 66   : 
; 67   : 	BYTE btMapAttr = MapC[lpObj->MapNumber].GetAttr(cX, cY);

  000ea	0f b6 c0	 movzx	 eax, al
  000ed	0f b6 cb	 movzx	 ecx, bl
  000f0	89 4d f0	 mov	 DWORD PTR tv413[ebp], ecx
  000f3	50		 push	 eax
  000f4	51		 push	 ecx
  000f5	0f b6 8f 49 01
	00 00		 movzx	 ecx, BYTE PTR [edi+329]
  000fc	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  00102	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00108	89 45 f4	 mov	 DWORD PTR tv412[ebp], eax
  0010b	e8 00 00 00 00	 call	 ?GetAttr@MapClass@@QAEEHH@Z ; MapClass::GetAttr

; 68   : 	
; 69   : 	if ( btMapAttr & 16 != 16 ) //siege camp?
; 70   : 	{
; 71   : 		//return FALSE;
; 72   : 	}
; 73   : 
; 74   : 	if ( gObj[iIndex].MapNumber != MAP_INDEX_CASTLESIEGE )

  00110	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00116	80 bc 0e 49 01
	00 00 1e	 cmp	 BYTE PTR [esi+ecx+329], 30 ; 0000001eH
  0011e	74 27		 je	 SHORT $LN4@CreateLife

; 75   : 	{
; 76   : 		MsgOutput(iIndex, lMsg.Get(1627)); //HermeX Fix

  00120	68 5b 06 00 00	 push	 1627			; 0000065bH
  00125	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  0012a	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0012f	8b 55 08	 mov	 edx, DWORD PTR _iIndex$[ebp]
  00132	50		 push	 eax
  00133	52		 push	 edx

; 129  : 	}
; 130  : 	else
; 131  : 	{
; 132  : 		MsgOutput(iIndex, lMsg.Get(1647));

  00134	e8 00 00 00 00	 call	 ?MsgOutput@@YAXHPADZZ	; MsgOutput
  00139	83 c4 08	 add	 esp, 8
  0013c	5f		 pop	 edi
  0013d	5e		 pop	 esi

; 133  : 		return FALSE;

  0013e	33 c0		 xor	 eax, eax
  00140	5b		 pop	 ebx

; 136  : }

  00141	8b e5		 mov	 esp, ebp
  00143	5d		 pop	 ebp
  00144	c2 04 00	 ret	 4
$LN4@CreateLife:

; 77   : 		return FALSE;
; 78   : 	}
; 79   : 	
; 80   : 	iMonsterIndex = gObjAddMonster(lpObj->MapNumber);

  00147	0f b6 87 49 01
	00 00		 movzx	 eax, BYTE PTR [edi+329]
  0014e	50		 push	 eax
  0014f	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  00154	0f bf f0	 movsx	 esi, ax
  00157	83 c4 04	 add	 esp, 4

; 81   : 
; 82   : 	if ( iMonsterIndex >= 0 )

  0015a	85 f6		 test	 esi, esi
  0015c	0f 88 6a 02 00
	00		 js	 $LN3@CreateLife

; 83   : 	{
; 84   : 	
; 85   : 		MONSTER_ATTRIBUTE * MAttr = gMAttr.GetAttr(278);

  00162	68 16 01 00 00	 push	 278			; 00000116H
  00167	b9 00 00 00 00	 mov	 ecx, OFFSET ?gMAttr@@3VCMonsterAttr@@A ; gMAttr
  0016c	e8 00 00 00 00	 call	 ?GetAttr@CMonsterAttr@@QAEPAUMONSTER_ATTRIBUTE@@H@Z ; CMonsterAttr::GetAttr
  00171	89 45 f8	 mov	 DWORD PTR _MAttr$209051[ebp], eax

; 86   : 	
; 87   : 		if ( MAttr == NULL )

  00174	85 c0		 test	 eax, eax
  00176	75 14		 jne	 SHORT $LN2@CreateLife

; 88   : 		{
; 89   : 			gObjDel(iMonsterIndex);

  00178	56		 push	 esi
  00179	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  0017e	83 c4 04	 add	 esp, 4
  00181	5f		 pop	 edi
  00182	5e		 pop	 esi

; 133  : 		return FALSE;

  00183	33 c0		 xor	 eax, eax
  00185	5b		 pop	 ebx

; 136  : }

  00186	8b e5		 mov	 esp, ebp
  00188	5d		 pop	 ebp
  00189	c2 04 00	 ret	 4
$LN2@CreateLife:

; 90   : 			return FALSE;
; 91   : 		}
; 92   : 
; 93   : 		gObjSetMonster(iMonsterIndex, 278);

  0018c	68 16 01 00 00	 push	 278			; 00000116H
  00191	56		 push	 esi
  00192	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster

; 94   : 		gObj[iMonsterIndex].Live = TRUE;

  00197	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0019d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001a3	c6 44 0e 6a 01	 mov	 BYTE PTR [esi+ecx+106], 1

; 95   : 		gObj[iMonsterIndex].Life = MAttr->m_Hp;

  001a8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001ae	8b 45 f8	 mov	 eax, DWORD PTR _MAttr$209051[ebp]

; 96   : 		gObj[iMonsterIndex].MaxLife = MAttr->m_Hp;
; 97   : 		gObj[iMonsterIndex].m_PosNum = -1;

  001b1	83 c9 ff	 or	 ecx, -1
  001b4	83 c4 08	 add	 esp, 8
  001b7	db 40 28	 fild	 DWORD PTR [eax+40]
  001ba	d9 9c 16 fc 00
	00 00		 fstp	 DWORD PTR [esi+edx+252]
  001c1	db 40 28	 fild	 DWORD PTR [eax+40]
  001c4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001c9	d9 9c 06 00 01
	00 00		 fstp	 DWORD PTR [esi+eax+256]
  001d0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001d6	66 89 8c 16 b0
	03 00 00	 mov	 WORD PTR [esi+edx+944], cx

; 98   : 		gObj[iMonsterIndex].X = cX;

  001de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001e4	0f b6 c3	 movzx	 eax, bl
  001e7	66 89 84 0e 44
	01 00 00	 mov	 WORD PTR [esi+ecx+324], ax

; 99   : 		gObj[iMonsterIndex].Y = cY;

  001ef	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001f5	0f b6 4d ff	 movzx	 ecx, BYTE PTR _cY$[ebp]
  001f9	66 89 8c 16 46
	01 00 00	 mov	 WORD PTR [esi+edx+326], cx

; 100  : 		gObj[iMonsterIndex].MTX = cX;

  00201	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00207	66 89 84 16 80
	01 00 00	 mov	 WORD PTR [esi+edx+384], ax

; 101  : 		gObj[iMonsterIndex].MTY = cY;

  0020f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00215	66 89 8c 16 82
	01 00 00	 mov	 WORD PTR [esi+edx+386], cx

; 102  : 		gObj[iMonsterIndex].TX = cX;

  0021d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00223	66 89 84 16 7c
	01 00 00	 mov	 WORD PTR [esi+edx+380], ax

; 103  : 		gObj[iMonsterIndex].TY = cY;

  0022b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00231	66 89 8c 16 7e
	01 00 00	 mov	 WORD PTR [esi+edx+382], cx

; 104  : 		gObj[iMonsterIndex].m_OldX = cX;

  00239	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0023f	66 89 84 16 78
	01 00 00	 mov	 WORD PTR [esi+edx+376], ax

; 105  : 		gObj[iMonsterIndex].m_OldY = cY;

  00247	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0024c	66 89 8c 06 7a
	01 00 00	 mov	 WORD PTR [esi+eax+378], cx

; 106  : 		gObj[iMonsterIndex].StartX = cX;

  00254	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 107  : 		gObj[iMonsterIndex].StartY = cY;

  0025a	0f b6 45 ff	 movzx	 eax, BYTE PTR _cY$[ebp]
  0025e	88 9c 0e 76 01
	00 00		 mov	 BYTE PTR [esi+ecx+374], bl
  00265	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0026b	88 84 16 77 01
	00 00		 mov	 BYTE PTR [esi+edx+375], al

; 108  : 		gObj[iMonsterIndex].MapNumber = lpObj->MapNumber;

  00272	8a 8f 49 01 00
	00		 mov	 cl, BYTE PTR [edi+329]
  00278	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0027e	88 8c 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], cl

; 109  : 		gObj[iMonsterIndex].m_MoveRange = 0;

  00285	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 110  : 		gObj[iMonsterIndex].Level = MAttr->m_Level;

  0028b	8b 55 f8	 mov	 edx, DWORD PTR _MAttr$209051[ebp]
  0028e	33 c0		 xor	 eax, eax
  00290	66 89 84 0e ae
	04 00 00	 mov	 WORD PTR [esi+ecx+1198], ax
  00298	66 8b 42 1c	 mov	 ax, WORD PTR [edx+28]
  0029c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002a2	66 89 84 0e be
	00 00 00	 mov	 WORD PTR [esi+ecx+190], ax

; 111  : 		gObj[iMonsterIndex].Type = OBJ_MONSTER;

  002aa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002af	ba 02 00 00 00	 mov	 edx, 2
  002b4	66 89 54 06 68	 mov	 WORD PTR [esi+eax+104], dx

; 112  : 		gObj[iMonsterIndex].MaxRegenTime = 1000;

  002b9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002bf	c7 84 0e ac 03
	00 00 e8 03 00
	00		 mov	 DWORD PTR [esi+ecx+940], 1000 ; 000003e8H

; 113  : 		gObj[iMonsterIndex].Dir = 1;

  002ca	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002d0	c6 84 16 48 01
	00 00 01	 mov	 BYTE PTR [esi+edx+328], 1

; 114  : 		gObj[iMonsterIndex].RegenTime = GetTickCount();

  002d8	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  002de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002e4	89 84 0e a8 03
	00 00		 mov	 DWORD PTR [esi+ecx+936], eax

; 115  : 		gObj[iMonsterIndex].m_Attribute = 0;

  002eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002f0	33 d2		 xor	 edx, edx
  002f2	66 89 94 06 b6
	04 00 00	 mov	 WORD PTR [esi+eax+1206], dx

; 116  : 		gObj[iMonsterIndex].DieRegen = 0;

  002fa	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00300	88 94 0e a2 03
	00 00		 mov	 BYTE PTR [esi+ecx+930], dl

; 117  : 		gObj[iMonsterIndex].m_btCsNpcType = OBJ_NPC; //HermeX Fix

  00307	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0030d	c6 84 16 f8 1b
	00 00 03	 mov	 BYTE PTR [esi+edx+7160], 3

; 118  : 		gObj[iMonsterIndex].m_btCsJoinSide = lpObj->m_btCsJoinSide;

  00315	0f b6 87 02 1c
	00 00		 movzx	 eax, BYTE PTR [edi+7170]
  0031c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00322	88 84 0e 02 1c
	00 00		 mov	 BYTE PTR [esi+ecx+7170], al

; 119  : 		gObj[iMonsterIndex].lpGuild = lpObj->lpGuild;

  00329	8b 97 38 04 00
	00		 mov	 edx, DWORD PTR [edi+1080]
  0032f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00334	89 94 06 38 04
	00 00		 mov	 DWORD PTR [esi+eax+1080], edx

; 120  : 		gObj[iMonsterIndex].m_btCreationState = 0;

  0033b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00341	c6 84 0e 15 1c
	00 00 00	 mov	 BYTE PTR [esi+ecx+7189], 0

; 121  : 
; 122  : 		lpObj->lpGuild->lpLifeStone = &gObj[iMonsterIndex]; //SirMaster Fix

  00349	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0034f	8b 8f 38 04 00
	00		 mov	 ecx, DWORD PTR [edi+1080]
  00355	8d 04 16	 lea	 eax, DWORD PTR [esi+edx]
  00358	89 81 34 07 00
	00		 mov	 DWORD PTR [ecx+1844], eax

; 123  : 		gObj[iMonsterIndex].m_iCreatedActivationTime = 0; //new

  0035e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00364	c7 84 16 18 1c
	00 00 00 00 00
	00		 mov	 DWORD PTR [esi+edx+7192], 0

; 124  : 
; 125  : 		MsgOutput(iIndex, lMsg.Get(1646));

  0036f	68 6e 06 00 00	 push	 1646			; 0000066eH
  00374	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  00379	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  0037e	50		 push	 eax
  0037f	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00382	50		 push	 eax
  00383	e8 00 00 00 00	 call	 ?MsgOutput@@YAXHPADZZ	; MsgOutput

; 126  : 		LogAddTD("[CastleSiege] LifeStone is created - [%s] [%s][%s] (Map:%d)(X:%d, Y:%d)",lpObj->lpGuild->Name,
; 127  : 		lpObj->AccountID,lpObj->Name,lpObj->MapNumber,cX,cY);

  00388	8b 4d f4	 mov	 ecx, DWORD PTR tv412[ebp]
  0038b	0f b6 87 49 01
	00 00		 movzx	 eax, BYTE PTR [edi+329]
  00392	8b 55 f0	 mov	 edx, DWORD PTR tv413[ebp]
  00395	51		 push	 ecx
  00396	52		 push	 edx
  00397	50		 push	 eax
  00398	8b 87 38 04 00
	00		 mov	 eax, DWORD PTR [edi+1080]
  0039e	8d 4f 77	 lea	 ecx, DWORD PTR [edi+119]
  003a1	51		 push	 ecx
  003a2	8d 57 6c	 lea	 edx, DWORD PTR [edi+108]
  003a5	52		 push	 edx
  003a6	83 c0 04	 add	 eax, 4
  003a9	50		 push	 eax
  003aa	68 00 00 00 00	 push	 OFFSET ??_C@_0EI@CHDCMOII@?$FLCastleSiege?$FN?5LifeStone?5is?5creat@
  003af	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  003b5	83 c4 24	 add	 esp, 36			; 00000024H

; 128  : 		lpObj->m_btLifeStoneCount++;

  003b8	fe 87 14 1c 00
	00		 inc	 BYTE PTR [edi+7188]
  003be	5f		 pop	 edi
  003bf	5e		 pop	 esi

; 134  : 	}
; 135  : 	return TRUE;

  003c0	b8 01 00 00 00	 mov	 eax, 1
  003c5	5b		 pop	 ebx

; 136  : }

  003c6	8b e5		 mov	 esp, ebp
  003c8	5d		 pop	 ebp
  003c9	c2 04 00	 ret	 4
$LN3@CreateLife:

; 129  : 	}
; 130  : 	else
; 131  : 	{
; 132  : 		MsgOutput(iIndex, lMsg.Get(1647));

  003cc	68 6f 06 00 00	 push	 1647			; 0000066fH
$LN15@CreateLife:
  003d1	b9 00 00 00 00	 mov	 ecx, OFFSET ?lMsg@@3VCMsg@@A ; lMsg
  003d6	e8 00 00 00 00	 call	 ?Get@CMsg@@QAEPADH@Z	; CMsg::Get
  003db	8b 4d 08	 mov	 ecx, DWORD PTR _iIndex$[ebp]
  003de	50		 push	 eax
  003df	51		 push	 ecx
  003e0	e8 00 00 00 00	 call	 ?MsgOutput@@YAXHPADZZ	; MsgOutput
  003e5	83 c4 08	 add	 esp, 8
$LN16@CreateLife:

; 133  : 		return FALSE;

  003e8	5f		 pop	 edi
  003e9	5e		 pop	 esi
  003ea	33 c0		 xor	 eax, eax
  003ec	5b		 pop	 ebx

; 136  : }

  003ed	8b e5		 mov	 esp, ebp
  003ef	5d		 pop	 ebp
  003f0	c2 04 00	 ret	 4
?CreateLifeStone@CLifeStone@@QAEHH@Z ENDP		; CLifeStone::CreateLifeStone
_TEXT	ENDS
PUBLIC	??_C@_0CJ@GNLPCFHP@?$FLCastleSiege?$FN?5LifeStone?5is?5broke@ ; `string'
PUBLIC	?DeleteLifeStone@CLifeStone@@QAEHH@Z		; CLifeStone::DeleteLifeStone
;	COMDAT ??_C@_0CJ@GNLPCFHP@?$FLCastleSiege?$FN?5LifeStone?5is?5broke@
CONST	SEGMENT
??_C@_0CJ@GNLPCFHP@?$FLCastleSiege?$FN?5LifeStone?5is?5broke@ DB '[Castle'
	DB	'Siege] LifeStone is broken - [%s]', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DeleteLifeStone@CLifeStone@@QAEHH@Z
_TEXT	SEGMENT
_iIndex$ = 8						; size = 4
?DeleteLifeStone@CLifeStone@@QAEHH@Z PROC		; CLifeStone::DeleteLifeStone, COMDAT
; _this$ = ecx

; 139  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 140  : 
; 141  : 	if(iIndex < 0 || iIndex > OBJMAX - 1)

  00003	8b 45 08	 mov	 eax, DWORD PTR _iIndex$[ebp]
  00006	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  0000b	77 45		 ja	 SHORT $LN2@DeleteLife

; 144  : 	}
; 145  : 
; 146  : 	LPOBJ lpLifeStone = &gObj[iIndex];

  0000d	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00013	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00019	56		 push	 esi
  0001a	8b f0		 mov	 esi, eax

; 147  : 
; 148  : 	if(lpLifeStone->lpGuild)

  0001c	8b 86 38 04 00
	00		 mov	 eax, DWORD PTR [esi+1080]
  00022	85 c0		 test	 eax, eax
  00024	74 22		 je	 SHORT $LN1@DeleteLife

; 149  : 	{
; 150  : 		LogAddTD("[CastleSiege] LifeStone is broken - [%s]",lpLifeStone->lpGuild->Name);

  00026	83 c0 04	 add	 eax, 4
  00029	50		 push	 eax
  0002a	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@GNLPCFHP@?$FLCastleSiege?$FN?5LifeStone?5is?5broke@
  0002f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 151  : 		lpLifeStone->lpGuild->lpLifeStone = 0;

  00035	8b 86 38 04 00
	00		 mov	 eax, DWORD PTR [esi+1080]
  0003b	83 c4 08	 add	 esp, 8
  0003e	c7 80 34 07 00
	00 00 00 00 00	 mov	 DWORD PTR [eax+1844], 0
$LN1@DeleteLife:

; 152  : 	}
; 153  : 	return TRUE;

  00048	b8 01 00 00 00	 mov	 eax, 1
  0004d	5e		 pop	 esi

; 154  : }

  0004e	5d		 pop	 ebp
  0004f	c2 04 00	 ret	 4
$LN2@DeleteLife:

; 142  : 	{
; 143  : 		return FALSE;

  00052	33 c0		 xor	 eax, eax

; 154  : }

  00054	5d		 pop	 ebp
  00055	c2 04 00	 ret	 4
?DeleteLifeStone@CLifeStone@@QAEHH@Z ENDP		; CLifeStone::DeleteLifeStone
_TEXT	ENDS
PUBLIC	?SetReSpawnUserXY@CLifeStone@@QAEHH@Z		; CLifeStone::SetReSpawnUserXY
EXTRN	?gObjIsConnected@@YAHH@Z:PROC			; gObjIsConnected
; Function compile flags: /Ogtp
;	COMDAT ?SetReSpawnUserXY@CLifeStone@@QAEHH@Z
_TEXT	SEGMENT
_iUserIndex$ = 8					; size = 4
?SetReSpawnUserXY@CLifeStone@@QAEHH@Z PROC		; CLifeStone::SetReSpawnUserXY, COMDAT
; _this$ = ecx

; 157  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 158  : 	
; 159  : 	if(!gObjIsConnected(iUserIndex))

  00004	8b 75 08	 mov	 esi, DWORD PTR _iUserIndex$[ebp]
  00007	56		 push	 esi
  00008	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  0000d	83 c4 04	 add	 esp, 4
  00010	85 c0		 test	 eax, eax
  00012	75 07		 jne	 SHORT $LN5@SetReSpawn
$LN8@SetReSpawn:

; 160  : 	{
; 161  : 		return FALSE;

  00014	33 c0		 xor	 eax, eax
  00016	5e		 pop	 esi

; 194  : }

  00017	5d		 pop	 ebp
  00018	c2 04 00	 ret	 4
$LN5@SetReSpawn:

; 162  : 	}
; 163  : 
; 164  : 	LPOBJ lpUser = &gObj[iUserIndex];

  0001b	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00021	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 165  : 
; 166  : 	if(lpUser->MapNumber != MAP_INDEX_CASTLESIEGE)

  00027	b2 1e		 mov	 dl, 30			; 0000001eH
  00029	8b c6		 mov	 eax, esi
  0002b	38 90 49 01 00
	00		 cmp	 BYTE PTR [eax+329], dl

; 167  : 	{
; 168  : 		return FALSE;

  00031	75 e1		 jne	 SHORT $LN8@SetReSpawn

; 169  : 	}
; 170  : 
; 171  : 	if(!lpUser->lpGuild) //HermeX Fix

  00033	8b 88 38 04 00
	00		 mov	 ecx, DWORD PTR [eax+1080]
  00039	85 c9		 test	 ecx, ecx

; 172  : 	{
; 173  : 		return FALSE;

  0003b	74 d7		 je	 SHORT $LN8@SetReSpawn

; 174  : 	}
; 175  : 
; 176  : 	BYTE btCsJoinSide = lpUser->m_btCsJoinSide;
; 177  : 
; 178  : 	if(lpUser->lpGuild->lpLifeStone == 0)

  0003d	8b 89 34 07 00
	00		 mov	 ecx, DWORD PTR [ecx+1844]
  00043	85 c9		 test	 ecx, ecx

; 179  : 	{
; 180  : 		return FALSE;

  00045	74 cd		 je	 SHORT $LN8@SetReSpawn

; 181  : 	}
; 182  : 
; 183  : 	LPOBJ lpLifeStone = lpUser->lpGuild->lpLifeStone;
; 184  : 
; 185  : 	if(lpLifeStone->m_iCreatedActivationTime < 60)//NEW

  00047	83 b9 18 1c 00
	00 3c		 cmp	 DWORD PTR [ecx+7192], 60 ; 0000003cH

; 186  : 	{
; 187  : 		return FALSE;

  0004e	7c c4		 jl	 SHORT $LN8@SetReSpawn

; 188  : 	}
; 189  : 
; 190  : 	lpUser->MapNumber = MAP_INDEX_CASTLESIEGE;

  00050	88 90 49 01 00
	00		 mov	 BYTE PTR [eax+329], dl

; 191  : 	lpUser->X = lpLifeStone->X;

  00056	66 8b 91 44 01
	00 00		 mov	 dx, WORD PTR [ecx+324]
  0005d	66 89 90 44 01
	00 00		 mov	 WORD PTR [eax+324], dx

; 192  : 	lpUser->Y = lpLifeStone->Y;

  00064	66 8b 89 46 01
	00 00		 mov	 cx, WORD PTR [ecx+326]
  0006b	66 89 88 46 01
	00 00		 mov	 WORD PTR [eax+326], cx

; 193  : 	return TRUE;

  00072	b8 01 00 00 00	 mov	 eax, 1
  00077	5e		 pop	 esi

; 194  : }

  00078	5d		 pop	 ebp
  00079	c2 04 00	 ret	 4
?SetReSpawnUserXY@CLifeStone@@QAEHH@Z ENDP		; CLifeStone::SetReSpawnUserXY
_TEXT	ENDS
PUBLIC	__real@4059000000000000
PUBLIC	?LifeStoneAct@CLifeStone@@QAEXH@Z		; CLifeStone::LifeStoneAct
EXTRN	?GCManaSend@@YAXHHEEH@Z:PROC			; GCManaSend
EXTRN	?GCReFillSend@@YAXHHEEH@Z:PROC			; GCReFillSend
EXTRN	?GCSendObjectCreationState@@YAXH@Z:PROC		; GCSendObjectCreationState
EXTRN	__ftol2_sse:PROC
;	COMDAT __real@4059000000000000
CONST	SEGMENT
__real@4059000000000000 DQ 04059000000000000r	; 100
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?LifeStoneAct@CLifeStone@@QAEXH@Z
_TEXT	SEGMENT
_iRecoverBP$209095 = -20				; size = 4
tv341 = -16						; size = 4
_tObjNum$ = -12						; size = 4
_iRecoverMana$209094 = -8				; size = 4
_iRecoverLife$209093 = -4				; size = 4
tv692 = 8						; size = 4
_iIndex$ = 8						; size = 4
_btCreationState$ = 11					; size = 1
?LifeStoneAct@CLifeStone@@QAEXH@Z PROC			; CLifeStone::LifeStoneAct, COMDAT
; _this$ = ecx

; 197  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	56		 push	 esi

; 198  : 	if(!gObjIsConnected(iIndex))

  00007	8b 75 08	 mov	 esi, DWORD PTR _iIndex$[ebp]
  0000a	56		 push	 esi
  0000b	e8 00 00 00 00	 call	 ?gObjIsConnected@@YAHH@Z ; gObjIsConnected
  00010	83 c4 04	 add	 esp, 4
  00013	85 c0		 test	 eax, eax
  00015	0f 84 d7 02 00
	00		 je	 $LN16@LifeStoneA

; 199  : 	{
; 200  : 		return;
; 201  : 	}
; 202  : 
; 203  : 	LPOBJ lpObj = &gObj[iIndex];

  0001b	53		 push	 ebx
  0001c	8b de		 mov	 ebx, esi
  0001e	69 db 50 2b 00
	00		 imul	 ebx, 11088		; 00002b50H
  00024	03 1d 00 00 00
	00		 add	 ebx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002a	57		 push	 edi

; 204  : 
; 205  : 	lpObj->m_iCreatedActivationTime++;
; 206  : 	BYTE btCreationState = lpObj->m_btCreationState; //HermeX Fix

  0002b	8a 83 15 1c 00
	00		 mov	 al, BYTE PTR [ebx+7189]
  00031	bf 01 00 00 00	 mov	 edi, 1
  00036	01 bb 18 1c 00
	00		 add	 DWORD PTR [ebx+7192], edi
  0003c	8b 8b 18 1c 00
	00		 mov	 ecx, DWORD PTR [ebx+7192]
  00042	88 45 0b	 mov	 BYTE PTR _btCreationState$[ebp], al

; 207  : 
; 208  : 	if(lpObj->m_iCreatedActivationTime < 60 )

  00045	83 f9 3c	 cmp	 ecx, 60			; 0000003cH
  00048	7d 18		 jge	 SHORT $LN23@LifeStoneA

; 209  : 	{
; 210  : 		lpObj->m_btCreationState = (lpObj->m_iCreatedActivationTime / 12);

  0004a	b8 ab aa aa 2a	 mov	 eax, 715827883		; 2aaaaaabH
  0004f	f7 e9		 imul	 ecx
  00051	d1 fa		 sar	 edx, 1
  00053	8b ca		 mov	 ecx, edx
  00055	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  00058	03 ca		 add	 ecx, edx
  0005a	88 8b 15 1c 00
	00		 mov	 BYTE PTR [ebx+7189], cl

; 211  : 	}
; 212  : 	else //HermeX Fix

  00060	eb 07		 jmp	 SHORT $LN22@LifeStoneA
$LN23@LifeStoneA:

; 213  : 	{
; 214  : 		lpObj->m_btCreationState = 5;

  00062	c6 83 15 1c 00
	00 05		 mov	 BYTE PTR [ebx+7189], 5
$LN22@LifeStoneA:

; 215  : 	}
; 216  : 
; 217  : 	if(btCreationState != lpObj->m_btCreationState) //HermeX Fix

  00069	8a 55 0b	 mov	 dl, BYTE PTR _btCreationState$[ebp]
  0006c	3a 93 15 1c 00
	00		 cmp	 dl, BYTE PTR [ebx+7189]
  00072	74 09		 je	 SHORT $LN21@LifeStoneA

; 218  : 	{
; 219  : 		::GCSendObjectCreationState(iIndex);

  00074	56		 push	 esi
  00075	e8 00 00 00 00	 call	 ?GCSendObjectCreationState@@YAXH@Z ; GCSendObjectCreationState
  0007a	83 c4 04	 add	 esp, 4
$LN21@LifeStoneA:

; 220  : 	}
; 221  : 
; 222  : 	if(lpObj->m_btCreationState < 5)

  0007d	80 bb 15 1c 00
	00 05		 cmp	 BYTE PTR [ebx+7189], 5
  00084	0f 82 66 02 00
	00		 jb	 $LN36@LifeStoneA

; 223  : 	{
; 224  : 		return;
; 225  : 	}
; 226  : 
; 227  : 	if(lpObj->VPCount < 1)

  0008a	39 bb 30 0c 00
	00		 cmp	 DWORD PTR [ebx+3120], edi
  00090	0f 8c 5a 02 00
	00		 jl	 $LN36@LifeStoneA

; 228  : 	{
; 229  : 		return;
; 230  : 	}
; 231  : 
; 232  : 		int tObjNum = -1;
; 233  : 
; 234  : 		for(int i = 0; i < MAX_VIEWPORT; i++) //HermeX Fix

  00096	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0009c	8d 83 2a 05 00
	00		 lea	 eax, DWORD PTR [ebx+1322]
  000a2	89 45 08	 mov	 DWORD PTR tv692[ebp], eax
  000a5	c7 45 f0 4b 00
	00 00		 mov	 DWORD PTR tv341[ebp], 75 ; 0000004bH
  000ac	8d 64 24 00	 npad	 4
$LL29@LifeStoneA:

; 235  : 		{
; 236  : 			BOOL iRecoverLife,iRecoverMana,iRecoverBP;
; 237  : 
; 238  : 			tObjNum = lpObj->VpPlayer[i].number;

  000b0	8b 55 08	 mov	 edx, DWORD PTR tv692[ebp]
  000b3	dd 05 00 00 00
	00		 fld	 QWORD PTR __real@4059000000000000
  000b9	0f bf 32	 movsx	 esi, WORD PTR [edx]

; 239  : 				
; 240  : 			if(tObjNum >= 0)

  000bc	33 ff		 xor	 edi, edi
  000be	89 75 f4	 mov	 DWORD PTR _tObjNum$[ebp], esi
  000c1	3b f7		 cmp	 esi, edi
  000c3	0f 8c 18 02 00
	00		 jl	 $LN55@LifeStoneA

; 241  : 			{
; 242  : 				if(gObj[tObjNum].Type == OBJ_USER)

  000c9	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  000cf	66 83 7c 0e 68
	01		 cmp	 WORD PTR [esi+ecx+104], 1
  000d5	0f 85 06 02 00
	00		 jne	 $LN55@LifeStoneA

; 243  : 				{
; 244  : 					if(gObj[tObjNum].Live != FALSE)

  000db	80 7c 0e 6a 00	 cmp	 BYTE PTR [esi+ecx+106], 0
  000e0	0f 84 fb 01 00
	00		 je	 $LN55@LifeStoneA

; 245  : 					{
; 246  : 						if(gObj[tObjNum].m_btCsJoinSide == lpObj->m_btCsJoinSide)

  000e6	8a 84 0e 02 1c
	00 00		 mov	 al, BYTE PTR [esi+ecx+7170]
  000ed	3a 83 02 1c 00
	00		 cmp	 al, BYTE PTR [ebx+7170]
  000f3	0f 85 e8 01 00
	00		 jne	 $LN55@LifeStoneA

; 247  : 						{
; 248  : 							if(abs(lpObj->Y - gObj[tObjNum].Y) <= 3)

  000f9	0f bf 94 0e 46
	01 00 00	 movsx	 edx, WORD PTR [esi+ecx+326]
  00101	0f bf 83 46 01
	00 00		 movsx	 eax, WORD PTR [ebx+326]
  00108	2b c2		 sub	 eax, edx
  0010a	99		 cdq
  0010b	33 c2		 xor	 eax, edx
  0010d	2b c2		 sub	 eax, edx
  0010f	83 f8 03	 cmp	 eax, 3
  00112	0f 8f c9 01 00
	00		 jg	 $LN55@LifeStoneA

; 249  : 							{
; 250  : 								if(abs(lpObj->X - gObj[tObjNum].X) <= 3) //fix

  00118	0f bf 94 0e 44
	01 00 00	 movsx	 edx, WORD PTR [esi+ecx+324]
  00120	0f bf 83 44 01
	00 00		 movsx	 eax, WORD PTR [ebx+324]
  00127	2b c2		 sub	 eax, edx
  00129	99		 cdq
  0012a	33 c2		 xor	 eax, edx
  0012c	2b c2		 sub	 eax, edx
  0012e	83 f8 03	 cmp	 eax, 3
  00131	0f 8f aa 01 00
	00		 jg	 $LN55@LifeStoneA

; 251  : 								{
; 252  : 									iRecoverLife = FALSE;
; 253  : 									iRecoverMana = FALSE;
; 254  : 									iRecoverBP = FALSE;
; 255  : 
; 256  : 									if(gObj[tObjNum].Life < (gObj[tObjNum].MaxLife + gObj[tObjNum].AddLife)) //SirMaster Fix

  00137	db 84 0e 4c 01
	00 00		 fild	 DWORD PTR [esi+ecx+332]
  0013e	8d 94 0e fc 00
	00 00		 lea	 edx, DWORD PTR [esi+ecx+252]
  00145	89 7d fc	 mov	 DWORD PTR _iRecoverLife$209093[ebp], edi
  00148	89 7d f8	 mov	 DWORD PTR _iRecoverMana$209094[ebp], edi
  0014b	d8 84 0e 00 01
	00 00		 fadd	 DWORD PTR [esi+ecx+256]
  00152	89 7d ec	 mov	 DWORD PTR _iRecoverBP$209095[ebp], edi
  00155	d9 02		 fld	 DWORD PTR [edx]
  00157	d8 d9		 fcomp	 ST(1)
  00159	df e0		 fnstsw	 ax
  0015b	f6 c4 05	 test	 ah, 5
  0015e	7a 48		 jp	 SHORT $LN58@LifeStoneA

; 257  : 									{
; 258  : 										gObj[tObjNum].Life += ((gObj[tObjNum].MaxLife + gObj[tObjNum].AddLife) / 100 ); //SirMaster Fix

  00160	d8 f1		 fdiv	 ST(0), ST(1)
  00162	d8 02		 fadd	 DWORD PTR [edx]
  00164	d9 1a		 fstp	 DWORD PTR [edx]

; 259  : 										
; 260  : 										if(gObj[tObjNum].Life > (gObj[tObjNum].MaxLife + gObj[tObjNum].AddLife)) //SirMaster Fix

  00166	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0016c	db 84 0e 4c 01
	00 00		 fild	 DWORD PTR [esi+ecx+332]
  00173	8d 94 0e fc 00
	00 00		 lea	 edx, DWORD PTR [esi+ecx+252]
  0017a	d8 84 0e 00 01
	00 00		 fadd	 DWORD PTR [esi+ecx+256]
  00181	d9 02		 fld	 DWORD PTR [edx]
  00183	d8 d9		 fcomp	 ST(1)
  00185	df e0		 fnstsw	 ax
  00187	f6 c4 41	 test	 ah, 65			; 00000041H
  0018a	75 11		 jne	 SHORT $LN61@LifeStoneA

; 261  : 										{
; 262  : 											gObj[tObjNum].Life = (gObj[tObjNum].MaxLife + gObj[tObjNum].AddLife); //SirMaster Fix

  0018c	d9 1a		 fstp	 DWORD PTR [edx]
  0018e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 263  : 										}
; 264  : 										iRecoverLife = TRUE;

  00194	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _iRecoverLife$209093[ebp], 1
  0019b	eb 0d		 jmp	 SHORT $LN33@LifeStoneA
$LN61@LifeStoneA:

; 261  : 										{
; 262  : 											gObj[tObjNum].Life = (gObj[tObjNum].MaxLife + gObj[tObjNum].AddLife); //SirMaster Fix

  0019d	dd d8		 fstp	 ST(0)

; 263  : 										}
; 264  : 										iRecoverLife = TRUE;

  0019f	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _iRecoverLife$209093[ebp], 1
  001a6	eb 02		 jmp	 SHORT $LN33@LifeStoneA
$LN58@LifeStoneA:
  001a8	dd d8		 fstp	 ST(0)
$LN33@LifeStoneA:

; 265  : 									}
; 266  : 
; 267  : 									if(gObj[tObjNum].Mana < (gObj[tObjNum].MaxMana + gObj[tObjNum].AddMana) ) //SirMaster Fix

  001aa	db 84 0e 50 01
	00 00		 fild	 DWORD PTR [esi+ecx+336]
  001b1	8d 94 0e 10 01
	00 00		 lea	 edx, DWORD PTR [esi+ecx+272]
  001b8	d8 84 0e 14 01
	00 00		 fadd	 DWORD PTR [esi+ecx+276]
  001bf	d9 02		 fld	 DWORD PTR [edx]
  001c1	d8 d9		 fcomp	 ST(1)
  001c3	df e0		 fnstsw	 ax
  001c5	f6 c4 05	 test	 ah, 5
  001c8	7a 48		 jp	 SHORT $LN64@LifeStoneA

; 268  : 									{
; 269  : 										gObj[tObjNum].Mana += ((gObj[tObjNum].MaxMana + gObj[tObjNum].AddMana) / 100 ); //SirMaster Fix

  001ca	de f1		 fdivrp	 ST(1), ST(0)
  001cc	d8 02		 fadd	 DWORD PTR [edx]
  001ce	d9 1a		 fstp	 DWORD PTR [edx]

; 270  : 	
; 271  : 										if(gObj[tObjNum].Mana > (gObj[tObjNum].MaxMana + gObj[tObjNum].AddMana)) //SirMaster Fix

  001d0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001d6	db 84 0e 50 01
	00 00		 fild	 DWORD PTR [esi+ecx+336]
  001dd	8d 94 0e 10 01
	00 00		 lea	 edx, DWORD PTR [esi+ecx+272]
  001e4	d8 84 0e 14 01
	00 00		 fadd	 DWORD PTR [esi+ecx+276]
  001eb	d9 02		 fld	 DWORD PTR [edx]
  001ed	d8 d9		 fcomp	 ST(1)
  001ef	df e0		 fnstsw	 ax
  001f1	f6 c4 41	 test	 ah, 65			; 00000041H
  001f4	75 11		 jne	 SHORT $LN67@LifeStoneA

; 272  : 										{
; 273  : 											gObj[tObjNum].Mana = (gObj[tObjNum].MaxMana + gObj[tObjNum].AddMana); //SirMaster Fix

  001f6	d9 1a		 fstp	 DWORD PTR [edx]
  001f8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 274  : 										}
; 275  : 										iRecoverMana = TRUE;

  001fe	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _iRecoverMana$209094[ebp], 1
  00205	eb 0f		 jmp	 SHORT $LN7@LifeStoneA
$LN67@LifeStoneA:

; 272  : 										{
; 273  : 											gObj[tObjNum].Mana = (gObj[tObjNum].MaxMana + gObj[tObjNum].AddMana); //SirMaster Fix

  00207	dd d8		 fstp	 ST(0)

; 274  : 										}
; 275  : 										iRecoverMana = TRUE;

  00209	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _iRecoverMana$209094[ebp], 1
  00210	eb 04		 jmp	 SHORT $LN7@LifeStoneA
$LN64@LifeStoneA:
  00212	dd d8		 fstp	 ST(0)
  00214	dd d8		 fstp	 ST(0)
$LN7@LifeStoneA:

; 276  : 									}
; 277  : 
; 278  : 									if(gObj[tObjNum].BP < (gObj[tObjNum].MaxBP + gObj[tObjNum].AddBP))

  00216	8b 94 0e 2c 01
	00 00		 mov	 edx, DWORD PTR [esi+ecx+300]
  0021d	03 94 0e 30 01
	00 00		 add	 edx, DWORD PTR [esi+ecx+304]
  00224	8d bc 0e 28 01
	00 00		 lea	 edi, DWORD PTR [esi+ecx+296]
  0022b	39 17		 cmp	 DWORD PTR [edi], edx
  0022d	7d 41		 jge	 SHORT $LN30@LifeStoneA

; 279  : 									{
; 280  : 										gObj[tObjNum].BP += ((gObj[tObjNum].MaxBP + gObj[tObjNum].AddBP) / 100);

  0022f	b8 1f 85 eb 51	 mov	 eax, 1374389535		; 51eb851fH
  00234	f7 ea		 imul	 edx
  00236	c1 fa 05	 sar	 edx, 5
  00239	8b c2		 mov	 eax, edx
  0023b	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  0023e	03 c2		 add	 eax, edx
  00240	01 07		 add	 DWORD PTR [edi], eax

; 281  : 
; 282  : 										if(gObj[tObjNum].BP > (gObj[tObjNum].MaxBP + gObj[tObjNum].AddBP))

  00242	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00248	8b 84 0e 2c 01
	00 00		 mov	 eax, DWORD PTR [esi+ecx+300]
  0024f	03 84 0e 30 01
	00 00		 add	 eax, DWORD PTR [esi+ecx+304]
  00256	8d 94 0e 28 01
	00 00		 lea	 edx, DWORD PTR [esi+ecx+296]
  0025d	39 02		 cmp	 DWORD PTR [edx], eax
  0025f	7e 08		 jle	 SHORT $LN4@LifeStoneA

; 283  : 										{
; 284  : 											gObj[tObjNum].BP = (gObj[tObjNum].MaxBP + gObj[tObjNum].AddBP);

  00261	89 02		 mov	 DWORD PTR [edx], eax
  00263	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
$LN4@LifeStoneA:

; 285  : 										}
; 286  : 										iRecoverBP = TRUE;

  00269	bf 01 00 00 00	 mov	 edi, 1
  0026e	eb 03		 jmp	 SHORT $LN5@LifeStoneA
$LN30@LifeStoneA:
  00270	8b 7d ec	 mov	 edi, DWORD PTR _iRecoverBP$209095[ebp]
$LN5@LifeStoneA:

; 287  : 									}
; 288  : 
; 289  : 									if(iRecoverLife != FALSE)

  00273	83 7d fc 00	 cmp	 DWORD PTR _iRecoverLife$209093[ebp], 0
  00277	74 2e		 je	 SHORT $LN31@LifeStoneA

; 290  : 									{
; 291  : 										::GCReFillSend(tObjNum,gObj[tObjNum].Life,0xFF,1,gObj[tObjNum].iShield);

  00279	8b 94 0e 54 01
	00 00		 mov	 edx, DWORD PTR [esi+ecx+340]
  00280	d9 84 0e fc 00
	00 00		 fld	 DWORD PTR [esi+ecx+252]
  00287	52		 push	 edx
  00288	6a 01		 push	 1
  0028a	68 ff 00 00 00	 push	 255			; 000000ffH
  0028f	e8 00 00 00 00	 call	 __ftol2_sse
  00294	50		 push	 eax
  00295	8b 45 f4	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  00298	50		 push	 eax
  00299	e8 00 00 00 00	 call	 ?GCReFillSend@@YAXHHEEH@Z ; GCReFillSend
  0029e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002a4	83 c4 14	 add	 esp, 20			; 00000014H
$LN31@LifeStoneA:

; 292  : 									}
; 293  : 
; 294  : 									if( (iRecoverMana != FALSE) || (iRecoverBP != FALSE) )

  002a7	83 7d f8 00	 cmp	 DWORD PTR _iRecoverMana$209094[ebp], 0
  002ab	75 04		 jne	 SHORT $LN1@LifeStoneA
  002ad	85 ff		 test	 edi, edi
  002af	74 32		 je	 SHORT $LN17@LifeStoneA
$LN1@LifeStoneA:

; 295  : 									{
; 296  : 										::GCManaSend(tObjNum,gObj[tObjNum].Mana,0xFF,0,gObj[tObjNum].BP);

  002b1	8b 94 0e 28 01
	00 00		 mov	 edx, DWORD PTR [esi+ecx+296]
  002b8	d9 84 0e 10 01
	00 00		 fld	 DWORD PTR [esi+ecx+272]
  002bf	52		 push	 edx
  002c0	6a 00		 push	 0
  002c2	68 ff 00 00 00	 push	 255			; 000000ffH
  002c7	e8 00 00 00 00	 call	 __ftol2_sse
  002cc	50		 push	 eax
  002cd	8b 45 f4	 mov	 eax, DWORD PTR _tObjNum$[ebp]
  002d0	50		 push	 eax
  002d1	e8 00 00 00 00	 call	 ?GCManaSend@@YAXHHEEH@Z	; GCManaSend
  002d6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  002dc	83 c4 14	 add	 esp, 20			; 00000014H
  002df	eb 02		 jmp	 SHORT $LN17@LifeStoneA
$LN55@LifeStoneA:

; 249  : 							{
; 250  : 								if(abs(lpObj->X - gObj[tObjNum].X) <= 3) //fix

  002e1	dd d8		 fstp	 ST(0)
$LN17@LifeStoneA:

; 228  : 	{
; 229  : 		return;
; 230  : 	}
; 231  : 
; 232  : 		int tObjNum = -1;
; 233  : 
; 234  : 		for(int i = 0; i < MAX_VIEWPORT; i++) //HermeX Fix

  002e3	83 45 08 0c	 add	 DWORD PTR tv692[ebp], 12 ; 0000000cH
  002e7	ff 4d f0	 dec	 DWORD PTR tv341[ebp]
  002ea	0f 85 c0 fd ff
	ff		 jne	 $LL29@LifeStoneA
$LN36@LifeStoneA:
  002f0	5f		 pop	 edi
  002f1	5b		 pop	 ebx
$LN16@LifeStoneA:
  002f2	5e		 pop	 esi

; 297  : 									}
; 298  : 								}
; 299  : 							}
; 300  : 						}
; 301  : 					}
; 302  : 				}
; 303  : 			}
; 304  : 			continue;
; 305  : 		}
; 306  : }

  002f3	8b e5		 mov	 esp, ebp
  002f5	5d		 pop	 ebp
  002f6	c2 04 00	 ret	 4
?LifeStoneAct@CLifeStone@@QAEXH@Z ENDP			; CLifeStone::LifeStoneAct
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCLifeStone@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCLifeStone@@UAEPAXI@Z PROC				; CLifeStone::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CLifeStone@@UAE@XZ	; CLifeStone::~CLifeStone
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCLifeStone@@UAEPAXI@Z ENDP				; CLifeStone::`scalar deleting destructor'
_TEXT	ENDS
EXTRN	_atexit:PROC
; Function compile flags: /Ogtp
;	COMDAT ??__Eg_CsNPC_LifeStone@@YAXXZ
text$yc	SEGMENT
??__Eg_CsNPC_LifeStone@@YAXXZ PROC			; `dynamic initializer for 'g_CsNPC_LifeStone'', COMDAT

; 15   : CLifeStone g_CsNPC_LifeStone;

  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CsNPC_LifeStone@@3VCLifeStone@@A ; g_CsNPC_LifeStone
  00005	e8 00 00 00 00	 call	 ??0CLifeStone@@QAE@XZ	; CLifeStone::CLifeStone
  0000a	68 00 00 00 00	 push	 OFFSET ??__Fg_CsNPC_LifeStone@@YAXXZ ; `dynamic atexit destructor for 'g_CsNPC_LifeStone''
  0000f	e8 00 00 00 00	 call	 _atexit
  00014	59		 pop	 ecx
  00015	c3		 ret	 0
??__Eg_CsNPC_LifeStone@@YAXXZ ENDP			; `dynamic initializer for 'g_CsNPC_LifeStone''
; Function compile flags: /Ogtp
text$yc	ENDS
;	COMDAT ??__Fg_CsNPC_LifeStone@@YAXXZ
text$yd	SEGMENT
??__Fg_CsNPC_LifeStone@@YAXXZ PROC			; `dynamic atexit destructor for 'g_CsNPC_LifeStone'', COMDAT
  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_CsNPC_LifeStone@@3VCLifeStone@@A ; g_CsNPC_LifeStone
  00005	e9 00 00 00 00	 jmp	 ??1CLifeStone@@UAE@XZ	; CLifeStone::~CLifeStone
??__Fg_CsNPC_LifeStone@@YAXXZ ENDP			; `dynamic atexit destructor for 'g_CsNPC_LifeStone''
text$yd	ENDS
PUBLIC	?g_CsNPC_LifeStone@@3VCLifeStone@@A		; g_CsNPC_LifeStone
_BSS	SEGMENT
?g_CsNPC_LifeStone@@3VCLifeStone@@A DD 01H DUP (?)	; g_CsNPC_LifeStone
_BSS	ENDS
CRT$XCU	SEGMENT
_g_CsNPC_LifeStone$initializer$ DD FLAT:??__Eg_CsNPC_LifeStone@@YAXXZ
CRT$XCU	ENDS
END
