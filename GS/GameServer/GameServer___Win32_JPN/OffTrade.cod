; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\OffTrade.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?gOffTrade@@3VcOffTrade@@A			; gOffTrade
_BSS	SEGMENT
?gOffTrade@@3VcOffTrade@@A DB 0cH DUP (?)		; gOffTrade
_BSS	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_C@_0BE@CJGCNIFL@WorkOnlyLorenMarket?$AA@	; `string'
PUBLIC	??_C@_0O@CPNPILNB@OnlineOffSell?$AA@		; `string'
PUBLIC	??_C@_0N@MPKONGJK@OffTradeLife?$AA@		; `string'
PUBLIC	??_C@_0N@MHNHCPHF@OffTradeSoul?$AA@		; `string'
PUBLIC	??_C@_0O@OMPDGAJF@OffTradeBless?$AA@		; `string'
PUBLIC	??_C@_0O@EIHBNILD@OffTradeChaos?$AA@		; `string'
PUBLIC	??_C@_0P@ELADCPE@OffTradeGoblin?$AA@		; `string'
PUBLIC	??_C@_0P@JPGIFHDK@OffTradeWcoinP?$AA@		; `string'
PUBLIC	??_C@_0P@POIHBGKI@OffTradeWcoinC?$AA@		; `string'
PUBLIC	??_C@_0BA@EBACCJ@OffTradeCredits?$AA@		; `string'
PUBLIC	??_C@_0M@JNCKONMO@OffTradeZen?$AA@		; `string'
PUBLIC	??_C@_06POMJKEPM@Common?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@ ; `string'
PUBLIC	?Load@cOffTrade@@QAEXXZ				; cOffTrade::Load
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
;	COMDAT ??_C@_0BE@CJGCNIFL@WorkOnlyLorenMarket?$AA@
; File e:\work\tranet_version\gs\gameserver\offtrade.cpp
CONST	SEGMENT
??_C@_0BE@CJGCNIFL@WorkOnlyLorenMarket?$AA@ DB 'WorkOnlyLorenMarket', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@CPNPILNB@OnlineOffSell?$AA@
CONST	SEGMENT
??_C@_0O@CPNPILNB@OnlineOffSell?$AA@ DB 'OnlineOffSell', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@MPKONGJK@OffTradeLife?$AA@
CONST	SEGMENT
??_C@_0N@MPKONGJK@OffTradeLife?$AA@ DB 'OffTradeLife', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@MHNHCPHF@OffTradeSoul?$AA@
CONST	SEGMENT
??_C@_0N@MHNHCPHF@OffTradeSoul?$AA@ DB 'OffTradeSoul', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@OMPDGAJF@OffTradeBless?$AA@
CONST	SEGMENT
??_C@_0O@OMPDGAJF@OffTradeBless?$AA@ DB 'OffTradeBless', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@EIHBNILD@OffTradeChaos?$AA@
CONST	SEGMENT
??_C@_0O@EIHBNILD@OffTradeChaos?$AA@ DB 'OffTradeChaos', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@ELADCPE@OffTradeGoblin?$AA@
CONST	SEGMENT
??_C@_0P@ELADCPE@OffTradeGoblin?$AA@ DB 'OffTradeGoblin', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@JPGIFHDK@OffTradeWcoinP?$AA@
CONST	SEGMENT
??_C@_0P@JPGIFHDK@OffTradeWcoinP?$AA@ DB 'OffTradeWcoinP', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@POIHBGKI@OffTradeWcoinC?$AA@
CONST	SEGMENT
??_C@_0P@POIHBGKI@OffTradeWcoinC?$AA@ DB 'OffTradeWcoinC', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@EBACCJ@OffTradeCredits?$AA@
CONST	SEGMENT
??_C@_0BA@EBACCJ@OffTradeCredits?$AA@ DB 'OffTradeCredits', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@JNCKONMO@OffTradeZen?$AA@
CONST	SEGMENT
??_C@_0M@JNCKONMO@OffTradeZen?$AA@ DB 'OffTradeZen', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_06POMJKEPM@Common?$AA@
CONST	SEGMENT
??_C@_06POMJKEPM@Common?$AA@ DB 'Common', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
CONST	SEGMENT
??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@ DB '..\Data\ZtD'
	DB	'ata\OffTrade.ini', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Load@cOffTrade@@QAEXXZ
_TEXT	SEGMENT
?Load@cOffTrade@@QAEXXZ PROC				; cOffTrade::Load, COMDAT
; _this$ = ecx

; 23   : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 24   : 	//CheckFile(OFFTRADE_DIR);
; 25   : 
; 26   : 	this->Enable = GetPrivateProfileInt("Common","Enable",1,OFFTRADE_DIR);

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileIntA@16
  00008	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  0000d	6a 01		 push	 1
  0000f	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  00014	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00019	8b f1		 mov	 esi, ecx
  0001b	ff d7		 call	 edi

; 27   : 
; 28   : 	this->OffTradeZen = GetPrivateProfileInt("Common","OffTradeZen",1,OFFTRADE_DIR);

  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  00022	6a 01		 push	 1
  00024	85 c0		 test	 eax, eax
  00026	68 00 00 00 00	 push	 OFFSET ??_C@_0M@JNCKONMO@OffTradeZen?$AA@
  0002b	0f 95 c0	 setne	 al
  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00033	88 06		 mov	 BYTE PTR [esi], al
  00035	ff d7		 call	 edi

; 29   : 	this->OffTradeCredits = GetPrivateProfileInt("Common","OffTradeCredits",1,OFFTRADE_DIR);

  00037	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  0003c	6a 01		 push	 1
  0003e	85 c0		 test	 eax, eax
  00040	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@EBACCJ@OffTradeCredits?$AA@
  00045	0f 95 c1	 setne	 cl
  00048	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0004d	88 4e 01	 mov	 BYTE PTR [esi+1], cl
  00050	ff d7		 call	 edi

; 30   : 	this->OffTradeWcoinC = GetPrivateProfileInt("Common","OffTradeWcoinC",1,OFFTRADE_DIR);

  00052	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  00057	6a 01		 push	 1
  00059	85 c0		 test	 eax, eax
  0005b	68 00 00 00 00	 push	 OFFSET ??_C@_0P@POIHBGKI@OffTradeWcoinC?$AA@
  00060	0f 95 c2	 setne	 dl
  00063	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00068	88 56 02	 mov	 BYTE PTR [esi+2], dl
  0006b	ff d7		 call	 edi

; 31   : 	this->OffTradeWcoinP = GetPrivateProfileInt("Common","OffTradeWcoinP",1,OFFTRADE_DIR);

  0006d	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  00072	6a 01		 push	 1
  00074	85 c0		 test	 eax, eax
  00076	68 00 00 00 00	 push	 OFFSET ??_C@_0P@JPGIFHDK@OffTradeWcoinP?$AA@
  0007b	0f 95 c0	 setne	 al
  0007e	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00083	88 46 03	 mov	 BYTE PTR [esi+3], al
  00086	ff d7		 call	 edi

; 32   : 	this->OffTradeGoblin = GetPrivateProfileInt("Common","OffTradeGoblin",1,OFFTRADE_DIR);

  00088	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  0008d	6a 01		 push	 1
  0008f	85 c0		 test	 eax, eax
  00091	68 00 00 00 00	 push	 OFFSET ??_C@_0P@ELADCPE@OffTradeGoblin?$AA@
  00096	0f 95 c1	 setne	 cl
  00099	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0009e	88 4e 04	 mov	 BYTE PTR [esi+4], cl
  000a1	ff d7		 call	 edi

; 33   : 
; 34   : 	this->OffTradeChaos = GetPrivateProfileInt("Common","OffTradeChaos",1,OFFTRADE_DIR);

  000a3	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  000a8	6a 01		 push	 1
  000aa	85 c0		 test	 eax, eax
  000ac	68 00 00 00 00	 push	 OFFSET ??_C@_0O@EIHBNILD@OffTradeChaos?$AA@
  000b1	0f 95 c2	 setne	 dl
  000b4	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  000b9	88 56 05	 mov	 BYTE PTR [esi+5], dl
  000bc	ff d7		 call	 edi

; 35   : 	this->OffTradeBless = GetPrivateProfileInt("Common","OffTradeBless",1,OFFTRADE_DIR);

  000be	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  000c3	6a 01		 push	 1
  000c5	85 c0		 test	 eax, eax
  000c7	68 00 00 00 00	 push	 OFFSET ??_C@_0O@OMPDGAJF@OffTradeBless?$AA@
  000cc	0f 95 c0	 setne	 al
  000cf	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  000d4	88 46 06	 mov	 BYTE PTR [esi+6], al
  000d7	ff d7		 call	 edi

; 36   : 	this->OffTradeSoul = GetPrivateProfileInt("Common","OffTradeSoul",1,OFFTRADE_DIR);

  000d9	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  000de	6a 01		 push	 1
  000e0	85 c0		 test	 eax, eax
  000e2	68 00 00 00 00	 push	 OFFSET ??_C@_0N@MHNHCPHF@OffTradeSoul?$AA@
  000e7	0f 95 c1	 setne	 cl
  000ea	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  000ef	88 4e 07	 mov	 BYTE PTR [esi+7], cl
  000f2	ff d7		 call	 edi

; 37   : 	this->OffTradeLife = GetPrivateProfileInt("Common","OffTradeLife",1,OFFTRADE_DIR);

  000f4	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  000f9	6a 01		 push	 1
  000fb	85 c0		 test	 eax, eax
  000fd	68 00 00 00 00	 push	 OFFSET ??_C@_0N@MPKONGJK@OffTradeLife?$AA@
  00102	0f 95 c2	 setne	 dl
  00105	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0010a	88 56 08	 mov	 BYTE PTR [esi+8], dl
  0010d	ff d7		 call	 edi

; 38   : 
; 39   : 	this->OnlineOffSell = GetPrivateProfileInt("Common","OnlineOffSell",0,OFFTRADE_DIR);

  0010f	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  00114	6a 00		 push	 0
  00116	85 c0		 test	 eax, eax
  00118	68 00 00 00 00	 push	 OFFSET ??_C@_0O@CPNPILNB@OnlineOffSell?$AA@
  0011d	0f 95 c0	 setne	 al
  00120	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00125	88 46 09	 mov	 BYTE PTR [esi+9], al
  00128	ff d7		 call	 edi

; 40   : 
; 41   : 	this->WorkOnlyLorenMarket = GetPrivateProfileInt("Common","WorkOnlyLorenMarket",0,OFFTRADE_DIR);

  0012a	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@IFJLMAOO@?4?4?2Data?2ZtData?2OffTrade?4ini?$AA@
  0012f	6a 00		 push	 0
  00131	85 c0		 test	 eax, eax
  00133	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@CJGCNIFL@WorkOnlyLorenMarket?$AA@
  00138	0f 95 c1	 setne	 cl
  0013b	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00140	88 4e 0a	 mov	 BYTE PTR [esi+10], cl
  00143	ff d7		 call	 edi
  00145	85 c0		 test	 eax, eax
  00147	0f 95 c2	 setne	 dl
  0014a	5f		 pop	 edi
  0014b	88 56 0b	 mov	 BYTE PTR [esi+11], dl
  0014e	5e		 pop	 esi

; 42   : 	
; 43   : }

  0014f	c3		 ret	 0
?Load@cOffTrade@@QAEXXZ ENDP				; cOffTrade::Load
_TEXT	ENDS
PUBLIC	?ConnectUser@cOffTrade@@QAEXPAD@Z		; cOffTrade::ConnectUser
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
EXTRN	?GJPUserClose@@YAXPAD@Z:PROC			; GJPUserClose
EXTRN	?GD_OfflineAfk@CZtGDManager@@QAEXHEE@Z:PROC	; CZtGDManager::GD_OfflineAfk
EXTRN	?g_ZtGDManager@@3VCZtGDManager@@A:BYTE		; g_ZtGDManager
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
; Function compile flags: /Ogtp
;	COMDAT ?ConnectUser@cOffTrade@@QAEXPAD@Z
_TEXT	SEGMENT
_Acc$ = 8						; size = 4
?ConnectUser@cOffTrade@@QAEXPAD@Z PROC			; cOffTrade::ConnectUser, COMDAT
; _this$ = ecx

; 277  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 278  : 	if(!this->Enable)return;

  00003	80 39 00	 cmp	 BYTE PTR [ecx], 0
  00006	0f 84 97 00 00
	00		 je	 $LN1@ConnectUse

; 279  : 
; 280  : 	for(int i = OBJ_MAXMONSTER; i<OBJMAX;i++)

  0000c	53		 push	 ebx
  0000d	8b 5d 08	 mov	 ebx, DWORD PTR _Acc$[ebp]
  00010	56		 push	 esi
  00011	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00017	57		 push	 edi
  00018	bf c8 32 00 00	 mov	 edi, 13000		; 000032c8H
  0001d	81 c6 ec 76 97
	08		 add	 esi, 144144108		; 089776ecH
$LL6@ConnectUse:

; 281  : 	{
; 282  : 		LPOBJ lpObj = &gObj[i];
; 283  : 		if(lpObj->Connected == 3)

  00023	83 7e 98 03	 cmp	 DWORD PTR [esi-104], 3
  00027	75 30		 jne	 SHORT $LN5@ConnectUse

; 284  : 		{
; 285  : 			if(!strcmp(Acc,lpObj->AccountID))

  00029	8b ce		 mov	 ecx, esi
  0002b	8b c3		 mov	 eax, ebx
  0002d	8d 49 00	 npad	 3
$LL13@ConnectUse:
  00030	8a 10		 mov	 dl, BYTE PTR [eax]
  00032	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00034	75 1a		 jne	 SHORT $LN14@ConnectUse
  00036	84 d2		 test	 dl, dl
  00038	74 12		 je	 SHORT $LN15@ConnectUse
  0003a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0003d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00040	75 0e		 jne	 SHORT $LN14@ConnectUse
  00042	83 c0 02	 add	 eax, 2
  00045	83 c1 02	 add	 ecx, 2
  00048	84 d2		 test	 dl, dl
  0004a	75 e4		 jne	 SHORT $LL13@ConnectUse
$LN15@ConnectUse:
  0004c	33 c0		 xor	 eax, eax
  0004e	eb 05		 jmp	 SHORT $LN16@ConnectUse
$LN14@ConnectUse:
  00050	1b c0		 sbb	 eax, eax
  00052	83 d8 ff	 sbb	 eax, -1
$LN16@ConnectUse:
  00055	85 c0		 test	 eax, eax
  00057	74 16		 je	 SHORT $LN11@ConnectUse
$LN5@ConnectUse:

; 279  : 
; 280  : 	for(int i = OBJ_MAXMONSTER; i<OBJMAX;i++)

  00059	47		 inc	 edi
  0005a	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  00060	81 ff 98 3a 00
	00		 cmp	 edi, 15000		; 00003a98H
  00066	7c bb		 jl	 SHORT $LL6@ConnectUse
  00068	5f		 pop	 edi
  00069	5e		 pop	 esi
  0006a	5b		 pop	 ebx

; 293  : 				}
; 294  : 				return;
; 295  : 			}
; 296  : 		}
; 297  : 	}
; 298  : }

  0006b	5d		 pop	 ebp
  0006c	c2 04 00	 ret	 4
$LN11@ConnectUse:

; 286  : 			{
; 287  : 				if(lpObj->OffTrade != 0)

  0006f	83 be 40 22 00
	00 00		 cmp	 DWORD PTR [esi+8768], 0
  00076	74 28		 je	 SHORT $LN17@ConnectUse

; 288  : 				{
; 289  : 					g_ZtGDManager.GD_OfflineAfk(i, 0, 0);

  00078	6a 00		 push	 0
  0007a	6a 00		 push	 0
  0007c	57		 push	 edi
  0007d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtGDManager@@3VCZtGDManager@@A ; g_ZtGDManager
  00082	e8 00 00 00 00	 call	 ?GD_OfflineAfk@CZtGDManager@@QAEXHEE@Z ; CZtGDManager::GD_OfflineAfk

; 290  : 					GJPUserClose(lpObj->AccountID);

  00087	56		 push	 esi
  00088	e8 00 00 00 00	 call	 ?GJPUserClose@@YAXPAD@Z	; GJPUserClose

; 291  : 					gObjDel(i);

  0008d	57		 push	 edi
  0008e	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  00093	83 c4 08	 add	 esp, 8

; 292  : 					lpObj->OffTrade = 0;

  00096	c7 86 40 22 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+8768], 0
$LN17@ConnectUse:
  000a0	5f		 pop	 edi
  000a1	5e		 pop	 esi
  000a2	5b		 pop	 ebx
$LN1@ConnectUse:

; 293  : 				}
; 294  : 				return;
; 295  : 			}
; 296  : 		}
; 297  : 	}
; 298  : }

  000a3	5d		 pop	 ebp
  000a4	c2 04 00	 ret	 4
?ConnectUser@cOffTrade@@QAEXPAD@Z ENDP			; cOffTrade::ConnectUser
_TEXT	ENDS
PUBLIC	?CheckOnlineUser@cOffTrade@@QAE_NH@Z		; cOffTrade::CheckOnlineUser
EXTRN	__imp__GetTickCount@0:PROC
; Function compile flags: /Ogtp
;	COMDAT ?CheckOnlineUser@cOffTrade@@QAE_NH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?CheckOnlineUser@cOffTrade@@QAE_NH@Z PROC		; cOffTrade::CheckOnlineUser, COMDAT
; _this$ = ecx

; 301  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 302  : 	if(!this->Enable) return false;

  00003	80 39 00	 cmp	 BYTE PTR [ecx], 0
  00006	75 06		 jne	 SHORT $LN2@CheckOnlin
  00008	32 c0		 xor	 al, al

; 313  : }

  0000a	5d		 pop	 ebp
  0000b	c2 04 00	 ret	 4
$LN2@CheckOnlin:
  0000e	56		 push	 esi

; 303  : 
; 304  : 	LPOBJ lpObj = &gObj[aIndex];

  0000f	8b 75 08	 mov	 esi, DWORD PTR _aIndex$[ebp]
  00012	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00018	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 305  : 
; 306  : 	if(lpObj->OffTrade != 0)

  0001e	83 be ac 22 00
	00 00		 cmp	 DWORD PTR [esi+8876], 0
  00025	74 10		 je	 SHORT $LN1@CheckOnlin

; 307  : 	{
; 308  : 		lpObj->CheckTick = GetTickCount();

  00027	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0002d	89 46 40	 mov	 DWORD PTR [esi+64], eax

; 309  : 		return true;

  00030	b0 01		 mov	 al, 1
  00032	5e		 pop	 esi

; 313  : }

  00033	5d		 pop	 ebp
  00034	c2 04 00	 ret	 4
$LN1@CheckOnlin:

; 310  : 	}
; 311  : 
; 312  : 	return false;

  00037	32 c0		 xor	 al, al
  00039	5e		 pop	 esi

; 313  : }

  0003a	5d		 pop	 ebp
  0003b	c2 04 00	 ret	 4
?CheckOnlineUser@cOffTrade@@QAE_NH@Z ENDP		; cOffTrade::CheckOnlineUser
_TEXT	ENDS
PUBLIC	??_C@_0EP@LICILKCE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EG@BJIIHLIN@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EM@LDJMGAIA@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EM@HBIPLAHE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EN@NDMMJDBF@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EN@GNFBJJMH@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EJ@PAFIAKNP@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EJ@PFNLIOEJ@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EJ@JEDEMPNL@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	??_C@_0EJ@LJCFNGBB@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ ; `string'
PUBLIC	?CheckMoney@cOffTrade@@QAE_NHHH@Z		; cOffTrade::CheckMoney
EXTRN	?CGPShopAnsBuyItem@@YAXHHHE@Z:PROC		; CGPShopAnsBuyItem
EXTRN	?MsgNormal@@YAXHPADZZ:PROC			; MsgNormal
EXTRN	?GetText@CZtText@@QAEPADH@Z:PROC		; CZtText::GetText
EXTRN	?g_ZtText@@3VCZtText@@A:BYTE			; g_ZtText
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0EP@LICILKCE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EP@LICILKCE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Max '
	DB	'Zen In Inventory', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EG@BJIIHLIN@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EG@BJIIHLIN@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of Zen', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EM@LDJMGAIA@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EM@LDJMGAIA@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of Life Bank', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EM@HBIPLAHE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EM@HBIPLAHE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of Soul Bank', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@NDMMJDBF@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EN@NDMMJDBF@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of Bless Bank', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@GNFBJJMH@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EN@GNFBJJMH@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of Chaos Bank', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EJ@PAFIAKNP@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EJ@PAFIAKNP@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of WCoinG', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EJ@PFNLIOEJ@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EJ@PFNLIOEJ@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of WCoinP', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EJ@JEDEMPNL@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EJ@JEDEMPNL@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of WCoinC', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EJ@LJCFNGBB@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
CONST	SEGMENT
??_C@_0EJ@LJCFNGBB@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@ DB '['
	DB	'PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack'
	DB	' of ZtCred', 00H				; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?CheckMoney@cOffTrade@@QAE_NHHH@Z
_TEXT	SEGMENT
_Value$ = 8						; size = 4
_aSourceIndex$ = 8					; size = 4
_aIndex$ = 12						; size = 4
_ItemPos$ = 16						; size = 4
?CheckMoney@cOffTrade@@QAE_NHHH@Z PROC			; cOffTrade::CheckMoney, COMDAT
; _this$ = ecx

; 316  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 317  : 	if(!this->Enable) return false;

  00003	80 39 00	 cmp	 BYTE PTR [ecx], 0
  00006	75 06		 jne	 SHORT $LN27@CheckMoney
  00008	32 c0		 xor	 al, al

; 450  : }

  0000a	5d		 pop	 ebp
  0000b	c2 0c 00	 ret	 12			; 0000000cH
$LN27@CheckMoney:

; 318  : 
; 319  : 	LPOBJ SourceObj = &gObj[aSourceIndex];
; 320  : 	LPOBJ lpObj = &gObj[aIndex];
; 321  : 
; 322  : 	int Value = lpObj->Inventory1[ItemPos].m_iPShopValue;

  0000e	8b 55 10	 mov	 edx, DWORD PTR _ItemPos$[ebp]
  00011	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00016	69 d2 d4 00 00
	00		 imul	 edx, 212		; 000000d4H
  0001c	53		 push	 ebx
  0001d	8b 5d 08	 mov	 ebx, DWORD PTR _aSourceIndex$[ebp]
  00020	56		 push	 esi
  00021	8b 75 0c	 mov	 esi, DWORD PTR _aIndex$[ebp]
  00024	8b cb		 mov	 ecx, ebx
  00026	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0002c	69 c9 50 2b 00
	00		 imul	 ecx, 11088		; 00002b50H
  00032	03 f0		 add	 esi, eax
  00034	03 c8		 add	 ecx, eax
  00036	8b 86 34 0e 00
	00		 mov	 eax, DWORD PTR [esi+3636]
  0003c	57		 push	 edi
  0003d	8b 7c 10 74	 mov	 edi, DWORD PTR [eax+edx+116]

; 323  : 
; 324  : 
; 325  : 	if(lpObj->OffTrade == OFFCR_DC)

  00041	8b 86 ac 22 00
	00		 mov	 eax, DWORD PTR [esi+8876]
  00047	89 7d 08	 mov	 DWORD PTR _Value$[ebp], edi
  0004a	83 f8 02	 cmp	 eax, 2
  0004d	75 54		 jne	 SHORT $LN26@CheckMoney

; 326  : 	{
; 327  : 		if ( SourceObj->ZtCred < Value )

  0004f	d9 81 a8 22 00
	00		 fld	 DWORD PTR [ecx+8872]
  00055	db 45 08	 fild	 DWORD PTR _Value$[ebp]
  00058	de d9		 fcompp
  0005a	df e0		 fnstsw	 ax
  0005c	f6 c4 41	 test	 ah, 65			; 00000041H
  0005f	0f 85 21 03 00
	00		 jne	 $LN1@CheckMoney

; 328  : 		{
; 329  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of ZtCred",
; 330  : 				gObj[aSourceIndex].AccountID, 
; 331  : 				gObj[aSourceIndex].Name, 
; 332  : 				lpObj->AccountID, 
; 333  : 				lpObj->Name);

  00065	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00068	52		 push	 edx
  00069	83 c6 6c	 add	 esi, 108		; 0000006cH
  0006c	56		 push	 esi
  0006d	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  00070	50		 push	 eax
  00071	83 c1 6c	 add	 ecx, 108		; 0000006cH
  00074	51		 push	 ecx
  00075	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@LJCFNGBB@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  0007a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00080	83 c4 14	 add	 esp, 20			; 00000014H

; 334  : 			//::CGPShopAnsBuyItem(aSourceIndex, lpObj->m_Index, 0, 7);
; 335  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(69),Value);

  00083	57		 push	 edi
  00084	6a 45		 push	 69			; 00000045H
  00086	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0008b	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00090	50		 push	 eax
  00091	53		 push	 ebx
  00092	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  00097	83 c4 0c	 add	 esp, 12			; 0000000cH
  0009a	5f		 pop	 edi
  0009b	5e		 pop	 esi

; 336  : 			return false;

  0009c	32 c0		 xor	 al, al
  0009e	5b		 pop	 ebx

; 450  : }

  0009f	5d		 pop	 ebp
  000a0	c2 0c 00	 ret	 12			; 0000000cH
$LN26@CheckMoney:

; 337  : 		}
; 338  : 	}
; 339  : 	else if(lpObj->OffTrade == OFFWC_DC)

  000a3	83 f8 03	 cmp	 eax, 3
  000a6	75 52		 jne	 SHORT $LN23@CheckMoney

; 340  : 	{
; 341  : 		if ( SourceObj->GameShop.WCoinC < Value )

  000a8	db 45 08	 fild	 DWORD PTR _Value$[ebp]
  000ab	dc 99 00 23 00
	00		 fcomp	 QWORD PTR [ecx+8960]
  000b1	df e0		 fnstsw	 ax
  000b3	f6 c4 41	 test	 ah, 65			; 00000041H
  000b6	0f 85 ca 02 00
	00		 jne	 $LN1@CheckMoney

; 342  : 		{
; 343  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of WCoinC",
; 344  : 				gObj[aSourceIndex].AccountID, 
; 345  : 				gObj[aSourceIndex].Name, 
; 346  : 				lpObj->AccountID, 
; 347  : 				lpObj->Name);

  000bc	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  000bf	52		 push	 edx
  000c0	83 c6 6c	 add	 esi, 108		; 0000006cH
  000c3	56		 push	 esi
  000c4	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  000c7	50		 push	 eax
  000c8	83 c1 6c	 add	 ecx, 108		; 0000006cH
  000cb	51		 push	 ecx
  000cc	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@JEDEMPNL@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  000d1	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000d7	83 c4 14	 add	 esp, 20			; 00000014H

; 348  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(70),Value);

  000da	57		 push	 edi
  000db	6a 46		 push	 70			; 00000046H
  000dd	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000e2	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000e7	50		 push	 eax
  000e8	53		 push	 ebx
  000e9	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  000ee	83 c4 0c	 add	 esp, 12			; 0000000cH
  000f1	5f		 pop	 edi
  000f2	5e		 pop	 esi

; 349  : 			return false;

  000f3	32 c0		 xor	 al, al
  000f5	5b		 pop	 ebx

; 450  : }

  000f6	5d		 pop	 ebp
  000f7	c2 0c 00	 ret	 12			; 0000000cH
$LN23@CheckMoney:

; 350  : 		}
; 351  : 	}
; 352  : 	else if(lpObj->OffTrade == OFFWP_DC)

  000fa	83 f8 04	 cmp	 eax, 4
  000fd	75 52		 jne	 SHORT $LN20@CheckMoney

; 353  : 	{
; 354  : 		if ( SourceObj->GameShop.WCoinP < Value )

  000ff	db 45 08	 fild	 DWORD PTR _Value$[ebp]
  00102	dc 99 f8 22 00
	00		 fcomp	 QWORD PTR [ecx+8952]
  00108	df e0		 fnstsw	 ax
  0010a	f6 c4 41	 test	 ah, 65			; 00000041H
  0010d	0f 85 73 02 00
	00		 jne	 $LN1@CheckMoney

; 355  : 		{
; 356  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of WCoinP",
; 357  : 				gObj[aSourceIndex].AccountID, 
; 358  : 				gObj[aSourceIndex].Name, 
; 359  : 				lpObj->AccountID, 
; 360  : 				lpObj->Name);

  00113	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00116	52		 push	 edx
  00117	83 c6 6c	 add	 esi, 108		; 0000006cH
  0011a	56		 push	 esi
  0011b	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  0011e	50		 push	 eax
  0011f	83 c1 6c	 add	 ecx, 108		; 0000006cH
  00122	51		 push	 ecx
  00123	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@PFNLIOEJ@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  00128	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0012e	83 c4 14	 add	 esp, 20			; 00000014H

; 361  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(71),Value);

  00131	57		 push	 edi
  00132	6a 47		 push	 71			; 00000047H
  00134	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00139	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  0013e	50		 push	 eax
  0013f	53		 push	 ebx
  00140	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  00145	83 c4 0c	 add	 esp, 12			; 0000000cH
  00148	5f		 pop	 edi
  00149	5e		 pop	 esi

; 362  : 			return false;

  0014a	32 c0		 xor	 al, al
  0014c	5b		 pop	 ebx

; 450  : }

  0014d	5d		 pop	 ebp
  0014e	c2 0c 00	 ret	 12			; 0000000cH
$LN20@CheckMoney:

; 363  : 		}
; 364  : 	}
; 365  : 	else if(lpObj->OffTrade == OFFWG_DC)

  00151	83 f8 05	 cmp	 eax, 5
  00154	75 52		 jne	 SHORT $LN17@CheckMoney

; 366  : 	{
; 367  : 		if ( SourceObj->GameShop.GoblinPoint < Value )

  00156	db 45 08	 fild	 DWORD PTR _Value$[ebp]
  00159	dc 99 08 23 00
	00		 fcomp	 QWORD PTR [ecx+8968]
  0015f	df e0		 fnstsw	 ax
  00161	f6 c4 41	 test	 ah, 65			; 00000041H
  00164	0f 85 1c 02 00
	00		 jne	 $LN1@CheckMoney

; 368  : 		{
; 369  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of WCoinG",
; 370  : 				gObj[aSourceIndex].AccountID, 
; 371  : 				gObj[aSourceIndex].Name, 
; 372  : 				lpObj->AccountID, 
; 373  : 				lpObj->Name);

  0016a	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0016d	52		 push	 edx
  0016e	83 c6 6c	 add	 esi, 108		; 0000006cH
  00171	56		 push	 esi
  00172	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  00175	50		 push	 eax
  00176	83 c1 6c	 add	 ecx, 108		; 0000006cH
  00179	51		 push	 ecx
  0017a	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@PAFIAKNP@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  0017f	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00185	83 c4 14	 add	 esp, 20			; 00000014H

; 374  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(72),Value);

  00188	57		 push	 edi
  00189	6a 48		 push	 72			; 00000048H
  0018b	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00190	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00195	50		 push	 eax
  00196	53		 push	 ebx
  00197	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  0019c	83 c4 0c	 add	 esp, 12			; 0000000cH
  0019f	5f		 pop	 edi
  001a0	5e		 pop	 esi

; 375  : 			return false;

  001a1	32 c0		 xor	 al, al
  001a3	5b		 pop	 ebx

; 450  : }

  001a4	5d		 pop	 ebp
  001a5	c2 0c 00	 ret	 12			; 0000000cH
$LN17@CheckMoney:

; 376  : 		}
; 377  : 	}
; 378  : 	else if(lpObj->OffTrade == OFFCHAOS_DC)

  001a8	83 f8 06	 cmp	 eax, 6
  001ab	75 4a		 jne	 SHORT $LN14@CheckMoney

; 379  : 	{
; 380  : 		if ( SourceObj->ChaosBank < Value )

  001ad	39 b9 e4 27 00
	00		 cmp	 DWORD PTR [ecx+10212], edi
  001b3	0f 8d cd 01 00
	00		 jge	 $LN1@CheckMoney

; 381  : 		{
; 382  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of Chaos Bank",
; 383  : 				gObj[aSourceIndex].AccountID, 
; 384  : 				gObj[aSourceIndex].Name, 
; 385  : 				lpObj->AccountID, 
; 386  : 				lpObj->Name);

  001b9	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  001bc	52		 push	 edx
  001bd	83 c6 6c	 add	 esi, 108		; 0000006cH
  001c0	56		 push	 esi
  001c1	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  001c4	50		 push	 eax
  001c5	83 c1 6c	 add	 ecx, 108		; 0000006cH
  001c8	51		 push	 ecx
  001c9	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@GNFBJJMH@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  001ce	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  001d4	83 c4 14	 add	 esp, 20			; 00000014H

; 387  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(73),Value);

  001d7	57		 push	 edi
  001d8	6a 49		 push	 73			; 00000049H
  001da	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  001df	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  001e4	50		 push	 eax
  001e5	53		 push	 ebx
  001e6	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  001eb	83 c4 0c	 add	 esp, 12			; 0000000cH
  001ee	5f		 pop	 edi
  001ef	5e		 pop	 esi

; 388  : 			return false;

  001f0	32 c0		 xor	 al, al
  001f2	5b		 pop	 ebx

; 450  : }

  001f3	5d		 pop	 ebp
  001f4	c2 0c 00	 ret	 12			; 0000000cH
$LN14@CheckMoney:

; 389  : 		}
; 390  : 	}
; 391  : 	else if(lpObj->OffTrade == OFFBLESS_DC)

  001f7	83 f8 07	 cmp	 eax, 7
  001fa	75 4a		 jne	 SHORT $LN11@CheckMoney

; 392  : 	{
; 393  : 		if ( SourceObj->BlessBank < Value )

  001fc	39 b9 e8 27 00
	00		 cmp	 DWORD PTR [ecx+10216], edi
  00202	0f 8d 7e 01 00
	00		 jge	 $LN1@CheckMoney

; 394  : 		{
; 395  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of Bless Bank",
; 396  : 				gObj[aSourceIndex].AccountID, gObj[aSourceIndex].Name, lpObj->AccountID, lpObj->Name);

  00208	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0020b	52		 push	 edx
  0020c	83 c6 6c	 add	 esi, 108		; 0000006cH
  0020f	56		 push	 esi
  00210	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  00213	50		 push	 eax
  00214	83 c1 6c	 add	 ecx, 108		; 0000006cH
  00217	51		 push	 ecx
  00218	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@NDMMJDBF@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  0021d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00223	83 c4 14	 add	 esp, 20			; 00000014H

; 397  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(74),Value);

  00226	57		 push	 edi
  00227	6a 4a		 push	 74			; 0000004aH
  00229	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0022e	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00233	50		 push	 eax
  00234	53		 push	 ebx
  00235	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  0023a	83 c4 0c	 add	 esp, 12			; 0000000cH
  0023d	5f		 pop	 edi
  0023e	5e		 pop	 esi

; 398  : 			return false;

  0023f	32 c0		 xor	 al, al
  00241	5b		 pop	 ebx

; 450  : }

  00242	5d		 pop	 ebp
  00243	c2 0c 00	 ret	 12			; 0000000cH
$LN11@CheckMoney:

; 399  : 		}
; 400  : 	}
; 401  : 	else if(lpObj->OffTrade == OFFSOUL_DC)

  00246	83 f8 08	 cmp	 eax, 8
  00249	75 4a		 jne	 SHORT $LN8@CheckMoney

; 402  : 	{
; 403  : 		if ( SourceObj->SoulBank < Value )

  0024b	39 b9 ec 27 00
	00		 cmp	 DWORD PTR [ecx+10220], edi
  00251	0f 8d 2f 01 00
	00		 jge	 $LN1@CheckMoney

; 404  : 		{
; 405  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of Soul Bank",
; 406  : 				gObj[aSourceIndex].AccountID, gObj[aSourceIndex].Name, lpObj->AccountID, lpObj->Name);

  00257	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0025a	52		 push	 edx
  0025b	83 c6 6c	 add	 esi, 108		; 0000006cH
  0025e	56		 push	 esi
  0025f	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  00262	50		 push	 eax
  00263	83 c1 6c	 add	 ecx, 108		; 0000006cH
  00266	51		 push	 ecx
  00267	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@HBIPLAHE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  0026c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  00272	83 c4 14	 add	 esp, 20			; 00000014H

; 407  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(75),Value);

  00275	57		 push	 edi
  00276	6a 4b		 push	 75			; 0000004bH
  00278	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0027d	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00282	50		 push	 eax
  00283	53		 push	 ebx
  00284	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  00289	83 c4 0c	 add	 esp, 12			; 0000000cH
  0028c	5f		 pop	 edi
  0028d	5e		 pop	 esi

; 408  : 			return false;

  0028e	32 c0		 xor	 al, al
  00290	5b		 pop	 ebx

; 450  : }

  00291	5d		 pop	 ebp
  00292	c2 0c 00	 ret	 12			; 0000000cH
$LN8@CheckMoney:

; 409  : 		}
; 410  : 	}
; 411  : 	else if(lpObj->OffTrade == OFFLIFE_DC)

  00295	83 f8 09	 cmp	 eax, 9
  00298	75 4a		 jne	 SHORT $LN5@CheckMoney

; 412  : 	{
; 413  : 		if ( SourceObj->LifeBank < Value )

  0029a	39 b9 f0 27 00
	00		 cmp	 DWORD PTR [ecx+10224], edi
  002a0	0f 8d e0 00 00
	00		 jge	 $LN1@CheckMoney

; 414  : 		{
; 415  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of Life Bank",
; 416  : 				gObj[aSourceIndex].AccountID, gObj[aSourceIndex].Name, lpObj->AccountID, lpObj->Name);

  002a6	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  002a9	52		 push	 edx
  002aa	83 c6 6c	 add	 esi, 108		; 0000006cH
  002ad	56		 push	 esi
  002ae	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  002b1	50		 push	 eax
  002b2	83 c1 6c	 add	 ecx, 108		; 0000006cH
  002b5	51		 push	 ecx
  002b6	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@LDJMGAIA@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  002bb	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  002c1	83 c4 14	 add	 esp, 20			; 00000014H

; 417  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(76),Value);

  002c4	57		 push	 edi
  002c5	6a 4c		 push	 76			; 0000004cH
  002c7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  002cc	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  002d1	50		 push	 eax
  002d2	53		 push	 ebx
  002d3	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  002d8	83 c4 0c	 add	 esp, 12			; 0000000cH
  002db	5f		 pop	 edi
  002dc	5e		 pop	 esi

; 418  : 			return false;

  002dd	32 c0		 xor	 al, al
  002df	5b		 pop	 ebx

; 450  : }

  002e0	5d		 pop	 ebp
  002e1	c2 0c 00	 ret	 12			; 0000000cH
$LN5@CheckMoney:

; 419  : 		}
; 420  : 	}
; 421  : 	else
; 422  : 	{
; 423  : 		if ( SourceObj->Money < Value )

  002e4	39 b9 f0 00 00
	00		 cmp	 DWORD PTR [ecx+240], edi
  002ea	7d 34		 jge	 SHORT $LN2@CheckMoney

; 424  : 		{
; 425  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Lack of Zen",
; 426  : 				SourceObj->AccountID, 
; 427  : 				SourceObj->Name, 	
; 428  : 				lpObj->AccountID, 
; 429  : 				lpObj->Name);

  002ec	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  002ef	52		 push	 edx
  002f0	8d 46 6c	 lea	 eax, DWORD PTR [esi+108]
  002f3	50		 push	 eax
  002f4	8d 51 77	 lea	 edx, DWORD PTR [ecx+119]
  002f7	52		 push	 edx
  002f8	83 c1 6c	 add	 ecx, 108		; 0000006cH
  002fb	51		 push	 ecx
  002fc	68 00 00 00 00	 push	 OFFSET ??_C@_0EG@BJIIHLIN@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  00301	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD

; 430  : 
; 431  : 			::CGPShopAnsBuyItem(aSourceIndex, lpObj->m_Index, 0, 7);

  00307	8b 06		 mov	 eax, DWORD PTR [esi]
  00309	6a 07		 push	 7
  0030b	6a 00		 push	 0
  0030d	50		 push	 eax
  0030e	53		 push	 ebx
  0030f	e8 00 00 00 00	 call	 ?CGPShopAnsBuyItem@@YAXHHHE@Z ; CGPShopAnsBuyItem
  00314	83 c4 24	 add	 esp, 36			; 00000024H
  00317	5f		 pop	 edi
  00318	5e		 pop	 esi

; 432  : 			return false;

  00319	32 c0		 xor	 al, al
  0031b	5b		 pop	 ebx

; 450  : }

  0031c	5d		 pop	 ebp
  0031d	c2 0c 00	 ret	 12			; 0000000cH
$LN2@CheckMoney:

; 433  : 		}
; 434  : #if(_CONFLICT_)
; 435  : 		
; 436  : 		if (Value > (MAX_ZEN - lpObj->Money))

  00320	ba 00 94 35 77	 mov	 edx, 2000000000		; 77359400H
  00325	2b 96 f0 00 00
	00		 sub	 edx, DWORD PTR [esi+240]
  0032b	3b fa		 cmp	 edi, edx
  0032d	7e 57		 jle	 SHORT $LN1@CheckMoney

; 437  : 		{
; 438  : 			LogAddTD("[PShop] [%s][%s] PShop Item Buy Request Failed : [%s][%s] Max Zen In Inventory",
; 439  : 			SourceObj->AccountID, 
; 440  : 			SourceObj->Name, 	
; 441  : 			lpObj->AccountID, 
; 442  : 			lpObj->Name);

  0032f	8d 7e 77	 lea	 edi, DWORD PTR [esi+119]
  00332	57		 push	 edi
  00333	83 c6 6c	 add	 esi, 108		; 0000006cH
  00336	56		 push	 esi
  00337	8d 41 77	 lea	 eax, DWORD PTR [ecx+119]
  0033a	50		 push	 eax
  0033b	83 c1 6c	 add	 ecx, 108		; 0000006cH
  0033e	51		 push	 ecx
  0033f	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@LICILKCE@?$FLPShop?$FN?5?$FL?$CFs?$FN?$FL?$CFs?$FN?5PShop?5Item?5Buy?5@
  00344	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  0034a	83 c4 14	 add	 esp, 20			; 00000014H

; 443  : 			MsgNormal(aSourceIndex,g_ZtText.GetText(77), lpObj->Name);

  0034d	57		 push	 edi
  0034e	6a 4d		 push	 77			; 0000004dH
  00350	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00355	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  0035a	50		 push	 eax
  0035b	53		 push	 ebx
  0035c	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  00361	83 c4 0c	 add	 esp, 12			; 0000000cH

; 444  : 			MsgNormal(aIndex,g_ZtText.GetText(78));

  00364	6a 4e		 push	 78			; 0000004eH
  00366	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0036b	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00370	8b 4d 0c	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  00373	50		 push	 eax
  00374	51		 push	 ecx
  00375	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  0037a	83 c4 08	 add	 esp, 8
  0037d	5f		 pop	 edi
  0037e	5e		 pop	 esi

; 445  : 			return false;

  0037f	32 c0		 xor	 al, al
  00381	5b		 pop	 ebx

; 450  : }

  00382	5d		 pop	 ebp
  00383	c2 0c 00	 ret	 12			; 0000000cH
$LN1@CheckMoney:
  00386	5f		 pop	 edi
  00387	5e		 pop	 esi

; 446  : 		}
; 447  : #endif
; 448  : 	}
; 449  : 	return true;

  00388	b0 01		 mov	 al, 1
  0038a	5b		 pop	 ebx

; 450  : }

  0038b	5d		 pop	 ebp
  0038c	c2 0c 00	 ret	 12			; 0000000cH
?CheckMoney@cOffTrade@@QAE_NHHH@Z ENDP			; cOffTrade::CheckMoney
_TEXT	ENDS
PUBLIC	?ValueUpdate@cOffTrade@@QAEXHHH@Z		; cOffTrade::ValueUpdate
EXTRN	?GCMoneySend@@YAXHK@Z:PROC			; GCMoneySend
EXTRN	?ZtUserDataSend@@YAXH@Z:PROC			; ZtUserDataSend
EXTRN	?GDSaveUserInfo@GameShop@@QAEXH@Z:PROC		; GameShop::GDSaveUserInfo
EXTRN	?gGameShop@@3VGameShop@@A:BYTE			; gGameShop
; Function compile flags: /Ogtp
;	COMDAT ?ValueUpdate@cOffTrade@@QAEXHHH@Z
_TEXT	SEGMENT
_aSourceIndex$ = 8					; size = 4
_aIndex$ = 12						; size = 4
tv271 = 16						; size = 4
_Value$ = 16						; size = 4
?ValueUpdate@cOffTrade@@QAEXHHH@Z PROC			; cOffTrade::ValueUpdate, COMDAT
; _this$ = ecx

; 453  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 454  : 	if(!this->Enable) return;

  00003	80 39 00	 cmp	 BYTE PTR [ecx], 0
  00006	0f 84 90 01 00
	00		 je	 $LN1@ValueUpdat

; 455  : 
; 456  : 	LPOBJ SourceObj = &gObj[aSourceIndex];
; 457  : 	LPOBJ lpObj = &gObj[aIndex];

  0000c	8b 4d 0c	 mov	 ecx, DWORD PTR _aIndex$[ebp]
  0000f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00015	56		 push	 esi
  00016	57		 push	 edi
  00017	8b 7d 08	 mov	 edi, DWORD PTR _aSourceIndex$[ebp]
  0001a	8b f1		 mov	 esi, ecx
  0001c	8b c7		 mov	 eax, edi
  0001e	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00024	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0002a	03 f2		 add	 esi, edx
  0002c	03 c2		 add	 eax, edx

; 458  : 
; 459  : 	if(lpObj->OffTrade == OFFCR_DC)

  0002e	8b 96 ac 22 00
	00		 mov	 edx, DWORD PTR [esi+8876]
  00034	83 fa 02	 cmp	 edx, 2
  00037	75 2d		 jne	 SHORT $LN16@ValueUpdat

; 460  : 	{
; 461  : 		SourceObj->ZtCred -= Value;

  00039	db 45 10	 fild	 DWORD PTR _Value$[ebp]
  0003c	5f		 pop	 edi
  0003d	d9 5d 10	 fstp	 DWORD PTR tv271[ebp]
  00040	d9 80 a8 22 00
	00		 fld	 DWORD PTR [eax+8872]
  00046	d9 45 10	 fld	 DWORD PTR tv271[ebp]
  00049	d9 c0		 fld	 ST(0)
  0004b	de ea		 fsubp	 ST(2), ST(0)
  0004d	d9 c9		 fxch	 ST(1)
  0004f	d9 98 a8 22 00
	00		 fstp	 DWORD PTR [eax+8872]

; 462  : 		lpObj->ZtCred += Value;

  00055	d8 86 a8 22 00
	00		 fadd	 DWORD PTR [esi+8872]
  0005b	d9 9e a8 22 00
	00		 fstp	 DWORD PTR [esi+8872]
  00061	5e		 pop	 esi

; 515  : 	}
; 516  : }

  00062	5d		 pop	 ebp
  00063	c2 0c 00	 ret	 12			; 0000000cH
$LN16@ValueUpdat:

; 463  : 	}
; 464  : 	else if(lpObj->OffTrade == OFFWC_DC)

  00066	83 fa 03	 cmp	 edx, 3
  00069	75 1f		 jne	 SHORT $LN14@ValueUpdat

; 465  : 	{
; 466  : 		SourceObj->GameShop.WCoinC -= Value;

  0006b	db 45 10	 fild	 DWORD PTR _Value$[ebp]
  0006e	dd 80 00 23 00
	00		 fld	 QWORD PTR [eax+8960]
  00074	d8 e1		 fsub	 ST(0), ST(1)
  00076	dd 98 00 23 00
	00		 fstp	 QWORD PTR [eax+8960]

; 467  : 		lpObj->GameShop.WCoinC += Value;

  0007c	dc 86 00 23 00
	00		 fadd	 QWORD PTR [esi+8960]
  00082	dd 9e 00 23 00
	00		 fstp	 QWORD PTR [esi+8960]

; 468  : 		gGameShop.GDSaveUserInfo(aIndex);
; 469  : 		gGameShop.GDSaveUserInfo(aSourceIndex);

  00088	eb 46		 jmp	 SHORT $LN22@ValueUpdat
$LN14@ValueUpdat:

; 470  : 	}
; 471  : 	else if(lpObj->OffTrade == OFFWP_DC)

  0008a	83 fa 04	 cmp	 edx, 4
  0008d	75 1f		 jne	 SHORT $LN12@ValueUpdat

; 472  : 	{
; 473  : 		SourceObj->GameShop.WCoinP -= Value;

  0008f	db 45 10	 fild	 DWORD PTR _Value$[ebp]
  00092	dd 80 f8 22 00
	00		 fld	 QWORD PTR [eax+8952]
  00098	d8 e1		 fsub	 ST(0), ST(1)
  0009a	dd 98 f8 22 00
	00		 fstp	 QWORD PTR [eax+8952]

; 474  : 		lpObj->GameShop.WCoinP += Value;

  000a0	dc 86 f8 22 00
	00		 fadd	 QWORD PTR [esi+8952]
  000a6	dd 9e f8 22 00
	00		 fstp	 QWORD PTR [esi+8952]

; 475  : 		gGameShop.GDSaveUserInfo(aIndex);
; 476  : 		gGameShop.GDSaveUserInfo(aSourceIndex);

  000ac	eb 22		 jmp	 SHORT $LN22@ValueUpdat
$LN12@ValueUpdat:

; 477  : 	}
; 478  : 	else if(lpObj->OffTrade == OFFWG_DC)

  000ae	83 fa 05	 cmp	 edx, 5
  000b1	75 39		 jne	 SHORT $LN10@ValueUpdat

; 479  : 	{
; 480  : 		SourceObj->GameShop.GoblinPoint -= Value;

  000b3	db 45 10	 fild	 DWORD PTR _Value$[ebp]
  000b6	dd 80 08 23 00
	00		 fld	 QWORD PTR [eax+8968]
  000bc	d8 e1		 fsub	 ST(0), ST(1)
  000be	dd 98 08 23 00
	00		 fstp	 QWORD PTR [eax+8968]

; 481  : 		lpObj->GameShop.GoblinPoint += Value;

  000c4	dc 86 08 23 00
	00		 fadd	 QWORD PTR [esi+8968]
  000ca	dd 9e 08 23 00
	00		 fstp	 QWORD PTR [esi+8968]
$LN22@ValueUpdat:

; 482  : 		gGameShop.GDSaveUserInfo(aIndex);

  000d0	51		 push	 ecx
  000d1	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  000d6	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 483  : 		gGameShop.GDSaveUserInfo(aSourceIndex);

  000db	57		 push	 edi
  000dc	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  000e1	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo
  000e6	5f		 pop	 edi
  000e7	5e		 pop	 esi

; 515  : 	}
; 516  : }

  000e8	5d		 pop	 ebp
  000e9	c2 0c 00	 ret	 12			; 0000000cH
$LN10@ValueUpdat:

; 484  : 	}
; 485  : 	else if(lpObj->OffTrade == OFFCHAOS_DC)
; 486  : 	{
; 487  : 		SourceObj->ChaosBank -= Value;

  000ec	8b 4d 10	 mov	 ecx, DWORD PTR _Value$[ebp]
  000ef	83 fa 06	 cmp	 edx, 6
  000f2	75 1b		 jne	 SHORT $LN8@ValueUpdat
  000f4	29 88 e4 27 00
	00		 sub	 DWORD PTR [eax+10212], ecx

; 488  : 		lpObj->ChaosBank += Value;

  000fa	01 8e e4 27 00
	00		 add	 DWORD PTR [esi+10212], ecx

; 489  : 		ZtUserDataSend(aSourceIndex);

  00100	57		 push	 edi
  00101	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend
  00106	83 c4 04	 add	 esp, 4
  00109	5f		 pop	 edi
  0010a	5e		 pop	 esi

; 515  : 	}
; 516  : }

  0010b	5d		 pop	 ebp
  0010c	c2 0c 00	 ret	 12			; 0000000cH
$LN8@ValueUpdat:

; 490  : 	}
; 491  : 	else if(lpObj->OffTrade == OFFBLESS_DC)

  0010f	83 fa 07	 cmp	 edx, 7
  00112	75 1b		 jne	 SHORT $LN6@ValueUpdat

; 492  : 	{
; 493  : 		SourceObj->BlessBank -= Value;

  00114	29 88 e8 27 00
	00		 sub	 DWORD PTR [eax+10216], ecx

; 494  : 		lpObj->BlessBank += Value;

  0011a	01 8e e8 27 00
	00		 add	 DWORD PTR [esi+10216], ecx

; 495  : 		ZtUserDataSend(aSourceIndex);

  00120	57		 push	 edi
  00121	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend
  00126	83 c4 04	 add	 esp, 4
  00129	5f		 pop	 edi
  0012a	5e		 pop	 esi

; 515  : 	}
; 516  : }

  0012b	5d		 pop	 ebp
  0012c	c2 0c 00	 ret	 12			; 0000000cH
$LN6@ValueUpdat:

; 496  : 	}
; 497  : 	else if(lpObj->OffTrade == OFFSOUL_DC)

  0012f	83 fa 08	 cmp	 edx, 8
  00132	75 1b		 jne	 SHORT $LN4@ValueUpdat

; 498  : 	{
; 499  : 		SourceObj->SoulBank -= Value;

  00134	29 88 ec 27 00
	00		 sub	 DWORD PTR [eax+10220], ecx

; 500  : 		lpObj->SoulBank += Value;

  0013a	01 8e ec 27 00
	00		 add	 DWORD PTR [esi+10220], ecx

; 501  : 		ZtUserDataSend(aSourceIndex);

  00140	57		 push	 edi
  00141	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend
  00146	83 c4 04	 add	 esp, 4
  00149	5f		 pop	 edi
  0014a	5e		 pop	 esi

; 515  : 	}
; 516  : }

  0014b	5d		 pop	 ebp
  0014c	c2 0c 00	 ret	 12			; 0000000cH
$LN4@ValueUpdat:

; 502  : 	}
; 503  : 	else if(lpObj->OffTrade == OFFLIFE_DC)

  0014f	83 fa 09	 cmp	 edx, 9
  00152	75 1b		 jne	 SHORT $LN2@ValueUpdat

; 504  : 	{
; 505  : 		SourceObj->LifeBank -= Value;

  00154	29 88 f0 27 00
	00		 sub	 DWORD PTR [eax+10224], ecx

; 506  : 		lpObj->LifeBank += Value;

  0015a	01 8e f0 27 00
	00		 add	 DWORD PTR [esi+10224], ecx

; 507  : 		ZtUserDataSend(aSourceIndex);

  00160	57		 push	 edi
  00161	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend
  00166	83 c4 04	 add	 esp, 4
  00169	5f		 pop	 edi
  0016a	5e		 pop	 esi

; 515  : 	}
; 516  : }

  0016b	5d		 pop	 ebp
  0016c	c2 0c 00	 ret	 12			; 0000000cH
$LN2@ValueUpdat:

; 508  : 	}
; 509  : 	else
; 510  : 	{
; 511  : 		gObj[aSourceIndex].Money -= Value;

  0016f	29 88 f0 00 00
	00		 sub	 DWORD PTR [eax+240], ecx

; 512  : 		lpObj->Money += Value;

  00175	01 8e f0 00 00
	00		 add	 DWORD PTR [esi+240], ecx

; 513  : 		::GCMoneySend(aSourceIndex, SourceObj->Money);

  0017b	8b 88 f0 00 00
	00		 mov	 ecx, DWORD PTR [eax+240]
  00181	51		 push	 ecx
  00182	57		 push	 edi
  00183	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend

; 514  : 		::GCMoneySend(lpObj->m_Index, lpObj->Money);

  00188	8b 96 f0 00 00
	00		 mov	 edx, DWORD PTR [esi+240]
  0018e	8b 06		 mov	 eax, DWORD PTR [esi]
  00190	52		 push	 edx
  00191	50		 push	 eax
  00192	e8 00 00 00 00	 call	 ?GCMoneySend@@YAXHK@Z	; GCMoneySend
  00197	83 c4 10	 add	 esp, 16			; 00000010H
  0019a	5f		 pop	 edi
  0019b	5e		 pop	 esi
$LN1@ValueUpdat:

; 515  : 	}
; 516  : }

  0019c	5d		 pop	 ebp
  0019d	c2 0c 00	 ret	 12			; 0000000cH
?ValueUpdate@cOffTrade@@QAEXHHH@Z ENDP			; cOffTrade::ValueUpdate
_TEXT	ENDS
PUBLIC	?UserOnlineOffSell@cOffTrade@@QAEXPAUOBJECTSTRUCT@@@Z ; cOffTrade::UserOnlineOffSell
; Function compile flags: /Ogtp
;	COMDAT ?UserOnlineOffSell@cOffTrade@@QAEXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?UserOnlineOffSell@cOffTrade@@QAEXPAUOBJECTSTRUCT@@@Z PROC ; cOffTrade::UserOnlineOffSell, COMDAT
; _this$ = ecx

; 519  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 520  : 	if(!this->Enable || this->OnlineOffSell) return;

  00003	80 39 00	 cmp	 BYTE PTR [ecx], 0
  00006	74 3a		 je	 SHORT $LN1@UserOnline
  00008	80 79 0a 00	 cmp	 BYTE PTR [ecx+10], 0
  0000c	75 34		 jne	 SHORT $LN1@UserOnline

; 521  : 
; 522  : 	g_ZtGDManager.GD_OfflineAfk(lpObj->m_Index, 0, 0);

  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00012	8b 06		 mov	 eax, DWORD PTR [esi]
  00014	6a 00		 push	 0
  00016	6a 00		 push	 0
  00018	50		 push	 eax
  00019	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtGDManager@@3VCZtGDManager@@A ; g_ZtGDManager
  0001e	e8 00 00 00 00	 call	 ?GD_OfflineAfk@CZtGDManager@@QAEXHEE@Z ; CZtGDManager::GD_OfflineAfk

; 523  : 
; 524  : 	GJPUserClose(lpObj->AccountID);

  00023	8d 4e 6c	 lea	 ecx, DWORD PTR [esi+108]
  00026	51		 push	 ecx
  00027	e8 00 00 00 00	 call	 ?GJPUserClose@@YAXPAD@Z	; GJPUserClose

; 525  : 	gObjDel(lpObj->m_Index);

  0002c	8b 16		 mov	 edx, DWORD PTR [esi]
  0002e	52		 push	 edx
  0002f	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  00034	83 c4 08	 add	 esp, 8

; 526  : 	lpObj->OffTrade = 0;

  00037	c7 86 ac 22 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+8876], 0
  00041	5e		 pop	 esi
$LN1@UserOnline:

; 527  : }

  00042	5d		 pop	 ebp
  00043	c2 04 00	 ret	 4
?UserOnlineOffSell@cOffTrade@@QAEXPAUOBJECTSTRUCT@@@Z ENDP ; cOffTrade::UserOnlineOffSell
_TEXT	ENDS
PUBLIC	??$sprintf_s@$0BAA@@@YAHAAY0BAA@DPBDZZ		; sprintf_s<256>
EXTRN	_vsprintf_s:PROC
; Function compile flags: /Ogtp
; File d:\program files (x86)\microsoft visual studio 10.0\vc\include\stdio.h
;	COMDAT ??$sprintf_s@$0BAA@@@YAHAAY0BAA@DPBDZZ
_TEXT	SEGMENT
__Dest$ = 8						; size = 4
__Format$ = 12						; size = 4
??$sprintf_s@$0BAA@@@YAHAAY0BAA@DPBDZZ PROC		; sprintf_s<256>, COMDAT

; 323  : __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_1_ARGLIST(int, sprintf_s, vsprintf_s, _Deref_post_z_ char, _Dest, _In_z_ _Printf_format_string_ const char *, _Format)

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8b 4d 0c	 mov	 ecx, DWORD PTR __Format$[ebp]
  00006	8b 55 08	 mov	 edx, DWORD PTR __Dest$[ebp]
  00009	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  0000c	50		 push	 eax
  0000d	51		 push	 ecx
  0000e	68 00 01 00 00	 push	 256			; 00000100H
  00013	52		 push	 edx
  00014	e8 00 00 00 00	 call	 _vsprintf_s
  00019	83 c4 10	 add	 esp, 16			; 00000010H
  0001c	5d		 pop	 ebp
  0001d	c3		 ret	 0
??$sprintf_s@$0BAA@@@YAHAAY0BAA@DPBDZZ ENDP		; sprintf_s<256>
_TEXT	ENDS
PUBLIC	??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@	; `string'
PUBLIC	??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@ ; `string'
PUBLIC	??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@ ; `string'
PUBLIC	_aIndex$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?CreateOffTrade@cOffTrade@@QAEXHH@Z		; cOffTrade::CreateOffTrade
EXTRN	?SendClose@ConnectZt@@QAEXHH@Z:PROC		; ConnectZt::SendClose
EXTRN	?g_ConnectZt@@3VConnectZt@@A:QWORD		; g_ConnectZt
EXTRN	?MessaageAllGlobal@@YAXPADZZ:PROC		; MessaageAllGlobal
EXTRN	?CheckUser@CZtLicense@@QAE_NH@Z:PROC		; CZtLicense::CheckUser
EXTRN	?g_ZtLicense@@3VCZtLicense@@A:BYTE		; g_ZtLicense
EXTRN	?GCServerMsgStringSend@@YAXPADHE@Z:PROC		; GCServerMsgStringSend
EXTRN	?AllSendServerMsg@@YAXPAD@Z:PROC		; AllSendServerMsg
EXTRN	?g_PersonalShopZt@@3VPersonalShopZt@@A:BYTE	; g_PersonalShopZt
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
EXTRN	_memset:PROC
;	COMDAT ??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@
; File e:\work\tranet_version\gs\gameserver\offtrade.cpp
CONST	SEGMENT
??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@ DB '.::JOW SHOP::.', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@
CONST	SEGMENT
??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@ DB '.::', 0bbH
	DB	0fdH, 0b7H, 0d6H, 0c9H, 0ccH, 0b5H, 0eaH, '::.', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@
CONST	SEGMENT
??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@ DB '.::', 0d4H
	DB	0aaH, 0b1H, 0a6H, 0c9H, 0ccH, 0b5H, 0eaH, '::.', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?CreateOffTrade@cOffTrade@@QAEXHH@Z
_TEXT	SEGMENT
_aIndex$GSCopy$ = -264					; size = 4
_szBuff$205321 = -260					; size = 256
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_type$ = 12						; size = 4
?CreateOffTrade@cOffTrade@@QAEXHH@Z PROC		; cOffTrade::CreateOffTrade, COMDAT
; _this$ = ecx

; 46   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 08 01 00
	00		 sub	 esp, 264		; 00000108H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 47   : 	if(!this->Enable)return;

  00013	80 39 00	 cmp	 BYTE PTR [ecx], 0
  00016	53		 push	 ebx
  00017	8b 5d 08	 mov	 ebx, DWORD PTR _aIndex$[ebp]

; 259  : 	}
; 260  : 	else if(type == OFFLIFE_DC)

  0001a	89 9d f8 fe ff
	ff		 mov	 DWORD PTR _aIndex$GSCopy$[ebp], ebx
  00020	0f 84 33 06 00
	00		 je	 $LN2@CreateOffT

; 48   : 
; 49   : 	LPOBJ lpObj = &gObj[aIndex];

  00026	56		 push	 esi
  00027	8b f3		 mov	 esi, ebx
  00029	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0002f	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00035	57		 push	 edi

; 50   : 
; 51   : 	if(type == OFFZEN_DC)	//Check OffTrade Zen Enable

  00036	8b 7d 0c	 mov	 edi, DWORD PTR _type$[ebp]
  00039	83 ff 01	 cmp	 edi, 1
  0003c	75 06		 jne	 SHORT $LN94@CreateOffT

; 52   : 	{
; 53   : 		if(!this->OffTradeZen) return;

  0003e	80 79 01 00	 cmp	 BYTE PTR [ecx+1], 0

; 54   : 	}

  00042	eb 5a		 jmp	 SHORT $LN119@CreateOffT
$LN94@CreateOffT:

; 55   : 	else if (type == OFFCR_DC)

  00044	83 ff 02	 cmp	 edi, 2
  00047	75 06		 jne	 SHORT $LN91@CreateOffT

; 56   : 	{
; 57   : 		if(!this->OffTradeCredits) return;

  00049	80 79 02 00	 cmp	 BYTE PTR [ecx+2], 0

; 58   : 	}

  0004d	eb 4f		 jmp	 SHORT $LN119@CreateOffT
$LN91@CreateOffT:

; 59   : 	else if (type == OFFWC_DC)

  0004f	83 ff 03	 cmp	 edi, 3
  00052	75 06		 jne	 SHORT $LN88@CreateOffT

; 60   : 	{
; 61   : 		if(!this->OffTradeWcoinC) return;

  00054	80 79 03 00	 cmp	 BYTE PTR [ecx+3], 0

; 62   : 	}

  00058	eb 44		 jmp	 SHORT $LN119@CreateOffT
$LN88@CreateOffT:

; 63   : 	else if (type == OFFWP_DC)

  0005a	83 ff 04	 cmp	 edi, 4
  0005d	75 06		 jne	 SHORT $LN85@CreateOffT

; 64   : 	{
; 65   : 		if(!this->OffTradeWcoinP) return;

  0005f	80 79 04 00	 cmp	 BYTE PTR [ecx+4], 0

; 66   : 	}

  00063	eb 39		 jmp	 SHORT $LN119@CreateOffT
$LN85@CreateOffT:

; 67   : 	else if (type == OFFWG_DC)

  00065	83 ff 05	 cmp	 edi, 5
  00068	75 06		 jne	 SHORT $LN82@CreateOffT

; 68   : 	{
; 69   : 		if(!this->OffTradeGoblin) return;

  0006a	80 79 05 00	 cmp	 BYTE PTR [ecx+5], 0

; 70   : 	}

  0006e	eb 2e		 jmp	 SHORT $LN119@CreateOffT
$LN82@CreateOffT:

; 71   : 	else if (type == OFFCHAOS_DC)

  00070	83 ff 06	 cmp	 edi, 6
  00073	75 06		 jne	 SHORT $LN79@CreateOffT

; 72   : 	{
; 73   : 		if(!this->OffTradeChaos) return;

  00075	80 79 06 00	 cmp	 BYTE PTR [ecx+6], 0

; 74   : 	}

  00079	eb 23		 jmp	 SHORT $LN119@CreateOffT
$LN79@CreateOffT:

; 75   : 	else if (type == OFFBLESS_DC)

  0007b	83 ff 07	 cmp	 edi, 7
  0007e	75 06		 jne	 SHORT $LN76@CreateOffT

; 76   : 	{
; 77   : 		if(!this->OffTradeBless) return;

  00080	80 79 07 00	 cmp	 BYTE PTR [ecx+7], 0

; 78   : 	}

  00084	eb 18		 jmp	 SHORT $LN119@CreateOffT
$LN76@CreateOffT:

; 79   : 	else if (type == OFFSOUL_DC)

  00086	83 ff 08	 cmp	 edi, 8
  00089	75 06		 jne	 SHORT $LN73@CreateOffT

; 80   : 	{
; 81   : 		if(!this->OffTradeSoul) return;

  0008b	80 79 08 00	 cmp	 BYTE PTR [ecx+8], 0

; 82   : 	}

  0008f	eb 0d		 jmp	 SHORT $LN119@CreateOffT
$LN73@CreateOffT:

; 83   : 	else if (type == OFFLIFE_DC)

  00091	83 ff 09	 cmp	 edi, 9
  00094	0f 85 bd 05 00
	00		 jne	 $LN117@CreateOffT

; 84   : 	{
; 85   : 		if(!this->OffTradeLife) return;

  0009a	80 79 09 00	 cmp	 BYTE PTR [ecx+9], 0
$LN119@CreateOffT:
  0009e	0f 84 b3 05 00
	00		 je	 $LN117@CreateOffT

; 86   : 	}
; 87   : 	else
; 88   : 	{
; 89   : 		return;
; 90   : 	}
; 91   : 
; 92   : 	if(this->WorkOnlyLorenMarket && lpObj->MapNumber != 79)

  000a4	80 79 0b 00	 cmp	 BYTE PTR [ecx+11], 0
  000a8	74 32		 je	 SHORT $LN67@CreateOffT
  000aa	80 be 49 01 00
	00 4f		 cmp	 BYTE PTR [esi+329], 79	; 0000004fH
  000b1	74 29		 je	 SHORT $LN67@CreateOffT

; 93   : 	{
; 94   : 		MsgNormal(aIndex,g_ZtText.GetText(45));

  000b3	6a 2d		 push	 45			; 0000002dH
  000b5	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000ba	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000bf	50		 push	 eax
  000c0	53		 push	 ebx
  000c1	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  000c6	83 c4 08	 add	 esp, 8
  000c9	5f		 pop	 edi
  000ca	5e		 pop	 esi
  000cb	5b		 pop	 ebx

; 273  : 	}
; 274  : }

  000cc	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000cf	33 cd		 xor	 ecx, ebp
  000d1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000d6	8b e5		 mov	 esp, ebp
  000d8	5d		 pop	 ebp
  000d9	c2 08 00	 ret	 8
$LN67@CreateOffT:

; 95   : 		return;
; 96   : 	}
; 97   : 
; 98   : 	if(lpObj->MapNumber == MAP_INDEX_CASTLESIEGE)

  000dc	8a 9e 49 01 00
	00		 mov	 bl, BYTE PTR [esi+329]
  000e2	80 fb 1e	 cmp	 bl, 30			; 0000001eH
  000e5	75 2f		 jne	 SHORT $LN66@CreateOffT

; 99   : 	{
; 100  : 		MsgNormal(aIndex,g_ZtText.GetText(46));

  000e7	6a 2e		 push	 46			; 0000002eH
  000e9	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000ee	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000f3	50		 push	 eax
  000f4	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _aIndex$GSCopy$[ebp]
  000fa	50		 push	 eax
  000fb	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  00100	83 c4 08	 add	 esp, 8
  00103	5f		 pop	 edi
  00104	5e		 pop	 esi
  00105	5b		 pop	 ebx

; 273  : 	}
; 274  : }

  00106	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00109	33 cd		 xor	 ecx, ebp
  0010b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00110	8b e5		 mov	 esp, ebp
  00112	5d		 pop	 ebp
  00113	c2 08 00	 ret	 8
$LN66@CreateOffT:

; 101  : 		return;
; 102  : 	}
; 103  : 
; 104  : 
; 105  : 	if(lpObj->m_bPShopOpen == false)

  00116	80 be c4 0e 00
	00 00		 cmp	 BYTE PTR [esi+3780], 0
  0011d	75 2f		 jne	 SHORT $LN65@CreateOffT

; 106  : 	{
; 107  : 		MsgNormal(aIndex,g_ZtText.GetText(47));

  0011f	6a 2f		 push	 47			; 0000002fH
  00121	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00126	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  0012b	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _aIndex$GSCopy$[ebp]
  00131	50		 push	 eax
  00132	51		 push	 ecx
  00133	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  00138	83 c4 08	 add	 esp, 8
  0013b	5f		 pop	 edi
  0013c	5e		 pop	 esi
  0013d	5b		 pop	 ebx

; 273  : 	}
; 274  : }

  0013e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00141	33 cd		 xor	 ecx, ebp
  00143	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00148	8b e5		 mov	 esp, ebp
  0014a	5d		 pop	 ebp
  0014b	c2 08 00	 ret	 8
$LN65@CreateOffT:

; 108  : 		return;
; 109  : 	}
; 110  : 
; 111  : 	if(lpObj->MapNumber==0 || lpObj->MapNumber==2 || lpObj->MapNumber==3 || lpObj->MapNumber==51 || lpObj->MapNumber==79)

  0014e	84 db		 test	 bl, bl
  00150	74 43		 je	 SHORT $LN63@CreateOffT
  00152	80 fb 02	 cmp	 bl, 2
  00155	74 3e		 je	 SHORT $LN63@CreateOffT
  00157	80 fb 03	 cmp	 bl, 3
  0015a	74 39		 je	 SHORT $LN63@CreateOffT
  0015c	80 fb 33	 cmp	 bl, 51			; 00000033H
  0015f	74 34		 je	 SHORT $LN63@CreateOffT
  00161	80 fb 4f	 cmp	 bl, 79			; 0000004fH
  00164	74 2f		 je	 SHORT $LN63@CreateOffT

; 263  : 	}
; 264  : 		//g_ConnectZt.SendClose(aIndex,type);
; 265  : #else
; 266  : 		CloseClient(aIndex);
; 267  : 		lpObj->OffTrade = type;
; 268  : #endif
; 269  : 	}
; 270  : 	else
; 271  : 	{
; 272  : 		MsgNormal(aIndex,g_ZtText.GetText(68));

  00166	6a 44		 push	 68			; 00000044H
  00168	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0016d	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00172	8b 95 f8 fe ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  00178	50		 push	 eax
  00179	52		 push	 edx
  0017a	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal
  0017f	83 c4 08	 add	 esp, 8
  00182	5f		 pop	 edi
  00183	5e		 pop	 esi
  00184	5b		 pop	 ebx

; 273  : 	}
; 274  : }

  00185	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00188	33 cd		 xor	 ecx, ebp
  0018a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0018f	8b e5		 mov	 esp, ebp
  00191	5d		 pop	 ebp
  00192	c2 08 00	 ret	 8
$LN63@CreateOffT:

; 112  : 	{
; 113  : //#if(CUSTOM_PERSONAL_SHOP==TRUE)
; 114  : 		if(g_PersonalShopZt.Enable)

  00195	80 3d 00 00 00
	00 00		 cmp	 BYTE PTR ?g_PersonalShopZt@@3VPersonalShopZt@@A, 0
  0019c	0f 84 0a 01 00
	00		 je	 $LN62@CreateOffT

; 115  : 		{
; 116  : 			char szBuff[256] = { 0 };

  001a2	68 ff 00 00 00	 push	 255			; 000000ffH
  001a7	8d 85 fd fe ff
	ff		 lea	 eax, DWORD PTR _szBuff$205321[ebp+1]
  001ad	6a 00		 push	 0
  001af	50		 push	 eax
  001b0	c6 85 fc fe ff
	ff 00		 mov	 BYTE PTR _szBuff$205321[ebp], 0
  001b7	e8 00 00 00 00	 call	 _memset
  001bc	83 c4 0c	 add	 esp, 12			; 0000000cH

; 117  : 
; 118  : 			if(lpObj->MapNumber==0)

  001bf	84 db		 test	 bl, bl
  001c1	75 18		 jne	 SHORT $LN61@CreateOffT

; 119  : 			{
; 120  : 				sprintf_s(szBuff,g_ZtText.GetText(48),lpObj->Name,lpObj->X,lpObj->Y);

  001c3	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  001ca	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  001d1	51		 push	 ecx
  001d2	52		 push	 edx
  001d3	83 c6 77	 add	 esi, 119		; 00000077H
  001d6	56		 push	 esi
  001d7	6a 30		 push	 48			; 00000030H
  001d9	eb 72		 jmp	 SHORT $LN120@CreateOffT
$LN61@CreateOffT:

; 121  : 			}
; 122  : 			else if(lpObj->MapNumber==2)

  001db	80 fb 02	 cmp	 bl, 2
  001de	75 18		 jne	 SHORT $LN59@CreateOffT

; 123  : 			{
; 124  : 				sprintf_s(szBuff,g_ZtText.GetText(49),lpObj->Name,lpObj->X,lpObj->Y);

  001e0	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  001e7	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  001ee	51		 push	 ecx
  001ef	52		 push	 edx
  001f0	83 c6 77	 add	 esi, 119		; 00000077H
  001f3	56		 push	 esi
  001f4	6a 31		 push	 49			; 00000031H
  001f6	eb 55		 jmp	 SHORT $LN120@CreateOffT
$LN59@CreateOffT:

; 125  : 			}
; 126  : 			else if(lpObj->MapNumber==3)

  001f8	80 fb 03	 cmp	 bl, 3
  001fb	75 18		 jne	 SHORT $LN57@CreateOffT

; 127  : 			{
; 128  : 				sprintf_s(szBuff,g_ZtText.GetText(50),lpObj->Name,lpObj->X,lpObj->Y);

  001fd	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00204	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  0020b	51		 push	 ecx
  0020c	52		 push	 edx
  0020d	83 c6 77	 add	 esi, 119		; 00000077H
  00210	56		 push	 esi
  00211	6a 32		 push	 50			; 00000032H
  00213	eb 38		 jmp	 SHORT $LN120@CreateOffT
$LN57@CreateOffT:

; 129  : 			}
; 130  : 			else if(lpObj->MapNumber==51)

  00215	80 fb 33	 cmp	 bl, 51			; 00000033H
  00218	75 18		 jne	 SHORT $LN55@CreateOffT

; 131  : 			{
; 132  : 				sprintf_s(szBuff,g_ZtText.GetText(51),lpObj->Name,lpObj->X,lpObj->Y);

  0021a	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  00221	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  00228	51		 push	 ecx
  00229	52		 push	 edx
  0022a	83 c6 77	 add	 esi, 119		; 00000077H
  0022d	56		 push	 esi
  0022e	6a 33		 push	 51			; 00000033H
  00230	eb 1b		 jmp	 SHORT $LN120@CreateOffT
$LN55@CreateOffT:

; 133  : 			}
; 134  : 			else if(lpObj->MapNumber==79)

  00232	80 fb 4f	 cmp	 bl, 79			; 0000004fH
  00235	75 44		 jne	 SHORT $LN53@CreateOffT

; 135  : 			{
; 136  : 				sprintf_s(szBuff,g_ZtText.GetText(52),lpObj->Name,lpObj->X,lpObj->Y);

  00237	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  0023e	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  00245	51		 push	 ecx
  00246	52		 push	 edx
  00247	83 c6 77	 add	 esi, 119		; 00000077H
  0024a	56		 push	 esi
  0024b	6a 34		 push	 52			; 00000034H
$LN120@CreateOffT:
  0024d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00252	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00257	50		 push	 eax
  00258	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _szBuff$205321[ebp]
  0025e	50		 push	 eax
  0025f	e8 00 00 00 00	 call	 ??$sprintf_s@$0BAA@@@YAHAAY0BAA@DPBDZZ ; sprintf_s<256>

; 141  : 				return;
; 142  : 			}
; 143  : 
; 144  : 			AllSendServerMsg(szBuff);

  00264	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _szBuff$205321[ebp]
  0026a	83 c4 14	 add	 esp, 20			; 00000014H
  0026d	51		 push	 ecx
  0026e	e8 00 00 00 00	 call	 ?AllSendServerMsg@@YAXPAD@Z ; AllSendServerMsg
  00273	83 c4 04	 add	 esp, 4

; 145  : 		}
; 146  : 		else

  00276	e9 5b 03 00 00	 jmp	 $LN19@CreateOffT
$LN53@CreateOffT:

; 137  : 			}
; 138  : 			else
; 139  : 			{
; 140  : 				GCServerMsgStringSend(g_ZtText.GetText(53), aIndex, 1);

  0027b	8b 95 f8 fe ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  00281	6a 01		 push	 1
  00283	52		 push	 edx
  00284	6a 35		 push	 53			; 00000035H
  00286	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0028b	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00290	50		 push	 eax
  00291	e8 00 00 00 00	 call	 ?GCServerMsgStringSend@@YAXPADHE@Z ; GCServerMsgStringSend
  00296	83 c4 0c	 add	 esp, 12			; 0000000cH
  00299	5f		 pop	 edi
  0029a	5e		 pop	 esi
  0029b	5b		 pop	 ebx

; 273  : 	}
; 274  : }

  0029c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0029f	33 cd		 xor	 ecx, ebp
  002a1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002a6	8b e5		 mov	 esp, ebp
  002a8	5d		 pop	 ebp
  002a9	c2 08 00	 ret	 8
$LN62@CreateOffT:

; 147  : 		{
; 148  : //#else
; 149  : 
; 150  : 
; 151  : 			if(type == OFFZEN_DC)

  002ac	83 ff 01	 cmp	 edi, 1
  002af	75 23		 jne	 SHORT $LN50@CreateOffT

; 152  : 			{
; 153  : 				strcpy(lpObj->m_szPShopText,g_ZtText.GetText(54));

  002b1	6a 36		 push	 54			; 00000036H
  002b3	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  002b8	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  002bd	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  002c3	2b d0		 sub	 edx, eax
$LL98@CreateOffT:
  002c5	8a 08		 mov	 cl, BYTE PTR [eax]
  002c7	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  002ca	40		 inc	 eax
  002cb	84 c9		 test	 cl, cl
  002cd	75 f6		 jne	 SHORT $LL98@CreateOffT
  002cf	e9 39 02 00 00	 jmp	 $LN116@CreateOffT
$LN50@CreateOffT:

; 154  : 			}
; 155  : 			else if(type == OFFCR_DC)

  002d4	83 ff 02	 cmp	 edi, 2
  002d7	75 26		 jne	 SHORT $LN48@CreateOffT

; 156  : 			{
; 157  : 				strcpy(lpObj->m_szPShopText,g_ZtText.GetText(55));

  002d9	6a 37		 push	 55			; 00000037H
  002db	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  002e0	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  002e5	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  002eb	2b d0		 sub	 edx, eax
  002ed	8d 49 00	 npad	 3
$LL99@CreateOffT:
  002f0	8a 08		 mov	 cl, BYTE PTR [eax]
  002f2	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  002f5	40		 inc	 eax
  002f6	84 c9		 test	 cl, cl
  002f8	75 f6		 jne	 SHORT $LL99@CreateOffT
  002fa	e9 0e 02 00 00	 jmp	 $LN116@CreateOffT
$LN48@CreateOffT:

; 158  : 			}
; 159  : 			else if(type == OFFWC_DC)

  002ff	83 ff 03	 cmp	 edi, 3
  00302	75 7b		 jne	 SHORT $LN46@CreateOffT

; 160  : 			{
; 161  : 				if (g_ZtLicense.CheckUser(eZtUB::snaker))

  00304	6a 1e		 push	 30			; 0000001eH
  00306	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0030b	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00310	84 c0		 test	 al, al
  00312	74 41		 je	 SHORT $LN45@CreateOffT

; 162  : 				{
; 163  : 					strcpy(lpObj->m_szPShopText,".::元宝商店::.");

  00314	a1 00 00 00 00	 mov	 eax, DWORD PTR ??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@
  00319	89 86 c8 0e 00
	00		 mov	 DWORD PTR [esi+3784], eax
  0031f	8b 0d 04 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@+4
  00325	89 8e cc 0e 00
	00		 mov	 DWORD PTR [esi+3788], ecx
  0032b	8b 15 08 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@+8
  00331	89 96 d0 0e 00
	00		 mov	 DWORD PTR [esi+3792], edx
  00337	66 a1 0c 00 00
	00		 mov	 ax, WORD PTR ??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@+12
  0033d	66 89 86 d4 0e
	00 00		 mov	 WORD PTR [esi+3796], ax
  00344	8a 0d 0e 00 00
	00		 mov	 cl, BYTE PTR ??_C@_0P@EIOFLNBP@?4?3?3?T?$KK?$LB?$KG?I?L?$LF?j?3?3?4?$AA@+14
  0034a	88 8e d6 0e 00
	00		 mov	 BYTE PTR [esi+3798], cl

; 164  : 				}
; 165  : 				else

  00350	e9 b8 01 00 00	 jmp	 $LN116@CreateOffT
$LN45@CreateOffT:

; 166  : 				{
; 167  : 					strcpy(lpObj->m_szPShopText,g_ZtText.GetText(56));

  00355	6a 38		 push	 56			; 00000038H
  00357	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0035c	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00361	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  00367	2b d0		 sub	 edx, eax
  00369	8d a4 24 00 00
	00 00		 npad	 7
$LL100@CreateOffT:
  00370	8a 08		 mov	 cl, BYTE PTR [eax]
  00372	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00375	40		 inc	 eax
  00376	84 c9		 test	 cl, cl
  00378	75 f6		 jne	 SHORT $LL100@CreateOffT

; 168  : 				}

  0037a	e9 8e 01 00 00	 jmp	 $LN116@CreateOffT
$LN46@CreateOffT:

; 169  : 			}
; 170  : 			else if(type == OFFWP_DC)

  0037f	83 ff 04	 cmp	 edi, 4
  00382	75 7b		 jne	 SHORT $LN42@CreateOffT

; 171  : 			{
; 172  : 				if (g_ZtLicense.CheckUser(eZtUB::snaker))

  00384	6a 1e		 push	 30			; 0000001eH
  00386	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0038b	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00390	84 c0		 test	 al, al
  00392	74 41		 je	 SHORT $LN41@CreateOffT

; 173  : 				{
; 174  : 					strcpy(lpObj->m_szPShopText,".::积分商店::.");

  00394	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@
  0039a	89 96 c8 0e 00
	00		 mov	 DWORD PTR [esi+3784], edx
  003a0	a1 04 00 00 00	 mov	 eax, DWORD PTR ??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@+4
  003a5	89 86 cc 0e 00
	00		 mov	 DWORD PTR [esi+3788], eax
  003ab	8b 0d 08 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@+8
  003b1	89 8e d0 0e 00
	00		 mov	 DWORD PTR [esi+3792], ecx
  003b7	66 8b 15 0c 00
	00 00		 mov	 dx, WORD PTR ??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@+12
  003be	66 89 96 d4 0e
	00 00		 mov	 WORD PTR [esi+3796], dx
  003c5	a0 0e 00 00 00	 mov	 al, BYTE PTR ??_C@_0P@LOBLDFFD@?4?3?3?$LL?$PN?$LH?V?I?L?$LF?j?3?3?4?$AA@+14
  003ca	88 86 d6 0e 00
	00		 mov	 BYTE PTR [esi+3798], al

; 175  : 				}
; 176  : 				else

  003d0	e9 38 01 00 00	 jmp	 $LN116@CreateOffT
$LN41@CreateOffT:

; 177  : 				{
; 178  : 					strcpy(lpObj->m_szPShopText,g_ZtText.GetText(57));

  003d5	6a 39		 push	 57			; 00000039H
  003d7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  003dc	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  003e1	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  003e7	2b d0		 sub	 edx, eax
  003e9	8d a4 24 00 00
	00 00		 npad	 7
$LL101@CreateOffT:
  003f0	8a 08		 mov	 cl, BYTE PTR [eax]
  003f2	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  003f5	40		 inc	 eax
  003f6	84 c9		 test	 cl, cl
  003f8	75 f6		 jne	 SHORT $LL101@CreateOffT

; 179  : 				}

  003fa	e9 0e 01 00 00	 jmp	 $LN116@CreateOffT
$LN42@CreateOffT:

; 180  : 			}
; 181  : 			else if(type == OFFWG_DC)

  003ff	83 ff 05	 cmp	 edi, 5
  00402	75 23		 jne	 SHORT $LN38@CreateOffT

; 182  : 			{
; 183  : 				strcpy(lpObj->m_szPShopText,g_ZtText.GetText(58));

  00404	6a 3a		 push	 58			; 0000003aH
  00406	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0040b	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00410	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  00416	2b d0		 sub	 edx, eax
$LL102@CreateOffT:
  00418	8a 08		 mov	 cl, BYTE PTR [eax]
  0041a	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  0041d	40		 inc	 eax
  0041e	84 c9		 test	 cl, cl
  00420	75 f6		 jne	 SHORT $LL102@CreateOffT
  00422	e9 e6 00 00 00	 jmp	 $LN116@CreateOffT
$LN38@CreateOffT:

; 184  : 			}
; 185  : 			else if(type == OFFCHAOS_DC)

  00427	83 ff 06	 cmp	 edi, 6
  0042a	75 23		 jne	 SHORT $LN36@CreateOffT

; 186  : 			{
; 187  : 				strcpy(lpObj->m_szPShopText,g_ZtText.GetText(59));

  0042c	6a 3b		 push	 59			; 0000003bH
  0042e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00433	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00438	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  0043e	2b d0		 sub	 edx, eax
$LL103@CreateOffT:
  00440	8a 08		 mov	 cl, BYTE PTR [eax]
  00442	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00445	40		 inc	 eax
  00446	84 c9		 test	 cl, cl
  00448	75 f6		 jne	 SHORT $LL103@CreateOffT
  0044a	e9 be 00 00 00	 jmp	 $LN116@CreateOffT
$LN36@CreateOffT:

; 188  : 			}
; 189  : 			else if(type == OFFBLESS_DC)

  0044f	83 ff 07	 cmp	 edi, 7
  00452	75 23		 jne	 SHORT $LN34@CreateOffT

; 190  : 			{
; 191  : 				strcpy(lpObj->m_szPShopText,g_ZtText.GetText(60));

  00454	6a 3c		 push	 60			; 0000003cH
  00456	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0045b	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00460	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  00466	2b d0		 sub	 edx, eax
$LL104@CreateOffT:
  00468	8a 08		 mov	 cl, BYTE PTR [eax]
  0046a	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  0046d	40		 inc	 eax
  0046e	84 c9		 test	 cl, cl
  00470	75 f6		 jne	 SHORT $LL104@CreateOffT
  00472	e9 96 00 00 00	 jmp	 $LN116@CreateOffT
$LN34@CreateOffT:

; 192  : 			}
; 193  : 			else if(type == OFFSOUL_DC)

  00477	83 ff 08	 cmp	 edi, 8
  0047a	75 20		 jne	 SHORT $LN32@CreateOffT

; 194  : 			{
; 195  : 				strcpy(lpObj->m_szPShopText,g_ZtText.GetText(61));

  0047c	6a 3d		 push	 61			; 0000003dH
  0047e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00483	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00488	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  0048e	2b d0		 sub	 edx, eax
$LL105@CreateOffT:
  00490	8a 08		 mov	 cl, BYTE PTR [eax]
  00492	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00495	40		 inc	 eax
  00496	84 c9		 test	 cl, cl
  00498	75 f6		 jne	 SHORT $LL105@CreateOffT
  0049a	eb 71		 jmp	 SHORT $LN116@CreateOffT
$LN32@CreateOffT:

; 196  : 			}
; 197  : 			else if(type == OFFLIFE_DC)

  0049c	83 ff 09	 cmp	 edi, 9
  0049f	75 6c		 jne	 SHORT $LN116@CreateOffT

; 198  : 			{
; 199  : 	#ifdef PRIVATE_MODULE
; 200  : 				if(g_ZtLicense.CheckUser(eZtUB::Vadim))

  004a1	57		 push	 edi
  004a2	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  004a7	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  004ac	84 c0		 test	 al, al
  004ae	74 3f		 je	 SHORT $LN29@CreateOffT

; 201  : 				{
; 202  : 					strcpy(lpObj->m_szPShopText,".::JOW SHOP::.");

  004b0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@
  004b6	89 8e c8 0e 00
	00		 mov	 DWORD PTR [esi+3784], ecx
  004bc	8b 15 04 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@+4
  004c2	89 96 cc 0e 00
	00		 mov	 DWORD PTR [esi+3788], edx
  004c8	a1 08 00 00 00	 mov	 eax, DWORD PTR ??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@+8
  004cd	89 86 d0 0e 00
	00		 mov	 DWORD PTR [esi+3792], eax
  004d3	66 8b 0d 0c 00
	00 00		 mov	 cx, WORD PTR ??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@+12
  004da	66 89 8e d4 0e
	00 00		 mov	 WORD PTR [esi+3796], cx
  004e1	8a 15 0e 00 00
	00		 mov	 dl, BYTE PTR ??_C@_0P@JILNKLBJ@?4?3?3JOW?5SHOP?3?3?4?$AA@+14
  004e7	88 96 d6 0e 00
	00		 mov	 BYTE PTR [esi+3798], dl

; 203  : 				}
; 204  : 				else

  004ed	eb 1e		 jmp	 SHORT $LN116@CreateOffT
$LN29@CreateOffT:

; 205  : 				{
; 206  : 					strcpy(lpObj->m_szPShopText,g_ZtText.GetText(62));

  004ef	6a 3e		 push	 62			; 0000003eH
  004f1	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  004f6	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  004fb	8d 96 c8 0e 00
	00		 lea	 edx, DWORD PTR [esi+3784]
  00501	2b d0		 sub	 edx, eax
$LL106@CreateOffT:
  00503	8a 08		 mov	 cl, BYTE PTR [eax]
  00505	88 0c 02	 mov	 BYTE PTR [edx+eax], cl
  00508	40		 inc	 eax
  00509	84 c9		 test	 cl, cl
  0050b	75 f6		 jne	 SHORT $LL106@CreateOffT
$LN116@CreateOffT:

; 207  : 				}
; 208  : 	#else
; 209  : 				strcpy(lpObj->m_szPShopText,LIFE_SHOP);
; 210  : 	#endif
; 211  : 			}
; 212  : 
; 213  : 			if(lpObj->MapNumber==0)

  0050d	8a 86 49 01 00
	00		 mov	 al, BYTE PTR [esi+329]
  00513	84 c0		 test	 al, al
  00515	75 22		 jne	 SHORT $LN27@CreateOffT

; 214  : 				MessaageAllGlobal(g_ZtText.GetText(63),lpObj->m_szPShopText,lpObj->Name,lpObj->X,lpObj->Y);

  00517	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  0051e	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  00525	50		 push	 eax
  00526	51		 push	 ecx
  00527	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  0052a	52		 push	 edx
  0052b	81 c6 c8 0e 00
	00		 add	 esi, 3784		; 00000ec8H
  00531	56		 push	 esi
  00532	6a 3f		 push	 63			; 0000003fH
  00534	e9 8a 00 00 00	 jmp	 $LN121@CreateOffT
$LN27@CreateOffT:

; 215  : 			else if(lpObj->MapNumber==2)

  00539	3c 02		 cmp	 al, 2
  0053b	75 1f		 jne	 SHORT $LN25@CreateOffT

; 216  : 				MessaageAllGlobal(g_ZtText.GetText(64),lpObj->m_szPShopText,lpObj->Name,lpObj->X,lpObj->Y);

  0053d	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00544	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  0054b	50		 push	 eax
  0054c	51		 push	 ecx
  0054d	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00550	52		 push	 edx
  00551	81 c6 c8 0e 00
	00		 add	 esi, 3784		; 00000ec8H
  00557	56		 push	 esi
  00558	6a 40		 push	 64			; 00000040H
  0055a	eb 67		 jmp	 SHORT $LN121@CreateOffT
$LN25@CreateOffT:

; 217  : 			else if(lpObj->MapNumber==3)

  0055c	3c 03		 cmp	 al, 3
  0055e	75 1f		 jne	 SHORT $LN23@CreateOffT

; 218  : 				MessaageAllGlobal(g_ZtText.GetText(65),lpObj->m_szPShopText,lpObj->Name,lpObj->X,lpObj->Y);

  00560	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00567	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  0056e	50		 push	 eax
  0056f	51		 push	 ecx
  00570	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00573	52		 push	 edx
  00574	81 c6 c8 0e 00
	00		 add	 esi, 3784		; 00000ec8H
  0057a	56		 push	 esi
  0057b	6a 41		 push	 65			; 00000041H
  0057d	eb 44		 jmp	 SHORT $LN121@CreateOffT
$LN23@CreateOffT:

; 219  : 			else if(lpObj->MapNumber==51)

  0057f	3c 33		 cmp	 al, 51			; 00000033H
  00581	75 1f		 jne	 SHORT $LN21@CreateOffT

; 220  : 				MessaageAllGlobal(g_ZtText.GetText(66),lpObj->m_szPShopText,lpObj->Name,lpObj->X,lpObj->Y);

  00583	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  0058a	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  00591	50		 push	 eax
  00592	51		 push	 ecx
  00593	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  00596	52		 push	 edx
  00597	81 c6 c8 0e 00
	00		 add	 esi, 3784		; 00000ec8H
  0059d	56		 push	 esi
  0059e	6a 42		 push	 66			; 00000042H
  005a0	eb 21		 jmp	 SHORT $LN121@CreateOffT
$LN21@CreateOffT:

; 221  : 			else if(lpObj->MapNumber==79)

  005a2	3c 4f		 cmp	 al, 79			; 0000004fH
  005a4	75 30		 jne	 SHORT $LN19@CreateOffT

; 222  : 				MessaageAllGlobal(g_ZtText.GetText(67),lpObj->m_szPShopText,lpObj->Name,lpObj->X,lpObj->Y);

  005a6	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  005ad	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  005b4	50		 push	 eax
  005b5	51		 push	 ecx
  005b6	8d 56 77	 lea	 edx, DWORD PTR [esi+119]
  005b9	52		 push	 edx
  005ba	81 c6 c8 0e 00
	00		 add	 esi, 3784		; 00000ec8H
  005c0	56		 push	 esi
  005c1	6a 43		 push	 67			; 00000043H
$LN121@CreateOffT:
  005c3	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  005c8	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  005cd	50		 push	 eax
  005ce	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  005d3	83 c4 14	 add	 esp, 20			; 00000014H
$LN19@CreateOffT:

; 223  : 			//gObjCloseSet(aIndex, 2);
; 224  : 		}
; 225  : //#endif 
; 226  : #ifdef _RECONNECT_
; 227  : 
; 228  : 	if(type == OFFZEN_DC)

  005d6	83 ff 01	 cmp	 edi, 1
  005d9	75 0a		 jne	 SHORT $LN18@CreateOffT

; 229  : 	{
; 230  : 		g_ConnectZt.SendClose(aIndex,OFFZEN_DC);

  005db	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _aIndex$GSCopy$[ebp]
  005e1	57		 push	 edi
  005e2	50		 push	 eax
  005e3	eb 68		 jmp	 SHORT $LN122@CreateOffT
$LN18@CreateOffT:

; 231  : 	}
; 232  : 	else if(type == OFFCR_DC)

  005e5	83 ff 02	 cmp	 edi, 2
  005e8	75 0a		 jne	 SHORT $LN16@CreateOffT

; 233  : 	{
; 234  : 		g_ConnectZt.SendClose(aIndex,OFFCR_DC);

  005ea	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _aIndex$GSCopy$[ebp]
  005f0	57		 push	 edi
  005f1	51		 push	 ecx
  005f2	eb 59		 jmp	 SHORT $LN122@CreateOffT
$LN16@CreateOffT:

; 235  : 	}
; 236  : 	else if(type == OFFWC_DC)

  005f4	83 ff 03	 cmp	 edi, 3
  005f7	75 03		 jne	 SHORT $LN14@CreateOffT

; 237  : 	{
; 238  : 		g_ConnectZt.SendClose(aIndex,OFFWC_DC);

  005f9	57		 push	 edi
  005fa	eb 4a		 jmp	 SHORT $LN123@CreateOffT
$LN14@CreateOffT:

; 239  : 	}
; 240  : 	else if(type == OFFWP_DC)

  005fc	83 ff 04	 cmp	 edi, 4
  005ff	75 0a		 jne	 SHORT $LN12@CreateOffT

; 241  : 	{
; 242  : 		g_ConnectZt.SendClose(aIndex,OFFWP_DC);

  00601	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _aIndex$GSCopy$[ebp]
  00607	57		 push	 edi
  00608	50		 push	 eax
  00609	eb 42		 jmp	 SHORT $LN122@CreateOffT
$LN12@CreateOffT:

; 243  : 	}
; 244  : 	else if(type == OFFWG_DC)

  0060b	83 ff 05	 cmp	 edi, 5
  0060e	75 0a		 jne	 SHORT $LN10@CreateOffT

; 245  : 	{
; 246  : 		g_ConnectZt.SendClose(aIndex,OFFWG_DC);

  00610	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _aIndex$GSCopy$[ebp]
  00616	57		 push	 edi
  00617	51		 push	 ecx
  00618	eb 33		 jmp	 SHORT $LN122@CreateOffT
$LN10@CreateOffT:

; 247  : 	}
; 248  : 	else if(type == OFFCHAOS_DC)

  0061a	83 ff 06	 cmp	 edi, 6
  0061d	75 03		 jne	 SHORT $LN8@CreateOffT

; 249  : 	{
; 250  : 		g_ConnectZt.SendClose(aIndex,OFFCHAOS_DC);

  0061f	57		 push	 edi
  00620	eb 24		 jmp	 SHORT $LN123@CreateOffT
$LN8@CreateOffT:

; 251  : 	}
; 252  : 	else if(type == OFFBLESS_DC)

  00622	83 ff 07	 cmp	 edi, 7
  00625	75 0a		 jne	 SHORT $LN6@CreateOffT

; 253  : 	{
; 254  : 		g_ConnectZt.SendClose(aIndex,OFFBLESS_DC);

  00627	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _aIndex$GSCopy$[ebp]
  0062d	57		 push	 edi
  0062e	50		 push	 eax
  0062f	eb 1c		 jmp	 SHORT $LN122@CreateOffT
$LN6@CreateOffT:

; 255  : 	}
; 256  : 	else if(type == OFFSOUL_DC)

  00631	83 ff 08	 cmp	 edi, 8
  00634	75 0a		 jne	 SHORT $LN4@CreateOffT

; 257  : 	{
; 258  : 		g_ConnectZt.SendClose(aIndex,OFFSOUL_DC);

  00636	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _aIndex$GSCopy$[ebp]
  0063c	57		 push	 edi
  0063d	51		 push	 ecx
  0063e	eb 0d		 jmp	 SHORT $LN122@CreateOffT
$LN4@CreateOffT:

; 259  : 	}
; 260  : 	else if(type == OFFLIFE_DC)

  00640	83 ff 09	 cmp	 edi, 9
  00643	75 12		 jne	 SHORT $LN117@CreateOffT

; 261  : 	{
; 262  : 		g_ConnectZt.SendClose(aIndex,OFFLIFE_DC);

  00645	57		 push	 edi
$LN123@CreateOffT:
  00646	8b 95 f8 fe ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  0064c	52		 push	 edx
$LN122@CreateOffT:
  0064d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ConnectZt@@3VConnectZt@@A ; g_ConnectZt
  00652	e8 00 00 00 00	 call	 ?SendClose@ConnectZt@@QAEXHH@Z ; ConnectZt::SendClose
$LN117@CreateOffT:
  00657	5f		 pop	 edi
  00658	5e		 pop	 esi
$LN2@CreateOffT:

; 273  : 	}
; 274  : }

  00659	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0065c	33 cd		 xor	 ecx, ebp
  0065e	5b		 pop	 ebx
  0065f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00664	8b e5		 mov	 esp, ebp
  00666	5d		 pop	 ebp
  00667	c2 08 00	 ret	 8
?CreateOffTrade@cOffTrade@@QAEXHH@Z ENDP		; cOffTrade::CreateOffTrade
_TEXT	ENDS
END
