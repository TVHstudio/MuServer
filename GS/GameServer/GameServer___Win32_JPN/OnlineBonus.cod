; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\OnlineBonus.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?gOnlineBonus@@3VOnlineBonus@@A			; gOnlineBonus
_BSS	SEGMENT
?gOnlineBonus@@3VOnlineBonus@@A DB 044H DUP (?)		; gOnlineBonus
_BSS	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_C@_0O@EJNBAPGA@AutoExpMaxLvl?$AA@		; `string'
PUBLIC	??_C@_0N@JBJFCODI@AutoExpBonus?$AA@		; `string'
PUBLIC	??_C@_0P@FEMHFGIK@AutoExpTimeSec?$AA@		; `string'
PUBLIC	??_C@_0O@EAGHMNFL@AutoExpActive?$AA@		; `string'
PUBLIC	??_C@_0M@IEJEHABA@ZtCredBonus?$AA@		; `string'
PUBLIC	??_C@_0L@GBHCHPGD@ZtCredTime?$AA@		; `string'
PUBLIC	??_C@_0N@HFMHGEPP@ZtCredActive?$AA@		; `string'
PUBLIC	??_C@_0M@KMLGGEIB@GoblinBonus?$AA@		; `string'
PUBLIC	??_C@_0L@EBNOHAFL@GoblinTime?$AA@		; `string'
PUBLIC	??_C@_0N@PCOHOFDJ@GoblinActive?$AA@		; `string'
PUBLIC	??_C@_0M@GBNIINIE@WCoinPBonus?$AA@		; `string'
PUBLIC	??_C@_0L@PIDBOGKO@WCoinPTime?$AA@		; `string'
PUBLIC	??_C@_0N@ICEAHPFP@WCoinPActive?$AA@		; `string'
PUBLIC	??_C@_0M@DHOOALNH@WCoinCBonus?$AA@		; `string'
PUBLIC	??_C@_0L@HNHDJGJL@WCoinCTime?$AA@		; `string'
PUBLIC	??_C@_0N@HAHEEJJH@WCoinCActive?$AA@		; `string'
PUBLIC	??_C@_06CNKIADGI@ZtTeam?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@ ; `string'
PUBLIC	?Load@OnlineBonus@@QAEXXZ			; OnlineBonus::Load
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
;	COMDAT ??_C@_0O@EJNBAPGA@AutoExpMaxLvl?$AA@
; File e:\work\tranet_version\gs\gameserver\onlinebonus.cpp
CONST	SEGMENT
??_C@_0O@EJNBAPGA@AutoExpMaxLvl?$AA@ DB 'AutoExpMaxLvl', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@JBJFCODI@AutoExpBonus?$AA@
CONST	SEGMENT
??_C@_0N@JBJFCODI@AutoExpBonus?$AA@ DB 'AutoExpBonus', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@FEMHFGIK@AutoExpTimeSec?$AA@
CONST	SEGMENT
??_C@_0P@FEMHFGIK@AutoExpTimeSec?$AA@ DB 'AutoExpTimeSec', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@EAGHMNFL@AutoExpActive?$AA@
CONST	SEGMENT
??_C@_0O@EAGHMNFL@AutoExpActive?$AA@ DB 'AutoExpActive', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@IEJEHABA@ZtCredBonus?$AA@
CONST	SEGMENT
??_C@_0M@IEJEHABA@ZtCredBonus?$AA@ DB 'ZtCredBonus', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@GBHCHPGD@ZtCredTime?$AA@
CONST	SEGMENT
??_C@_0L@GBHCHPGD@ZtCredTime?$AA@ DB 'ZtCredTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@HFMHGEPP@ZtCredActive?$AA@
CONST	SEGMENT
??_C@_0N@HFMHGEPP@ZtCredActive?$AA@ DB 'ZtCredActive', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@KMLGGEIB@GoblinBonus?$AA@
CONST	SEGMENT
??_C@_0M@KMLGGEIB@GoblinBonus?$AA@ DB 'GoblinBonus', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@EBNOHAFL@GoblinTime?$AA@
CONST	SEGMENT
??_C@_0L@EBNOHAFL@GoblinTime?$AA@ DB 'GoblinTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@PCOHOFDJ@GoblinActive?$AA@
CONST	SEGMENT
??_C@_0N@PCOHOFDJ@GoblinActive?$AA@ DB 'GoblinActive', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@GBNIINIE@WCoinPBonus?$AA@
CONST	SEGMENT
??_C@_0M@GBNIINIE@WCoinPBonus?$AA@ DB 'WCoinPBonus', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@PIDBOGKO@WCoinPTime?$AA@
CONST	SEGMENT
??_C@_0L@PIDBOGKO@WCoinPTime?$AA@ DB 'WCoinPTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@ICEAHPFP@WCoinPActive?$AA@
CONST	SEGMENT
??_C@_0N@ICEAHPFP@WCoinPActive?$AA@ DB 'WCoinPActive', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@DHOOALNH@WCoinCBonus?$AA@
CONST	SEGMENT
??_C@_0M@DHOOALNH@WCoinCBonus?$AA@ DB 'WCoinCBonus', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@HNHDJGJL@WCoinCTime?$AA@
CONST	SEGMENT
??_C@_0L@HNHDJGJL@WCoinCTime?$AA@ DB 'WCoinCTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@HAHEEJJH@WCoinCActive?$AA@
CONST	SEGMENT
??_C@_0N@HAHEEJJH@WCoinCActive?$AA@ DB 'WCoinCActive', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_06CNKIADGI@ZtTeam?$AA@
CONST	SEGMENT
??_C@_06CNKIADGI@ZtTeam?$AA@ DB 'ZtTeam', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
CONST	SEGMENT
??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@ DB '..\Data\'
	DB	'ZtData\OnlineBonus.ini', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Load@OnlineBonus@@QAEXXZ
_TEXT	SEGMENT
?Load@OnlineBonus@@QAEXXZ PROC				; OnlineBonus::Load, COMDAT
; _this$ = ecx

; 13   : {

  00000	56		 push	 esi
  00001	57		 push	 edi

; 14   : 	//CheckFile(ONLINEBONUS_DIR);
; 15   : 
; 16   : 	this->Enable = GetPrivateProfileInt("ZtTeam","Enable",0,ONLINEBONUS_DIR); 

  00002	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileIntA@16
  00008	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  0000d	6a 00		 push	 0
  0000f	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  00014	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00019	8b f1		 mov	 esi, ecx
  0001b	ff d7		 call	 edi

; 17   : 
; 18   : 	this->WCoinCActive = GetPrivateProfileInt("ZtTeam","WCoinCActive",0,ONLINEBONUS_DIR);

  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00022	6a 00		 push	 0
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0N@HAHEEJJH@WCoinCActive?$AA@
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0002e	89 06		 mov	 DWORD PTR [esi], eax
  00030	ff d7		 call	 edi

; 19   : 	this->WCoinCTime = GetPrivateProfileInt("ZtTeam","WCoinCTime",0,ONLINEBONUS_DIR) * 60;

  00032	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00037	6a 00		 push	 0
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0L@HNHDJGJL@WCoinCTime?$AA@
  0003e	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00043	89 46 04	 mov	 DWORD PTR [esi+4], eax
  00046	ff d7		 call	 edi
  00048	8b c8		 mov	 ecx, eax
  0004a	c1 e1 04	 shl	 ecx, 4

; 20   : 	this->WCoinCBonus = GetPrivateProfileInt("ZtTeam","WCoinCBonus",0,ONLINEBONUS_DIR);

  0004d	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00052	2b c8		 sub	 ecx, eax
  00054	6a 00		 push	 0
  00056	03 c9		 add	 ecx, ecx
  00058	68 00 00 00 00	 push	 OFFSET ??_C@_0M@DHOOALNH@WCoinCBonus?$AA@
  0005d	03 c9		 add	 ecx, ecx
  0005f	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00064	89 4e 08	 mov	 DWORD PTR [esi+8], ecx
  00067	ff d7		 call	 edi

; 21   : 
; 22   : 	this->WCoinPActive = GetPrivateProfileInt("ZtTeam","WCoinPActive",0,ONLINEBONUS_DIR);

  00069	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  0006e	6a 00		 push	 0
  00070	68 00 00 00 00	 push	 OFFSET ??_C@_0N@ICEAHPFP@WCoinPActive?$AA@
  00075	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0007a	89 46 0c	 mov	 DWORD PTR [esi+12], eax
  0007d	ff d7		 call	 edi

; 23   : 	this->WCoinPTime = GetPrivateProfileInt("ZtTeam","WCoinPTime",0,ONLINEBONUS_DIR) * 60;

  0007f	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00084	6a 00		 push	 0
  00086	68 00 00 00 00	 push	 OFFSET ??_C@_0L@PIDBOGKO@WCoinPTime?$AA@
  0008b	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00090	89 46 10	 mov	 DWORD PTR [esi+16], eax
  00093	ff d7		 call	 edi
  00095	8b d0		 mov	 edx, eax
  00097	c1 e2 04	 shl	 edx, 4

; 24   : 	this->WCoinPBonus = GetPrivateProfileInt("ZtTeam","WCoinPBonus",0,ONLINEBONUS_DIR);

  0009a	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  0009f	2b d0		 sub	 edx, eax
  000a1	6a 00		 push	 0
  000a3	03 d2		 add	 edx, edx
  000a5	68 00 00 00 00	 push	 OFFSET ??_C@_0M@GBNIINIE@WCoinPBonus?$AA@
  000aa	03 d2		 add	 edx, edx
  000ac	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000b1	89 56 14	 mov	 DWORD PTR [esi+20], edx
  000b4	ff d7		 call	 edi

; 25   : 
; 26   : 	this->GoblinActive = GetPrivateProfileInt("ZtTeam","GoblinActive",0,ONLINEBONUS_DIR);

  000b6	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  000bb	6a 00		 push	 0
  000bd	68 00 00 00 00	 push	 OFFSET ??_C@_0N@PCOHOFDJ@GoblinActive?$AA@
  000c2	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000c7	89 46 18	 mov	 DWORD PTR [esi+24], eax
  000ca	ff d7		 call	 edi

; 27   : 	this->GoblinTime = GetPrivateProfileInt("ZtTeam","GoblinTime",0,ONLINEBONUS_DIR) * 60;

  000cc	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  000d1	6a 00		 push	 0
  000d3	68 00 00 00 00	 push	 OFFSET ??_C@_0L@EBNOHAFL@GoblinTime?$AA@
  000d8	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000dd	89 46 1c	 mov	 DWORD PTR [esi+28], eax
  000e0	ff d7		 call	 edi
  000e2	8b c8		 mov	 ecx, eax
  000e4	c1 e1 04	 shl	 ecx, 4

; 28   : 	this->GoblinBonus = GetPrivateProfileInt("ZtTeam","GoblinBonus",0,ONLINEBONUS_DIR);

  000e7	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  000ec	2b c8		 sub	 ecx, eax
  000ee	6a 00		 push	 0
  000f0	03 c9		 add	 ecx, ecx
  000f2	68 00 00 00 00	 push	 OFFSET ??_C@_0M@KMLGGEIB@GoblinBonus?$AA@
  000f7	03 c9		 add	 ecx, ecx
  000f9	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000fe	89 4e 20	 mov	 DWORD PTR [esi+32], ecx
  00101	ff d7		 call	 edi

; 29   : 
; 30   : 	this->ZtCredActive = GetPrivateProfileInt("ZtTeam","ZtCredActive",0,ONLINEBONUS_DIR);

  00103	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00108	89 46 24	 mov	 DWORD PTR [esi+36], eax
  0010b	6a 00		 push	 0
  0010d	68 00 00 00 00	 push	 OFFSET ??_C@_0N@HFMHGEPP@ZtCredActive?$AA@
  00112	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00117	ff d7		 call	 edi

; 31   : 	this->ZtCredTime = GetPrivateProfileInt("ZtTeam","ZtCredTime",0,ONLINEBONUS_DIR) * 60;

  00119	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  0011e	6a 00		 push	 0
  00120	68 00 00 00 00	 push	 OFFSET ??_C@_0L@GBHCHPGD@ZtCredTime?$AA@
  00125	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0012a	89 46 28	 mov	 DWORD PTR [esi+40], eax
  0012d	ff d7		 call	 edi
  0012f	8b d0		 mov	 edx, eax
  00131	c1 e2 04	 shl	 edx, 4

; 32   : 	this->ZtCredBonus = GetPrivateProfileInt("ZtTeam","ZtCredBonus",0,ONLINEBONUS_DIR);

  00134	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00139	2b d0		 sub	 edx, eax
  0013b	6a 00		 push	 0
  0013d	03 d2		 add	 edx, edx
  0013f	68 00 00 00 00	 push	 OFFSET ??_C@_0M@IEJEHABA@ZtCredBonus?$AA@
  00144	03 d2		 add	 edx, edx
  00146	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0014b	89 56 2c	 mov	 DWORD PTR [esi+44], edx
  0014e	ff d7		 call	 edi

; 33   : 
; 34   : #if(LICENSE_UKRAINE)
; 35   : 	this->AutoExpActive = GetPrivateProfileInt("ZtTeam","AutoExpActive",0,ONLINEBONUS_DIR);

  00150	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00155	6a 00		 push	 0
  00157	68 00 00 00 00	 push	 OFFSET ??_C@_0O@EAGHMNFL@AutoExpActive?$AA@
  0015c	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00161	89 46 30	 mov	 DWORD PTR [esi+48], eax
  00164	ff d7		 call	 edi

; 36   : 	this->AutoExpTimeSec = GetPrivateProfileInt("ZtTeam","AutoExpTimeSec",0,ONLINEBONUS_DIR);

  00166	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  0016b	6a 00		 push	 0
  0016d	68 00 00 00 00	 push	 OFFSET ??_C@_0P@FEMHFGIK@AutoExpTimeSec?$AA@
  00172	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00177	89 46 34	 mov	 DWORD PTR [esi+52], eax
  0017a	ff d7		 call	 edi

; 37   : 	this->AutoExpBonus = GetPrivateProfileInt("ZtTeam","AutoExpBonus",0,ONLINEBONUS_DIR);

  0017c	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00181	6a 00		 push	 0
  00183	68 00 00 00 00	 push	 OFFSET ??_C@_0N@JBJFCODI@AutoExpBonus?$AA@
  00188	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0018d	89 46 38	 mov	 DWORD PTR [esi+56], eax
  00190	ff d7		 call	 edi

; 38   : 	this->AutoExpMaxLvl = GetPrivateProfileInt("ZtTeam","AutoExpMaxLvl",0,ONLINEBONUS_DIR);

  00192	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@FADGPOBA@?4?4?2Data?2ZtData?2OnlineBonus?4ini?$AA@
  00197	6a 00		 push	 0
  00199	68 00 00 00 00	 push	 OFFSET ??_C@_0O@EJNBAPGA@AutoExpMaxLvl?$AA@
  0019e	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  001a3	89 46 3c	 mov	 DWORD PTR [esi+60], eax
  001a6	ff d7		 call	 edi
  001a8	5f		 pop	 edi
  001a9	89 46 40	 mov	 DWORD PTR [esi+64], eax
  001ac	5e		 pop	 esi

; 39   : #endif
; 40   : }

  001ad	c3		 ret	 0
?Load@OnlineBonus@@QAEXXZ ENDP				; OnlineBonus::Load
_TEXT	ENDS
PUBLIC	?TickTime@OnlineBonus@@QAEXH@Z			; OnlineBonus::TickTime
EXTRN	?GCKillPlayerExpSend@@YAXHHHHH@Z:PROC		; GCKillPlayerExpSend
EXTRN	?gObjLevelUp@@YA_NPAUOBJECTSTRUCT@@AA_JHH@Z:PROC ; gObjLevelUp
EXTRN	?ZtUserDataSend@@YAXH@Z:PROC			; ZtUserDataSend
EXTRN	?MessageChat@@YAXHPADZZ:PROC			; MessageChat
EXTRN	?GetText@CZtText@@QAEPADH@Z:PROC		; CZtText::GetText
EXTRN	?g_ZtText@@3VCZtText@@A:BYTE			; g_ZtText
EXTRN	?GDSaveUserInfo@GameShop@@QAEXH@Z:PROC		; GameShop::GDSaveUserInfo
EXTRN	?gGameShop@@3VGameShop@@A:BYTE			; gGameShop
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	__fltused:DWORD
; Function compile flags: /Ogtp
;	COMDAT ?TickTime@OnlineBonus@@QAEXH@Z
_TEXT	SEGMENT
_addexp$203345 = -8					; size = 8
_aIndex$ = 8						; size = 4
?TickTime@OnlineBonus@@QAEXH@Z PROC			; OnlineBonus::TickTime, COMDAT
; _this$ = ecx

; 43   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	57		 push	 edi
  00007	8b f9		 mov	 edi, ecx

; 44   : 	if(!this->Enable) return;

  00009	83 3f 00	 cmp	 DWORD PTR [edi], 0
  0000c	0f 84 fb 01 00
	00		 je	 $LN14@TickTime

; 45   : 
; 46   : 	LPOBJ lpObj = &gObj[aIndex];

  00012	53		 push	 ebx
  00013	8b 5d 08	 mov	 ebx, DWORD PTR _aIndex$[ebp]
  00016	56		 push	 esi
  00017	8b f3		 mov	 esi, ebx
  00019	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0001f	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 47   : 
; 48   : 	if(lpObj->OffExp > 0 || lpObj->OffTrade > 0)

  00025	83 be 98 22 00
	00 00		 cmp	 DWORD PTR [esi+8856], 0
  0002c	0f 8f d9 01 00
	00		 jg	 $LN20@TickTime
  00032	83 be ac 22 00
	00 00		 cmp	 DWORD PTR [esi+8876], 0
  00039	0f 8f cc 01 00
	00		 jg	 $LN20@TickTime

; 49   : 	{
; 50   : 		return;
; 51   : 	}
; 52   : 
; 53   : 	if(lpObj->m_OfflineMode)

  0003f	80 be d4 28 00
	00 00		 cmp	 BYTE PTR [esi+10452], 0
  00046	0f 85 bf 01 00
	00		 jne	 $LN20@TickTime

; 54   : 	{
; 55   : 		return;
; 56   : 	}
; 57   : 
; 58   : 	if(this->WCoinCActive)

  0004c	83 7f 04 00	 cmp	 DWORD PTR [edi+4], 0
  00050	74 4f		 je	 SHORT $LN19@TickTime

; 59   : 	{
; 60   : 		lpObj->WCoinCTick++;

  00052	ff 86 d0 27 00
	00		 inc	 DWORD PTR [esi+10192]
  00058	8b 86 d0 27 00
	00		 mov	 eax, DWORD PTR [esi+10192]

; 61   : 		if(lpObj->WCoinCTick >= this->WCoinCTime)

  0005e	3b 47 08	 cmp	 eax, DWORD PTR [edi+8]
  00061	7c 3e		 jl	 SHORT $LN19@TickTime

; 62   : 		{
; 63   : 			lpObj->WCoinCTick = 0;

  00063	c7 86 d0 27 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+10192], 0

; 64   : 			lpObj->GameShop.WCoinC += this->WCoinCBonus;

  0006d	db 47 0c	 fild	 DWORD PTR [edi+12]

; 65   : 			gGameShop.GDSaveUserInfo(aIndex);

  00070	53		 push	 ebx
  00071	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00076	dc 86 00 23 00
	00		 fadd	 QWORD PTR [esi+8960]
  0007c	dd 9e 00 23 00
	00		 fstp	 QWORD PTR [esi+8960]
  00082	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 66   : 			MessageChat(aIndex, g_ZtText.GetText(88), this->WCoinCBonus);

  00087	8b 47 0c	 mov	 eax, DWORD PTR [edi+12]
  0008a	50		 push	 eax
  0008b	6a 58		 push	 88			; 00000058H
  0008d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00092	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00097	50		 push	 eax
  00098	53		 push	 ebx
  00099	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  0009e	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN19@TickTime:

; 67   : 		}
; 68   : 	}
; 69   : 
; 70   : 	if(this->WCoinPActive)

  000a1	83 7f 10 00	 cmp	 DWORD PTR [edi+16], 0
  000a5	74 4f		 je	 SHORT $LN9@TickTime

; 71   : 	{
; 72   : 		lpObj->WCoinPTick++;

  000a7	ff 86 d4 27 00
	00		 inc	 DWORD PTR [esi+10196]
  000ad	8b 86 d4 27 00
	00		 mov	 eax, DWORD PTR [esi+10196]

; 73   : 		if(lpObj->WCoinPTick >= this->WCoinPTime)

  000b3	3b 47 14	 cmp	 eax, DWORD PTR [edi+20]
  000b6	7c 3e		 jl	 SHORT $LN9@TickTime

; 74   : 		{
; 75   : 			lpObj->WCoinPTick = 0;

  000b8	c7 86 d4 27 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+10196], 0

; 76   : 			lpObj->GameShop.WCoinP += this->WCoinPBonus;

  000c2	db 47 18	 fild	 DWORD PTR [edi+24]

; 77   : 			gGameShop.GDSaveUserInfo(aIndex);

  000c5	53		 push	 ebx
  000c6	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  000cb	dc 86 f8 22 00
	00		 fadd	 QWORD PTR [esi+8952]
  000d1	dd 9e f8 22 00
	00		 fstp	 QWORD PTR [esi+8952]
  000d7	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 78   : 			MessageChat(aIndex, g_ZtText.GetText(89), this->WCoinPBonus);

  000dc	8b 4f 18	 mov	 ecx, DWORD PTR [edi+24]
  000df	51		 push	 ecx
  000e0	6a 59		 push	 89			; 00000059H
  000e2	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000e7	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000ec	50		 push	 eax
  000ed	53		 push	 ebx
  000ee	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  000f3	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN9@TickTime:

; 79   : 		}
; 80   : 	}
; 81   : 
; 82   : 	if(this->GoblinActive)

  000f6	83 7f 1c 00	 cmp	 DWORD PTR [edi+28], 0
  000fa	74 4f		 je	 SHORT $LN7@TickTime

; 83   : 	{
; 84   : 		lpObj->GoblinTick++;

  000fc	ff 86 d8 27 00
	00		 inc	 DWORD PTR [esi+10200]
  00102	8b 86 d8 27 00
	00		 mov	 eax, DWORD PTR [esi+10200]

; 85   : 		if(lpObj->GoblinTick == this->GoblinTime)

  00108	3b 47 20	 cmp	 eax, DWORD PTR [edi+32]
  0010b	75 3e		 jne	 SHORT $LN7@TickTime

; 86   : 		{
; 87   : 			lpObj->GoblinTick = 0;

  0010d	c7 86 d8 27 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+10200], 0

; 88   : 			lpObj->GameShop.GoblinPoint += this->GoblinBonus;

  00117	db 47 24	 fild	 DWORD PTR [edi+36]

; 89   : 			gGameShop.GDSaveUserInfo(aIndex);

  0011a	53		 push	 ebx
  0011b	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00120	dc 86 08 23 00
	00		 fadd	 QWORD PTR [esi+8968]
  00126	dd 9e 08 23 00
	00		 fstp	 QWORD PTR [esi+8968]
  0012c	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 90   : 			MessageChat(aIndex, g_ZtText.GetText(90), this->GoblinBonus);

  00131	8b 57 24	 mov	 edx, DWORD PTR [edi+36]
  00134	52		 push	 edx
  00135	6a 5a		 push	 90			; 0000005aH
  00137	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0013c	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00141	50		 push	 eax
  00142	53		 push	 ebx
  00143	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  00148	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN7@TickTime:

; 91   : 		}
; 92   : 	}
; 93   : 
; 94   : 	if(this->ZtCredActive)

  0014b	83 7f 28 00	 cmp	 DWORD PTR [edi+40], 0
  0014f	74 4d		 je	 SHORT $LN5@TickTime

; 95   : 	{
; 96   : 		lpObj->ZtCredTick++;

  00151	ff 86 dc 27 00
	00		 inc	 DWORD PTR [esi+10204]
  00157	8b 86 dc 27 00
	00		 mov	 eax, DWORD PTR [esi+10204]

; 97   : 		if(lpObj->ZtCredTick >= this->ZtCredTime)

  0015d	3b 47 2c	 cmp	 eax, DWORD PTR [edi+44]
  00160	7c 3c		 jl	 SHORT $LN5@TickTime

; 98   : 		{
; 99   : 			lpObj->ZtCredTick = 0;

  00162	c7 86 dc 27 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+10204], 0

; 100  : 			lpObj->ZtCred += this->ZtCredBonus;

  0016c	db 47 30	 fild	 DWORD PTR [edi+48]

; 101  : #ifndef FIX_DS_CRASH
; 102  : 			GJSetCharacterInfo(lpObj, lpObj->m_Index, 0);
; 103  : #endif
; 104  : 			ZtUserDataSend(aIndex);

  0016f	53		 push	 ebx
  00170	d8 86 a8 22 00
	00		 fadd	 DWORD PTR [esi+8872]
  00176	d9 9e a8 22 00
	00		 fstp	 DWORD PTR [esi+8872]
  0017c	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend

; 105  : 			MessageChat(aIndex, g_ZtText.GetText(91),this->ZtCredBonus);

  00181	8b 47 30	 mov	 eax, DWORD PTR [edi+48]
  00184	83 c4 04	 add	 esp, 4
  00187	50		 push	 eax
  00188	6a 5b		 push	 91			; 0000005bH
  0018a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  0018f	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00194	50		 push	 eax
  00195	53		 push	 ebx
  00196	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  0019b	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN5@TickTime:

; 106  : 		}
; 107  : 	}
; 108  : 
; 109  : 	#if(LICENSE_UKRAINE)
; 110  : 
; 111  : 	if(this->AutoExpActive)

  0019e	83 7f 34 00	 cmp	 DWORD PTR [edi+52], 0
  001a2	74 67		 je	 SHORT $LN20@TickTime

; 112  : 	{
; 113  : 		if(this->AutoExpMaxLvl >= lpObj->Level)

  001a4	0f bf 8e be 00
	00 00		 movsx	 ecx, WORD PTR [esi+190]
  001ab	39 4f 40	 cmp	 DWORD PTR [edi+64], ecx
  001ae	7c 5b		 jl	 SHORT $LN20@TickTime

; 114  : 		{
; 115  : 			lpObj->AutoExpTick++;

  001b0	ff 86 e0 27 00
	00		 inc	 DWORD PTR [esi+10208]
  001b6	8b 86 e0 27 00
	00		 mov	 eax, DWORD PTR [esi+10208]

; 116  : 
; 117  : 			if(lpObj->AutoExpTick >= this->AutoExpTimeSec)

  001bc	3b 47 38	 cmp	 eax, DWORD PTR [edi+56]
  001bf	7c 4a		 jl	 SHORT $LN20@TickTime

; 118  : 			{
; 119  : 				lpObj->AutoExpTick = 0;

  001c1	c7 86 e0 27 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+10208], 0

; 120  : 
; 121  : 				__int64 addexp = this->AutoExpBonus * lpObj->Level;

  001cb	8b 47 3c	 mov	 eax, DWORD PTR [edi+60]
  001ce	0f af c1	 imul	 eax, ecx

; 122  : 
; 123  : 				lpObj->Experience += addexp;
; 124  : 
; 125  : 				if(gObjLevelUp(lpObj, addexp, 0, 0) == true)

  001d1	6a 00		 push	 0
  001d3	99		 cdq
  001d4	01 86 c8 00 00
	00		 add	 DWORD PTR [esi+200], eax
  001da	6a 00		 push	 0
  001dc	8d 4d f8	 lea	 ecx, DWORD PTR _addexp$203345[ebp]
  001df	51		 push	 ecx
  001e0	56		 push	 esi
  001e1	89 45 f8	 mov	 DWORD PTR _addexp$203345[ebp], eax
  001e4	89 55 fc	 mov	 DWORD PTR _addexp$203345[ebp+4], edx
  001e7	e8 00 00 00 00	 call	 ?gObjLevelUp@@YA_NPAUOBJECTSTRUCT@@AA_JHH@Z ; gObjLevelUp
  001ec	83 c4 10	 add	 esp, 16			; 00000010H
  001ef	3c 01		 cmp	 al, 1
  001f1	75 18		 jne	 SHORT $LN20@TickTime

; 126  : 				{
; 127  : 					GCKillPlayerExpSend(lpObj->m_Index, (WORD)-1, addexp, 0, 0);

  001f3	8b 55 f8	 mov	 edx, DWORD PTR _addexp$203345[ebp]
  001f6	8b 06		 mov	 eax, DWORD PTR [esi]
  001f8	6a 00		 push	 0
  001fa	6a 00		 push	 0
  001fc	52		 push	 edx
  001fd	68 ff ff 00 00	 push	 65535			; 0000ffffH
  00202	50		 push	 eax
  00203	e8 00 00 00 00	 call	 ?GCKillPlayerExpSend@@YAXHHHHH@Z ; GCKillPlayerExpSend
  00208	83 c4 14	 add	 esp, 20			; 00000014H
$LN20@TickTime:
  0020b	5e		 pop	 esi
  0020c	5b		 pop	 ebx
$LN14@TickTime:
  0020d	5f		 pop	 edi

; 128  : 				}
; 129  : 			}
; 130  : 		}
; 131  : 	}
; 132  : 	
; 133  : 	#endif
; 134  : }

  0020e	8b e5		 mov	 esp, ebp
  00210	5d		 pop	 ebp
  00211	c2 04 00	 ret	 4
?TickTime@OnlineBonus@@QAEXH@Z ENDP			; OnlineBonus::TickTime
_TEXT	ENDS
PUBLIC	?TickSecond@OnlineBonus@@QAEXH@Z		; OnlineBonus::TickSecond
; Function compile flags: /Ogtp
;	COMDAT ?TickSecond@OnlineBonus@@QAEXH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?TickSecond@OnlineBonus@@QAEXH@Z PROC			; OnlineBonus::TickSecond, COMDAT
; _this$ = ecx

; 138  : 	if(!this->Enable) return;
; 139  : 
; 140  : 	LPOBJ lpObj = &gObj[aIndex];
; 141  : 
; 142  : }

  00000	c2 04 00	 ret	 4
?TickSecond@OnlineBonus@@QAEXH@Z ENDP			; OnlineBonus::TickSecond
_TEXT	ENDS
END
