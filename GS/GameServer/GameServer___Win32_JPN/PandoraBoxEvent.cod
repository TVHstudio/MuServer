; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\PandoraBoxEvent.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?gPandoraBoxEvent@@3VcPandoraBoxEvent@@A	; gPandoraBoxEvent
_BSS	SEGMENT
?gPandoraBoxEvent@@3VcPandoraBoxEvent@@A DB 01b6cH DUP (?) ; gPandoraBoxEvent
_BSS	ENDS
_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
EXTRN	__time64:PROC
; Function compile flags: /Ogtp
; File d:\program files (x86)\microsoft visual studio 10.0\vc\include\time.inl
;	COMDAT _time
_TEXT	SEGMENT
_time	PROC						; COMDAT
; __Time$ = eax

; 133  :     return _time64(_Time);

  00000	50		 push	 eax
  00001	e8 00 00 00 00	 call	 __time64
  00006	83 c4 04	 add	 esp, 4

; 134  : }

  00009	c3		 ret	 0
_time	ENDP
_TEXT	ENDS
PUBLIC	?Init@cPandoraBoxEvent@@QAEXXZ			; cPandoraBoxEvent::Init
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\pandoraboxevent.cpp
;	COMDAT ?Init@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
?Init@cPandoraBoxEvent@@QAEXXZ PROC			; cPandoraBoxEvent::Init, COMDAT
; _this$ = ecx

; 19   : 	this->Started = false;
; 20   : 	this->EventTimeSecond = 0;
; 21   : 	this->CountCord = 0;

  00000	33 d2		 xor	 edx, edx
  00002	56		 push	 esi
  00003	89 91 18 0e 00
	00		 mov	 DWORD PTR [ecx+3608], edx

; 22   : 	this->CountTimes = 0;

  00009	89 91 bc 0e 00
	00		 mov	 DWORD PTR [ecx+3772], edx

; 23   : 	this->CountReward = 0;

  0000f	89 91 40 1b 00
	00		 mov	 DWORD PTR [ecx+6976], edx

; 24   : 	this->ActiveMap = 0;

  00015	89 91 44 1b 00
	00		 mov	 DWORD PTR [ecx+6980], edx

; 25   : 	this->Started = false;

  0001b	88 51 04	 mov	 BYTE PTR [ecx+4], dl

; 26   : 	this->EventTime = 0;

  0001e	89 91 48 1b 00
	00		 mov	 DWORD PTR [ecx+6984], edx

; 27   : 	this->EventTimeSecond = 0;

  00024	89 91 4c 1b 00
	00		 mov	 DWORD PTR [ecx+6988], edx

; 28   : 
; 29   : 
; 30   : 	this->RewardCredits = 0;

  0002a	89 91 5c 1b 00
	00		 mov	 DWORD PTR [ecx+7004], edx

; 31   : 	this->RewardWcoinC = 0;

  00030	89 91 60 1b 00
	00		 mov	 DWORD PTR [ecx+7008], edx

; 32   : 	this->RewardWcoinP = 0;

  00036	89 91 64 1b 00
	00		 mov	 DWORD PTR [ecx+7012], edx

; 33   : 	this->RewardGoblinPoints = 0;

  0003c	89 91 68 1b 00
	00		 mov	 DWORD PTR [ecx+7016], edx
  00042	8d 41 08	 lea	 eax, DWORD PTR [ecx+8]
  00045	be 2c 01 00 00	 mov	 esi, 300		; 0000012cH
  0004a	8d 9b 00 00 00
	00		 npad	 6
$LL9@Init:

; 34   : 
; 35   : 	for (int i = 0; i < PAN_EVENT_MAX_CORD; i++)
; 36   : 	{
; 37   : 		Cords[i].Map = 0;

  00050	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 38   : 		Cords[i].X = 0;

  00053	89 10		 mov	 DWORD PTR [eax], edx

; 39   : 		Cords[i].Y = 0;

  00055	89 50 04	 mov	 DWORD PTR [eax+4], edx
  00058	83 c0 0c	 add	 eax, 12			; 0000000cH
  0005b	4e		 dec	 esi
  0005c	75 f2		 jne	 SHORT $LL9@Init

; 40   : 	}
; 41   : 	for (int i = 0; i < PAN_EVENT_MAX_TIME; i++)

  0005e	8d 81 20 0e 00
	00		 lea	 eax, DWORD PTR [ecx+3616]
  00064	be 14 00 00 00	 mov	 esi, 20			; 00000014H
  00069	8d a4 24 00 00
	00 00		 npad	 7
$LL6@Init:

; 42   : 	{
; 43   : 		Times[i].Hour = 0;

  00070	89 50 fc	 mov	 DWORD PTR [eax-4], edx

; 44   : 		Times[i].Min = 0;

  00073	89 10		 mov	 DWORD PTR [eax], edx
  00075	83 c0 08	 add	 eax, 8
  00078	4e		 dec	 esi
  00079	75 f5		 jne	 SHORT $LL6@Init

; 45   : 	}
; 46   : 	for(int i = 0; i < PAN_EVENT_MAX_REWARD_ITEM; i++)

  0007b	8d 81 c4 0e 00
	00		 lea	 eax, DWORD PTR [ecx+3780]
  00081	be 64 00 00 00	 mov	 esi, 100		; 00000064H
$LL3@Init:

; 47   : 	{
; 48   : 		this->Reward[i].Type	= 0;

  00086	89 50 fc	 mov	 DWORD PTR [eax-4], edx

; 49   : 		this->Reward[i].Index	= 0;

  00089	89 10		 mov	 DWORD PTR [eax], edx

; 50   : 		this->Reward[i].Level	= 0;

  0008b	89 50 04	 mov	 DWORD PTR [eax+4], edx

; 51   : 		this->Reward[i].Skill	= 0;

  0008e	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 52   : 		this->Reward[i].Luck	= 0;

  00091	89 50 0c	 mov	 DWORD PTR [eax+12], edx

; 53   : 		this->Reward[i].Opt		= 0;

  00094	89 50 10	 mov	 DWORD PTR [eax+16], edx

; 54   : 		this->Reward[i].Exl		= 0;

  00097	89 50 14	 mov	 DWORD PTR [eax+20], edx

; 55   : 		this->Reward[i].Anc		= 0;

  0009a	89 50 18	 mov	 DWORD PTR [eax+24], edx
  0009d	83 c0 20	 add	 eax, 32			; 00000020H
  000a0	4e		 dec	 esi
  000a1	75 e3		 jne	 SHORT $LL3@Init

; 56   : 	}
; 57   : 
; 58   : 	this->BoxIndex = -1;

  000a3	83 c8 ff	 or	 eax, -1
  000a6	89 81 54 1b 00
	00		 mov	 DWORD PTR [ecx+6996], eax

; 59   : 	this->BoxPos = -1;

  000ac	89 81 58 1b 00
	00		 mov	 DWORD PTR [ecx+7000], eax
  000b2	5e		 pop	 esi

; 60   : }

  000b3	c3		 ret	 0
?Init@cPandoraBoxEvent@@QAEXXZ ENDP			; cPandoraBoxEvent::Init
_TEXT	ENDS
PUBLIC	??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@		; `string'
PUBLIC	??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@	; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	??_C@_0BD@EKCAIKKD@RewardGoblinPoints?$AA@	; `string'
PUBLIC	??_C@_0N@IHMIAENF@RewardWcoinP?$AA@		; `string'
PUBLIC	??_C@_0N@OGCHEFEH@RewardWcoinC?$AA@		; `string'
PUBLIC	??_C@_0O@DAOMFNJD@RewardCredits?$AA@		; `string'
PUBLIC	??_C@_09OHFGCBJB@EventTime?$AA@			; `string'
PUBLIC	??_C@_06CNKIADGI@ZtTeam?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Load@cPandoraBoxEvent@@QAEXXZ			; cPandoraBoxEvent::Load
EXTRN	_fclose:PROC
EXTRN	_sscanf:PROC
EXTRN	?Zt_IsBadFileLine@@YA_NPADAAH@Z:PROC		; Zt_IsBadFileLine
EXTRN	_fgets:PROC
EXTRN	_feof:PROC
EXTRN	_fopen:PROC
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@ DB '%'
	DB	'd %d %d %d %d %d %d %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@ DB '%d %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@ DB '%d %d %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@EKCAIKKD@RewardGoblinPoints?$AA@
CONST	SEGMENT
??_C@_0BD@EKCAIKKD@RewardGoblinPoints?$AA@ DB 'RewardGoblinPoints', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@IHMIAENF@RewardWcoinP?$AA@
CONST	SEGMENT
??_C@_0N@IHMIAENF@RewardWcoinP?$AA@ DB 'RewardWcoinP', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@OGCHEFEH@RewardWcoinC?$AA@
CONST	SEGMENT
??_C@_0N@OGCHEFEH@RewardWcoinC?$AA@ DB 'RewardWcoinC', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@DAOMFNJD@RewardCredits?$AA@
CONST	SEGMENT
??_C@_0O@DAOMFNJD@RewardCredits?$AA@ DB 'RewardCredits', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_09OHFGCBJB@EventTime?$AA@
CONST	SEGMENT
??_C@_09OHFGCBJB@EventTime?$AA@ DB 'EventTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_06CNKIADGI@ZtTeam?$AA@
CONST	SEGMENT
??_C@_06CNKIADGI@ZtTeam?$AA@ DB 'ZtTeam', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
CONST	SEGMENT
??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@ DB '..\Data\Zt'
	DB	'Data\Events\PandoraBox.ini', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Load@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
_n$211071 = -316					; size = 8
_Flag$ = -308						; size = 4
_n$211075 = -304					; size = 32
_n$211067 = -272					; size = 12
_Buff$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
?Load@cPandoraBoxEvent@@QAEXXZ PROC			; cPandoraBoxEvent::Load, COMDAT
; _this$ = ecx

; 63   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 3c 01 00
	00		 sub	 esp, 316		; 0000013cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi
  00014	57		 push	 edi
  00015	8b f1		 mov	 esi, ecx

; 64   : 	this->Init();

  00017	e8 00 00 00 00	 call	 ?Init@cPandoraBoxEvent@@QAEXXZ ; cPandoraBoxEvent::Init

; 65   : 	this->Enable = GetPrivateProfileInt("ZtTeam","Enable",0,PANDORA_EVENT_DIR);

  0001c	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileIntA@16
  00022	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  00027	6a 00		 push	 0
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00033	ff d7		 call	 edi
  00035	85 c0		 test	 eax, eax
  00037	0f 95 c0	 setne	 al
  0003a	88 46 05	 mov	 BYTE PTR [esi+5], al

; 66   : 	if (!this->Enable)

  0003d	84 c0		 test	 al, al
  0003f	0f 84 45 03 00
	00		 je	 $LN14@Load

; 67   : 	{
; 68   : 		return;
; 69   : 	}
; 70   : 	
; 71   : 	this->EventTime = GetPrivateProfileInt("ZtTeam","EventTime",10,PANDORA_EVENT_DIR);

  00045	53		 push	 ebx
  00046	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  0004b	6a 0a		 push	 10			; 0000000aH
  0004d	68 00 00 00 00	 push	 OFFSET ??_C@_09OHFGCBJB@EventTime?$AA@
  00052	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00057	ff d7		 call	 edi

; 72   : 	this->RewardCredits = GetPrivateProfileInt("ZtTeam","RewardCredits",0,PANDORA_EVENT_DIR);

  00059	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  0005e	6a 00		 push	 0
  00060	68 00 00 00 00	 push	 OFFSET ??_C@_0O@DAOMFNJD@RewardCredits?$AA@
  00065	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0006a	89 86 48 1b 00
	00		 mov	 DWORD PTR [esi+6984], eax
  00070	ff d7		 call	 edi

; 73   : 	this->RewardWcoinC = GetPrivateProfileInt("ZtTeam","RewardWcoinC",0,PANDORA_EVENT_DIR);

  00072	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  00077	6a 00		 push	 0
  00079	68 00 00 00 00	 push	 OFFSET ??_C@_0N@OGCHEFEH@RewardWcoinC?$AA@
  0007e	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00083	89 86 5c 1b 00
	00		 mov	 DWORD PTR [esi+7004], eax
  00089	ff d7		 call	 edi

; 74   : 	this->RewardWcoinP = GetPrivateProfileInt("ZtTeam","RewardWcoinP",0,PANDORA_EVENT_DIR);

  0008b	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  00090	6a 00		 push	 0
  00092	68 00 00 00 00	 push	 OFFSET ??_C@_0N@IHMIAENF@RewardWcoinP?$AA@
  00097	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0009c	89 86 60 1b 00
	00		 mov	 DWORD PTR [esi+7008], eax
  000a2	ff d7		 call	 edi

; 75   : 	this->RewardGoblinPoints = GetPrivateProfileInt("ZtTeam","RewardGoblinPoints",0,PANDORA_EVENT_DIR);

  000a4	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  000a9	6a 00		 push	 0
  000ab	68 00 00 00 00	 push	 OFFSET ??_C@_0BD@EKCAIKKD@RewardGoblinPoints?$AA@
  000b0	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000b5	89 86 64 1b 00
	00		 mov	 DWORD PTR [esi+7012], eax
  000bb	ff d7		 call	 edi

; 76   : 
; 77   : 	FILE *file = fopen(PANDORA_EVENT_DIR,"r");

  000bd	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  000c2	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@EOLBOCMB@?4?4?2Data?2ZtData?2Events?2PandoraBox@
  000c7	89 86 68 1b 00
	00		 mov	 DWORD PTR [esi+7016], eax
  000cd	e8 00 00 00 00	 call	 _fopen
  000d2	8b d8		 mov	 ebx, eax
  000d4	83 c4 08	 add	 esp, 8

; 78   : 
; 79   : 	if(file == NULL)

  000d7	85 db		 test	 ebx, ebx
  000d9	75 14		 jne	 SHORT $LN12@Load

; 80   : 	{
; 81   : 		this->Enable = 0;

  000db	5b		 pop	 ebx
  000dc	5f		 pop	 edi
  000dd	88 46 05	 mov	 BYTE PTR [esi+5], al
  000e0	5e		 pop	 esi

; 152  : }

  000e1	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e4	33 cd		 xor	 ecx, ebp
  000e6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000eb	8b e5		 mov	 esp, ebp
  000ed	5d		 pop	 ebp
  000ee	c3		 ret	 0
$LN12@Load:

; 82   : 		return;
; 83   : 	}
; 84   : 
; 85   : 	char Buff[256];
; 86   : 	int Flag = 0;
; 87   : 
; 88   : 	while(!feof(file))

  000ef	53		 push	 ebx
  000f0	c7 85 cc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR _Flag$[ebp], 0
  000fa	e8 00 00 00 00	 call	 _feof
  000ff	83 c4 04	 add	 esp, 4
  00102	85 c0		 test	 eax, eax
  00104	0f 85 76 02 00
	00		 jne	 $LN18@Load
  0010a	8d 78 01	 lea	 edi, DWORD PTR [eax+1]
  0010d	8d 49 00	 npad	 3
$LL11@Load:

; 89   : 	{
; 90   : 		fgets(Buff,256,file);	

  00110	53		 push	 ebx
  00111	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  00117	68 00 01 00 00	 push	 256			; 00000100H
  0011c	50		 push	 eax
  0011d	e8 00 00 00 00	 call	 _fgets

; 91   : 		if(Zt_IsBadFileLine(Buff, Flag))	

  00122	8d 8d cc fe ff
	ff		 lea	 ecx, DWORD PTR _Flag$[ebp]
  00128	51		 push	 ecx
  00129	8d 95 fc fe ff
	ff		 lea	 edx, DWORD PTR _Buff$[ebp]
  0012f	52		 push	 edx
  00130	e8 00 00 00 00	 call	 ?Zt_IsBadFileLine@@YA_NPADAAH@Z ; Zt_IsBadFileLine
  00135	83 c4 14	 add	 esp, 20			; 00000014H
  00138	84 c0		 test	 al, al
  0013a	0f 85 2f 02 00
	00		 jne	 $LN1@Load

; 92   : 			continue;
; 93   : 
; 94   : 		if(Flag == 1)

  00140	39 bd cc fe ff
	ff		 cmp	 DWORD PTR _Flag$[ebp], edi
  00146	75 79		 jne	 SHORT $LN7@Load

; 95   : 		{
; 96   : 			int n[3];
; 97   : 			sscanf(Buff, "%d %d %d",&n[0],&n[1],&n[2]);

  00148	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _n$211067[ebp+8]
  0014e	50		 push	 eax
  0014f	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$211067[ebp+4]
  00155	51		 push	 ecx
  00156	8d 95 f0 fe ff
	ff		 lea	 edx, DWORD PTR _n$211067[ebp]
  0015c	52		 push	 edx
  0015d	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  00163	68 00 00 00 00	 push	 OFFSET ??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@
  00168	50		 push	 eax
  00169	e8 00 00 00 00	 call	 _sscanf

; 98   : 
; 99   : 			this->Cords[this->CountCord].Map	= n[0];

  0016e	8b 86 18 0e 00
	00		 mov	 eax, DWORD PTR [esi+3608]
  00174	8b 95 f0 fe ff
	ff		 mov	 edx, DWORD PTR _n$211067[ebp]
  0017a	8d 0c 40	 lea	 ecx, DWORD PTR [eax+eax*2]
  0017d	89 54 8e 10	 mov	 DWORD PTR [esi+ecx*4+16], edx

; 100  : 			this->Cords[this->CountCord].X		= n[1];

  00181	8b 86 18 0e 00
	00		 mov	 eax, DWORD PTR [esi+3608]
  00187	8b 8d f4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$211067[ebp+4]
  0018d	8d 04 40	 lea	 eax, DWORD PTR [eax+eax*2]
  00190	89 4c 86 08	 mov	 DWORD PTR [esi+eax*4+8], ecx

; 101  : 			this->Cords[this->CountCord].Y		= n[2];

  00194	8b 86 18 0e 00
	00		 mov	 eax, DWORD PTR [esi+3608]
  0019a	03 c7		 add	 eax, edi
  0019c	8d 14 40	 lea	 edx, DWORD PTR [eax+eax*2]
  0019f	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _n$211067[ebp+8]
  001a5	89 04 96	 mov	 DWORD PTR [esi+edx*4], eax

; 102  : 
; 103  : 			this->CountCord++;

  001a8	01 be 18 0e 00
	00		 add	 DWORD PTR [esi+3608], edi
  001ae	83 c4 14	 add	 esp, 20			; 00000014H

; 104  : 
; 105  : 			if (this->CountCord >= PAN_EVENT_MAX_CORD)

  001b1	81 be 18 0e 00
	00 2c 01 00 00	 cmp	 DWORD PTR [esi+3608], 300 ; 0000012cH
  001bb	0f 8d bf 01 00
	00		 jge	 $LN18@Load
$LN7@Load:

; 106  : 			{
; 107  : 				break;
; 108  : 			}
; 109  : 		}
; 110  : 		if(Flag == 2)

  001c1	83 bd cc fe ff
	ff 02		 cmp	 DWORD PTR _Flag$[ebp], 2
  001c8	75 5b		 jne	 SHORT $LN5@Load

; 111  : 		{
; 112  : 			int n[2];
; 113  : 			sscanf(Buff, "%d %d",&n[0],&n[1]);

  001ca	8d 8d c8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$211071[ebp+4]
  001d0	51		 push	 ecx
  001d1	8d 95 c4 fe ff
	ff		 lea	 edx, DWORD PTR _n$211071[ebp]
  001d7	52		 push	 edx
  001d8	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  001de	68 00 00 00 00	 push	 OFFSET ??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@
  001e3	50		 push	 eax
  001e4	e8 00 00 00 00	 call	 _sscanf

; 114  : 
; 115  : 			this->Times[this->CountTimes].Hour	= n[0];

  001e9	8b 8e bc 0e 00
	00		 mov	 ecx, DWORD PTR [esi+3772]
  001ef	8b 95 c4 fe ff
	ff		 mov	 edx, DWORD PTR _n$211071[ebp]
  001f5	89 94 ce 1c 0e
	00 00		 mov	 DWORD PTR [esi+ecx*8+3612], edx

; 116  : 			this->Times[this->CountTimes].Min	= n[1];

  001fc	8b 86 bc 0e 00
	00		 mov	 eax, DWORD PTR [esi+3772]
  00202	8b 8d c8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$211071[ebp+4]
  00208	89 8c c6 20 0e
	00 00		 mov	 DWORD PTR [esi+eax*8+3616], ecx

; 117  : 
; 118  : 			this->CountTimes++;

  0020f	01 be bc 0e 00
	00		 add	 DWORD PTR [esi+3772], edi
  00215	83 c4 10	 add	 esp, 16			; 00000010H

; 119  : 
; 120  : 			if (this->CountTimes >= PAN_EVENT_MAX_TIME)

  00218	83 be bc 0e 00
	00 14		 cmp	 DWORD PTR [esi+3772], 20 ; 00000014H
  0021f	0f 8d 5b 01 00
	00		 jge	 $LN18@Load
$LN5@Load:

; 121  : 			{
; 122  : 				break;
; 123  : 			}
; 124  : 		}
; 125  : 		if(Flag == 3)

  00225	83 bd cc fe ff
	ff 03		 cmp	 DWORD PTR _Flag$[ebp], 3
  0022c	0f 85 3d 01 00
	00		 jne	 $LN1@Load

; 126  : 		{
; 127  : 			int n[8];
; 128  : 			sscanf(Buff, "%d %d %d %d %d %d %d %d",&n[0],&n[1],&n[2],&n[3],&n[4],&n[5],&n[6],&n[7]);

  00232	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _n$211075[ebp+28]
  00238	52		 push	 edx
  00239	8d 85 e8 fe ff
	ff		 lea	 eax, DWORD PTR _n$211075[ebp+24]
  0023f	50		 push	 eax
  00240	8d 8d e4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$211075[ebp+20]
  00246	51		 push	 ecx
  00247	8d 95 e0 fe ff
	ff		 lea	 edx, DWORD PTR _n$211075[ebp+16]
  0024d	52		 push	 edx
  0024e	8d 85 dc fe ff
	ff		 lea	 eax, DWORD PTR _n$211075[ebp+12]
  00254	50		 push	 eax
  00255	8d 8d d8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$211075[ebp+8]
  0025b	51		 push	 ecx
  0025c	8d 95 d4 fe ff
	ff		 lea	 edx, DWORD PTR _n$211075[ebp+4]
  00262	52		 push	 edx
  00263	8d 85 d0 fe ff
	ff		 lea	 eax, DWORD PTR _n$211075[ebp]
  00269	50		 push	 eax
  0026a	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  00270	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@HDMMBKBM@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?$AA@
  00275	51		 push	 ecx
  00276	e8 00 00 00 00	 call	 _sscanf

; 129  : 
; 130  : 			this->Reward[this->CountReward].Type		= n[0];

  0027b	8b 96 40 1b 00
	00		 mov	 edx, DWORD PTR [esi+6976]
  00281	8b 85 d0 fe ff
	ff		 mov	 eax, DWORD PTR _n$211075[ebp]
  00287	83 c2 76	 add	 edx, 118		; 00000076H
  0028a	c1 e2 05	 shl	 edx, 5
  0028d	89 04 32	 mov	 DWORD PTR [edx+esi], eax

; 131  : 			this->Reward[this->CountReward].Index		= n[1];

  00290	8b 8e 40 1b 00
	00		 mov	 ecx, DWORD PTR [esi+6976]
  00296	8b 95 d4 fe ff
	ff		 mov	 edx, DWORD PTR _n$211075[ebp+4]
  0029c	c1 e1 05	 shl	 ecx, 5
  0029f	89 94 31 c4 0e
	00 00		 mov	 DWORD PTR [ecx+esi+3780], edx

; 132  : 			this->Reward[this->CountReward].Level		= n[2];

  002a6	8b 86 40 1b 00
	00		 mov	 eax, DWORD PTR [esi+6976]
  002ac	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$211075[ebp+8]
  002b2	c1 e0 05	 shl	 eax, 5
  002b5	89 8c 30 c8 0e
	00 00		 mov	 DWORD PTR [eax+esi+3784], ecx

; 133  : 			this->Reward[this->CountReward].Skill		= n[3];

  002bc	8b 96 40 1b 00
	00		 mov	 edx, DWORD PTR [esi+6976]
  002c2	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR _n$211075[ebp+12]
  002c8	c1 e2 05	 shl	 edx, 5
  002cb	89 84 32 cc 0e
	00 00		 mov	 DWORD PTR [edx+esi+3788], eax

; 134  : 			this->Reward[this->CountReward].Luck		= n[4];

  002d2	8b 8e 40 1b 00
	00		 mov	 ecx, DWORD PTR [esi+6976]
  002d8	8b 95 e0 fe ff
	ff		 mov	 edx, DWORD PTR _n$211075[ebp+16]
  002de	c1 e1 05	 shl	 ecx, 5
  002e1	89 94 31 d0 0e
	00 00		 mov	 DWORD PTR [ecx+esi+3792], edx

; 135  : 			this->Reward[this->CountReward].Opt		= n[5];

  002e8	8b 86 40 1b 00
	00		 mov	 eax, DWORD PTR [esi+6976]
  002ee	8b 8d e4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$211075[ebp+20]
  002f4	c1 e0 05	 shl	 eax, 5
  002f7	89 8c 30 d4 0e
	00 00		 mov	 DWORD PTR [eax+esi+3796], ecx

; 136  : 			this->Reward[this->CountReward].Exl		= n[6];

  002fe	8b 96 40 1b 00
	00		 mov	 edx, DWORD PTR [esi+6976]
  00304	8b 85 e8 fe ff
	ff		 mov	 eax, DWORD PTR _n$211075[ebp+24]
  0030a	c1 e2 05	 shl	 edx, 5
  0030d	89 84 32 d8 0e
	00 00		 mov	 DWORD PTR [edx+esi+3800], eax

; 137  : 			this->Reward[this->CountReward].Anc		= n[7];

  00314	8b 8e 40 1b 00
	00		 mov	 ecx, DWORD PTR [esi+6976]
  0031a	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _n$211075[ebp+28]
  00320	c1 e1 05	 shl	 ecx, 5
  00323	89 94 31 dc 0e
	00 00		 mov	 DWORD PTR [ecx+esi+3804], edx

; 138  : 			
; 139  : 			
; 140  : 			if(this->Reward[this->CountReward].Skill) this->Reward[this->CountReward].Skill = 1;

  0032a	8b 86 40 1b 00
	00		 mov	 eax, DWORD PTR [esi+6976]
  00330	c1 e0 05	 shl	 eax, 5
  00333	8d 84 30 cc 0e
	00 00		 lea	 eax, DWORD PTR [eax+esi+3788]
  0033a	83 c4 28	 add	 esp, 40			; 00000028H
  0033d	83 38 00	 cmp	 DWORD PTR [eax], 0
  00340	74 02		 je	 SHORT $LN3@Load
  00342	89 38		 mov	 DWORD PTR [eax], edi
$LN3@Load:

; 141  : 			if(this->Reward[this->CountReward].Luck) this->Reward[this->CountReward].Luck = 1;

  00344	8b 8e 40 1b 00
	00		 mov	 ecx, DWORD PTR [esi+6976]
  0034a	c1 e1 05	 shl	 ecx, 5
  0034d	83 bc 31 d0 0e
	00 00 00	 cmp	 DWORD PTR [ecx+esi+3792], 0
  00355	8d 84 31 d0 0e
	00 00		 lea	 eax, DWORD PTR [ecx+esi+3792]
  0035c	74 02		 je	 SHORT $LN2@Load
  0035e	89 38		 mov	 DWORD PTR [eax], edi
$LN2@Load:

; 142  : 
; 143  : 			this->CountReward++;

  00360	01 be 40 1b 00
	00		 add	 DWORD PTR [esi+6976], edi

; 144  : 
; 145  : 			if (this->CountReward >= PAN_EVENT_MAX_REWARD_ITEM)

  00366	83 be 40 1b 00
	00 64		 cmp	 DWORD PTR [esi+6976], 100 ; 00000064H
  0036d	7d 11		 jge	 SHORT $LN18@Load
$LN1@Load:

; 82   : 		return;
; 83   : 	}
; 84   : 
; 85   : 	char Buff[256];
; 86   : 	int Flag = 0;
; 87   : 
; 88   : 	while(!feof(file))

  0036f	53		 push	 ebx
  00370	e8 00 00 00 00	 call	 _feof
  00375	83 c4 04	 add	 esp, 4
  00378	85 c0		 test	 eax, eax
  0037a	0f 84 90 fd ff
	ff		 je	 $LL11@Load
$LN18@Load:

; 146  : 			{
; 147  : 				break;
; 148  : 			}
; 149  : 		}
; 150  : 	}
; 151  : 	fclose(file);

  00380	53		 push	 ebx
  00381	e8 00 00 00 00	 call	 _fclose
  00386	83 c4 04	 add	 esp, 4
  00389	5b		 pop	 ebx
$LN14@Load:

; 152  : }

  0038a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0038d	5f		 pop	 edi
  0038e	33 cd		 xor	 ecx, ebp
  00390	5e		 pop	 esi
  00391	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00396	8b e5		 mov	 esp, ebp
  00398	5d		 pop	 ebp
  00399	c3		 ret	 0
?Load@cPandoraBoxEvent@@QAEXXZ ENDP			; cPandoraBoxEvent::Load
_TEXT	ENDS
PUBLIC	?RespawnBox@cPandoraBoxEvent@@QAEXUCordsBox@@@Z	; cPandoraBoxEvent::RespawnBox
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	_rand:PROC
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?gMSetBase@@3VCMonsterSetBase@@A:BYTE		; gMSetBase
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
EXTRN	?gObjGetRandomFreeArea@@YAHHAAE0HHHHH@Z:PROC	; gObjGetRandomFreeArea
EXTRN	?CheckUser@CZtLicense@@QAE_NH@Z:PROC		; CZtLicense::CheckUser
EXTRN	?g_ZtLicense@@3VCZtLicense@@A:BYTE		; g_ZtLicense
; Function compile flags: /Ogtp
;	COMDAT ?RespawnBox@cPandoraBoxEvent@@QAEXUCordsBox@@@Z
_TEXT	SEGMENT
_randomRespawnCords$ = -3				; size = 1
_cX$ = -2						; size = 1
_cY$ = -1						; size = 1
_RandCord$ = 8						; size = 12
?RespawnBox@cPandoraBoxEvent@@QAEXUCordsBox@@@Z PROC	; cPandoraBoxEvent::RespawnBox, COMDAT
; _this$ = ecx

; 215  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	57		 push	 edi
  00005	8b f9		 mov	 edi, ecx

; 216  : 	if (!this->Enable) return;

  00007	80 7f 05 00	 cmp	 BYTE PTR [edi+5], 0
  0000b	0f 84 b5 02 00
	00		 je	 $LN3@RespawnBox

; 217  : 
; 218  : 	this->ActiveMap = RandCord.Map;

  00011	8b 45 10	 mov	 eax, DWORD PTR _RandCord$[ebp+8]

; 219  : 
; 220  : 	
; 221  : #ifdef RANDOM_BOX_CORD_PANDORA
; 222  : 	BYTE cX = 0;
; 223  : 	BYTE cY = 0;
; 224  : 	bool randomRespawnCords = false;
; 225  : 	if (g_ZtLicense.CheckUser(eZtUB::ulasevich) || 
; 226  : 		g_ZtLicense.CheckUser(eZtUB::ConflictNoCustom) || 
; 227  : 		g_ZtLicense.CheckUser(eZtUB::ulasevich2))

  00014	6a 17		 push	 23			; 00000017H
  00016	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0001b	89 87 44 1b 00
	00		 mov	 DWORD PTR [edi+6980], eax
  00021	c6 45 fe 00	 mov	 BYTE PTR _cX$[ebp], 0
  00025	c6 45 ff 00	 mov	 BYTE PTR _cY$[ebp], 0
  00029	c6 45 fd 00	 mov	 BYTE PTR _randomRespawnCords$[ebp], 0
  0002d	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00032	84 c0		 test	 al, al
  00034	75 20		 jne	 SHORT $LN4@RespawnBox
  00036	6a 28		 push	 40			; 00000028H
  00038	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0003d	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00042	84 c0		 test	 al, al
  00044	75 10		 jne	 SHORT $LN4@RespawnBox
  00046	6a 24		 push	 36			; 00000024H
  00048	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0004d	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00052	84 c0		 test	 al, al
  00054	74 2a		 je	 SHORT $LN5@RespawnBox
$LN4@RespawnBox:

; 228  : 	{
; 229  : 		randomRespawnCords = gObjGetRandomFreeArea(RandCord.Map, (BYTE &)cX, (BYTE &)cY, 0, 0, 255, 255, 100);

  00056	8b 45 10	 mov	 eax, DWORD PTR _RandCord$[ebp+8]
  00059	6a 64		 push	 100			; 00000064H
  0005b	68 ff 00 00 00	 push	 255			; 000000ffH
  00060	68 ff 00 00 00	 push	 255			; 000000ffH
  00065	6a 00		 push	 0
  00067	6a 00		 push	 0
  00069	8d 4d ff	 lea	 ecx, DWORD PTR _cY$[ebp]
  0006c	51		 push	 ecx
  0006d	8d 55 fe	 lea	 edx, DWORD PTR _cX$[ebp]
  00070	52		 push	 edx
  00071	50		 push	 eax
  00072	e8 00 00 00 00	 call	 ?gObjGetRandomFreeArea@@YAHHAAE0HHHHH@Z ; gObjGetRandomFreeArea
  00077	83 c4 20	 add	 esp, 32			; 00000020H
  0007a	85 c0		 test	 eax, eax
  0007c	0f 95 45 fd	 setne	 BYTE PTR _randomRespawnCords$[ebp]
$LN5@RespawnBox:

; 230  : 	}
; 231  : #endif
; 232  : 
; 233  : 	int result = gObjAddMonster(this->ActiveMap);

  00080	8b 8f 44 1b 00
	00		 mov	 ecx, DWORD PTR [edi+6980]
  00086	53		 push	 ebx
  00087	51		 push	 ecx
  00088	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  0008d	0f bf d8	 movsx	 ebx, ax
  00090	83 c4 04	 add	 esp, 4

; 234  : 	int MobPos = -1;
; 235  : 
; 236  : 	if(result >= 0 && result < OBJ_MAXMONSTER)

  00093	81 fb c7 32 00
	00		 cmp	 ebx, 12999		; 000032c7H
  00099	0f 87 26 02 00
	00		 ja	 $LN9@RespawnBox

; 237  : 	{
; 238  : 		this->BoxIndex = result;
; 239  : 
; 240  : 		MobPos = this->BoxPos;

  0009f	8b 8f 58 1b 00
	00		 mov	 ecx, DWORD PTR [edi+7000]

; 241  : 
; 242  : 		gMSetBase.m_Mp[MobPos].m_MapNumber	= this->ActiveMap;

  000a5	0f b6 97 44 1b
	00 00		 movzx	 edx, BYTE PTR [edi+6980]
  000ac	89 9f 54 1b 00
	00		 mov	 DWORD PTR [edi+6996], ebx
  000b2	8b c1		 mov	 eax, ecx
  000b4	c1 e0 04	 shl	 eax, 4
  000b7	88 90 08 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+8], dl

; 243  : 		gMSetBase.m_Mp[MobPos].m_W			= cX;

  000bd	0f b6 55 fe	 movzx	 edx, BYTE PTR _cX$[ebp]
  000c1	88 90 0d 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+13], dl

; 244  : 		gMSetBase.m_Mp[MobPos].m_H			= cY;

  000c7	0f b6 55 ff	 movzx	 edx, BYTE PTR _cY$[ebp]
  000cb	88 90 0e 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+14], dl

; 245  : 		gMSetBase.m_Mp[MobPos].m_X			= cX;

  000d1	0f b6 55 fe	 movzx	 edx, BYTE PTR _cX$[ebp]
  000d5	56		 push	 esi
  000d6	88 90 0a 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+10], dl

; 246  : 		gMSetBase.m_Mp[MobPos].m_Y			= cY;

  000dc	0f b6 55 ff	 movzx	 edx, BYTE PTR _cY$[ebp]

; 247  : 		gMSetBase.m_Mp[MobPos].m_ArrangeType = 2;
; 248  : 
; 249  : 		gObj[result].m_PosNum = MobPos;

  000e0	8b f3		 mov	 esi, ebx
  000e2	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H

; 250  : 
; 251  : 		gObj[result].MapNumber = this->ActiveMap;
; 252  : 
; 253  : 		if (randomRespawnCords && cX != 0 && cY != 0)

  000e8	80 7d fd 00	 cmp	 BYTE PTR _randomRespawnCords$[ebp], 0
  000ec	88 90 0b 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+11], dl
  000f2	c6 80 04 00 00
	00 02		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+4], 2
  000f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000fe	66 89 8c 06 b0
	03 00 00	 mov	 WORD PTR [esi+eax+944], cx
  00106	8a 8f 44 1b 00
	00		 mov	 cl, BYTE PTR [edi+6980]
  0010c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00112	88 8c 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], cl
  00119	0f 84 a1 00 00
	00		 je	 $LN2@RespawnBox
  0011f	8a 45 fe	 mov	 al, BYTE PTR _cX$[ebp]
  00122	84 c0		 test	 al, al
  00124	0f 84 96 00 00
	00		 je	 $LN2@RespawnBox
  0012a	80 7d ff 00	 cmp	 BYTE PTR _cY$[ebp], 0
  0012e	0f 84 8c 00 00
	00		 je	 $LN2@RespawnBox

; 254  : 		{
; 255  : 			gObj[result].X = cX;

  00134	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0013a	0f b6 c0	 movzx	 eax, al
  0013d	66 89 84 0e 44
	01 00 00	 mov	 WORD PTR [esi+ecx+324], ax

; 256  : 			gObj[result].Y = cY;

  00145	0f b6 55 ff	 movzx	 edx, BYTE PTR _cY$[ebp]
  00149	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0014e	66 89 94 06 46
	01 00 00	 mov	 WORD PTR [esi+eax+326], dx

; 257  : 			gObj[result].TX = cX;

  00156	0f b6 4d fe	 movzx	 ecx, BYTE PTR _cX$[ebp]
  0015a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00160	66 89 8c 16 7c
	01 00 00	 mov	 WORD PTR [esi+edx+380], cx

; 258  : 			gObj[result].TY = cY;

  00168	0f b6 45 ff	 movzx	 eax, BYTE PTR _cY$[ebp]
  0016c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00172	66 89 84 0e 7e
	01 00 00	 mov	 WORD PTR [esi+ecx+382], ax

; 259  : 			gObj[result].m_OldX = cX;

  0017a	0f b6 55 fe	 movzx	 edx, BYTE PTR _cX$[ebp]
  0017e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00183	66 89 94 06 78
	01 00 00	 mov	 WORD PTR [esi+eax+376], dx

; 260  : 			gObj[result].m_OldY = cY;

  0018b	0f b6 4d ff	 movzx	 ecx, BYTE PTR _cY$[ebp]
  0018f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00195	66 89 8c 16 7a
	01 00 00	 mov	 WORD PTR [esi+edx+378], cx

; 261  : 			gObj[result].StartX = cX;

  0019d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001a2	8a 4d fe	 mov	 cl, BYTE PTR _cX$[ebp]
  001a5	88 8c 06 76 01
	00 00		 mov	 BYTE PTR [esi+eax+374], cl

; 262  : 			gObj[result].StartY = cY;

  001ac	8a 55 ff	 mov	 dl, BYTE PTR _cY$[ebp]
  001af	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001b4	88 94 06 77 01
	00 00		 mov	 BYTE PTR [esi+eax+375], dl

; 263  : 
; 264  : 		}
; 265  : 		else

  001bb	e9 8a 00 00 00	 jmp	 $LN1@RespawnBox
$LN2@RespawnBox:

; 266  : 		{
; 267  : 			gObj[result].X = RandCord.X;

  001c0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001c6	66 8b 55 08	 mov	 dx, WORD PTR _RandCord$[ebp]
  001ca	66 89 94 0e 44
	01 00 00	 mov	 WORD PTR [esi+ecx+324], dx

; 268  : 			gObj[result].Y = RandCord.Y;

  001d2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001d7	66 8b 4d 0c	 mov	 cx, WORD PTR _RandCord$[ebp+4]
  001db	66 89 8c 06 46
	01 00 00	 mov	 WORD PTR [esi+eax+326], cx

; 269  : 			gObj[result].TX = RandCord.X;

  001e3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001e9	66 8b 45 08	 mov	 ax, WORD PTR _RandCord$[ebp]
  001ed	66 89 84 16 7c
	01 00 00	 mov	 WORD PTR [esi+edx+380], ax

; 270  : 			gObj[result].TY = RandCord.Y;

  001f5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  001fb	66 8b 55 0c	 mov	 dx, WORD PTR _RandCord$[ebp+4]
  001ff	66 89 94 0e 7e
	01 00 00	 mov	 WORD PTR [esi+ecx+382], dx

; 271  : 			gObj[result].m_OldX = RandCord.X;

  00207	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0020c	66 8b 4d 08	 mov	 cx, WORD PTR _RandCord$[ebp]
  00210	66 89 8c 06 78
	01 00 00	 mov	 WORD PTR [esi+eax+376], cx

; 272  : 			gObj[result].m_OldY = RandCord.Y;

  00218	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0021e	66 8b 45 0c	 mov	 ax, WORD PTR _RandCord$[ebp+4]
  00222	66 89 84 16 7a
	01 00 00	 mov	 WORD PTR [esi+edx+378], ax

; 273  : 			gObj[result].StartX = RandCord.X;

  0022a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00230	8a 55 08	 mov	 dl, BYTE PTR _RandCord$[ebp]
  00233	88 94 0e 76 01
	00 00		 mov	 BYTE PTR [esi+ecx+374], dl

; 274  : 			gObj[result].StartY = RandCord.Y;

  0023a	8a 45 0c	 mov	 al, BYTE PTR _RandCord$[ebp+4]
  0023d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00243	88 84 0e 77 01
	00 00		 mov	 BYTE PTR [esi+ecx+375], al
$LN1@RespawnBox:

; 275  : 		}
; 276  : 		gObj[result].MaxRegenTime = 0;

  0024a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00250	c7 84 16 ac 03
	00 00 00 00 00
	00		 mov	 DWORD PTR [esi+edx+940], 0

; 277  : 		gObj[result].Dir = rand()%8;

  0025b	e8 00 00 00 00	 call	 _rand
  00260	25 07 00 00 80	 and	 eax, -2147483641	; 80000007H
  00265	79 05		 jns	 SHORT $LN10@RespawnBox
  00267	48		 dec	 eax
  00268	83 c8 f8	 or	 eax, -8			; fffffff8H
  0026b	40		 inc	 eax
$LN10@RespawnBox:
  0026c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00272	88 84 0e 48 01
	00 00		 mov	 BYTE PTR [esi+ecx+328], al

; 278  : 		gObj[result].RegenTime = GetTickCount();

  00279	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  0027f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00285	89 84 16 a8 03
	00 00		 mov	 DWORD PTR [esi+edx+936], eax

; 279  : 
; 280  : 		gObj[result].m_ActState.Emotion       = 1;

  0028c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00291	8b 8c 06 18 02
	00 00		 mov	 ecx, DWORD PTR [esi+eax+536]
  00298	81 e1 1f ff ff
	ff		 and	 ecx, -225		; ffffff1fH
  0029e	83 c9 10	 or	 ecx, 16			; 00000010H
  002a1	89 8c 06 18 02
	00 00		 mov	 DWORD PTR [esi+eax+536], ecx

; 281  : 		gObj[result].m_ActState.EmotionCount  = 15;

  002a8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 282  : 
; 283  : 		gObjSetMonster(result,542);

  002ae	68 1e 02 00 00	 push	 542			; 0000021eH
  002b3	53		 push	 ebx
  002b4	c6 84 16 19 02
	00 00 0f	 mov	 BYTE PTR [esi+edx+537], 15 ; 0000000fH
  002bc	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  002c1	83 c4 08	 add	 esp, 8
  002c4	5e		 pop	 esi
$LN9@RespawnBox:
  002c5	5b		 pop	 ebx
$LN3@RespawnBox:
  002c6	5f		 pop	 edi

; 284  : 
; 285  : 		
; 286  : 
; 287  : 	}
; 288  : 
; 289  : }

  002c7	8b e5		 mov	 esp, ebp
  002c9	5d		 pop	 ebp
  002ca	c2 0c 00	 ret	 12			; 0000000cH
?RespawnBox@cPandoraBoxEvent@@QAEXUCordsBox@@@Z ENDP	; cPandoraBoxEvent::RespawnBox
_TEXT	ENDS
PUBLIC	?Player@cPandoraBoxEvent@@QAEXPAUOBJECTSTRUCT@@@Z ; cPandoraBoxEvent::Player
EXTRN	?gObjViewportListProtocolCreate@@YAXPAUOBJECTSTRUCT@@@Z:PROC ; gObjViewportListProtocolCreate
; Function compile flags: /Ogtp
;	COMDAT ?Player@cPandoraBoxEvent@@QAEXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
?Player@cPandoraBoxEvent@@QAEXPAUOBJECTSTRUCT@@@Z PROC	; cPandoraBoxEvent::Player, COMDAT
; _this$ = ecx

; 307  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 308  : 	
; 309  : 	if (this->ActivePlayer != -1)

  00006	8b 06		 mov	 eax, DWORD PTR [esi]
  00008	57		 push	 edi
  00009	83 f8 ff	 cmp	 eax, -1
  0000c	74 2b		 je	 SHORT $LN1@Player

; 310  : 	{
; 311  : 		LPOBJ lpOldObj = &gObj[this->ActivePlayer];

  0000e	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00014	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 312  : 		/*
; 313  : 			Ме?ем обратн?
; 314  : 		*/
; 315  : 		lpOldObj->m_Change = -1;

  0001a	c7 80 54 04 00
	00 ff ff ff ff	 mov	 DWORD PTR [eax+1108], -1

; 316  : 		lpOldObj->m_PK_Level = this->ActivePlayerPkLevel;

  00024	8a 8e 50 1b 00
	00		 mov	 cl, BYTE PTR [esi+6992]

; 317  : 		gObjViewportListProtocolCreate(lpOldObj);

  0002a	50		 push	 eax
  0002b	88 88 3d 01 00
	00		 mov	 BYTE PTR [eax+317], cl
  00031	e8 00 00 00 00	 call	 ?gObjViewportListProtocolCreate@@YAXPAUOBJECTSTRUCT@@@Z ; gObjViewportListProtocolCreate
  00036	83 c4 04	 add	 esp, 4
$LN1@Player:

; 318  : 	}
; 319  : 
; 320  : 	this->ActivePlayerPkLevel = lpObj->m_PK_Level;

  00039	8b 7d 08	 mov	 edi, DWORD PTR _lpObj$[ebp]
  0003c	0f be 97 3d 01
	00 00		 movsx	 edx, BYTE PTR [edi+317]
  00043	89 96 50 1b 00
	00		 mov	 DWORD PTR [esi+6992], edx

; 321  : 	lpObj->m_PK_Level = 6;
; 322  : 	lpObj->m_Change = 404;
; 323  : 	gObjViewportListProtocolCreate(lpObj);

  00049	57		 push	 edi
  0004a	c6 87 3d 01 00
	00 06		 mov	 BYTE PTR [edi+317], 6
  00051	c7 87 54 04 00
	00 94 01 00 00	 mov	 DWORD PTR [edi+1108], 404 ; 00000194H
  0005b	e8 00 00 00 00	 call	 ?gObjViewportListProtocolCreate@@YAXPAUOBJECTSTRUCT@@@Z ; gObjViewportListProtocolCreate

; 324  : 
; 325  : 	this->ActivePlayer = lpObj->m_Index;

  00060	8b 07		 mov	 eax, DWORD PTR [edi]
  00062	83 c4 04	 add	 esp, 4
  00065	5f		 pop	 edi
  00066	89 06		 mov	 DWORD PTR [esi], eax
  00068	5e		 pop	 esi

; 326  : 	/*
; 327  : 		Ме?ем ви?персонаж?
; 328  : 	*/
; 329  : }

  00069	5d		 pop	 ebp
  0006a	c2 04 00	 ret	 4
?Player@cPandoraBoxEvent@@QAEXPAUOBJECTSTRUCT@@@Z ENDP	; cPandoraBoxEvent::Player
_TEXT	ENDS
PUBLIC	??_C@_0CE@FEAAFFAI@?$FLPandora?5Event?$FN?5Map?3?5?$CFs?5X?3?5?$CFd?5Y?3@ ; `string'
PUBLIC	??_C@_0BP@GDDLACMK@?$FLPandora?5Event?$FN?5?$CFs?5Capture?5Box?$AA@ ; `string'
PUBLIC	?ProcessKill@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z ; cPandoraBoxEvent::ProcessKill
EXTRN	?ztMapName@@YAPADH@Z:PROC			; ztMapName
EXTRN	?MessaageAllGlobal@@YAXPADZZ:PROC		; MessaageAllGlobal
;	COMDAT ??_C@_0CE@FEAAFFAI@?$FLPandora?5Event?$FN?5Map?3?5?$CFs?5X?3?5?$CFd?5Y?3@
CONST	SEGMENT
??_C@_0CE@FEAAFFAI@?$FLPandora?5Event?$FN?5Map?3?5?$CFs?5X?3?5?$CFd?5Y?3@ DB '['
	DB	'Pandora Event] Map: %s X: %d Y: %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@GDDLACMK@?$FLPandora?5Event?$FN?5?$CFs?5Capture?5Box?$AA@
CONST	SEGMENT
??_C@_0BP@GDDLACMK@?$FLPandora?5Event?$FN?5?$CFs?5Capture?5Box?$AA@ DB '['
	DB	'Pandora Event] %s Capture Box', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?ProcessKill@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
?ProcessKill@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z PROC ; cPandoraBoxEvent::ProcessKill, COMDAT
; _this$ = ecx

; 331  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 332  : 	if(!this->Enable)return false;

  00003	80 79 05 00	 cmp	 BYTE PTR [ecx+5], 0
  00007	75 06		 jne	 SHORT $LN3@ProcessKil
$LN6@ProcessKil:
  00009	32 c0		 xor	 al, al

; 345  : }

  0000b	5d		 pop	 ebp
  0000c	c2 08 00	 ret	 8
$LN3@ProcessKil:

; 333  : 	if(!this->Started)return false;

  0000f	80 79 04 00	 cmp	 BYTE PTR [ecx+4], 0
  00013	74 f4		 je	 SHORT $LN6@ProcessKil

; 334  : 	if (lpTargetObj->m_Index != this->ActivePlayer)

  00015	8b 45 0c	 mov	 eax, DWORD PTR _lpTargetObj$[ebp]
  00018	8b 10		 mov	 edx, DWORD PTR [eax]
  0001a	3b 11		 cmp	 edx, DWORD PTR [ecx]

; 335  : 	{
; 336  : 		return false;

  0001c	75 eb		 jne	 SHORT $LN6@ProcessKil

; 337  : 	}
; 338  : 	this->Player(lpObj);

  0001e	56		 push	 esi
  0001f	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00022	56		 push	 esi
  00023	e8 00 00 00 00	 call	 ?Player@cPandoraBoxEvent@@QAEXPAUOBJECTSTRUCT@@@Z ; cPandoraBoxEvent::Player

; 339  : 
; 340  : 	//MessaageAllGlobal("[Pandora Event] %s Capture Box in Map: %s X: %d Y: %d", lpObj->Name, ztMapName(lpObj->MapNumber), lpObj->X, lpObj->Y);	
; 341  : 	MessaageAllGlobal("[Pandora Event] %s Capture Box", lpObj->Name);	

  00028	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  0002b	50		 push	 eax
  0002c	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@GDDLACMK@?$FLPandora?5Event?$FN?5?$CFs?5Capture?5Box?$AA@
  00031	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal

; 342  : 	MessaageAllGlobal("[Pandora Event] Map: %s X: %d Y: %d", ztMapName(lpObj->MapNumber), lpObj->X, lpObj->Y);

  00036	0f bf 8e 46 01
	00 00		 movsx	 ecx, WORD PTR [esi+326]
  0003d	0f bf 96 44 01
	00 00		 movsx	 edx, WORD PTR [esi+324]
  00044	0f b6 86 49 01
	00 00		 movzx	 eax, BYTE PTR [esi+329]
  0004b	83 c4 08	 add	 esp, 8
  0004e	51		 push	 ecx
  0004f	52		 push	 edx
  00050	50		 push	 eax
  00051	e8 00 00 00 00	 call	 ?ztMapName@@YAPADH@Z	; ztMapName
  00056	83 c4 04	 add	 esp, 4
  00059	50		 push	 eax
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@FEAAFFAI@?$FLPandora?5Event?$FN?5Map?3?5?$CFs?5X?3?5?$CFd?5Y?3@
  0005f	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  00064	83 c4 10	 add	 esp, 16			; 00000010H

; 343  : 
; 344  : 	return true;

  00067	b0 01		 mov	 al, 1
  00069	5e		 pop	 esi

; 345  : }

  0006a	5d		 pop	 ebp
  0006b	c2 08 00	 ret	 8
?ProcessKill@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z ENDP ; cPandoraBoxEvent::ProcessKill
_TEXT	ENDS
PUBLIC	??_C@_0CD@OCKMHJAP@?$HO?$FLPandora?5Event?$FN?3?5Bonus?3?5?$CFd?5Cred@ ; `string'
PUBLIC	??_C@_0CE@CADHMIGL@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5Gob@ ; `string'
PUBLIC	??_C@_0CE@LMEDKIJD@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5WCo@ ; `string'
PUBLIC	??_C@_0CF@CAMACKLM@?$HO?$FLPandora?5Event?$FN?3?5Reward?5?3?5?$CFd?5WC@ ; `string'
PUBLIC	?Prize@cPandoraBoxEvent@@QAEXXZ			; cPandoraBoxEvent::Prize
EXTRN	?ZtUserDataSend@@YAXH@Z:PROC			; ZtUserDataSend
EXTRN	?MessageChat@@YAXHPADZZ:PROC			; MessageChat
EXTRN	?GDSaveUserInfo@GameShop@@QAEXH@Z:PROC		; GameShop::GDSaveUserInfo
EXTRN	?gGameShop@@3VGameShop@@A:BYTE			; gGameShop
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z:PROC	; ItemSerialCreateSend
EXTRN	?GenExcOpt@@YAHH@Z:PROC				; GenExcOpt
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0CD@OCKMHJAP@?$HO?$FLPandora?5Event?$FN?3?5Bonus?3?5?$CFd?5Cred@
CONST	SEGMENT
??_C@_0CD@OCKMHJAP@?$HO?$FLPandora?5Event?$FN?3?5Bonus?3?5?$CFd?5Cred@ DB '~'
	DB	'[Pandora Event]: Bonus: %d Credit', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@CADHMIGL@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5Gob@
CONST	SEGMENT
??_C@_0CE@CADHMIGL@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5Gob@ DB '~'
	DB	'[Pandora Event]: Reward: %d Goblin', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@LMEDKIJD@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5WCo@
CONST	SEGMENT
??_C@_0CE@LMEDKIJD@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5WCo@ DB '~'
	DB	'[Pandora Event]: Reward: %d WCoinP', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CF@CAMACKLM@?$HO?$FLPandora?5Event?$FN?3?5Reward?5?3?5?$CFd?5WC@
CONST	SEGMENT
??_C@_0CF@CAMACKLM@?$HO?$FLPandora?5Event?$FN?3?5Reward?5?3?5?$CFd?5WC@ DB '~'
	DB	'[Pandora Event]: Reward : %d WCoinC', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Prize@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
tv381 = -8						; size = 4
tv372 = -8						; size = 4
tv363 = -8						; size = 4
tv354 = -8						; size = 4
_DropItem$211163 = -8					; size = 4
_NewAnc$211162 = -4					; size = 4
?Prize@cPandoraBoxEvent@@QAEXXZ PROC			; cPandoraBoxEvent::Prize, COMDAT
; _this$ = ecx

; 347  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	53		 push	 ebx
  00007	8b d9		 mov	 ebx, ecx

; 348  : 	if(!this->Enable)return;

  00009	80 7b 05 00	 cmp	 BYTE PTR [ebx+5], 0
  0000d	0f 84 d0 01 00
	00		 je	 $LN1@Prize

; 349  : 	if(!this->Started)return;

  00013	80 7b 04 00	 cmp	 BYTE PTR [ebx+4], 0
  00017	0f 84 c6 01 00
	00		 je	 $LN1@Prize

; 350  : 	if (this->ActivePlayer == -1) return;

  0001d	56		 push	 esi
  0001e	8b 33		 mov	 esi, DWORD PTR [ebx]
  00020	83 fe ff	 cmp	 esi, -1
  00023	0f 84 b9 01 00
	00		 je	 $LN14@Prize

; 351  : 
; 352  : 	LPOBJ lpObj = &gObj[this->ActivePlayer];

  00029	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0002f	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 353  : 	
; 354  : 	if(this->CountReward > 0)

  00035	83 bb 40 1b 00
	00 00		 cmp	 DWORD PTR [ebx+6976], 0
  0003c	0f 8e a7 00 00
	00		 jle	 $LN8@Prize

; 355  : 	{
; 356  : 		int Ran = rand()%this->CountReward;

  00042	57		 push	 edi
  00043	e8 00 00 00 00	 call	 _rand
  00048	99		 cdq
  00049	f7 bb 40 1b 00
	00		 idiv	 DWORD PTR [ebx+6976]

; 357  : 
; 358  : 		int NewExl = 0;

  0004f	33 c0		 xor	 eax, eax

; 359  : 		int NewAnc = 0;

  00051	89 45 fc	 mov	 DWORD PTR _NewAnc$211162[ebp], eax

; 360  : 
; 361  : 		int DropItem = ITEMGET(this->Reward[Ran].Type,this->Reward[Ran].Index);

  00054	8b fa		 mov	 edi, edx
  00056	83 c2 76	 add	 edx, 118		; 00000076H
  00059	c1 e2 05	 shl	 edx, 5
  0005c	8b 0c 1a	 mov	 ecx, DWORD PTR [edx+ebx]
  0005f	c1 e7 05	 shl	 edi, 5
  00062	03 fb		 add	 edi, ebx
  00064	c1 e1 09	 shl	 ecx, 9
  00067	03 8f c4 0e 00
	00		 add	 ecx, DWORD PTR [edi+3780]
  0006d	89 4d f8	 mov	 DWORD PTR _DropItem$211163[ebp], ecx

; 362  : 
; 363  : 		if(Reward[Ran].Exl > 0)

  00070	39 87 d8 0e 00
	00		 cmp	 DWORD PTR [edi+3800], eax
  00076	7e 12		 jle	 SHORT $LN7@Prize

; 364  : 			NewExl = GenExcOpt(Reward[Ran].Exl);

  00078	8b 97 d8 0e 00
	00		 mov	 edx, DWORD PTR [edi+3800]
  0007e	52		 push	 edx
  0007f	e8 00 00 00 00	 call	 ?GenExcOpt@@YAHH@Z	; GenExcOpt
  00084	8b 4d f8	 mov	 ecx, DWORD PTR _DropItem$211163[ebp]
  00087	83 c4 04	 add	 esp, 4
$LN7@Prize:

; 365  : 
; 366  : 		if(Reward[Ran].Anc == 5 || Reward[Ran].Anc == 10)

  0008a	8b 97 dc 0e 00
	00		 mov	 edx, DWORD PTR [edi+3804]
  00090	83 fa 05	 cmp	 edx, 5
  00093	74 05		 je	 SHORT $LN5@Prize
  00095	83 fa 0a	 cmp	 edx, 10			; 0000000aH
  00098	75 03		 jne	 SHORT $LN6@Prize
$LN5@Prize:

; 367  : 			NewAnc = Reward[Ran].Anc;

  0009a	89 55 fc	 mov	 DWORD PTR _NewAnc$211162[ebp], edx
$LN6@Prize:

; 368  : 
; 369  : 		ItemSerialCreateSend(lpObj->m_Index,lpObj->MapNumber,lpObj->X,lpObj->Y,DropItem,this->Reward[Ran].Level,0,
; 370  : 			this->Reward[Ran].Skill,this->Reward[Ran].Luck,this->Reward[Ran].Opt,lpObj->m_Index,NewExl,NewAnc);

  0009d	ff 75 fc	 push	 DWORD PTR _NewAnc$211162[ebp]
  000a0	8b 16		 mov	 edx, DWORD PTR [esi]
  000a2	50		 push	 eax
  000a3	0f b6 87 d4 0e
	00 00		 movzx	 eax, BYTE PTR [edi+3796]
  000aa	52		 push	 edx
  000ab	50		 push	 eax
  000ac	0f b6 87 d0 0e
	00 00		 movzx	 eax, BYTE PTR [edi+3792]
  000b3	50		 push	 eax
  000b4	0f b6 87 cc 0e
	00 00		 movzx	 eax, BYTE PTR [edi+3788]
  000bb	50		 push	 eax
  000bc	0f b6 87 c8 0e
	00 00		 movzx	 eax, BYTE PTR [edi+3784]
  000c3	6a 00		 push	 0
  000c5	50		 push	 eax
  000c6	0f b6 86 44 01
	00 00		 movzx	 eax, BYTE PTR [esi+324]
  000cd	51		 push	 ecx
  000ce	0f b6 8e 46 01
	00 00		 movzx	 ecx, BYTE PTR [esi+326]
  000d5	51		 push	 ecx
  000d6	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  000dd	50		 push	 eax
  000de	51		 push	 ecx
  000df	52		 push	 edx
  000e0	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  000e5	83 c4 34	 add	 esp, 52			; 00000034H
  000e8	5f		 pop	 edi
$LN8@Prize:

; 371  : 		
; 372  : 	}
; 373  : 
; 374  : 	if(this->RewardWcoinC > 0)

  000e9	8b 83 60 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7008]
  000ef	89 45 f8	 mov	 DWORD PTR tv354[ebp], eax
  000f2	85 c0		 test	 eax, eax
  000f4	7e 33		 jle	 SHORT $LN4@Prize

; 375  : 	{
; 376  : 			lpObj->GameShop.WCoinC += this->RewardWcoinC;

  000f6	db 45 f8	 fild	 DWORD PTR tv354[ebp]

; 377  : 			gGameShop.GDSaveUserInfo(lpObj->m_Index);

  000f9	8b 16		 mov	 edx, DWORD PTR [esi]
  000fb	52		 push	 edx
  000fc	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00101	dc 86 00 23 00
	00		 fadd	 QWORD PTR [esi+8960]
  00107	dd 9e 00 23 00
	00		 fstp	 QWORD PTR [esi+8960]
  0010d	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 378  : 			MessageChat(lpObj->m_Index,"~[Pandora Event]: Reward : %d WCoinC",this->RewardWcoinC);

  00112	8b 83 60 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7008]
  00118	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0011a	50		 push	 eax
  0011b	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@CAMACKLM@?$HO?$FLPandora?5Event?$FN?3?5Reward?5?3?5?$CFd?5WC@
  00120	51		 push	 ecx
  00121	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  00126	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN4@Prize:

; 379  : 	}
; 380  : 
; 381  : 	if(this->RewardWcoinP > 0)

  00129	8b 83 64 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7012]
  0012f	89 45 f8	 mov	 DWORD PTR tv363[ebp], eax
  00132	85 c0		 test	 eax, eax
  00134	7e 33		 jle	 SHORT $LN3@Prize

; 382  : 	{
; 383  : 			lpObj->GameShop.WCoinP += this->RewardWcoinP;

  00136	db 45 f8	 fild	 DWORD PTR tv363[ebp]

; 384  : 			gGameShop.GDSaveUserInfo(lpObj->m_Index);

  00139	8b 16		 mov	 edx, DWORD PTR [esi]
  0013b	52		 push	 edx
  0013c	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00141	dc 86 f8 22 00
	00		 fadd	 QWORD PTR [esi+8952]
  00147	dd 9e f8 22 00
	00		 fstp	 QWORD PTR [esi+8952]
  0014d	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 385  : 			MessageChat(lpObj->m_Index,"~[Pandora Event]: Reward: %d WCoinP",this->RewardWcoinP);

  00152	8b 83 64 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7012]
  00158	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0015a	50		 push	 eax
  0015b	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@LMEDKIJD@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5WCo@
  00160	51		 push	 ecx
  00161	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  00166	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@Prize:

; 386  : 	}
; 387  : 
; 388  : 	if(this->RewardGoblinPoints > 0)

  00169	8b 83 68 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7016]
  0016f	89 45 f8	 mov	 DWORD PTR tv372[ebp], eax
  00172	85 c0		 test	 eax, eax
  00174	7e 33		 jle	 SHORT $LN2@Prize

; 389  : 	{
; 390  : 			lpObj->GameShop.GoblinPoint += this->RewardGoblinPoints;

  00176	db 45 f8	 fild	 DWORD PTR tv372[ebp]

; 391  : 			gGameShop.GDSaveUserInfo(lpObj->m_Index);

  00179	8b 16		 mov	 edx, DWORD PTR [esi]
  0017b	52		 push	 edx
  0017c	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00181	dc 86 08 23 00
	00		 fadd	 QWORD PTR [esi+8968]
  00187	dd 9e 08 23 00
	00		 fstp	 QWORD PTR [esi+8968]
  0018d	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo

; 392  : 			MessageChat(lpObj->m_Index,"~[Pandora Event]: Reward: %d Goblin",this->RewardGoblinPoints);

  00192	8b 83 68 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7016]
  00198	8b 0e		 mov	 ecx, DWORD PTR [esi]
  0019a	50		 push	 eax
  0019b	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@CADHMIGL@?$HO?$FLPandora?5Event?$FN?3?5Reward?3?5?$CFd?5Gob@
  001a0	51		 push	 ecx
  001a1	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  001a6	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@Prize:

; 393  : 	}
; 394  : 
; 395  : 	if(this->RewardCredits > 0)

  001a9	8b 83 5c 1b 00
	00		 mov	 eax, DWORD PTR [ebx+7004]
  001af	89 45 f8	 mov	 DWORD PTR tv381[ebp], eax
  001b2	85 c0		 test	 eax, eax
  001b4	7e 2c		 jle	 SHORT $LN14@Prize

; 396  : 	{
; 397  : 			lpObj->ZtCred += this->RewardCredits;

  001b6	db 45 f8	 fild	 DWORD PTR tv381[ebp]

; 398  : #ifndef FIX_DS_CRASH
; 399  : 			GJSetCharacterInfo(lpObj, lpObj->m_Index, 0);
; 400  : #endif
; 401  : 			ZtUserDataSend(lpObj->m_Index);

  001b9	8b 16		 mov	 edx, DWORD PTR [esi]
  001bb	52		 push	 edx
  001bc	d8 86 a8 22 00
	00		 fadd	 DWORD PTR [esi+8872]
  001c2	d9 9e a8 22 00
	00		 fstp	 DWORD PTR [esi+8872]
  001c8	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend

; 402  : 			MessageChat(RewardCredits,"~[Pandora Event]: Bonus: %d Credit",this->RewardCredits);

  001cd	8b 9b 5c 1b 00
	00		 mov	 ebx, DWORD PTR [ebx+7004]
  001d3	53		 push	 ebx
  001d4	68 00 00 00 00	 push	 OFFSET ??_C@_0CD@OCKMHJAP@?$HO?$FLPandora?5Event?$FN?3?5Bonus?3?5?$CFd?5Cred@
  001d9	53		 push	 ebx
  001da	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  001df	83 c4 10	 add	 esp, 16			; 00000010H
$LN14@Prize:
  001e2	5e		 pop	 esi
$LN1@Prize:
  001e3	5b		 pop	 ebx

; 403  : 	}
; 404  : 
; 405  : }

  001e4	8b e5		 mov	 esp, ebp
  001e6	5d		 pop	 ebp
  001e7	c3		 ret	 0
?Prize@cPandoraBoxEvent@@QAEXXZ ENDP			; cPandoraBoxEvent::Prize
_TEXT	ENDS
PUBLIC	?PkCheck@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z ; cPandoraBoxEvent::PkCheck
; Function compile flags: /Ogtp
;	COMDAT ?PkCheck@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_lpTarget$ = 12						; size = 4
?PkCheck@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z PROC ; cPandoraBoxEvent::PkCheck, COMDAT
; _this$ = ecx

; 407  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 408  : 	if(!this->Enable)return true;

  00003	80 79 05 00	 cmp	 BYTE PTR [ecx+5], 0
  00007	75 06		 jne	 SHORT $LN4@PkCheck
$LN7@PkCheck:
  00009	b0 01		 mov	 al, 1

; 412  : 	return true;
; 413  : }

  0000b	5d		 pop	 ebp
  0000c	c2 08 00	 ret	 8
$LN4@PkCheck:

; 409  : 	if(!this->Started)return true;

  0000f	80 79 04 00	 cmp	 BYTE PTR [ecx+4], 0
  00013	74 f4		 je	 SHORT $LN7@PkCheck

; 410  : 	if(lpTarget->m_Index == this->ActivePlayer) return false;

  00015	8b 09		 mov	 ecx, DWORD PTR [ecx]
  00017	8b 45 0c	 mov	 eax, DWORD PTR _lpTarget$[ebp]
  0001a	39 08		 cmp	 DWORD PTR [eax], ecx
  0001c	75 06		 jne	 SHORT $LN2@PkCheck
  0001e	32 c0		 xor	 al, al

; 412  : 	return true;
; 413  : }

  00020	5d		 pop	 ebp
  00021	c2 08 00	 ret	 8
$LN2@PkCheck:

; 411  : 	if(lpObj->m_Index == this->ActivePlayer) return false;

  00024	8b 55 08	 mov	 edx, DWORD PTR _lpObj$[ebp]
  00027	39 0a		 cmp	 DWORD PTR [edx], ecx
  00029	0f 95 c0	 setne	 al

; 412  : 	return true;
; 413  : }

  0002c	5d		 pop	 ebp
  0002d	c2 08 00	 ret	 8
?PkCheck@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z ENDP ; cPandoraBoxEvent::PkCheck
_TEXT	ENDS
PUBLIC	??_C@_0CB@HKLKIPHB@?$HO?$FLPandora?5Event?$FN?3?5Teleport?5Block@ ; `string'
PUBLIC	?BlockTeleport@cPandoraBoxEvent@@QAE_NH@Z	; cPandoraBoxEvent::BlockTeleport
;	COMDAT ??_C@_0CB@HKLKIPHB@?$HO?$FLPandora?5Event?$FN?3?5Teleport?5Block@
CONST	SEGMENT
??_C@_0CB@HKLKIPHB@?$HO?$FLPandora?5Event?$FN?3?5Teleport?5Block@ DB '~[P'
	DB	'andora Event]: Teleport Block', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?BlockTeleport@cPandoraBoxEvent@@QAE_NH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?BlockTeleport@cPandoraBoxEvent@@QAE_NH@Z PROC		; cPandoraBoxEvent::BlockTeleport, COMDAT
; _this$ = ecx

; 415  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 416  : 	if(!this->Enable)return true;

  00003	80 79 05 00	 cmp	 BYTE PTR [ecx+5], 0
  00007	74 2f		 je	 SHORT $LN1@BlockTelep

; 417  : 	if (!this->Started)return true;

  00009	80 79 04 00	 cmp	 BYTE PTR [ecx+4], 0
  0000d	74 29		 je	 SHORT $LN1@BlockTelep

; 418  : 
; 419  : 	LPOBJ lpObj = &gObj[aIndex];

  0000f	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00012	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00018	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 420  : 	if(this->ActivePlayer == lpObj->m_Index)

  0001e	8b 00		 mov	 eax, DWORD PTR [eax]
  00020	39 01		 cmp	 DWORD PTR [ecx], eax
  00022	75 14		 jne	 SHORT $LN1@BlockTelep

; 421  : 	{
; 422  : 		MessageChat(lpObj->m_Index,"~[Pandora Event]: Teleport Block");

  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@HKLKIPHB@?$HO?$FLPandora?5Event?$FN?3?5Teleport?5Block@
  00029	50		 push	 eax
  0002a	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  0002f	83 c4 08	 add	 esp, 8

; 423  : 		return false;

  00032	32 c0		 xor	 al, al

; 426  : }

  00034	5d		 pop	 ebp
  00035	c2 04 00	 ret	 4
$LN1@BlockTelep:

; 424  : 	}
; 425  : 	return true;

  00038	b0 01		 mov	 al, 1

; 426  : }

  0003a	5d		 pop	 ebp
  0003b	c2 04 00	 ret	 4
?BlockTeleport@cPandoraBoxEvent@@QAE_NH@Z ENDP		; cPandoraBoxEvent::BlockTeleport
_TEXT	ENDS
PUBLIC	??_C@_0DA@OEPBFCIB@?$FLPandora?5Event?$FN?5Player?5Exit?4?5Box@ ; `string'
PUBLIC	?CloseClient@cPandoraBoxEvent@@QAEXH@Z		; cPandoraBoxEvent::CloseClient
;	COMDAT ??_C@_0DA@OEPBFCIB@?$FLPandora?5Event?$FN?5Player?5Exit?4?5Box@
CONST	SEGMENT
??_C@_0DA@OEPBFCIB@?$FLPandora?5Event?$FN?5Player?5Exit?4?5Box@ DB '[Pand'
	DB	'ora Event] Player Exit. Box Respawn Again.', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?CloseClient@cPandoraBoxEvent@@QAEXH@Z
_TEXT	SEGMENT
_RandCord$211203 = -12					; size = 12
_aIndex$ = 8						; size = 4
?CloseClient@cPandoraBoxEvent@@QAEXH@Z PROC		; cPandoraBoxEvent::CloseClient, COMDAT
; _this$ = ecx

; 428  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	8b f1		 mov	 esi, ecx

; 429  : 	if(!this->Enable)return;

  0000a	80 7e 05 00	 cmp	 BYTE PTR [esi+5], 0
  0000e	57		 push	 edi
  0000f	74 76		 je	 SHORT $LN2@CloseClien

; 430  : 	if (!this->Started)return;

  00011	80 7e 04 00	 cmp	 BYTE PTR [esi+4], 0
  00015	74 70		 je	 SHORT $LN2@CloseClien

; 431  : 	if ( aIndex < 0 || aIndex > OBJMAX-1)

  00017	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  0001a	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  0001f	77 66		 ja	 SHORT $LN2@CloseClien

; 432  : 	{
; 433  : 		return;
; 434  : 	}
; 435  : 	if (aIndex == this->ActivePlayer)

  00021	3b 06		 cmp	 eax, DWORD PTR [esi]
  00023	75 62		 jne	 SHORT $LN2@CloseClien

; 436  : 	{
; 437  : 		LPOBJ lpObj = &gObj[aIndex];
; 438  : 		lpObj->m_PK_Level = this->ActivePlayerPkLevel;

  00025	8a 8e 50 1b 00
	00		 mov	 cl, BYTE PTR [esi+6992]
  0002b	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00031	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00037	88 8c 10 3d 01
	00 00		 mov	 BYTE PTR [eax+edx+317], cl

; 439  : 
; 440  : 		CordsBox RandCord = Cords[rand()%this->CountCord];

  0003e	e8 00 00 00 00	 call	 _rand
  00043	99		 cdq
  00044	f7 be 18 0e 00
	00		 idiv	 DWORD PTR [esi+3608]

; 441  : 	
; 442  : 		
; 443  : 		MessaageAllGlobal("[Pandora Event] Player Exit. Box Respawn Again.");	

  0004a	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@OEPBFCIB@?$FLPandora?5Event?$FN?5Player?5Exit?4?5Box@
  0004f	8d 04 52	 lea	 eax, DWORD PTR [edx+edx*2]
  00052	8b 4c 86 10	 mov	 ecx, DWORD PTR [esi+eax*4+16]
  00056	8b 7c 86 08	 mov	 edi, DWORD PTR [esi+eax*4+8]
  0005a	8b 5c 86 0c	 mov	 ebx, DWORD PTR [esi+eax*4+12]
  0005e	8d 44 86 08	 lea	 eax, DWORD PTR [esi+eax*4+8]
  00062	89 4d fc	 mov	 DWORD PTR _RandCord$211203[ebp+8], ecx
  00065	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal

; 444  : 		this->RespawnBox(RandCord);

  0006a	8b 55 fc	 mov	 edx, DWORD PTR _RandCord$211203[ebp+8]
  0006d	83 ec 08	 sub	 esp, 8
  00070	8b c4		 mov	 eax, esp
  00072	89 38		 mov	 DWORD PTR [eax], edi
  00074	89 58 04	 mov	 DWORD PTR [eax+4], ebx
  00077	8b ce		 mov	 ecx, esi
  00079	89 50 08	 mov	 DWORD PTR [eax+8], edx
  0007c	e8 00 00 00 00	 call	 ?RespawnBox@cPandoraBoxEvent@@QAEXUCordsBox@@@Z ; cPandoraBoxEvent::RespawnBox

; 445  : 		this->ActivePlayer = -1;

  00081	c7 06 ff ff ff
	ff		 mov	 DWORD PTR [esi], -1
$LN2@CloseClien:

; 446  : 	}
; 447  : }

  00087	5f		 pop	 edi
  00088	5e		 pop	 esi
  00089	5b		 pop	 ebx
  0008a	8b e5		 mov	 esp, ebp
  0008c	5d		 pop	 ebp
  0008d	c2 04 00	 ret	 4
?CloseClient@cPandoraBoxEvent@@QAEXH@Z ENDP		; cPandoraBoxEvent::CloseClient
_TEXT	ENDS
PUBLIC	??_C@_0CB@MPDJJDKE@Monster?5attribute?5max?5over?5?$CFs?5?$CFd@ ; `string'
PUBLIC	??_C@_0BE@KIJDCMOI@PandoraBoxEvent?4cpp?$AA@	; `string'
PUBLIC	?LoadMonsterPos@cPandoraBoxEvent@@QAEXXZ	; cPandoraBoxEvent::LoadMonsterPos
EXTRN	?CheckMapCanMove@CMapServerManager@@QAEHH@Z:PROC ; CMapServerManager::CheckMapCanMove
EXTRN	?g_MapServerManager@@3VCMapServerManager@@A:BYTE ; g_MapServerManager
EXTRN	?MsgBox@@YAXPADZZ:PROC				; MsgBox
;	COMDAT ??_C@_0CB@MPDJJDKE@Monster?5attribute?5max?5over?5?$CFs?5?$CFd@
CONST	SEGMENT
??_C@_0CB@MPDJJDKE@Monster?5attribute?5max?5over?5?$CFs?5?$CFd@ DB 'Monst'
	DB	'er attribute max over %s %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@KIJDCMOI@PandoraBoxEvent?4cpp?$AA@
CONST	SEGMENT
??_C@_0BE@KIJDCMOI@PandoraBoxEvent?4cpp?$AA@ DB 'PandoraBoxEvent.cpp', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?LoadMonsterPos@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
?LoadMonsterPos@cPandoraBoxEvent@@QAEXXZ PROC		; cPandoraBoxEvent::LoadMonsterPos, COMDAT
; _this$ = ecx

; 451  : 	if(gMSetBase.m_Count >= OBJ_MAXMONSTER-1)

  00000	81 3d 84 2c 03
	00 c7 32 00 00	 cmp	 DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004, 12999 ; 000032c7H
  0000a	56		 push	 esi
  0000b	8b f1		 mov	 esi, ecx
  0000d	7c 19		 jl	 SHORT $LN2@LoadMonste

; 452  : 	{
; 453  : 		MsgBox("Monster attribute max over %s %d", __FILE__, __LINE__);

  0000f	68 c5 01 00 00	 push	 453			; 000001c5H
  00014	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@KIJDCMOI@PandoraBoxEvent?4cpp?$AA@
  00019	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@MPDJJDKE@Monster?5attribute?5max?5over?5?$CFs?5?$CFd@
  0001e	e8 00 00 00 00	 call	 ?MsgBox@@YAXPADZZ	; MsgBox
  00023	83 c4 0c	 add	 esp, 12			; 0000000cH
  00026	5e		 pop	 esi

; 477  : 
; 478  : 	
; 479  : }

  00027	c3		 ret	 0
$LN2@LoadMonste:
  00028	53		 push	 ebx

; 454  : 		return;
; 455  : 	}
; 456  : 
; 457  : 	if(g_MapServerManager.CheckMapCanMove(0) == FALSE)

  00029	33 db		 xor	 ebx, ebx
  0002b	53		 push	 ebx
  0002c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_MapServerManager@@3VCMapServerManager@@A ; g_MapServerManager
  00031	e8 00 00 00 00	 call	 ?CheckMapCanMove@CMapServerManager@@QAEHH@Z ; CMapServerManager::CheckMapCanMove
  00036	85 c0		 test	 eax, eax
  00038	0f 84 a7 00 00
	00		 je	 $LN5@LoadMonste

; 458  : 	{
; 459  : 		//LogAddC(3,"[AttackerAdd] No need to load monster for map %d [%d,%d,%d]",Map,Type,X,Y);
; 460  : 		return;
; 461  : 	}
; 462  : 
; 463  : 	gMSetBase.m_Count++;

  0003e	a1 84 2c 03 00	 mov	 eax, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  00043	40		 inc	 eax
  00044	a3 84 2c 03 00	 mov	 DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004, eax

; 464  : 
; 465  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_Dis			= 5;	//0

  00049	c1 e0 04	 shl	 eax, 4
  0004c	c6 80 09 00 00
	00 05		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+9], 5

; 466  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_Type		= 542;

  00053	a1 84 2c 03 00	 mov	 eax, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  00058	c1 e0 04	 shl	 eax, 4
  0005b	b9 1e 02 00 00	 mov	 ecx, 542		; 0000021eH
  00060	66 89 88 06 00
	00 00		 mov	 WORD PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+6], cx

; 467  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_MapNumber	= 0;

  00067	8b 15 84 2c 03
	00		 mov	 edx, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  0006d	c1 e2 04	 shl	 edx, 4
  00070	88 9a 08 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[edx+8], bl

; 468  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_W			= 0;

  00076	a1 84 2c 03 00	 mov	 eax, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  0007b	c1 e0 04	 shl	 eax, 4
  0007e	88 98 0d 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+13], bl

; 469  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_H			= 0;

  00084	8b 0d 84 2c 03
	00		 mov	 ecx, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  0008a	c1 e1 04	 shl	 ecx, 4
  0008d	88 99 0e 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[ecx+14], bl

; 470  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_X			= 0;

  00093	8b 15 84 2c 03
	00		 mov	 edx, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  00099	c1 e2 04	 shl	 edx, 4
  0009c	88 9a 0a 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[edx+10], bl

; 471  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_Y			= 0;

  000a2	a1 84 2c 03 00	 mov	 eax, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  000a7	c1 e0 04	 shl	 eax, 4
  000aa	88 98 0b 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[eax+11], bl

; 472  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_ArrangeType = 2;

  000b0	8b 0d 84 2c 03
	00		 mov	 ecx, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  000b6	b0 02		 mov	 al, 2
  000b8	c1 e1 04	 shl	 ecx, 4
  000bb	88 81 04 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[ecx+4], al

; 473  : 	gMSetBase.m_Mp[gMSetBase.m_Count].m_Dir			= 2;

  000c1	8b 15 84 2c 03
	00		 mov	 edx, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  000c7	c1 e2 04	 shl	 edx, 4
  000ca	88 82 0c 00 00
	00		 mov	 BYTE PTR ?gMSetBase@@3VCMonsterSetBase@@A[edx+12], al

; 474  : 
; 475  : 	this->BoxIndex = -1;

  000d0	c7 86 54 1b 00
	00 ff ff ff ff	 mov	 DWORD PTR [esi+6996], -1

; 476  : 	this->BoxPos = gMSetBase.m_Count;

  000da	a1 84 2c 03 00	 mov	 eax, DWORD PTR ?gMSetBase@@3VCMonsterSetBase@@A+208004
  000df	89 86 58 1b 00
	00		 mov	 DWORD PTR [esi+7000], eax
$LN5@LoadMonste:

; 477  : 
; 478  : 	
; 479  : }

  000e5	5b		 pop	 ebx
  000e6	5e		 pop	 esi
  000e7	c3		 ret	 0
?LoadMonsterPos@cPandoraBoxEvent@@QAEXXZ ENDP		; cPandoraBoxEvent::LoadMonsterPos
_TEXT	ENDS
PUBLIC	??_C@_0BI@JJGNLODH@?$FLPandora?5Event?$FN?5Started?$AA@ ; `string'
PUBLIC	?Start@cPandoraBoxEvent@@QAEXXZ			; cPandoraBoxEvent::Start
EXTRN	_srand:PROC
;	COMDAT ??_C@_0BI@JJGNLODH@?$FLPandora?5Event?$FN?5Started?$AA@
; File d:\program files (x86)\microsoft visual studio 10.0\vc\include\time.inl
CONST	SEGMENT
??_C@_0BI@JJGNLODH@?$FLPandora?5Event?$FN?5Started?$AA@ DB '[Pandora Even'
	DB	't] Started', 00H				; `string'
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\pandoraboxevent.cpp
CONST	ENDS
;	COMDAT ?Start@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
_RandCord$ = -12					; size = 12
?Start@cPandoraBoxEvent@@QAEXXZ PROC			; cPandoraBoxEvent::Start, COMDAT
; _this$ = ecx

; 187  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	8b f1		 mov	 esi, ecx

; 188  : 	if (!this->Enable) return;

  0000a	80 7e 05 00	 cmp	 BYTE PTR [esi+5], 0
  0000e	57		 push	 edi
  0000f	74 51		 je	 SHORT $LN2@Start

; 189  : 
; 190  : 	this->Started = true;
; 191  : 	srand(time(NULL));

  00011	6a 00		 push	 0
  00013	c6 46 04 01	 mov	 BYTE PTR [esi+4], 1
  00017	e8 00 00 00 00	 call	 __time64
  0001c	50		 push	 eax
  0001d	e8 00 00 00 00	 call	 _srand

; 192  : 	CordsBox RandCord = Cords[rand()%this->CountCord];

  00022	e8 00 00 00 00	 call	 _rand
  00027	99		 cdq
  00028	f7 be 18 0e 00
	00		 idiv	 DWORD PTR [esi+3608]

; 193  : 	
; 194  : 	MessaageAllGlobal("[Pandora Event] Started");

  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_0BI@JJGNLODH@?$FLPandora?5Event?$FN?5Started?$AA@
  00033	8d 04 52	 lea	 eax, DWORD PTR [edx+edx*2]
  00036	8b 4c 86 10	 mov	 ecx, DWORD PTR [esi+eax*4+16]
  0003a	8b 7c 86 08	 mov	 edi, DWORD PTR [esi+eax*4+8]
  0003e	8b 5c 86 0c	 mov	 ebx, DWORD PTR [esi+eax*4+12]
  00042	8d 44 86 08	 lea	 eax, DWORD PTR [esi+eax*4+8]
  00046	89 4d fc	 mov	 DWORD PTR _RandCord$[ebp+8], ecx
  00049	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal

; 195  : 	this->RespawnBox(RandCord);

  0004e	8b 55 fc	 mov	 edx, DWORD PTR _RandCord$[ebp+8]
  00051	8b c4		 mov	 eax, esp
  00053	89 38		 mov	 DWORD PTR [eax], edi
  00055	89 58 04	 mov	 DWORD PTR [eax+4], ebx
  00058	8b ce		 mov	 ecx, esi
  0005a	89 50 08	 mov	 DWORD PTR [eax+8], edx
  0005d	e8 00 00 00 00	 call	 ?RespawnBox@cPandoraBoxEvent@@QAEXUCordsBox@@@Z ; cPandoraBoxEvent::RespawnBox
$LN2@Start:

; 196  : }

  00062	5f		 pop	 edi
  00063	5e		 pop	 esi
  00064	5b		 pop	 ebx
  00065	8b e5		 mov	 esp, ebp
  00067	5d		 pop	 ebp
  00068	c3		 ret	 0
?Start@cPandoraBoxEvent@@QAEXXZ ENDP			; cPandoraBoxEvent::Start
_TEXT	ENDS
PUBLIC	??_C@_0BL@BKLLDJNJ@?$FLPandora?5Event?$FN?5End?5Win?5?$CFs?$AA@ ; `string'
PUBLIC	?End@cPandoraBoxEvent@@QAEXXZ			; cPandoraBoxEvent::End
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
;	COMDAT ??_C@_0BL@BKLLDJNJ@?$FLPandora?5Event?$FN?5End?5Win?5?$CFs?$AA@
CONST	SEGMENT
??_C@_0BL@BKLLDJNJ@?$FLPandora?5Event?$FN?5End?5Win?5?$CFs?$AA@ DB '[Pand'
	DB	'ora Event] End Win %s', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?End@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
?End@cPandoraBoxEvent@@QAEXXZ PROC			; cPandoraBoxEvent::End, COMDAT
; _this$ = ecx

; 198  : {

  00000	57		 push	 edi
  00001	8b f9		 mov	 edi, ecx

; 199  : 	 if (!this->Enable) return;

  00003	80 7f 05 00	 cmp	 BYTE PTR [edi+5], 0
  00007	74 6c		 je	 SHORT $LN2@End

; 200  : 
; 201  : 	 this->EventTimeSecond = 0;

  00009	56		 push	 esi
  0000a	c7 87 4c 1b 00
	00 00 00 00 00	 mov	 DWORD PTR [edi+6988], 0

; 202  : 	 this->Prize();

  00014	e8 00 00 00 00	 call	 ?Prize@cPandoraBoxEvent@@QAEXXZ ; cPandoraBoxEvent::Prize

; 203  : 	 this->Started = false;
; 204  : 	 LPOBJ lpObj = &gObj[this->ActivePlayer];

  00019	8b 37		 mov	 esi, DWORD PTR [edi]

; 205  : 	 gObjDel(this->BoxIndex);

  0001b	8b 87 54 1b 00
	00		 mov	 eax, DWORD PTR [edi+6996]
  00021	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00027	c6 47 04 00	 mov	 BYTE PTR [edi+4], 0
  0002b	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00031	50		 push	 eax
  00032	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel

; 206  : 	 this->BoxIndex = -1;

  00037	c7 87 54 1b 00
	00 ff ff ff ff	 mov	 DWORD PTR [edi+6996], -1

; 207  : 	 lpObj->m_Change = -1;

  00041	c7 86 54 04 00
	00 ff ff ff ff	 mov	 DWORD PTR [esi+1108], -1

; 208  : 	 lpObj->m_PK_Level = this->ActivePlayerPkLevel;

  0004b	8a 8f 50 1b 00
	00		 mov	 cl, BYTE PTR [edi+6992]

; 209  : 	 gObjViewportListProtocolCreate(lpObj);

  00051	56		 push	 esi
  00052	88 8e 3d 01 00
	00		 mov	 BYTE PTR [esi+317], cl
  00058	e8 00 00 00 00	 call	 ?gObjViewportListProtocolCreate@@YAXPAUOBJECTSTRUCT@@@Z ; gObjViewportListProtocolCreate

; 210  : 	 this->ActivePlayer = -1;
; 211  : 	 MessaageAllGlobal("[Pandora Event] End Win %s", lpObj->Name);

  0005d	83 c6 77	 add	 esi, 119		; 00000077H
  00060	56		 push	 esi
  00061	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@BKLLDJNJ@?$FLPandora?5Event?$FN?5End?5Win?5?$CFs?$AA@
  00066	c7 07 ff ff ff
	ff		 mov	 DWORD PTR [edi], -1
  0006c	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  00071	83 c4 10	 add	 esp, 16			; 00000010H
  00074	5e		 pop	 esi
$LN2@End:
  00075	5f		 pop	 edi

; 212  : }

  00076	c3		 ret	 0
?End@cPandoraBoxEvent@@QAEXXZ ENDP			; cPandoraBoxEvent::End
_TEXT	ENDS
PUBLIC	?BoxClick@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z ; cPandoraBoxEvent::BoxClick
; Function compile flags: /Ogtp
;	COMDAT ?BoxClick@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?BoxClick@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z PROC ; cPandoraBoxEvent::BoxClick, COMDAT
; _this$ = ecx

; 291  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 292  : 	if (!this->Enable) return false;

  00006	80 7e 05 00	 cmp	 BYTE PTR [esi+5], 0
  0000a	75 07		 jne	 SHORT $LN7@BoxClick
$LN10@BoxClick:
  0000c	32 c0		 xor	 al, al
  0000e	5e		 pop	 esi

; 305  : }

  0000f	5d		 pop	 ebp
  00010	c2 08 00	 ret	 8
$LN7@BoxClick:

; 293  : 	else if (!this->Started) return false;

  00013	80 7e 04 00	 cmp	 BYTE PTR [esi+4], 0
  00017	74 f3		 je	 SHORT $LN10@BoxClick

; 294  : 	else if (this->ActiveMap != lpNpc->MapNumber) return false;

  00019	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0001c	0f b6 88 49 01
	00 00		 movzx	 ecx, BYTE PTR [eax+329]
  00023	39 8e 44 1b 00
	00		 cmp	 DWORD PTR [esi+6980], ecx
  00029	75 e1		 jne	 SHORT $LN10@BoxClick

; 295  : 	else if (lpNpc->m_Index != this->BoxIndex) return false;

  0002b	8b 10		 mov	 edx, DWORD PTR [eax]
  0002d	3b 96 54 1b 00
	00		 cmp	 edx, DWORD PTR [esi+6996]
  00033	75 d7		 jne	 SHORT $LN10@BoxClick

; 296  : 	
; 297  : 	this->Player(lpObj);

  00035	57		 push	 edi
  00036	8b 7d 0c	 mov	 edi, DWORD PTR _lpObj$[ebp]
  00039	57		 push	 edi
  0003a	8b ce		 mov	 ecx, esi
  0003c	e8 00 00 00 00	 call	 ?Player@cPandoraBoxEvent@@QAEXPAUOBJECTSTRUCT@@@Z ; cPandoraBoxEvent::Player

; 298  : 
; 299  : 	MessaageAllGlobal("[Pandora Event] %s Capture Box", lpObj->Name);	

  00041	8d 47 77	 lea	 eax, DWORD PTR [edi+119]
  00044	50		 push	 eax
  00045	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@GDDLACMK@?$FLPandora?5Event?$FN?5?$CFs?5Capture?5Box?$AA@
  0004a	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal

; 300  : 	MessaageAllGlobal("[Pandora Event] Map: %s X: %d Y: %d", ztMapName(lpObj->MapNumber), lpObj->X, lpObj->Y);

  0004f	0f bf 8f 46 01
	00 00		 movsx	 ecx, WORD PTR [edi+326]
  00056	0f bf 97 44 01
	00 00		 movsx	 edx, WORD PTR [edi+324]
  0005d	0f b6 87 49 01
	00 00		 movzx	 eax, BYTE PTR [edi+329]
  00064	83 c4 08	 add	 esp, 8
  00067	51		 push	 ecx
  00068	52		 push	 edx
  00069	50		 push	 eax
  0006a	e8 00 00 00 00	 call	 ?ztMapName@@YAPADH@Z	; ztMapName
  0006f	83 c4 04	 add	 esp, 4
  00072	50		 push	 eax
  00073	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@FEAAFFAI@?$FLPandora?5Event?$FN?5Map?3?5?$CFs?5X?3?5?$CFd?5Y?3@
  00078	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal

; 301  : 	gObjDel(this->BoxIndex);

  0007d	8b 8e 54 1b 00
	00		 mov	 ecx, DWORD PTR [esi+6996]
  00083	51		 push	 ecx
  00084	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  00089	83 c4 14	 add	 esp, 20			; 00000014H
  0008c	5f		 pop	 edi

; 302  : 	this->BoxIndex = -1;

  0008d	c7 86 54 1b 00
	00 ff ff ff ff	 mov	 DWORD PTR [esi+6996], -1

; 303  : 
; 304  : 	return true;

  00097	b0 01		 mov	 al, 1
  00099	5e		 pop	 esi

; 305  : }

  0009a	5d		 pop	 ebp
  0009b	c2 08 00	 ret	 8
?BoxClick@cPandoraBoxEvent@@QAE_NPAUOBJECTSTRUCT@@0@Z ENDP ; cPandoraBoxEvent::BoxClick
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?TickTime@cPandoraBoxEvent@@QAEXXZ		; cPandoraBoxEvent::TickTime
EXTRN	?GetSecond@CTimerZt@@QAEHXZ:PROC		; CTimerZt::GetSecond
EXTRN	?g_TimerZt@@3VCTimerZt@@A:DWORD			; g_TimerZt
EXTRN	__imp__GetLocalTime@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?TickTime@cPandoraBoxEvent@@QAEXXZ
_TEXT	SEGMENT
_time$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
?TickTime@cPandoraBoxEvent@@QAEXXZ PROC			; cPandoraBoxEvent::TickTime, COMDAT
; _this$ = ecx

; 154  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b f1		 mov	 esi, ecx

; 155  : 	if (!this->Enable) return;

  00013	80 7e 05 00	 cmp	 BYTE PTR [esi+5], 0
  00017	0f 84 b5 00 00
	00		 je	 $LN2@TickTime

; 156  : 
; 157  : 	SYSTEMTIME time;
; 158  : 	GetLocalTime(&time);

  0001d	8d 45 ec	 lea	 eax, DWORD PTR _time$[ebp]
  00020	50		 push	 eax
  00021	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetLocalTime@4

; 159  : 	if (this->Started)

  00027	80 7e 04 00	 cmp	 BYTE PTR [esi+4], 0
  0002b	74 47		 je	 SHORT $LN9@TickTime

; 160  : 	{
; 161  : 		if ((this->EventTime * 60) > this->EventTimeSecond )

  0002d	8b 86 48 1b 00
	00		 mov	 eax, DWORD PTR [esi+6984]
  00033	8b 8e 4c 1b 00
	00		 mov	 ecx, DWORD PTR [esi+6988]
  00039	8b d0		 mov	 edx, eax
  0003b	c1 e2 04	 shl	 edx, 4
  0003e	2b d0		 sub	 edx, eax
  00040	03 d2		 add	 edx, edx
  00042	03 d2		 add	 edx, edx
  00044	3b d1		 cmp	 edx, ecx
  00046	7e 16		 jle	 SHORT $LN8@TickTime

; 162  : 		{
; 163  : 			this->EventTimeSecond++;

  00048	41		 inc	 ecx
  00049	89 8e 4c 1b 00
	00		 mov	 DWORD PTR [esi+6988], ecx
  0004f	5e		 pop	 esi

; 181  : 				break;
; 182  : 			}
; 183  : 		}
; 184  : 	}
; 185  : }

  00050	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00053	33 cd		 xor	 ecx, ebp
  00055	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0005a	8b e5		 mov	 esp, ebp
  0005c	5d		 pop	 ebp
  0005d	c3		 ret	 0
$LN8@TickTime:

; 164  : 		}
; 165  : 		else
; 166  : 		{
; 167  : 			this->End();

  0005e	8b ce		 mov	 ecx, esi
  00060	e8 00 00 00 00	 call	 ?End@cPandoraBoxEvent@@QAEXXZ ; cPandoraBoxEvent::End
  00065	5e		 pop	 esi

; 181  : 				break;
; 182  : 			}
; 183  : 		}
; 184  : 	}
; 185  : }

  00066	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00069	33 cd		 xor	 ecx, ebp
  0006b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00070	8b e5		 mov	 esp, ebp
  00072	5d		 pop	 ebp
  00073	c3		 ret	 0
$LN9@TickTime:

; 168  : 		}
; 169  : 	}
; 170  : #if(NEWTIMEREX)
; 171  : 	else if(g_TimerZt.GetSecond() == 00)

  00074	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TimerZt@@3VCTimerZt@@A ; g_TimerZt
  00079	e8 00 00 00 00	 call	 ?GetSecond@CTimerZt@@QAEHXZ ; CTimerZt::GetSecond
  0007e	85 c0		 test	 eax, eax
  00080	75 50		 jne	 SHORT $LN2@TickTime

; 172  : #else
; 173  : 	else if(time.wSecond == 00)
; 174  : #endif
; 175  : 	{
; 176  : 		for(int i = 0; i < this->CountTimes; i++)

  00082	33 c9		 xor	 ecx, ecx
  00084	39 8e bc 0e 00
	00		 cmp	 DWORD PTR [esi+3772], ecx
  0008a	7e 46		 jle	 SHORT $LN2@TickTime
  0008c	0f b7 55 f4	 movzx	 edx, WORD PTR _time$[ebp+8]
  00090	57		 push	 edi
  00091	66 8b 7d f6	 mov	 di, WORD PTR _time$[ebp+10]
  00095	8d 86 20 0e 00
	00		 lea	 eax, DWORD PTR [esi+3616]
  0009b	53		 push	 ebx
  0009c	8d 64 24 00	 npad	 4
$LL4@TickTime:

; 177  : 		{
; 178  : 			if(Times[i].Hour == time.wHour && Times[i].Min == time.wMinute)

  000a0	39 50 fc	 cmp	 DWORD PTR [eax-4], edx
  000a3	75 07		 jne	 SHORT $LN3@TickTime
  000a5	0f b7 df	 movzx	 ebx, di
  000a8	39 18		 cmp	 DWORD PTR [eax], ebx
  000aa	74 1d		 je	 SHORT $LN14@TickTime
$LN3@TickTime:

; 172  : #else
; 173  : 	else if(time.wSecond == 00)
; 174  : #endif
; 175  : 	{
; 176  : 		for(int i = 0; i < this->CountTimes; i++)

  000ac	41		 inc	 ecx
  000ad	83 c0 08	 add	 eax, 8
  000b0	3b 8e bc 0e 00
	00		 cmp	 ecx, DWORD PTR [esi+3772]
  000b6	7c e8		 jl	 SHORT $LL4@TickTime
  000b8	5b		 pop	 ebx
  000b9	5f		 pop	 edi
  000ba	5e		 pop	 esi

; 181  : 				break;
; 182  : 			}
; 183  : 		}
; 184  : 	}
; 185  : }

  000bb	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000be	33 cd		 xor	 ecx, ebp
  000c0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c5	8b e5		 mov	 esp, ebp
  000c7	5d		 pop	 ebp
  000c8	c3		 ret	 0
$LN14@TickTime:

; 179  : 			{
; 180  : 				this->Start();

  000c9	8b ce		 mov	 ecx, esi
  000cb	e8 00 00 00 00	 call	 ?Start@cPandoraBoxEvent@@QAEXXZ ; cPandoraBoxEvent::Start
  000d0	5b		 pop	 ebx
  000d1	5f		 pop	 edi
$LN2@TickTime:

; 181  : 				break;
; 182  : 			}
; 183  : 		}
; 184  : 	}
; 185  : }

  000d2	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000d5	33 cd		 xor	 ecx, ebp
  000d7	5e		 pop	 esi
  000d8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000dd	8b e5		 mov	 esp, ebp
  000df	5d		 pop	 ebp
  000e0	c3		 ret	 0
?TickTime@cPandoraBoxEvent@@QAEXXZ ENDP			; cPandoraBoxEvent::TickTime
_TEXT	ENDS
END
