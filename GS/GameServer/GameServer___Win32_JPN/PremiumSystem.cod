; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\PremiumSystem.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?Premium@@3VPremiumSystem@@A			; Premium
_BSS	SEGMENT
?Premium@@3VPremiumSystem@@A DB 02f14H DUP (?)		; Premium
_BSS	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@	; `string'
PUBLIC	??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@	; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	??_C@_05NFJELHBG@Price?$AA@			; `string'
PUBLIC	??_C@_05LPIJGKJ@Value?$AA@			; `string'
PUBLIC	??_C@_0BE@EIBMHJEK@PremiumServerEnable?$AA@	; `string'
PUBLIC	??_C@_0M@CENGECFJ@GoldPlusZen?$AA@		; `string'
PUBLIC	??_C@_0M@OMBDAKGM@GoldPlusExp?$AA@		; `string'
PUBLIC	??_C@_0O@MDGDFGII@SilverPlusZen?$AA@		; `string'
PUBLIC	??_C@_0O@LKGBOLN@SilverPlusExp?$AA@		; `string'
PUBLIC	??_C@_0O@BGLPJAEI@BronzePlusZen?$AA@		; `string'
PUBLIC	??_C@_08HPOKDCKD@PremType?$AA@			; `string'
PUBLIC	??_C@_0O@NOHKNIHN@BronzePlusExp?$AA@		; `string'
PUBLIC	??_C@_07HHKCFDII@PlusZen?$AA@			; `string'
PUBLIC	??_C@_07LPGHBLLN@PlusExp?$AA@			; `string'
PUBLIC	??_C@_06POMJKEPM@Common?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Loader@PremiumSystem@@QAEXXZ			; PremiumSystem::Loader
EXTRN	_fclose:PROC
EXTRN	_sscanf:PROC
EXTRN	?Zt_IsBadFileLine@@YA_NPADAAH@Z:PROC		; Zt_IsBadFileLine
EXTRN	_fgets:PROC
EXTRN	_feof:PROC
EXTRN	__imp__ExitProcess@4:PROC
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	_fopen:PROC
EXTRN	?CheckUser@CZtLicense@@QAE_NH@Z:PROC		; CZtLicense::CheckUser
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	?g_ZtLicense@@3VCZtLicense@@A:BYTE		; g_ZtLicense
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@
; File e:\work\tranet_version\gs\gameserver\premiumsystem.cpp
CONST	SEGMENT
??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@ DB '%d %d %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@
CONST	SEGMENT
??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@ DB 'LOAD FILE ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_05NFJELHBG@Price?$AA@
CONST	SEGMENT
??_C@_05NFJELHBG@Price?$AA@ DB 'Price', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05LPIJGKJ@Value?$AA@
CONST	SEGMENT
??_C@_05LPIJGKJ@Value?$AA@ DB 'Value', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@EIBMHJEK@PremiumServerEnable?$AA@
CONST	SEGMENT
??_C@_0BE@EIBMHJEK@PremiumServerEnable?$AA@ DB 'PremiumServerEnable', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@CENGECFJ@GoldPlusZen?$AA@
CONST	SEGMENT
??_C@_0M@CENGECFJ@GoldPlusZen?$AA@ DB 'GoldPlusZen', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@OMBDAKGM@GoldPlusExp?$AA@
CONST	SEGMENT
??_C@_0M@OMBDAKGM@GoldPlusExp?$AA@ DB 'GoldPlusExp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@MDGDFGII@SilverPlusZen?$AA@
CONST	SEGMENT
??_C@_0O@MDGDFGII@SilverPlusZen?$AA@ DB 'SilverPlusZen', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@LKGBOLN@SilverPlusExp?$AA@
CONST	SEGMENT
??_C@_0O@LKGBOLN@SilverPlusExp?$AA@ DB 'SilverPlusExp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@BGLPJAEI@BronzePlusZen?$AA@
CONST	SEGMENT
??_C@_0O@BGLPJAEI@BronzePlusZen?$AA@ DB 'BronzePlusZen', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_08HPOKDCKD@PremType?$AA@
CONST	SEGMENT
??_C@_08HPOKDCKD@PremType?$AA@ DB 'PremType', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0O@NOHKNIHN@BronzePlusExp?$AA@
CONST	SEGMENT
??_C@_0O@NOHKNIHN@BronzePlusExp?$AA@ DB 'BronzePlusExp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_07HHKCFDII@PlusZen?$AA@
CONST	SEGMENT
??_C@_07HHKCFDII@PlusZen?$AA@ DB 'PlusZen', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_07LPGHBLLN@PlusExp?$AA@
CONST	SEGMENT
??_C@_07LPGHBLLN@PlusExp?$AA@ DB 'PlusExp', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06POMJKEPM@Common?$AA@
CONST	SEGMENT
??_C@_06POMJKEPM@Common?$AA@ DB 'Common', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
CONST	SEGMENT
??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@ DB '..\Data\Zt'
	DB	'Data\PremiumSystem.ini', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Loader@PremiumSystem@@QAEXXZ
_TEXT	SEGMENT
_Flag$203785 = -276					; size = 4
_n$203792 = -272					; size = 12
_Buff$203784 = -260					; size = 256
__$ArrayPad$ = -4					; size = 4
?Loader@PremiumSystem@@QAEXXZ PROC			; PremiumSystem::Loader, COMDAT
; _this$ = ecx

; 16   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 01 00
	00		 sub	 esp, 276		; 00000114H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 17   : 	if(g_ZtLicense.user.PremiumZt == true)

  00013	80 3d ee 00 00
	00 01		 cmp	 BYTE PTR ?g_ZtLicense@@3VCZtLicense@@A+238, 1
  0001a	56		 push	 esi
  0001b	8b f1		 mov	 esi, ecx
  0001d	0f 84 52 03 00
	00		 je	 $LN11@Loader

; 18   : 	{
; 19   : 		return;
; 20   : 	}
; 21   : 
; 22   : 	this->Enable = GetPrivateProfileInt("Common","Enable",0,PREMIUM_DIR);

  00023	53		 push	 ebx
  00024	57		 push	 edi
  00025	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileIntA@16
  0002b	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00030	33 db		 xor	 ebx, ebx
  00032	53		 push	 ebx
  00033	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  00038	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0003d	ff d7		 call	 edi

; 23   : 	this->PlusExp = GetPrivateProfileInt("Common","PlusExp",0,PREMIUM_DIR);

  0003f	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00044	53		 push	 ebx
  00045	68 00 00 00 00	 push	 OFFSET ??_C@_07LPGHBLLN@PlusExp?$AA@
  0004a	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0004f	89 06		 mov	 DWORD PTR [esi], eax
  00051	ff d7		 call	 edi

; 24   : 	this->PlusZen = GetPrivateProfileInt("Common","PlusZen",0,PREMIUM_DIR);

  00053	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00058	53		 push	 ebx
  00059	68 00 00 00 00	 push	 OFFSET ??_C@_07HHKCFDII@PlusZen?$AA@
  0005e	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00063	89 46 04	 mov	 DWORD PTR [esi+4], eax
  00066	ff d7		 call	 edi

; 25   : 
; 26   : #ifdef PREM_TYPE
; 27   : 	if(g_ZtLicense.CheckUser(eZtUB::Local) || g_ZtLicense.CheckUser(eZtUB::ulasevich) || g_ZtLicense.CheckUser(eZtUB::ulasevich2))

  00068	53		 push	 ebx
  00069	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0006e	89 46 08	 mov	 DWORD PTR [esi+8], eax
  00071	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00076	84 c0		 test	 al, al
  00078	75 20		 jne	 SHORT $LN12@Loader
  0007a	6a 17		 push	 23			; 00000017H
  0007c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00081	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00086	84 c0		 test	 al, al
  00088	75 10		 jne	 SHORT $LN12@Loader
  0008a	6a 24		 push	 36			; 00000024H
  0008c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00091	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00096	84 c0		 test	 al, al
  00098	74 7e		 je	 SHORT $LN13@Loader
$LN12@Loader:

; 28   : 	{
; 29   : 		this->BronzePlusExp = GetPrivateProfileInt("PremType","BronzePlusExp",0,PREMIUM_DIR);

  0009a	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  0009f	53		 push	 ebx
  000a0	68 00 00 00 00	 push	 OFFSET ??_C@_0O@NOHKNIHN@BronzePlusExp?$AA@
  000a5	68 00 00 00 00	 push	 OFFSET ??_C@_08HPOKDCKD@PremType?$AA@
  000aa	ff d7		 call	 edi

; 30   : 		this->BronzePlusZen = GetPrivateProfileInt("PremType","BronzePlusZen",0,PREMIUM_DIR);

  000ac	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  000b1	53		 push	 ebx
  000b2	68 00 00 00 00	 push	 OFFSET ??_C@_0O@BGLPJAEI@BronzePlusZen?$AA@
  000b7	68 00 00 00 00	 push	 OFFSET ??_C@_08HPOKDCKD@PremType?$AA@
  000bc	89 46 0c	 mov	 DWORD PTR [esi+12], eax
  000bf	ff d7		 call	 edi

; 31   : 		this->SilverPlusExp = GetPrivateProfileInt("PremType","SilverPlusExp",0,PREMIUM_DIR);

  000c1	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  000c6	53		 push	 ebx
  000c7	68 00 00 00 00	 push	 OFFSET ??_C@_0O@LKGBOLN@SilverPlusExp?$AA@
  000cc	68 00 00 00 00	 push	 OFFSET ??_C@_08HPOKDCKD@PremType?$AA@
  000d1	89 46 10	 mov	 DWORD PTR [esi+16], eax
  000d4	ff d7		 call	 edi

; 32   : 		this->SilverPlusZen = GetPrivateProfileInt("PremType","SilverPlusZen",0,PREMIUM_DIR);

  000d6	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  000db	53		 push	 ebx
  000dc	68 00 00 00 00	 push	 OFFSET ??_C@_0O@MDGDFGII@SilverPlusZen?$AA@
  000e1	68 00 00 00 00	 push	 OFFSET ??_C@_08HPOKDCKD@PremType?$AA@
  000e6	89 46 14	 mov	 DWORD PTR [esi+20], eax
  000e9	ff d7		 call	 edi

; 33   : 		this->GoldPlusExp = GetPrivateProfileInt("PremType","GoldPlusExp",0,PREMIUM_DIR);

  000eb	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  000f0	53		 push	 ebx
  000f1	68 00 00 00 00	 push	 OFFSET ??_C@_0M@OMBDAKGM@GoldPlusExp?$AA@
  000f6	68 00 00 00 00	 push	 OFFSET ??_C@_08HPOKDCKD@PremType?$AA@
  000fb	89 46 18	 mov	 DWORD PTR [esi+24], eax
  000fe	ff d7		 call	 edi

; 34   : 		this->GoldPlusZen = GetPrivateProfileInt("PremType","GoldPlusZen",0,PREMIUM_DIR);	

  00100	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00105	53		 push	 ebx
  00106	68 00 00 00 00	 push	 OFFSET ??_C@_0M@CENGECFJ@GoldPlusZen?$AA@
  0010b	68 00 00 00 00	 push	 OFFSET ??_C@_08HPOKDCKD@PremType?$AA@
  00110	89 46 1c	 mov	 DWORD PTR [esi+28], eax
  00113	ff d7		 call	 edi
  00115	89 46 20	 mov	 DWORD PTR [esi+32], eax
$LN13@Loader:

; 35   : 	}
; 36   : #endif
; 37   : 
; 38   : 	this->m_PremiumServerEnable = GetPrivateProfileInt("Common","PremiumServerEnable",0,PREMIUM_DIR);	

  00118	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  0011d	53		 push	 ebx
  0011e	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@EIBMHJEK@PremiumServerEnable?$AA@
  00123	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00128	ff d7		 call	 edi
  0012a	85 c0		 test	 eax, eax
  0012c	0f 95 c0	 setne	 al

; 39   : 
; 40   : 	if(g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || 
; 41   : 		g_ZtLicense.CheckUser(eZtUB::PrideMu) || 
; 42   : 		g_ZtLicense.CheckUser(eZtUB::drynea) || 
; 43   : 		g_ZtLicense.CheckUser(eZtUB::Local3) || 
; 44   : 		g_ZtLicense.CheckUser(eZtUB::feqan)	||
; 45   : 		g_ZtLicense.CheckUser(eZtUB::MU2Play) || 
; 46   : 		g_ZtLicense.CheckUser(eZtUB::bassreflexive)	||
; 47   : 		g_ZtLicense.CheckUser(eZtUB::Escalate) ||
; 48   : 		g_ZtLicense.CheckUser(eZtUB::MedoniAndrei) ||
; 49   : 		g_ZtLicense.CheckUser(eZtUB::mu4you) ||
; 50   : 		g_ZtLicense.CheckUser(eZtUB::eternalmu) ||
; 51   : 		g_ZtLicense.CheckUser(eZtUB::NSGames)
; 52   : 		)

  0012f	6a 1a		 push	 26			; 0000001aH
  00131	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00136	88 86 10 2f 00
	00		 mov	 BYTE PTR [esi+12048], al
  0013c	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00141	84 c0		 test	 al, al
  00143	0f 85 c0 00 00
	00		 jne	 $LN10@Loader
  00149	6a 11		 push	 17			; 00000011H
  0014b	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00150	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00155	84 c0		 test	 al, al
  00157	0f 85 ac 00 00
	00		 jne	 $LN10@Loader
  0015d	6a 01		 push	 1
  0015f	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00164	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00169	84 c0		 test	 al, al
  0016b	0f 85 98 00 00
	00		 jne	 $LN10@Loader
  00171	6a 1c		 push	 28			; 0000001cH
  00173	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00178	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0017d	84 c0		 test	 al, al
  0017f	0f 85 84 00 00
	00		 jne	 $LN10@Loader
  00185	6a 25		 push	 37			; 00000025H
  00187	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0018c	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00191	84 c0		 test	 al, al
  00193	75 74		 jne	 SHORT $LN10@Loader
  00195	6a 36		 push	 54			; 00000036H
  00197	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0019c	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  001a1	84 c0		 test	 al, al
  001a3	75 64		 jne	 SHORT $LN10@Loader
  001a5	6a 35		 push	 53			; 00000035H
  001a7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  001ac	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  001b1	84 c0		 test	 al, al
  001b3	75 54		 jne	 SHORT $LN10@Loader
  001b5	6a 40		 push	 64			; 00000040H
  001b7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  001bc	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  001c1	84 c0		 test	 al, al
  001c3	75 44		 jne	 SHORT $LN10@Loader
  001c5	6a 32		 push	 50			; 00000032H
  001c7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  001cc	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  001d1	84 c0		 test	 al, al
  001d3	75 34		 jne	 SHORT $LN10@Loader
  001d5	6a 4e		 push	 78			; 0000004eH
  001d7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  001dc	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  001e1	84 c0		 test	 al, al
  001e3	75 24		 jne	 SHORT $LN10@Loader
  001e5	6a 4f		 push	 79			; 0000004fH
  001e7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  001ec	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  001f1	84 c0		 test	 al, al
  001f3	75 14		 jne	 SHORT $LN10@Loader
  001f5	6a 51		 push	 81			; 00000051H
  001f7	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  001fc	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00201	84 c0		 test	 al, al
  00203	0f 84 6a 01 00
	00		 je	 $LN22@Loader
$LN10@Loader:

; 53   : 	{
; 54   : 		this->Value = GetPrivateProfileInt("Common","Value",0,PREMIUM_DIR);

  00209	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  0020e	53		 push	 ebx
  0020f	68 00 00 00 00	 push	 OFFSET ??_C@_05LPIJGKJ@Value?$AA@
  00214	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00219	ff d7		 call	 edi

; 55   : 		this->Price = GetPrivateProfileInt("Common","Price",0,PREMIUM_DIR); // Price			1 - Zen; 2 - ZtCred; 3 - WCoinC; 4 - WCoinP; 5 - Goblin

  0021b	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00220	53		 push	 ebx
  00221	68 00 00 00 00	 push	 OFFSET ??_C@_05NFJELHBG@Price?$AA@
  00226	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0022b	89 86 08 2f 00
	00		 mov	 DWORD PTR [esi+12040], eax
  00231	ff d7		 call	 edi
  00233	89 86 0c 2f 00
	00		 mov	 DWORD PTR [esi+12044], eax
  00239	8d 46 28	 lea	 eax, DWORD PTR [esi+40]
  0023c	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
$LL9@Loader:

; 56   : 		for(int i(0);i<MAX_RES_PREM;i++)
; 57   : 		{
; 58   : 			this->NumberResPrem[i].Res = 0;

  00241	89 58 fc	 mov	 DWORD PTR [eax-4], ebx

; 59   : 			this->NumberResPrem[i].Exp = 0;

  00244	89 18		 mov	 DWORD PTR [eax], ebx

; 60   : 			this->NumberResPrem[i].Zen = 0;

  00246	89 58 04	 mov	 DWORD PTR [eax+4], ebx
  00249	83 c0 0c	 add	 eax, 12			; 0000000cH
  0024c	49		 dec	 ecx
  0024d	75 f2		 jne	 SHORT $LL9@Loader

; 61   : 		}
; 62   : 		FILE * file = fopen(PREMIUM_DIR,"r");

  0024f	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  00254	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00259	e8 00 00 00 00	 call	 _fopen
  0025e	8b f8		 mov	 edi, eax
  00260	83 c4 08	 add	 esp, 8

; 63   : 		if(file == NULL)

  00263	3b fb		 cmp	 edi, ebx
  00265	75 19		 jne	 SHORT $LN6@Loader

; 64   : 		{
; 65   : 			MessageBoxA(0,PREMIUM_DIR,"LOAD FILE ERROR",0);

  00267	53		 push	 ebx
  00268	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@
  0026d	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELPPIJMP@?4?4?2Data?2ZtData?2PremiumSystem?4ini@
  00272	53		 push	 ebx
  00273	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__MessageBoxA@16

; 66   : 			ExitProcess(0);

  00279	53		 push	 ebx
  0027a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__ExitProcess@4
$LN25@Loader:
$LN6@Loader:

; 67   : 		}
; 68   : 
; 69   : 		char Buff[256];
; 70   : 		int Flag = 0;
; 71   : 		this->CountRes = 0;
; 72   : 
; 73   : 		while(!feof(file))

  00280	57		 push	 edi
  00281	89 9d ec fe ff
	ff		 mov	 DWORD PTR _Flag$203785[ebp], ebx
  00287	89 9e 04 2f 00
	00		 mov	 DWORD PTR [esi+12036], ebx
  0028d	e8 00 00 00 00	 call	 _feof
  00292	83 c4 04	 add	 esp, 4
  00295	85 c0		 test	 eax, eax
  00297	0f 85 cd 00 00
	00		 jne	 $LN20@Loader
  0029d	8d 49 00	 npad	 3
$LL5@Loader:

; 74   : 		{
; 75   : 			fgets(Buff,256,file);

  002a0	57		 push	 edi
  002a1	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$203784[ebp]
  002a7	68 00 01 00 00	 push	 256			; 00000100H
  002ac	51		 push	 ecx
  002ad	e8 00 00 00 00	 call	 _fgets

; 76   : 			if(Zt_IsBadFileLine(Buff, Flag))

  002b2	8d 95 ec fe ff
	ff		 lea	 edx, DWORD PTR _Flag$203785[ebp]
  002b8	52		 push	 edx
  002b9	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$203784[ebp]
  002bf	50		 push	 eax
  002c0	e8 00 00 00 00	 call	 ?Zt_IsBadFileLine@@YA_NPADAAH@Z ; Zt_IsBadFileLine
  002c5	83 c4 14	 add	 esp, 20			; 00000014H
  002c8	84 c0		 test	 al, al
  002ca	0f 85 89 00 00
	00		 jne	 $LN2@Loader

; 77   : 				continue;
; 78   : 			if(Flag == 1)

  002d0	bb 01 00 00 00	 mov	 ebx, 1
  002d5	39 9d ec fe ff
	ff		 cmp	 DWORD PTR _Flag$203785[ebp], ebx
  002db	0f 85 78 00 00
	00		 jne	 $LN2@Loader

; 79   : 			{
; 80   : 				if(this->CountRes == MAX_RES_PREM) break;

  002e1	81 be 04 2f 00
	00 e8 03 00 00	 cmp	 DWORD PTR [esi+12036], 1000 ; 000003e8H
  002eb	0f 84 79 00 00
	00		 je	 $LN20@Loader

; 81   : 				int n[3];
; 82   : 				sscanf(Buff, "%d %d %d", &n[0], &n[1], &n[2]);

  002f1	8d 8d f8 fe ff
	ff		 lea	 ecx, DWORD PTR _n$203792[ebp+8]
  002f7	51		 push	 ecx
  002f8	8d 95 f4 fe ff
	ff		 lea	 edx, DWORD PTR _n$203792[ebp+4]
  002fe	52		 push	 edx
  002ff	8d 85 f0 fe ff
	ff		 lea	 eax, DWORD PTR _n$203792[ebp]
  00305	50		 push	 eax
  00306	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$203784[ebp]
  0030c	68 00 00 00 00	 push	 OFFSET ??_C@_08OOHKHLPO@?$CFd?5?$CFd?5?$CFd?$AA@
  00311	51		 push	 ecx
  00312	e8 00 00 00 00	 call	 _sscanf

; 83   : 				this->NumberResPrem[this->CountRes].Res = n[0];

  00317	8b 86 04 2f 00
	00		 mov	 eax, DWORD PTR [esi+12036]
  0031d	8d 54 40 09	 lea	 edx, DWORD PTR [eax+eax*2+9]
  00321	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _n$203792[ebp]
  00327	89 04 96	 mov	 DWORD PTR [esi+edx*4], eax

; 84   : 				this->NumberResPrem[this->CountRes].Exp = n[1];

  0032a	8b 86 04 2f 00
	00		 mov	 eax, DWORD PTR [esi+12036]
  00330	8b 95 f4 fe ff
	ff		 mov	 edx, DWORD PTR _n$203792[ebp+4]
  00336	8d 0c 40	 lea	 ecx, DWORD PTR [eax+eax*2]
  00339	89 54 8e 28	 mov	 DWORD PTR [esi+ecx*4+40], edx

; 85   : 				this->NumberResPrem[this->CountRes].Zen = n[2];

  0033d	8b 86 04 2f 00
	00		 mov	 eax, DWORD PTR [esi+12036]
  00343	8b 8d f8 fe ff
	ff		 mov	 ecx, DWORD PTR _n$203792[ebp+8]
  00349	8d 04 40	 lea	 eax, DWORD PTR [eax+eax*2]
  0034c	83 c4 14	 add	 esp, 20			; 00000014H
  0034f	89 4c 86 2c	 mov	 DWORD PTR [esi+eax*4+44], ecx

; 86   : 				this->CountRes++;

  00353	01 9e 04 2f 00
	00		 add	 DWORD PTR [esi+12036], ebx
$LN2@Loader:

; 67   : 		}
; 68   : 
; 69   : 		char Buff[256];
; 70   : 		int Flag = 0;
; 71   : 		this->CountRes = 0;
; 72   : 
; 73   : 		while(!feof(file))

  00359	57		 push	 edi
  0035a	e8 00 00 00 00	 call	 _feof
  0035f	83 c4 04	 add	 esp, 4
  00362	85 c0		 test	 eax, eax
  00364	0f 84 36 ff ff
	ff		 je	 $LL5@Loader
$LN20@Loader:

; 87   : 			}
; 88   : 		}
; 89   : 		fclose(file);

  0036a	57		 push	 edi
  0036b	e8 00 00 00 00	 call	 _fclose
  00370	83 c4 04	 add	 esp, 4
$LN22@Loader:
  00373	5f		 pop	 edi
  00374	5b		 pop	 ebx
$LN11@Loader:

; 90   : 	
; 91   : 	}
; 92   : 
; 93   : #ifdef _BUY_VIP_FOR_CRED_
; 94   : 	this->BuyVipCred = GetPrivateProfileInt("Common","BuyVipCred",1,PREMIUM_DIR);
; 95   : #endif
; 96   : }

  00375	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00378	33 cd		 xor	 ecx, ebp
  0037a	5e		 pop	 esi
  0037b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00380	8b e5		 mov	 esp, ebp
  00382	5d		 pop	 ebp
  00383	c3		 ret	 0
$LN24@Loader:
?Loader@PremiumSystem@@QAEXXZ ENDP			; PremiumSystem::Loader
_TEXT	ENDS
PUBLIC	??_C@_0BP@IGJHGDCF@?$EA?$FLPremium?5Status?$FN?5Time?5is?5over?$AA@ ; `string'
PUBLIC	?TickTime@PremiumSystem@@QAEXH@Z		; PremiumSystem::TickTime
EXTRN	?MessageChat@@YAXHPADZZ:PROC			; MessageChat
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
;	COMDAT ??_C@_0BP@IGJHGDCF@?$EA?$FLPremium?5Status?$FN?5Time?5is?5over?$AA@
CONST	SEGMENT
??_C@_0BP@IGJHGDCF@?$EA?$FLPremium?5Status?$FN?5Time?5is?5over?$AA@ DB '@'
	DB	'[Premium Status] Time is over', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?TickTime@PremiumSystem@@QAEXH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?TickTime@PremiumSystem@@QAEXH@Z PROC			; PremiumSystem::TickTime, COMDAT
; _this$ = ecx

; 99   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 100  : 	if(!this->Enable) return;

  00003	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00006	0f 84 84 00 00
	00		 je	 $LN4@TickTime

; 101  : 	LPOBJ lpObj = &gObj[aIndex];

  0000c	56		 push	 esi
  0000d	57		 push	 edi
  0000e	8b 7d 08	 mov	 edi, DWORD PTR _aIndex$[ebp]
  00011	8b f7		 mov	 esi, edi
  00013	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00019	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 102  : 	if(g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMu) || g_ZtLicense.CheckUser(eZtUB::Local3))

  0001f	6a 1a		 push	 26			; 0000001aH
  00021	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00026	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0002b	84 c0		 test	 al, al
  0002d	75 2c		 jne	 SHORT $LN6@TickTime
  0002f	6a 11		 push	 17			; 00000011H
  00031	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00036	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0003b	84 c0		 test	 al, al
  0003d	75 1c		 jne	 SHORT $LN6@TickTime
  0003f	6a 1c		 push	 28			; 0000001cH
  00041	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00046	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0004b	84 c0		 test	 al, al
  0004d	75 0c		 jne	 SHORT $LN6@TickTime

; 110  : 			}
; 111  : 		}
; 112  : 	}
; 113  : 	else
; 114  : 	{
; 115  : 		if(lpObj->PremiumTime > 0)

  0004f	8b 86 b8 22 00
	00		 mov	 eax, DWORD PTR [esi+8888]
  00055	85 c0		 test	 eax, eax
  00057	7e 35		 jle	 SHORT $LN11@TickTime

; 116  : 		{
; 117  : 			lpObj->PremiumTime--;
; 118  : 			if(lpObj->PremiumTime == 0)
; 119  : 			{
; 120  : 				MessageChat(aIndex,"@[Premium Status] Time is over");

  00059	eb 1c		 jmp	 SHORT $LN14@TickTime
$LN6@TickTime:

; 103  : 	{
; 104  : 		if((lpObj->PremiumTime > 0) && (!lpObj->OffTrade) && (!lpObj->OffExp))

  0005b	8b 86 b8 22 00
	00		 mov	 eax, DWORD PTR [esi+8888]
  00061	85 c0		 test	 eax, eax
  00063	7e 29		 jle	 SHORT $LN11@TickTime
  00065	83 be ac 22 00
	00 00		 cmp	 DWORD PTR [esi+8876], 0
  0006c	75 20		 jne	 SHORT $LN11@TickTime
  0006e	83 be 98 22 00
	00 00		 cmp	 DWORD PTR [esi+8856], 0
  00075	75 17		 jne	 SHORT $LN11@TickTime
$LN14@TickTime:

; 105  : 		{
; 106  : 			lpObj->PremiumTime--;

  00077	48		 dec	 eax
  00078	89 86 b8 22 00
	00		 mov	 DWORD PTR [esi+8888], eax

; 107  : 			if(lpObj->PremiumTime == 0)

  0007e	75 0e		 jne	 SHORT $LN11@TickTime

; 108  : 			{
; 109  : 				MessageChat(aIndex,"@[Premium Status] Time is over");

  00080	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@IGJHGDCF@?$EA?$FLPremium?5Status?$FN?5Time?5is?5over?$AA@
  00085	57		 push	 edi
  00086	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  0008b	83 c4 08	 add	 esp, 8
$LN11@TickTime:
  0008e	5f		 pop	 edi
  0008f	5e		 pop	 esi
$LN4@TickTime:

; 121  : 			}
; 122  : 		}
; 123  : 	}
; 124  : }

  00090	5d		 pop	 ebp
  00091	c2 04 00	 ret	 4
?TickTime@PremiumSystem@@QAEXH@Z ENDP			; PremiumSystem::TickTime
_TEXT	ENDS
PUBLIC	?Exp@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AA_J@Z	; PremiumSystem::Exp
EXTRN	__alldiv:PROC
EXTRN	__allmul:PROC
; Function compile flags: /Ogtp
;	COMDAT ?Exp@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AA_J@Z
_TEXT	SEGMENT
_this$ = -12						; size = 4
tv375 = -8						; size = 4
_i$203817 = -4						; size = 4
_lpObj$ = 8						; size = 4
_Experience$ = 12					; size = 4
?Exp@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AA_J@Z PROC	; PremiumSystem::Exp, COMDAT
; _this$ = ecx

; 127  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	57		 push	 edi
  00007	8b f9		 mov	 edi, ecx

; 128  : 	if(!this->Enable) return;

  00009	83 3f 00	 cmp	 DWORD PTR [edi], 0
  0000c	89 7d f4	 mov	 DWORD PTR _this$[ebp], edi
  0000f	0f 84 ab 01 00
	00		 je	 $LN9@Exp

; 129  : 	if(lpObj->PremiumTime > 0)

  00015	53		 push	 ebx
  00016	8b 5d 08	 mov	 ebx, DWORD PTR _lpObj$[ebp]
  00019	83 bb b8 22 00
	00 00		 cmp	 DWORD PTR [ebx+8888], 0
  00020	0f 8e 99 01 00
	00		 jle	 $LN21@Exp

; 130  : 	{
; 131  : 		if(g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMu) || g_ZtLicense.CheckUser(eZtUB::Local3) || g_ZtLicense.CheckUser(eZtUB::Local))

  00026	56		 push	 esi
  00027	6a 1a		 push	 26			; 0000001aH
  00029	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0002e	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00033	84 c0		 test	 al, al
  00035	0f 85 1a 01 00
	00		 jne	 $LN12@Exp
  0003b	6a 11		 push	 17			; 00000011H
  0003d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00042	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00047	84 c0		 test	 al, al
  00049	0f 85 06 01 00
	00		 jne	 $LN12@Exp
  0004f	6a 1c		 push	 28			; 0000001cH
  00051	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00056	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0005b	84 c0		 test	 al, al
  0005d	0f 85 f2 00 00
	00		 jne	 $LN12@Exp
  00063	6a 00		 push	 0
  00065	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0006a	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0006f	84 c0		 test	 al, al
  00071	0f 85 de 00 00
	00		 jne	 $LN12@Exp

; 138  : 				}
; 139  : 			}
; 140  : 		}
; 141  : #ifdef PREM_TYPE
; 142  : 		else if(g_ZtLicense.CheckUser(eZtUB::Local) || g_ZtLicense.CheckUser(eZtUB::ulasevich) || g_ZtLicense.CheckUser(eZtUB::ulasevich2))

  00077	6a 00		 push	 0
  00079	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0007e	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00083	84 c0		 test	 al, al
  00085	75 28		 jne	 SHORT $LN5@Exp
  00087	6a 17		 push	 23			; 00000017H
  00089	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0008e	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00093	84 c0		 test	 al, al
  00095	75 18		 jne	 SHORT $LN5@Exp
  00097	6a 24		 push	 36			; 00000024H
  00099	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0009e	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000a3	84 c0		 test	 al, al
  000a5	75 08		 jne	 SHORT $LN5@Exp

; 155  : 			}
; 156  : 
; 157  : 		}
; 158  : #endif
; 159  : 		else 
; 160  : 		{
; 161  : 			Experience += (( Experience * this->PlusExp ) / 100 );

  000a7	8b 75 0c	 mov	 esi, DWORD PTR _Experience$[ebp]
  000aa	8b 47 04	 mov	 eax, DWORD PTR [edi+4]
  000ad	eb 79		 jmp	 SHORT $LN24@Exp
$LN5@Exp:

; 143  : 		{
; 144  : 			if (lpObj->PremiumTimeType == PREM_BRONZE)

  000af	83 bb bc 22 00
	00 01		 cmp	 DWORD PTR [ebx+8892], 1
  000b6	8b 75 0c	 mov	 esi, DWORD PTR _Experience$[ebp]
  000b9	75 2a		 jne	 SHORT $LN20@Exp

; 145  : 			{
; 146  : 				Experience += (( Experience * this->BronzePlusExp) / 100 );

  000bb	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  000be	8b 47 0c	 mov	 eax, DWORD PTR [edi+12]
  000c1	8b 1e		 mov	 ebx, DWORD PTR [esi]
  000c3	51		 push	 ecx
  000c4	99		 cdq
  000c5	53		 push	 ebx
  000c6	52		 push	 edx
  000c7	50		 push	 eax
  000c8	e8 00 00 00 00	 call	 __allmul
  000cd	6a 00		 push	 0
  000cf	6a 64		 push	 100			; 00000064H
  000d1	52		 push	 edx
  000d2	50		 push	 eax
  000d3	e8 00 00 00 00	 call	 __alldiv
  000d8	03 c3		 add	 eax, ebx
  000da	13 56 04	 adc	 edx, DWORD PTR [esi+4]
  000dd	8b 5d 08	 mov	 ebx, DWORD PTR _lpObj$[ebp]
  000e0	89 06		 mov	 DWORD PTR [esi], eax
  000e2	89 56 04	 mov	 DWORD PTR [esi+4], edx
$LN20@Exp:

; 147  : 			}
; 148  : 			if (lpObj->PremiumTimeType == PREM_SILVER)

  000e5	83 bb bc 22 00
	00 02		 cmp	 DWORD PTR [ebx+8892], 2
  000ec	75 2a		 jne	 SHORT $LN3@Exp

; 149  : 			{
; 150  : 				Experience += (( Experience * this->SilverPlusExp ) / 100 );

  000ee	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  000f1	8b 47 14	 mov	 eax, DWORD PTR [edi+20]
  000f4	8b 1e		 mov	 ebx, DWORD PTR [esi]
  000f6	51		 push	 ecx
  000f7	99		 cdq
  000f8	53		 push	 ebx
  000f9	52		 push	 edx
  000fa	50		 push	 eax
  000fb	e8 00 00 00 00	 call	 __allmul
  00100	6a 00		 push	 0
  00102	6a 64		 push	 100			; 00000064H
  00104	52		 push	 edx
  00105	50		 push	 eax
  00106	e8 00 00 00 00	 call	 __alldiv
  0010b	03 c3		 add	 eax, ebx
  0010d	13 56 04	 adc	 edx, DWORD PTR [esi+4]
  00110	8b 5d 08	 mov	 ebx, DWORD PTR _lpObj$[ebp]
  00113	89 06		 mov	 DWORD PTR [esi], eax
  00115	89 56 04	 mov	 DWORD PTR [esi+4], edx
$LN3@Exp:

; 151  : 			}
; 152  : 			if (lpObj->PremiumTimeType == PREM_GOLD)

  00118	83 bb bc 22 00
	00 03		 cmp	 DWORD PTR [ebx+8892], 3
  0011f	0f 85 99 00 00
	00		 jne	 $LN22@Exp

; 153  : 			{
; 154  : 				Experience += (( Experience * this->GoldPlusExp) / 100 );

  00125	8b 47 1c	 mov	 eax, DWORD PTR [edi+28]
$LN24@Exp:
  00128	8b 4e 04	 mov	 ecx, DWORD PTR [esi+4]
  0012b	8b 1e		 mov	 ebx, DWORD PTR [esi]
  0012d	51		 push	 ecx
  0012e	99		 cdq
  0012f	53		 push	 ebx
  00130	52		 push	 edx
  00131	50		 push	 eax
  00132	e8 00 00 00 00	 call	 __allmul
  00137	6a 00		 push	 0
  00139	6a 64		 push	 100			; 00000064H
  0013b	52		 push	 edx
  0013c	50		 push	 eax
  0013d	e8 00 00 00 00	 call	 __alldiv
  00142	03 c3		 add	 eax, ebx
  00144	13 56 04	 adc	 edx, DWORD PTR [esi+4]
  00147	89 06		 mov	 DWORD PTR [esi], eax
  00149	89 56 04	 mov	 DWORD PTR [esi+4], edx
  0014c	5e		 pop	 esi
  0014d	5b		 pop	 ebx
  0014e	5f		 pop	 edi

; 162  : 		}
; 163  : 	}
; 164  : }

  0014f	8b e5		 mov	 esp, ebp
  00151	5d		 pop	 ebp
  00152	c2 08 00	 ret	 8
$LN12@Exp:

; 132  : 		{
; 133  : 			for(int i=0;i<this->CountRes;i++)

  00155	83 bf 04 2f 00
	00 00		 cmp	 DWORD PTR [edi+12036], 0
  0015c	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _i$203817[ebp], 0
  00163	7e 59		 jle	 SHORT $LN22@Exp
  00165	8b 75 0c	 mov	 esi, DWORD PTR _Experience$[ebp]
  00168	8d 47 28	 lea	 eax, DWORD PTR [edi+40]
  0016b	89 45 f8	 mov	 DWORD PTR tv375[ebp], eax
  0016e	8b ff		 npad	 2
$LL11@Exp:

; 134  : 			{
; 135  : 				if(this->NumberResPrem[i].Res == lpObj->Reset)

  00170	8b 48 fc	 mov	 ecx, DWORD PTR [eax-4]
  00173	3b 8b 90 22 00
	00		 cmp	 ecx, DWORD PTR [ebx+8848]
  00179	75 2e		 jne	 SHORT $LN10@Exp

; 136  : 				{
; 137  : 					Experience += (( Experience * this->NumberResPrem[i].Exp ) / 100 );

  0017b	8b 5e 04	 mov	 ebx, DWORD PTR [esi+4]
  0017e	8b 00		 mov	 eax, DWORD PTR [eax]
  00180	8b 3e		 mov	 edi, DWORD PTR [esi]
  00182	53		 push	 ebx
  00183	99		 cdq
  00184	57		 push	 edi
  00185	52		 push	 edx
  00186	50		 push	 eax
  00187	e8 00 00 00 00	 call	 __allmul
  0018c	6a 00		 push	 0
  0018e	6a 64		 push	 100			; 00000064H
  00190	52		 push	 edx
  00191	50		 push	 eax
  00192	e8 00 00 00 00	 call	 __alldiv
  00197	03 c7		 add	 eax, edi
  00199	8b 7d f4	 mov	 edi, DWORD PTR _this$[ebp]
  0019c	13 d3		 adc	 edx, ebx
  0019e	8b 5d 08	 mov	 ebx, DWORD PTR _lpObj$[ebp]
  001a1	89 06		 mov	 DWORD PTR [esi], eax
  001a3	8b 45 f8	 mov	 eax, DWORD PTR tv375[ebp]
  001a6	89 56 04	 mov	 DWORD PTR [esi+4], edx
$LN10@Exp:

; 132  : 		{
; 133  : 			for(int i=0;i<this->CountRes;i++)

  001a9	8b 4d fc	 mov	 ecx, DWORD PTR _i$203817[ebp]
  001ac	41		 inc	 ecx
  001ad	83 c0 0c	 add	 eax, 12			; 0000000cH
  001b0	89 4d fc	 mov	 DWORD PTR _i$203817[ebp], ecx
  001b3	89 45 f8	 mov	 DWORD PTR tv375[ebp], eax
  001b6	3b 8f 04 2f 00
	00		 cmp	 ecx, DWORD PTR [edi+12036]
  001bc	7c b2		 jl	 SHORT $LL11@Exp
$LN22@Exp:
  001be	5e		 pop	 esi
$LN21@Exp:
  001bf	5b		 pop	 ebx
$LN9@Exp:
  001c0	5f		 pop	 edi

; 162  : 		}
; 163  : 	}
; 164  : }

  001c1	8b e5		 mov	 esp, ebp
  001c3	5d		 pop	 ebp
  001c4	c2 08 00	 ret	 8
?Exp@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AA_J@Z ENDP	; PremiumSystem::Exp
_TEXT	ENDS
PUBLIC	__real@4059000000000000
PUBLIC	?Zen@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AAM@Z	; PremiumSystem::Zen
EXTRN	__fltused:DWORD
;	COMDAT __real@4059000000000000
CONST	SEGMENT
__real@4059000000000000 DQ 04059000000000000r	; 100
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Zen@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AAM@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_money$ = 12						; size = 4
?Zen@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AAM@Z PROC	; PremiumSystem::Zen, COMDAT
; _this$ = ecx

; 167  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 168  : 	if(!this->Enable) return;

  00006	83 3e 00	 cmp	 DWORD PTR [esi], 0
  00009	0f 84 30 01 00
	00		 je	 $LN9@Zen

; 169  : 	if(lpObj->PremiumTime > 0)

  0000f	57		 push	 edi
  00010	8b 7d 08	 mov	 edi, DWORD PTR _lpObj$[ebp]
  00013	83 bf b8 22 00
	00 00		 cmp	 DWORD PTR [edi+8888], 0
  0001a	0f 8e 1e 01 00
	00		 jle	 $LN20@Zen

; 170  : 	{
; 171  : 
; 172  : 		if(g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMu) || g_ZtLicense.CheckUser(eZtUB::Local3) || g_ZtLicense.CheckUser(eZtUB::Local))

  00020	6a 1a		 push	 26			; 0000001aH
  00022	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00027	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0002c	84 c0		 test	 al, al
  0002e	0f 85 cf 00 00
	00		 jne	 $LN12@Zen
  00034	6a 11		 push	 17			; 00000011H
  00036	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0003b	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00040	84 c0		 test	 al, al
  00042	0f 85 bb 00 00
	00		 jne	 $LN12@Zen
  00048	6a 1c		 push	 28			; 0000001cH
  0004a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0004f	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00054	84 c0		 test	 al, al
  00056	0f 85 a7 00 00
	00		 jne	 $LN12@Zen
  0005c	6a 00		 push	 0
  0005e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00063	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00068	84 c0		 test	 al, al
  0006a	0f 85 93 00 00
	00		 jne	 $LN12@Zen

; 179  : 				}
; 180  : 			}
; 181  : 		}
; 182  : #ifdef PREM_TYPE
; 183  : 		else if(g_ZtLicense.CheckUser(eZtUB::Local) || g_ZtLicense.CheckUser(eZtUB::ulasevich) || g_ZtLicense.CheckUser(eZtUB::ulasevich2))

  00070	6a 00		 push	 0
  00072	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00077	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0007c	84 c0		 test	 al, al
  0007e	75 38		 jne	 SHORT $LN5@Zen
  00080	6a 17		 push	 23			; 00000017H
  00082	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00087	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0008c	84 c0		 test	 al, al
  0008e	75 28		 jne	 SHORT $LN5@Zen
  00090	6a 24		 push	 36			; 00000024H
  00092	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00097	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0009c	84 c0		 test	 al, al
  0009e	75 18		 jne	 SHORT $LN5@Zen

; 196  : 			}
; 197  : 		}
; 198  : #endif
; 199  : 		else 
; 200  : 		{
; 201  : 			money += (( money * this->PlusZen ) / 100 );

  000a0	db 46 08	 fild	 DWORD PTR [esi+8]
  000a3	8b 45 0c	 mov	 eax, DWORD PTR _money$[ebp]
  000a6	5f		 pop	 edi
  000a7	5e		 pop	 esi
  000a8	d8 08		 fmul	 DWORD PTR [eax]
  000aa	dc 35 00 00 00
	00		 fdiv	 QWORD PTR __real@4059000000000000
  000b0	d8 00		 fadd	 DWORD PTR [eax]
  000b2	d9 18		 fstp	 DWORD PTR [eax]

; 202  : 		}
; 203  : 	}
; 204  : }

  000b4	5d		 pop	 ebp
  000b5	c2 08 00	 ret	 8
$LN5@Zen:

; 184  : 		{
; 185  : 			if (lpObj->PremiumTimeType == PREM_BRONZE)

  000b8	83 bf bc 22 00
	00 01		 cmp	 DWORD PTR [edi+8892], 1
  000bf	dd 05 00 00 00
	00		 fld	 QWORD PTR __real@4059000000000000
  000c5	8b 45 0c	 mov	 eax, DWORD PTR _money$[ebp]
  000c8	75 0b		 jne	 SHORT $LN4@Zen

; 186  : 			{
; 187  : 				money += (( money * this->BronzePlusZen) / 100 );

  000ca	db 46 10	 fild	 DWORD PTR [esi+16]
  000cd	d8 08		 fmul	 DWORD PTR [eax]
  000cf	d8 f1		 fdiv	 ST(0), ST(1)
  000d1	d8 00		 fadd	 DWORD PTR [eax]
  000d3	d9 18		 fstp	 DWORD PTR [eax]
$LN4@Zen:

; 188  : 			}
; 189  : 			if (lpObj->PremiumTimeType == PREM_SILVER)

  000d5	83 bf bc 22 00
	00 02		 cmp	 DWORD PTR [edi+8892], 2
  000dc	75 0b		 jne	 SHORT $LN3@Zen

; 190  : 			{
; 191  : 				money += (( money * this->SilverPlusZen ) / 100 );

  000de	db 46 18	 fild	 DWORD PTR [esi+24]
  000e1	d8 08		 fmul	 DWORD PTR [eax]
  000e3	d8 f1		 fdiv	 ST(0), ST(1)
  000e5	d8 00		 fadd	 DWORD PTR [eax]
  000e7	d9 18		 fstp	 DWORD PTR [eax]
$LN3@Zen:

; 192  : 			}
; 193  : 			if (lpObj->PremiumTimeType == PREM_GOLD)

  000e9	83 bf bc 22 00
	00 03		 cmp	 DWORD PTR [edi+8892], 3
  000f0	75 4a		 jne	 SHORT $LN29@Zen

; 194  : 			{
; 195  : 				money += (( money * this->GoldPlusZen) / 100 );

  000f2	db 46 20	 fild	 DWORD PTR [esi+32]
  000f5	5f		 pop	 edi
  000f6	5e		 pop	 esi
  000f7	d8 08		 fmul	 DWORD PTR [eax]
  000f9	de f1		 fdivrp	 ST(1), ST(0)
  000fb	d8 00		 fadd	 DWORD PTR [eax]
  000fd	d9 18		 fstp	 DWORD PTR [eax]

; 202  : 		}
; 203  : 	}
; 204  : }

  000ff	5d		 pop	 ebp
  00100	c2 08 00	 ret	 8
$LN12@Zen:

; 173  : 		{
; 174  : 			for(int i=0;i<this->CountRes;i++)

  00103	33 c9		 xor	 ecx, ecx
  00105	39 8e 04 2f 00
	00		 cmp	 DWORD PTR [esi+12036], ecx
  0010b	7e 31		 jle	 SHORT $LN20@Zen
  0010d	8b 55 0c	 mov	 edx, DWORD PTR _money$[ebp]
  00110	dd 05 00 00 00
	00		 fld	 QWORD PTR __real@4059000000000000
  00116	8d 46 2c	 lea	 eax, DWORD PTR [esi+44]
  00119	53		 push	 ebx
$LN11@Zen:

; 175  : 			{
; 176  : 				if(this->NumberResPrem[i].Res == lpObj->Reset)

  0011a	8b 58 f8	 mov	 ebx, DWORD PTR [eax-8]
  0011d	3b 9f 90 22 00
	00		 cmp	 ebx, DWORD PTR [edi+8848]
  00123	75 0a		 jne	 SHORT $LN10@Zen

; 177  : 				{
; 178  : 					money += (( money * this->NumberResPrem[i].Zen ) / 100 );

  00125	db 00		 fild	 DWORD PTR [eax]
  00127	d8 0a		 fmul	 DWORD PTR [edx]
  00129	d8 f1		 fdiv	 ST(0), ST(1)
  0012b	d8 02		 fadd	 DWORD PTR [edx]
  0012d	d9 1a		 fstp	 DWORD PTR [edx]
$LN10@Zen:

; 173  : 		{
; 174  : 			for(int i=0;i<this->CountRes;i++)

  0012f	41		 inc	 ecx
  00130	83 c0 0c	 add	 eax, 12			; 0000000cH
  00133	3b 8e 04 2f 00
	00		 cmp	 ecx, DWORD PTR [esi+12036]
  00139	7c df		 jl	 SHORT $LN11@Zen
  0013b	5b		 pop	 ebx
$LN29@Zen:

; 192  : 			}
; 193  : 			if (lpObj->PremiumTimeType == PREM_GOLD)

  0013c	dd d8		 fstp	 ST(0)
$LN20@Zen:
  0013e	5f		 pop	 edi
$LN9@Zen:
  0013f	5e		 pop	 esi

; 202  : 		}
; 203  : 	}
; 204  : }

  00140	5d		 pop	 ebp
  00141	c2 08 00	 ret	 8
?Zen@PremiumSystem@@QAEXPAUOBJECTSTRUCT@@AAM@Z ENDP	; PremiumSystem::Zen
_TEXT	ENDS
PUBLIC	??_C@_0CF@JDEKJDDL@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@ ; `string'
PUBLIC	??_C@_0CH@LJHJGIOH@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@ ; `string'
PUBLIC	??_C@_0CH@NBDFGILO@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@ ; `string'
PUBLIC	??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@	; `string'
PUBLIC	??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@	; `string'
PUBLIC	??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@	; `string'
PUBLIC	??_C@_0BK@GOEJIOGK@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?$AA@ ; `string'
PUBLIC	??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@ ; `string'
PUBLIC	??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@		; `string'
PUBLIC	??_C@_0N@ENCFKCNC@?1sellpremium?$AA@		; `string'
PUBLIC	_Protocol$GSCopy$
PUBLIC	_aIndex$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?ChatSell@PremiumSystem@@QAEXHPAE@Z		; PremiumSystem::ChatSell
EXTRN	?ZtUserDataSend@@YAXH@Z:PROC			; ZtUserDataSend
EXTRN	?MsgNormal@@YAXHPADZZ:PROC			; MsgNormal
EXTRN	?CheckCommand@GMManager@@QAE_NHH@Z:PROC		; GMManager::CheckCommand
EXTRN	?g_GMManager@@3VGMManager@@A:BYTE		; g_GMManager
;	COMDAT ??_C@_0CF@JDEKJDDL@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@
CONST	SEGMENT
??_C@_0CF@JDEKJDDL@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@ DB '@'
	DB	'[Premium Status] +%d Day, Type:Gold', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@LJHJGIOH@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@
CONST	SEGMENT
??_C@_0CH@LJHJGIOH@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@ DB '@'
	DB	'[Premium Status] +%d Day, Type:Silver', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@NBDFGILO@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@
CONST	SEGMENT
??_C@_0CH@NBDFGILO@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@ DB '@'
	DB	'[Premium Status] +%d Day, Type:Bronze', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@
CONST	SEGMENT
??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@ DB '/sellpremiumgold', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@
CONST	SEGMENT
??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@ DB '/sellpremiumsilver', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@
CONST	SEGMENT
??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@ DB '/sellpremiumbronze', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BK@GOEJIOGK@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?$AA@
CONST	SEGMENT
??_C@_0BK@GOEJIOGK@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?$AA@ DB '@'
	DB	'[Premium Status] +%d Day', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@
CONST	SEGMENT
??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@ DB '[Sell Premium] %'
	DB	's', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@
CONST	SEGMENT
??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@ DB '%s %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@ENCFKCNC@?1sellpremium?$AA@
CONST	SEGMENT
??_C@_0N@ENCFKCNC@?1sellpremium?$AA@ DB '/sellpremium', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?ChatSell@PremiumSystem@@QAEXHPAE@Z
_TEXT	SEGMENT
_aIndex$GSCopy$ = -176					; size = 4
_Protocol$GSCopy$ = -172				; size = 4
_Day$203904 = -172					; size = 4
_Day$203922 = -168					; size = 4
_Day$203889 = -168					; size = 4
_Day$203872 = -168					; size = 4
_sName$203921 = -164					; size = 100
_sName$203903 = -164					; size = 100
_sName$203888 = -164					; size = 100
_sName$203871 = -164					; size = 100
_SellCmdSilver$203864 = -64				; size = 19
_SellCmdBronze$203862 = -44				; size = 19
_SellCmdGold$203866 = -24				; size = 17
_SellCmd$203916 = -20					; size = 13
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
_Protocol$ = 12						; size = 4
?ChatSell@PremiumSystem@@QAEXHPAE@Z PROC		; PremiumSystem::ChatSell, COMDAT
; _this$ = ecx

; 207  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b0 00 00
	00		 sub	 esp, 176		; 000000b0H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 208  : 	if(!this->Enable) return;

  00013	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00016	8b 55 08	 mov	 edx, DWORD PTR _aIndex$[ebp]
  00019	53		 push	 ebx
  0001a	8b 5d 0c	 mov	 ebx, DWORD PTR _Protocol$[ebp]

; 256  : 					{
; 257  : 						sObj->PremiumTime += ( Day * 86400 );

  0001d	89 95 50 ff ff
	ff		 mov	 DWORD PTR _aIndex$GSCopy$[ebp], edx
  00023	89 9d 54 ff ff
	ff		 mov	 DWORD PTR _Protocol$GSCopy$[ebp], ebx
  00029	0f 84 8d 06 00
	00		 je	 $LN12@ChatSell

; 209  : 	LPOBJ lpObj = &gObj[aIndex];

  0002f	8b c2		 mov	 eax, edx
  00031	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00037	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 210  : 	if(lpObj->Authority == 8 || lpObj->Authority == 32)

  0003d	8b 80 0c 02 00
	00		 mov	 eax, DWORD PTR [eax+524]
  00043	83 f8 08	 cmp	 eax, 8
  00046	74 09		 je	 SHORT $LN38@ChatSell
  00048	83 f8 20	 cmp	 eax, 32			; 00000020H
  0004b	0f 85 6b 06 00
	00		 jne	 $LN12@ChatSell
$LN38@ChatSell:

; 211  : 	{
; 212  : 		// ----
; 213  : 		if(!g_GMManager.CheckCommand(aIndex, egm_cmd_sellpremium))

  00051	6a 01		 push	 1
  00053	52		 push	 edx
  00054	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_GMManager@@3VGMManager@@A ; g_GMManager
  00059	e8 00 00 00 00	 call	 ?CheckCommand@GMManager@@QAE_NHH@Z ; GMManager::CheckCommand
  0005e	84 c0		 test	 al, al
  00060	0f 84 56 06 00
	00		 je	 $LN12@ChatSell

; 214  : 		{
; 215  : 			return;
; 216  : 		}
; 217  : 		// ----
; 218  : 		if(g_ZtLicense.CheckUser(eZtUB::ulasevich) || g_ZtLicense.CheckUser(eZtUB::ulasevich2) || g_ZtLicense.CheckUser(eZtUB::Local3))

  00066	56		 push	 esi
  00067	57		 push	 edi
  00068	6a 17		 push	 23			; 00000017H
  0006a	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  0006f	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00074	84 c0		 test	 al, al
  00076	0f 85 9e 01 00
	00		 jne	 $LN35@ChatSell
  0007c	6a 24		 push	 36			; 00000024H
  0007e	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00083	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00088	84 c0		 test	 al, al
  0008a	0f 85 8a 01 00
	00		 jne	 $LN35@ChatSell
  00090	6a 1c		 push	 28			; 0000001cH
  00092	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00097	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0009c	84 c0		 test	 al, al
  0009e	0f 85 76 01 00
	00		 jne	 $LN35@ChatSell

; 283  : 						return;
; 284  : 					}
; 285  : 				}
; 286  : 			}
; 287  : #endif
; 288  : 		}
; 289  : 		else
; 290  : 		{
; 291  : 			char SellCmd[] = "/sellpremium";

  000a4	a1 00 00 00 00	 mov	 eax, DWORD PTR ??_C@_0N@ENCFKCNC@?1sellpremium?$AA@
  000a9	8b 15 08 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0N@ENCFKCNC@?1sellpremium?$AA@+8
  000af	8b 0d 04 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0N@ENCFKCNC@?1sellpremium?$AA@+4
  000b5	89 45 ec	 mov	 DWORD PTR _SellCmd$203916[ebp], eax
  000b8	a0 0c 00 00 00	 mov	 al, BYTE PTR ??_C@_0N@ENCFKCNC@?1sellpremium?$AA@+12
  000bd	88 45 f8	 mov	 BYTE PTR _SellCmd$203916[ebp+12], al

; 292  : 			if(!memcmp(&Protocol[13],SellCmd,strlen(SellCmd)))

  000c0	8d 45 ec	 lea	 eax, DWORD PTR _SellCmd$203916[ebp]
  000c3	89 55 f4	 mov	 DWORD PTR _SellCmd$203916[ebp+8], edx
  000c6	89 4d f0	 mov	 DWORD PTR _SellCmd$203916[ebp+4], ecx
  000c9	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
  000cc	8d 64 24 00	 npad	 4
$LL87@ChatSell:
  000d0	8a 08		 mov	 cl, BYTE PTR [eax]
  000d2	40		 inc	 eax
  000d3	84 c9		 test	 cl, cl
  000d5	75 f9		 jne	 SHORT $LL87@ChatSell
  000d7	2b c2		 sub	 eax, edx
  000d9	8b f8		 mov	 edi, eax
  000db	8b c8		 mov	 ecx, eax
  000dd	8d 55 ec	 lea	 edx, DWORD PTR _SellCmd$203916[ebp]
  000e0	8d 73 0d	 lea	 esi, DWORD PTR [ebx+13]
  000e3	83 ff 04	 cmp	 edi, 4
  000e6	72 20		 jb	 SHORT $LN71@ChatSell
  000e8	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL56@ChatSell:
  000f0	8b 06		 mov	 eax, DWORD PTR [esi]
  000f2	3b 02		 cmp	 eax, DWORD PTR [edx]
  000f4	0f 85 c0 05 00
	00		 jne	 $LN111@ChatSell
  000fa	83 e9 04	 sub	 ecx, 4
  000fd	83 c2 04	 add	 edx, 4
  00100	83 c6 04	 add	 esi, 4
  00103	83 f9 04	 cmp	 ecx, 4
  00106	73 e8		 jae	 SHORT $LL56@ChatSell
$LN71@ChatSell:
  00108	85 c9		 test	 ecx, ecx
  0010a	74 2c		 je	 SHORT $LN58@ChatSell
  0010c	8a 02		 mov	 al, BYTE PTR [edx]
  0010e	3a 06		 cmp	 al, BYTE PTR [esi]
  00110	0f 85 a4 05 00
	00		 jne	 $LN111@ChatSell
  00116	83 f9 01	 cmp	 ecx, 1
  00119	76 1d		 jbe	 SHORT $LN58@ChatSell
  0011b	8a 42 01	 mov	 al, BYTE PTR [edx+1]
  0011e	3a 46 01	 cmp	 al, BYTE PTR [esi+1]
  00121	0f 85 93 05 00
	00		 jne	 $LN111@ChatSell
  00127	83 f9 02	 cmp	 ecx, 2
  0012a	76 0c		 jbe	 SHORT $LN58@ChatSell
  0012c	8a 4a 02	 mov	 cl, BYTE PTR [edx+2]
  0012f	3a 4e 02	 cmp	 cl, BYTE PTR [esi+2]
  00132	0f 85 82 05 00
	00		 jne	 $LN111@ChatSell
$LN58@ChatSell:

; 293  : 			{
; 294  : 				if(strlen((char*)Protocol+13+strlen(SellCmd))>15)return;

  00138	8d 54 1f 0d	 lea	 edx, DWORD PTR [edi+ebx+13]
  0013c	8b c2		 mov	 eax, edx
  0013e	8d 70 01	 lea	 esi, DWORD PTR [eax+1]
$LL88@ChatSell:
  00141	8a 08		 mov	 cl, BYTE PTR [eax]
  00143	40		 inc	 eax
  00144	84 c9		 test	 cl, cl
  00146	75 f9		 jne	 SHORT $LL88@ChatSell
  00148	2b c6		 sub	 eax, esi
  0014a	83 f8 0f	 cmp	 eax, 15			; 0000000fH
  0014d	0f 87 67 05 00
	00		 ja	 $LN111@ChatSell

; 295  : 				char sName[100];
; 296  : 				unsigned int Day;
; 297  : 				sscanf((char*)Protocol+13+strlen(SellCmd),"%s %d",&sName,&Day);

  00153	8d 85 58 ff ff
	ff		 lea	 eax, DWORD PTR _Day$203922[ebp]
  00159	50		 push	 eax
  0015a	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203921[ebp]
  00160	51		 push	 ecx
  00161	68 00 00 00 00	 push	 OFFSET ??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@
  00166	52		 push	 edx
  00167	e8 00 00 00 00	 call	 _sscanf

; 298  : 				if(Day < 0 || Day > 10000) return;

  0016c	8b 9d 58 ff ff
	ff		 mov	 ebx, DWORD PTR _Day$203922[ebp]
  00172	83 c4 10	 add	 esp, 16			; 00000010H
  00175	81 fb 10 27 00
	00		 cmp	 ebx, 10000		; 00002710H
  0017b	0f 87 39 05 00
	00		 ja	 $LN111@ChatSell

; 299  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  00181	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00187	bf b0 36 00 00	 mov	 edi, 14000		; 000036b0H
  0018c	81 c6 77 a7 40
	09		 add	 esi, 155232119		; 0940a777H
$LL5@ChatSell:

; 300  : 				{
; 301  : 					LPOBJ sObj = &gObj[i];
; 302  : 					if(sObj->Connected == PLAYER_PLAYING)

  00192	83 7e 8d 03	 cmp	 DWORD PTR [esi-115], 3
  00196	75 31		 jne	 SHORT $LN4@ChatSell

; 303  : 					{
; 304  : 						if(!strcmp(sObj->Name,sName))

  00198	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203921[ebp]
  0019e	8b c6		 mov	 eax, esi
$LL89@ChatSell:
  001a0	8a 10		 mov	 dl, BYTE PTR [eax]
  001a2	3a 11		 cmp	 dl, BYTE PTR [ecx]
  001a4	75 1a		 jne	 SHORT $LN90@ChatSell
  001a6	84 d2		 test	 dl, dl
  001a8	74 12		 je	 SHORT $LN91@ChatSell
  001aa	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  001ad	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  001b0	75 0e		 jne	 SHORT $LN90@ChatSell
  001b2	83 c0 02	 add	 eax, 2
  001b5	83 c1 02	 add	 ecx, 2
  001b8	84 d2		 test	 dl, dl
  001ba	75 e4		 jne	 SHORT $LL89@ChatSell
$LN91@ChatSell:
  001bc	33 c0		 xor	 eax, eax
  001be	eb 05		 jmp	 SHORT $LN92@ChatSell
$LN90@ChatSell:
  001c0	1b c0		 sbb	 eax, eax
  001c2	83 d8 ff	 sbb	 eax, -1
$LN92@ChatSell:
  001c5	85 c0		 test	 eax, eax
  001c7	74 22		 je	 SHORT $LN72@ChatSell
$LN4@ChatSell:

; 299  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  001c9	47		 inc	 edi
  001ca	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  001d0	81 ff 98 3a 00
	00		 cmp	 edi, 15000		; 00003a98H
  001d6	7c ba		 jl	 SHORT $LL5@ChatSell
  001d8	5f		 pop	 edi
  001d9	5e		 pop	 esi
  001da	5b		 pop	 ebx

; 311  : 						}
; 312  : 					}
; 313  : 				}
; 314  : 			}	
; 315  : 		}
; 316  : 	}
; 317  : }

  001db	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001de	33 cd		 xor	 ecx, ebp
  001e0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001e5	8b e5		 mov	 esp, ebp
  001e7	5d		 pop	 ebp
  001e8	c2 08 00	 ret	 8
$LN72@ChatSell:

; 305  : 						{
; 306  : 							sObj->PremiumTime += ( Day * 86400 );
; 307  : 							MsgNormal(aIndex,"[Sell Premium] %s",sObj->Name);

  001eb	8b 95 50 ff ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  001f1	69 db 80 51 01
	00		 imul	 ebx, 86400		; 00015180H
  001f7	01 9e 41 22 00
	00		 add	 DWORD PTR [esi+8769], ebx
  001fd	56		 push	 esi
  001fe	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@
  00203	52		 push	 edx
  00204	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal

; 308  : 							MessageChat(i,"@[Premium Status] +%d Day",Day);

  00209	8b 85 58 ff ff
	ff		 mov	 eax, DWORD PTR _Day$203922[ebp]
  0020f	50		 push	 eax
  00210	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@GOEJIOGK@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?$AA@

; 309  : 							ZtUserDataSend(i);
; 310  : 							return;

  00215	e9 91 04 00 00	 jmp	 $LN113@ChatSell
$LN35@ChatSell:

; 219  : 		{
; 220  : #ifdef PREM_TYPE
; 221  : 			char SellCmdBronze[] = "/sellpremiumbronze";

  0021a	8b 15 04 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@+4
  00220	a1 08 00 00 00	 mov	 eax, DWORD PTR ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@+8
  00225	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@
  0022b	89 55 d8	 mov	 DWORD PTR _SellCmdBronze$203862[ebp+4], edx
  0022e	0f b7 15 10 00
	00 00		 movzx	 edx, WORD PTR ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@+16
  00235	89 45 dc	 mov	 DWORD PTR _SellCmdBronze$203862[ebp+8], eax
  00238	0f b6 05 12 00
	00 00		 movzx	 eax, BYTE PTR ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@+18
  0023f	89 4d d4	 mov	 DWORD PTR _SellCmdBronze$203862[ebp], ecx
  00242	8b 0d 0c 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BD@GBALNDID@?1sellpremiumbronze?$AA@+12
  00248	89 4d e0	 mov	 DWORD PTR _SellCmdBronze$203862[ebp+12], ecx

; 222  : 			char SellCmdSilver[] = "/sellpremiumsilver";

  0024b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@
  00251	66 89 55 e4	 mov	 WORD PTR _SellCmdBronze$203862[ebp+16], dx
  00255	8b 15 04 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@+4
  0025b	88 45 e6	 mov	 BYTE PTR _SellCmdBronze$203862[ebp+18], al
  0025e	a1 08 00 00 00	 mov	 eax, DWORD PTR ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@+8
  00263	89 4d c0	 mov	 DWORD PTR _SellCmdSilver$203864[ebp], ecx
  00266	8b 0d 0c 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@+12
  0026c	89 55 c4	 mov	 DWORD PTR _SellCmdSilver$203864[ebp+4], edx
  0026f	0f b7 15 10 00
	00 00		 movzx	 edx, WORD PTR ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@+16
  00276	89 45 c8	 mov	 DWORD PTR _SellCmdSilver$203864[ebp+8], eax
  00279	0f b6 05 12 00
	00 00		 movzx	 eax, BYTE PTR ??_C@_0BD@JEHNDNK@?1sellpremiumsilver?$AA@+18
  00280	89 4d cc	 mov	 DWORD PTR _SellCmdSilver$203864[ebp+12], ecx

; 223  : 			char SellCmdGold[] = "/sellpremiumgold";

  00283	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@
  00289	66 89 55 d0	 mov	 WORD PTR _SellCmdSilver$203864[ebp+16], dx
  0028d	8b 15 04 00 00
	00		 mov	 edx, DWORD PTR ??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@+4
  00293	88 45 d2	 mov	 BYTE PTR _SellCmdSilver$203864[ebp+18], al
  00296	a1 08 00 00 00	 mov	 eax, DWORD PTR ??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@+8
  0029b	89 4d e8	 mov	 DWORD PTR _SellCmdGold$203866[ebp], ecx
  0029e	8b 0d 0c 00 00
	00		 mov	 ecx, DWORD PTR ??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@+12
  002a4	89 55 ec	 mov	 DWORD PTR _SellCmdGold$203866[ebp+4], edx
  002a7	8a 15 10 00 00
	00		 mov	 dl, BYTE PTR ??_C@_0BB@LODEMFDJ@?1sellpremiumgold?$AA@+16
  002ad	89 45 f0	 mov	 DWORD PTR _SellCmdGold$203866[ebp+8], eax

; 224  : 			if(!memcmp(&Protocol[13],SellCmdBronze,strlen(SellCmdBronze)))

  002b0	8d 45 d4	 lea	 eax, DWORD PTR _SellCmdBronze$203862[ebp]
  002b3	89 4d f4	 mov	 DWORD PTR _SellCmdGold$203866[ebp+12], ecx
  002b6	88 55 f8	 mov	 BYTE PTR _SellCmdGold$203866[ebp+16], dl
  002b9	8d 48 01	 lea	 ecx, DWORD PTR [eax+1]
  002bc	8d 64 24 00	 npad	 4
$LL93@ChatSell:
  002c0	8a 10		 mov	 dl, BYTE PTR [eax]
  002c2	40		 inc	 eax
  002c3	84 d2		 test	 dl, dl
  002c5	75 f9		 jne	 SHORT $LL93@ChatSell
  002c7	2b c1		 sub	 eax, ecx
  002c9	8b c8		 mov	 ecx, eax
  002cb	8d 75 d4	 lea	 esi, DWORD PTR _SellCmdBronze$203862[ebp]
  002ce	8d 7b 0d	 lea	 edi, DWORD PTR [ebx+13]
  002d1	83 f8 04	 cmp	 eax, 4
  002d4	72 18		 jb	 SHORT $LN73@ChatSell
$LL44@ChatSell:
  002d6	8b 17		 mov	 edx, DWORD PTR [edi]
  002d8	3b 16		 cmp	 edx, DWORD PTR [esi]
  002da	0f 85 f2 00 00
	00		 jne	 $LN28@ChatSell
  002e0	83 e9 04	 sub	 ecx, 4
  002e3	83 c6 04	 add	 esi, 4
  002e6	83 c7 04	 add	 edi, 4
  002e9	83 f9 04	 cmp	 ecx, 4
  002ec	73 e8		 jae	 SHORT $LL44@ChatSell
$LN73@ChatSell:
  002ee	85 c9		 test	 ecx, ecx
  002f0	74 2c		 je	 SHORT $LN46@ChatSell
  002f2	8a 16		 mov	 dl, BYTE PTR [esi]
  002f4	3a 17		 cmp	 dl, BYTE PTR [edi]
  002f6	0f 85 d6 00 00
	00		 jne	 $LN28@ChatSell
  002fc	83 f9 01	 cmp	 ecx, 1
  002ff	76 1d		 jbe	 SHORT $LN46@ChatSell
  00301	8a 56 01	 mov	 dl, BYTE PTR [esi+1]
  00304	3a 57 01	 cmp	 dl, BYTE PTR [edi+1]
  00307	0f 85 c5 00 00
	00		 jne	 $LN28@ChatSell
  0030d	83 f9 02	 cmp	 ecx, 2
  00310	76 0c		 jbe	 SHORT $LN46@ChatSell
  00312	8a 4e 02	 mov	 cl, BYTE PTR [esi+2]
  00315	3a 4f 02	 cmp	 cl, BYTE PTR [edi+2]
  00318	0f 85 b4 00 00
	00		 jne	 $LN28@ChatSell
$LN46@ChatSell:

; 225  : 			{
; 226  : 				if(strlen((char*)Protocol+13+strlen(SellCmdBronze))>15)return;

  0031e	8d 54 18 0d	 lea	 edx, DWORD PTR [eax+ebx+13]
  00322	8b c2		 mov	 eax, edx
  00324	8d 70 01	 lea	 esi, DWORD PTR [eax+1]
$LL94@ChatSell:
  00327	8a 08		 mov	 cl, BYTE PTR [eax]
  00329	40		 inc	 eax
  0032a	84 c9		 test	 cl, cl
  0032c	75 f9		 jne	 SHORT $LL94@ChatSell
  0032e	2b c6		 sub	 eax, esi
  00330	83 f8 0f	 cmp	 eax, 15			; 0000000fH
  00333	0f 87 81 03 00
	00		 ja	 $LN111@ChatSell

; 227  : 				char sName[100];
; 228  : 				unsigned int Day;
; 229  : 				sscanf((char*)Protocol+13+strlen(SellCmdBronze),"%s %d",&sName,&Day);

  00339	8d 85 58 ff ff
	ff		 lea	 eax, DWORD PTR _Day$203872[ebp]
  0033f	50		 push	 eax
  00340	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203871[ebp]
  00346	51		 push	 ecx
  00347	68 00 00 00 00	 push	 OFFSET ??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@
  0034c	52		 push	 edx
  0034d	e8 00 00 00 00	 call	 _sscanf

; 230  : 				if(Day < 0 || Day > 10000) return;

  00352	8b 9d 58 ff ff
	ff		 mov	 ebx, DWORD PTR _Day$203872[ebp]
  00358	83 c4 10	 add	 esp, 16			; 00000010H
  0035b	81 fb 10 27 00
	00		 cmp	 ebx, 10000		; 00002710H
  00361	0f 87 53 03 00
	00		 ja	 $LN111@ChatSell

; 231  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  00367	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0036d	bf b0 36 00 00	 mov	 edi, 14000		; 000036b0H
  00372	81 c6 00 a7 40
	09		 add	 esi, 155232000		; 0940a700H
  00378	eb 06 8d 9b 00
	00 00 00	 npad	 8
$LL30@ChatSell:

; 232  : 				{
; 233  : 					LPOBJ sObj = &gObj[i];
; 234  : 					if(!strcmp(sObj->Name,sName))

  00380	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203871[ebp]
  00386	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  00389	8d a4 24 00 00
	00 00		 npad	 7
$LL95@ChatSell:
  00390	8a 10		 mov	 dl, BYTE PTR [eax]
  00392	3a 11		 cmp	 dl, BYTE PTR [ecx]
  00394	75 1a		 jne	 SHORT $LN96@ChatSell
  00396	84 d2		 test	 dl, dl
  00398	74 12		 je	 SHORT $LN97@ChatSell
  0039a	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  0039d	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  003a0	75 0e		 jne	 SHORT $LN96@ChatSell
  003a2	83 c0 02	 add	 eax, 2
  003a5	83 c1 02	 add	 ecx, 2
  003a8	84 d2		 test	 dl, dl
  003aa	75 e4		 jne	 SHORT $LL95@ChatSell
$LN97@ChatSell:
  003ac	33 c0		 xor	 eax, eax
  003ae	eb 05		 jmp	 SHORT $LN98@ChatSell
$LN96@ChatSell:
  003b0	1b c0		 sbb	 eax, eax
  003b2	83 d8 ff	 sbb	 eax, -1
$LN98@ChatSell:
  003b5	85 c0		 test	 eax, eax
  003b7	0f 84 03 01 00
	00		 je	 $LN74@ChatSell

; 231  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  003bd	47		 inc	 edi
  003be	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  003c4	81 ff 98 3a 00
	00		 cmp	 edi, 15000		; 00003a98H
  003ca	7c b4		 jl	 SHORT $LL30@ChatSell

; 274  : 				{
; 275  : 					LPOBJ sObj = &gObj[i];
; 276  : 					if(!strcmp(sObj->Name,sName))

  003cc	8b 9d 54 ff ff
	ff		 mov	 ebx, DWORD PTR _Protocol$GSCopy$[ebp]
$LN28@ChatSell:

; 242  : 					}
; 243  : 				}
; 244  : 			}
; 245  : 			if(!memcmp(&Protocol[13],SellCmdSilver,strlen(SellCmdSilver)))

  003d2	8d 45 c0	 lea	 eax, DWORD PTR _SellCmdSilver$203864[ebp]
  003d5	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
$LL99@ChatSell:
  003d8	8a 08		 mov	 cl, BYTE PTR [eax]
  003da	40		 inc	 eax
  003db	84 c9		 test	 cl, cl
  003dd	75 f9		 jne	 SHORT $LL99@ChatSell
  003df	2b c2		 sub	 eax, edx
  003e1	8b f8		 mov	 edi, eax
  003e3	8b c8		 mov	 ecx, eax
  003e5	8d 55 c0	 lea	 edx, DWORD PTR _SellCmdSilver$203864[ebp]
  003e8	8d 73 0d	 lea	 esi, DWORD PTR [ebx+13]
  003eb	83 ff 04	 cmp	 edi, 4
  003ee	72 18		 jb	 SHORT $LN75@ChatSell
$LL48@ChatSell:
  003f0	8b 06		 mov	 eax, DWORD PTR [esi]
  003f2	3b 02		 cmp	 eax, DWORD PTR [edx]
  003f4	0f 85 28 01 00
	00		 jne	 $LN20@ChatSell
  003fa	83 e9 04	 sub	 ecx, 4
  003fd	83 c2 04	 add	 edx, 4
  00400	83 c6 04	 add	 esi, 4
  00403	83 f9 04	 cmp	 ecx, 4
  00406	73 e8		 jae	 SHORT $LL48@ChatSell
$LN75@ChatSell:
  00408	85 c9		 test	 ecx, ecx
  0040a	74 2c		 je	 SHORT $LN50@ChatSell
  0040c	8a 02		 mov	 al, BYTE PTR [edx]
  0040e	3a 06		 cmp	 al, BYTE PTR [esi]
  00410	0f 85 0c 01 00
	00		 jne	 $LN20@ChatSell
  00416	83 f9 01	 cmp	 ecx, 1
  00419	76 1d		 jbe	 SHORT $LN50@ChatSell
  0041b	8a 42 01	 mov	 al, BYTE PTR [edx+1]
  0041e	3a 46 01	 cmp	 al, BYTE PTR [esi+1]
  00421	0f 85 fb 00 00
	00		 jne	 $LN20@ChatSell
  00427	83 f9 02	 cmp	 ecx, 2
  0042a	76 0c		 jbe	 SHORT $LN50@ChatSell
  0042c	8a 4a 02	 mov	 cl, BYTE PTR [edx+2]
  0042f	3a 4e 02	 cmp	 cl, BYTE PTR [esi+2]
  00432	0f 85 ea 00 00
	00		 jne	 $LN20@ChatSell
$LN50@ChatSell:

; 246  : 			{
; 247  : 				if(strlen((char*)Protocol+13+strlen(SellCmdSilver))>15)return;

  00438	8d 54 1f 0d	 lea	 edx, DWORD PTR [edi+ebx+13]
  0043c	8b c2		 mov	 eax, edx
  0043e	8d 70 01	 lea	 esi, DWORD PTR [eax+1]
$LL100@ChatSell:
  00441	8a 08		 mov	 cl, BYTE PTR [eax]
  00443	40		 inc	 eax
  00444	84 c9		 test	 cl, cl
  00446	75 f9		 jne	 SHORT $LL100@ChatSell
  00448	2b c6		 sub	 eax, esi
  0044a	83 f8 0f	 cmp	 eax, 15			; 0000000fH
  0044d	0f 87 67 02 00
	00		 ja	 $LN111@ChatSell

; 248  : 				char sName[100];
; 249  : 				unsigned int Day;
; 250  : 				sscanf((char*)Protocol+13+strlen(SellCmdSilver),"%s %d",&sName,&Day);

  00453	8d 85 58 ff ff
	ff		 lea	 eax, DWORD PTR _Day$203889[ebp]
  00459	50		 push	 eax
  0045a	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203888[ebp]
  00460	51		 push	 ecx
  00461	68 00 00 00 00	 push	 OFFSET ??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@
  00466	52		 push	 edx
  00467	e8 00 00 00 00	 call	 _sscanf

; 251  : 				if(Day < 0 || Day > 10000) return;

  0046c	8b 9d 58 ff ff
	ff		 mov	 ebx, DWORD PTR _Day$203889[ebp]
  00472	83 c4 10	 add	 esp, 16			; 00000010H
  00475	81 fb 10 27 00
	00		 cmp	 ebx, 10000		; 00002710H
  0047b	0f 87 39 02 00
	00		 ja	 $LN111@ChatSell

; 252  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  00481	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00487	bf b0 36 00 00	 mov	 edi, 14000		; 000036b0H
  0048c	81 c6 00 a7 40
	09		 add	 esi, 155232000		; 0940a700H
$LL22@ChatSell:

; 253  : 				{
; 254  : 					LPOBJ sObj = &gObj[i];
; 255  : 					if(!strcmp(sObj->Name,sName))

  00492	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203888[ebp]
  00498	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  0049b	eb 03 8d 49 00	 npad	 5
$LL101@ChatSell:
  004a0	8a 10		 mov	 dl, BYTE PTR [eax]
  004a2	3a 11		 cmp	 dl, BYTE PTR [ecx]
  004a4	75 56		 jne	 SHORT $LN102@ChatSell
  004a6	84 d2		 test	 dl, dl
  004a8	74 12		 je	 SHORT $LN103@ChatSell
  004aa	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  004ad	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  004b0	75 4a		 jne	 SHORT $LN102@ChatSell
  004b2	83 c0 02	 add	 eax, 2
  004b5	83 c1 02	 add	 ecx, 2
  004b8	84 d2		 test	 dl, dl
  004ba	75 e4		 jne	 SHORT $LL101@ChatSell
$LN103@ChatSell:
  004bc	33 c0		 xor	 eax, eax
  004be	eb 41		 jmp	 SHORT $LN104@ChatSell
$LN74@ChatSell:

; 235  : 					{
; 236  : 						sObj->PremiumTime += ( Day * 86400 );
; 237  : 						sObj->PremiumTimeType = PREM_BRONZE;
; 238  : 						MsgNormal(aIndex,"[Sell Premium] %s",sObj->Name);

  004c0	8b 95 50 ff ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  004c6	69 db 80 51 01
	00		 imul	 ebx, 86400		; 00015180H
  004cc	01 9e b8 22 00
	00		 add	 DWORD PTR [esi+8888], ebx
  004d2	c7 86 bc 22 00
	00 01 00 00 00	 mov	 DWORD PTR [esi+8892], 1
  004dc	83 c6 77	 add	 esi, 119		; 00000077H
  004df	56		 push	 esi
  004e0	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@
  004e5	52		 push	 edx
  004e6	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal

; 239  : 						MessageChat(i,"@[Premium Status] +%d Day, Type:Bronze",Day);

  004eb	8b 85 58 ff ff
	ff		 mov	 eax, DWORD PTR _Day$203872[ebp]
  004f1	50		 push	 eax
  004f2	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@NBDFGILO@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@

; 240  : 						ZtUserDataSend(i);
; 241  : 						return;

  004f7	e9 af 01 00 00	 jmp	 $LN113@ChatSell
$LN102@ChatSell:

; 253  : 				{
; 254  : 					LPOBJ sObj = &gObj[i];
; 255  : 					if(!strcmp(sObj->Name,sName))

  004fc	1b c0		 sbb	 eax, eax
  004fe	83 d8 ff	 sbb	 eax, -1
$LN104@ChatSell:
  00501	85 c0		 test	 eax, eax
  00503	0f 84 07 01 00
	00		 je	 $LN76@ChatSell

; 252  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  00509	47		 inc	 edi
  0050a	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  00510	81 ff 98 3a 00
	00		 cmp	 edi, 15000		; 00003a98H
  00516	0f 8c 76 ff ff
	ff		 jl	 $LL22@ChatSell

; 274  : 				{
; 275  : 					LPOBJ sObj = &gObj[i];
; 276  : 					if(!strcmp(sObj->Name,sName))

  0051c	8b 9d 54 ff ff
	ff		 mov	 ebx, DWORD PTR _Protocol$GSCopy$[ebp]
$LN20@ChatSell:

; 263  : 					}
; 264  : 				}
; 265  : 			}
; 266  : 			if(!memcmp(&Protocol[13],SellCmdGold,strlen(SellCmdGold)))

  00522	8d 45 e8	 lea	 eax, DWORD PTR _SellCmdGold$203866[ebp]
  00525	8d 50 01	 lea	 edx, DWORD PTR [eax+1]
$LL105@ChatSell:
  00528	8a 08		 mov	 cl, BYTE PTR [eax]
  0052a	40		 inc	 eax
  0052b	84 c9		 test	 cl, cl
  0052d	75 f9		 jne	 SHORT $LL105@ChatSell
  0052f	2b c2		 sub	 eax, edx
  00531	8b f8		 mov	 edi, eax
  00533	8b c8		 mov	 ecx, eax
  00535	8d 55 e8	 lea	 edx, DWORD PTR _SellCmdGold$203866[ebp]
  00538	8d 73 0d	 lea	 esi, DWORD PTR [ebx+13]
  0053b	83 ff 04	 cmp	 edi, 4
  0053e	72 18		 jb	 SHORT $LN77@ChatSell
$LL52@ChatSell:
  00540	8b 06		 mov	 eax, DWORD PTR [esi]
  00542	3b 02		 cmp	 eax, DWORD PTR [edx]
  00544	0f 85 70 01 00
	00		 jne	 $LN111@ChatSell
  0054a	83 e9 04	 sub	 ecx, 4
  0054d	83 c2 04	 add	 edx, 4
  00550	83 c6 04	 add	 esi, 4
  00553	83 f9 04	 cmp	 ecx, 4
  00556	73 e8		 jae	 SHORT $LL52@ChatSell
$LN77@ChatSell:
  00558	85 c9		 test	 ecx, ecx
  0055a	74 2c		 je	 SHORT $LN54@ChatSell
  0055c	8a 02		 mov	 al, BYTE PTR [edx]
  0055e	3a 06		 cmp	 al, BYTE PTR [esi]
  00560	0f 85 54 01 00
	00		 jne	 $LN111@ChatSell
  00566	83 f9 01	 cmp	 ecx, 1
  00569	76 1d		 jbe	 SHORT $LN54@ChatSell
  0056b	8a 42 01	 mov	 al, BYTE PTR [edx+1]
  0056e	3a 46 01	 cmp	 al, BYTE PTR [esi+1]
  00571	0f 85 43 01 00
	00		 jne	 $LN111@ChatSell
  00577	83 f9 02	 cmp	 ecx, 2
  0057a	76 0c		 jbe	 SHORT $LN54@ChatSell
  0057c	8a 4a 02	 mov	 cl, BYTE PTR [edx+2]
  0057f	3a 4e 02	 cmp	 cl, BYTE PTR [esi+2]
  00582	0f 85 32 01 00
	00		 jne	 $LN111@ChatSell
$LN54@ChatSell:

; 267  : 			{
; 268  : 				if(strlen((char*)Protocol+13+strlen(SellCmdGold))>15)return;

  00588	8d 54 1f 0d	 lea	 edx, DWORD PTR [edi+ebx+13]
  0058c	8b c2		 mov	 eax, edx
  0058e	8d 70 01	 lea	 esi, DWORD PTR [eax+1]
$LL106@ChatSell:
  00591	8a 08		 mov	 cl, BYTE PTR [eax]
  00593	40		 inc	 eax
  00594	84 c9		 test	 cl, cl
  00596	75 f9		 jne	 SHORT $LL106@ChatSell
  00598	2b c6		 sub	 eax, esi
  0059a	83 f8 0f	 cmp	 eax, 15			; 0000000fH
  0059d	0f 87 17 01 00
	00		 ja	 $LN111@ChatSell

; 269  : 				char sName[100];
; 270  : 				unsigned int Day;
; 271  : 				sscanf((char*)Protocol+13+strlen(SellCmdGold),"%s %d",&sName,&Day);

  005a3	8d 85 54 ff ff
	ff		 lea	 eax, DWORD PTR _Day$203904[ebp]
  005a9	50		 push	 eax
  005aa	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203903[ebp]
  005b0	51		 push	 ecx
  005b1	68 00 00 00 00	 push	 OFFSET ??_C@_05DIALNFFA@?$CFs?5?$CFd?$AA@
  005b6	52		 push	 edx
  005b7	e8 00 00 00 00	 call	 _sscanf

; 272  : 				if(Day < 0 || Day > 10000) return;

  005bc	8b 9d 54 ff ff
	ff		 mov	 ebx, DWORD PTR _Day$203904[ebp]
  005c2	83 c4 10	 add	 esp, 16			; 00000010H
  005c5	81 fb 10 27 00
	00		 cmp	 ebx, 10000		; 00002710H
  005cb	0f 87 e9 00 00
	00		 ja	 $LN111@ChatSell

; 273  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  005d1	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  005d7	bf b0 36 00 00	 mov	 edi, 14000		; 000036b0H
  005dc	81 c6 00 a7 40
	09		 add	 esi, 155232000		; 0940a700H
$LL14@ChatSell:

; 274  : 				{
; 275  : 					LPOBJ sObj = &gObj[i];
; 276  : 					if(!strcmp(sObj->Name,sName))

  005e2	8d 8d 5c ff ff
	ff		 lea	 ecx, DWORD PTR _sName$203903[ebp]
  005e8	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  005eb	eb 03 8d 49 00	 npad	 5
$LL107@ChatSell:
  005f0	8a 10		 mov	 dl, BYTE PTR [eax]
  005f2	3a 11		 cmp	 dl, BYTE PTR [ecx]
  005f4	75 53		 jne	 SHORT $LN108@ChatSell
  005f6	84 d2		 test	 dl, dl
  005f8	74 12		 je	 SHORT $LN109@ChatSell
  005fa	8a 50 01	 mov	 dl, BYTE PTR [eax+1]
  005fd	3a 51 01	 cmp	 dl, BYTE PTR [ecx+1]
  00600	75 47		 jne	 SHORT $LN108@ChatSell
  00602	83 c0 02	 add	 eax, 2
  00605	83 c1 02	 add	 ecx, 2
  00608	84 d2		 test	 dl, dl
  0060a	75 e4		 jne	 SHORT $LL107@ChatSell
$LN109@ChatSell:
  0060c	33 c0		 xor	 eax, eax
  0060e	eb 3e		 jmp	 SHORT $LN110@ChatSell
$LN76@ChatSell:

; 258  : 						sObj->PremiumTimeType = PREM_SILVER;
; 259  : 						MsgNormal(aIndex,"[Sell Premium] %s",sObj->Name);

  00610	8b 95 50 ff ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  00616	69 db 80 51 01
	00		 imul	 ebx, 86400		; 00015180H
  0061c	01 9e b8 22 00
	00		 add	 DWORD PTR [esi+8888], ebx
  00622	c7 86 bc 22 00
	00 02 00 00 00	 mov	 DWORD PTR [esi+8892], 2
  0062c	83 c6 77	 add	 esi, 119		; 00000077H
  0062f	56		 push	 esi
  00630	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@
  00635	52		 push	 edx
  00636	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal

; 260  : 						MessageChat(i,"@[Premium Status] +%d Day, Type:Silver",Day);

  0063b	8b 85 58 ff ff
	ff		 mov	 eax, DWORD PTR _Day$203889[ebp]
  00641	50		 push	 eax
  00642	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@LJHJGIOH@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@

; 261  : 						ZtUserDataSend(i);
; 262  : 						return;

  00647	eb 62		 jmp	 SHORT $LN113@ChatSell
$LN108@ChatSell:

; 274  : 				{
; 275  : 					LPOBJ sObj = &gObj[i];
; 276  : 					if(!strcmp(sObj->Name,sName))

  00649	1b c0		 sbb	 eax, eax
  0064b	83 d8 ff	 sbb	 eax, -1
$LN110@ChatSell:
  0064e	85 c0		 test	 eax, eax
  00650	74 22		 je	 SHORT $LN78@ChatSell

; 273  : 				for(int i=OBJ_STARTUSERINDZT;i<OBJMAX;i++)

  00652	47		 inc	 edi
  00653	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  00659	81 ff 98 3a 00
	00		 cmp	 edi, 15000		; 00003a98H
  0065f	7c 81		 jl	 SHORT $LL14@ChatSell
  00661	5f		 pop	 edi
  00662	5e		 pop	 esi
  00663	5b		 pop	 ebx

; 311  : 						}
; 312  : 					}
; 313  : 				}
; 314  : 			}	
; 315  : 		}
; 316  : 	}
; 317  : }

  00664	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00667	33 cd		 xor	 ecx, ebp
  00669	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0066e	8b e5		 mov	 esp, ebp
  00670	5d		 pop	 ebp
  00671	c2 08 00	 ret	 8
$LN78@ChatSell:

; 277  : 					{
; 278  : 						sObj->PremiumTime += ( Day * 86400 );
; 279  : 						sObj->PremiumTimeType = PREM_GOLD;
; 280  : 						MsgNormal(aIndex,"[Sell Premium] %s",sObj->Name);

  00674	8b 95 50 ff ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  0067a	69 db 80 51 01
	00		 imul	 ebx, 86400		; 00015180H
  00680	01 9e b8 22 00
	00		 add	 DWORD PTR [esi+8888], ebx
  00686	c7 86 bc 22 00
	00 03 00 00 00	 mov	 DWORD PTR [esi+8892], 3
  00690	83 c6 77	 add	 esi, 119		; 00000077H
  00693	56		 push	 esi
  00694	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@CGHJGLNF@?$FLSell?5Premium?$FN?5?$CFs?$AA@
  00699	52		 push	 edx
  0069a	e8 00 00 00 00	 call	 ?MsgNormal@@YAXHPADZZ	; MsgNormal

; 281  : 						MessageChat(i,"@[Premium Status] +%d Day, Type:Gold",Day);

  0069f	8b 85 54 ff ff
	ff		 mov	 eax, DWORD PTR _Day$203904[ebp]
  006a5	50		 push	 eax
  006a6	68 00 00 00 00	 push	 OFFSET ??_C@_0CF@JDEKJDDL@?$EA?$FLPremium?5Status?$FN?5?$CL?$CFd?5Day?0?5Type?3@
$LN113@ChatSell:
  006ab	57		 push	 edi
  006ac	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 282  : 						ZtUserDataSend(i);

  006b1	57		 push	 edi
  006b2	e8 00 00 00 00	 call	 ?ZtUserDataSend@@YAXH@Z	; ZtUserDataSend
  006b7	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN111@ChatSell:
  006ba	5f		 pop	 edi
  006bb	5e		 pop	 esi
$LN12@ChatSell:

; 311  : 						}
; 312  : 					}
; 313  : 				}
; 314  : 			}	
; 315  : 		}
; 316  : 	}
; 317  : }

  006bc	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  006bf	33 cd		 xor	 ecx, ebp
  006c1	5b		 pop	 ebx
  006c2	e8 00 00 00 00	 call	 @__security_check_cookie@4
  006c7	8b e5		 mov	 esp, ebp
  006c9	5d		 pop	 ebp
  006ca	c2 08 00	 ret	 8
?ChatSell@PremiumSystem@@QAEXHPAE@Z ENDP		; PremiumSystem::ChatSell
_TEXT	ENDS
PUBLIC	??_C@_0BK@HOGFNKCF@?$EA?$FLPremium?5Status?$FN?5Day?3?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BK@EMBGLNEK@?$EA?$FLPremium?5Status?$FN?5Min?3?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BJ@DIOJMKBK@?$EA?$FLPremium?5Status?$FN?5Active?$AA@ ; `string'
PUBLIC	?ConnectInfo@PremiumSystem@@QAEXH@Z		; PremiumSystem::ConnectInfo
;	COMDAT ??_C@_0BK@HOGFNKCF@?$EA?$FLPremium?5Status?$FN?5Day?3?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BK@HOGFNKCF@?$EA?$FLPremium?5Status?$FN?5Day?3?5?$CFd?$AA@ DB '@[P'
	DB	'remium Status] Day: %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BK@EMBGLNEK@?$EA?$FLPremium?5Status?$FN?5Min?3?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BK@EMBGLNEK@?$EA?$FLPremium?5Status?$FN?5Min?3?5?$CFd?$AA@ DB '@[P'
	DB	'remium Status] Min: %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BJ@DIOJMKBK@?$EA?$FLPremium?5Status?$FN?5Active?$AA@
CONST	SEGMENT
??_C@_0BJ@DIOJMKBK@?$EA?$FLPremium?5Status?$FN?5Active?$AA@ DB '@[Premium'
	DB	' Status] Active', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?ConnectInfo@PremiumSystem@@QAEXH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?ConnectInfo@PremiumSystem@@QAEXH@Z PROC		; PremiumSystem::ConnectInfo, COMDAT
; _this$ = ecx

; 320  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 321  : 	if(!this->Enable) return;

  00003	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00006	0f 84 fa 00 00
	00		 je	 $LN1@ConnectInf

; 322  : 	LPOBJ lpObj = &gObj[aIndex];

  0000c	56		 push	 esi
  0000d	57		 push	 edi
  0000e	8b 7d 08	 mov	 edi, DWORD PTR _aIndex$[ebp]
  00011	8b f7		 mov	 esi, edi
  00013	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  00019	03 35 00 00 00
	00		 add	 esi, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 323  : 	if(lpObj->PremiumTime > 0)

  0001f	83 be b8 22 00
	00 00		 cmp	 DWORD PTR [esi+8888], 0
  00026	0f 8e d8 00 00
	00		 jle	 $LN8@ConnectInf

; 324  : 	{
; 325  : #ifdef DRYNEA_31_10
; 326  : #else
; 327  : 		if(g_ZtLicense.CheckUser(eZtUB::drynea))
; 328  : 		{
; 329  : 		}
; 330  : 		else
; 331  : 		{
; 332  : #endif
; 333  : 			MessageChat(aIndex,"@[Premium Status] Active");

  0002c	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@DIOJMKBK@?$EA?$FLPremium?5Status?$FN?5Active?$AA@
  00031	57		 push	 edi
  00032	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  00037	83 c4 08	 add	 esp, 8

; 334  : #ifdef DRYNEA_31_10
; 335  : 			if(g_ZtLicense.CheckUser(eZtUB::SILVER1) || g_ZtLicense.CheckUser(eZtUB::SILVER2) || g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMu) || g_ZtLicense.CheckUser(eZtUB::drynea) || g_ZtLicense.CheckUser(eZtUB::Local3))

  0003a	6a 07		 push	 7
  0003c	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00041	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  00046	84 c0		 test	 al, al
  00048	0f 85 8e 00 00
	00		 jne	 $LN2@ConnectInf
  0004e	6a 08		 push	 8
  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00055	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0005a	84 c0		 test	 al, al
  0005c	75 7e		 jne	 SHORT $LN2@ConnectInf
  0005e	6a 1a		 push	 26			; 0000001aH
  00060	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00065	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0006a	84 c0		 test	 al, al
  0006c	75 6e		 jne	 SHORT $LN2@ConnectInf
  0006e	6a 1a		 push	 26			; 0000001aH
  00070	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00075	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0007a	84 c0		 test	 al, al
  0007c	75 5e		 jne	 SHORT $LN2@ConnectInf
  0007e	6a 11		 push	 17			; 00000011H
  00080	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00085	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0008a	84 c0		 test	 al, al
  0008c	75 4e		 jne	 SHORT $LN2@ConnectInf
  0008e	6a 01		 push	 1
  00090	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  00095	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  0009a	84 c0		 test	 al, al
  0009c	75 3e		 jne	 SHORT $LN2@ConnectInf
  0009e	6a 1c		 push	 28			; 0000001cH
  000a0	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtLicense@@3VCZtLicense@@A ; g_ZtLicense
  000a5	e8 00 00 00 00	 call	 ?CheckUser@CZtLicense@@QAE_NH@Z ; CZtLicense::CheckUser
  000aa	84 c0		 test	 al, al
  000ac	75 2e		 jne	 SHORT $LN2@ConnectInf

; 341  : 			}
; 342  : 			else 
; 343  : 			{
; 344  : 				MessageChat(aIndex,"@[Premium Status] Min: %d",(lpObj->PremiumTime/60));

  000ae	8b b6 b8 22 00
	00		 mov	 esi, DWORD PTR [esi+8888]
  000b4	b8 89 88 88 88	 mov	 eax, -2004318071	; 88888889H
  000b9	f7 ee		 imul	 esi
  000bb	03 d6		 add	 edx, esi
  000bd	c1 fa 05	 sar	 edx, 5
  000c0	8b c2		 mov	 eax, edx
  000c2	c1 e8 1f	 shr	 eax, 31			; 0000001fH
  000c5	03 c2		 add	 eax, edx
  000c7	50		 push	 eax
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@EMBGLNEK@?$EA?$FLPremium?5Status?$FN?5Min?3?5?$CFd?$AA@
  000cd	57		 push	 edi
  000ce	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  000d3	83 c4 0c	 add	 esp, 12			; 0000000cH
  000d6	5f		 pop	 edi
  000d7	5e		 pop	 esi

; 345  : 			}
; 346  : #ifdef DRYNEA_31_10
; 347  : #else
; 348  : 		}
; 349  : #endif
; 350  : 	}
; 351  : }

  000d8	5d		 pop	 ebp
  000d9	c2 04 00	 ret	 4
$LN2@ConnectInf:

; 336  : #else
; 337  : 			if(g_ZtLicense.CheckUser(eZtUB::SILVER1) || g_ZtLicense.CheckUser(eZtUB::SILVER2) || g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMuLocal) || g_ZtLicense.CheckUser(eZtUB::PrideMu) || g_ZtLicense.CheckUser(eZtUB::Local3) || g_ZtLicense.CheckUser(eZtUB::Local))
; 338  : #endif
; 339  : 			{
; 340  : 				MessageChat(aIndex,"@[Premium Status] Day: %d",(lpObj->PremiumTime/(60 * 60 * 24)));

  000dc	8b b6 b8 22 00
	00		 mov	 esi, DWORD PTR [esi+8888]
  000e2	b8 07 45 2e c2	 mov	 eax, -1037155065	; c22e4507H
  000e7	f7 ee		 imul	 esi
  000e9	03 d6		 add	 edx, esi
  000eb	c1 fa 10	 sar	 edx, 16			; 00000010H
  000ee	8b ca		 mov	 ecx, edx
  000f0	c1 e9 1f	 shr	 ecx, 31			; 0000001fH
  000f3	03 ca		 add	 ecx, edx
  000f5	51		 push	 ecx
  000f6	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@HOGFNKCF@?$EA?$FLPremium?5Status?$FN?5Day?3?5?$CFd?$AA@
  000fb	57		 push	 edi
  000fc	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  00101	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN8@ConnectInf:
  00104	5f		 pop	 edi
  00105	5e		 pop	 esi
$LN1@ConnectInf:

; 345  : 			}
; 346  : #ifdef DRYNEA_31_10
; 347  : #else
; 348  : 		}
; 349  : #endif
; 350  : 	}
; 351  : }

  00106	5d		 pop	 ebp
  00107	c2 04 00	 ret	 4
?ConnectInfo@PremiumSystem@@QAEXH@Z ENDP		; PremiumSystem::ConnectInfo
_TEXT	ENDS
PUBLIC	?CheckPremium@PremiumSystem@@QAE_NH@Z		; PremiumSystem::CheckPremium
; Function compile flags: /Ogtp
;	COMDAT ?CheckPremium@PremiumSystem@@QAE_NH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?CheckPremium@PremiumSystem@@QAE_NH@Z PROC		; PremiumSystem::CheckPremium, COMDAT
; _this$ = ecx

; 354  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 355  : 	if(!this->Enable) return false;

  00003	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00006	75 06		 jne	 SHORT $LN2@CheckPremi
  00008	32 c0		 xor	 al, al

; 358  : 	{
; 359  : 		return true;
; 360  : 	}
; 361  : 	return false;
; 362  : }

  0000a	5d		 pop	 ebp
  0000b	c2 04 00	 ret	 4
$LN2@CheckPremi:

; 356  : 	LPOBJ lpObj = &gObj[aIndex];

  0000e	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]

; 357  : 	if(lpObj->PremiumTime > 0)

  00011	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00017	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  0001d	83 bc 08 b8 22
	00 00 00	 cmp	 DWORD PTR [eax+ecx+8888], 0
  00025	0f 9f c0	 setg	 al

; 358  : 	{
; 359  : 		return true;
; 360  : 	}
; 361  : 	return false;
; 362  : }

  00028	5d		 pop	 ebp
  00029	c2 04 00	 ret	 4
?CheckPremium@PremiumSystem@@QAE_NH@Z ENDP		; PremiumSystem::CheckPremium
_TEXT	ENDS
PUBLIC	?CheckPremiumServer@PremiumSystem@@QAE_NH@Z	; PremiumSystem::CheckPremiumServer
; Function compile flags: /Ogtp
;	COMDAT ?CheckPremiumServer@PremiumSystem@@QAE_NH@Z
_TEXT	SEGMENT
_aIndex$ = 8						; size = 4
?CheckPremiumServer@PremiumSystem@@QAE_NH@Z PROC	; PremiumSystem::CheckPremiumServer, COMDAT
; _this$ = ecx

; 393  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 394  : 	if(!OBJMAX_RANGE(aIndex))

  00003	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00006	85 c0		 test	 eax, eax
  00008	78 0e		 js	 SHORT $LN8@CheckPremi@2
  0000a	33 d2		 xor	 edx, edx
  0000c	3d 97 3a 00 00	 cmp	 eax, 14999		; 00003a97H
  00011	0f 9e c2	 setle	 dl
  00014	85 d2		 test	 edx, edx
  00016	75 06		 jne	 SHORT $LN3@CheckPremi@2
$LN8@CheckPremi@2:

; 395  : 	{
; 396  : 		return false;

  00018	32 c0		 xor	 al, al

; 410  : }

  0001a	5d		 pop	 ebp
  0001b	c2 04 00	 ret	 4
$LN3@CheckPremi@2:

; 397  : 	}
; 398  : 
; 399  : 	if(this->m_PremiumServerEnable)

  0001e	80 b9 10 2f 00
	00 00		 cmp	 BYTE PTR [ecx+12048], 0
  00025	74 16		 je	 SHORT $LN1@CheckPremi@2

; 400  : 	{
; 401  : 		LPOBJ lpUser = &gObj[aIndex];
; 402  : 
; 403  : 		if(lpUser->PremiumTime <= 0)

  00027	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002d	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00033	83 bc 08 b8 22
	00 00 00	 cmp	 DWORD PTR [eax+ecx+8888], 0

; 404  : 		{
; 405  : 			return false;

  0003b	7e db		 jle	 SHORT $LN8@CheckPremi@2
$LN1@CheckPremi@2:

; 406  : 		}
; 407  : 	}
; 408  : 
; 409  : 	return true;

  0003d	b0 01		 mov	 al, 1

; 410  : }

  0003f	5d		 pop	 ebp
  00040	c2 04 00	 ret	 4
?CheckPremiumServer@PremiumSystem@@QAE_NH@Z ENDP	; PremiumSystem::CheckPremiumServer
_TEXT	ENDS
END
