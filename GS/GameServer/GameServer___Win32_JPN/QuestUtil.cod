; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\QuestUtil.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?set@PBMSG_HEAD@@QAEXPAEEE@Z			; PBMSG_HEAD::set
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\include\prodef.h
;	COMDAT ?set@PBMSG_HEAD@@QAEXPAEEE@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_size$ = 16						; size = 1
?set@PBMSG_HEAD@@QAEXPAEEE@Z PROC			; PBMSG_HEAD::set, COMDAT
; _this$ = ecx

; 80   : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 81   : 		lpBuf[0] = 0xC1;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 82   : 		lpBuf[1] = size;

  00006	8a 4d 10	 mov	 cl, BYTE PTR _size$[ebp]

; 83   : 		lpBuf[2] = head;

  00009	8a 55 0c	 mov	 dl, BYTE PTR _head$[ebp]
  0000c	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H
  0000f	88 48 01	 mov	 BYTE PTR [eax+1], cl
  00012	88 50 02	 mov	 BYTE PTR [eax+2], dl

; 84   : 	};	// line : 22

  00015	5d		 pop	 ebp
  00016	c2 0c 00	 ret	 12			; 0000000cH
?set@PBMSG_HEAD@@QAEXPAEEE@Z ENDP			; PBMSG_HEAD::set
_TEXT	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_7CQuestUtil@@6B@				; CQuestUtil::`vftable'
PUBLIC	??0CQuestUtil@@QAE@XZ				; CQuestUtil::CQuestUtil
PUBLIC	??_R4CQuestUtil@@6B@				; CQuestUtil::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCQuestUtil@@@8				; CQuestUtil `RTTI Type Descriptor'
PUBLIC	??_R3CQuestUtil@@8				; CQuestUtil::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CQuestUtil@@8				; CQuestUtil::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CQuestUtil@@8			; CQuestUtil::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECQuestUtil@@UAEPAXI@Z:PROC			; CQuestUtil::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@CQuestUtil@@8
; File e:\work\tranet_version\gs\gameserver\questutil.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@CQuestUtil@@8 DD FLAT:??_R0?AVCQuestUtil@@@8 ; CQuestUtil::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CQuestUtil@@8
rdata$r	ENDS
;	COMDAT ??_R2CQuestUtil@@8
rdata$r	SEGMENT
??_R2CQuestUtil@@8 DD FLAT:??_R1A@?0A@EA@CQuestUtil@@8	; CQuestUtil::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CQuestUtil@@8
rdata$r	SEGMENT
??_R3CQuestUtil@@8 DD 00H				; CQuestUtil::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CQuestUtil@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCQuestUtil@@@8
_DATA	SEGMENT
??_R0?AVCQuestUtil@@@8 DD FLAT:??_7type_info@@6B@	; CQuestUtil `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCQuestUtil@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CQuestUtil@@6B@
rdata$r	SEGMENT
??_R4CQuestUtil@@6B@ DD 00H				; CQuestUtil::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCQuestUtil@@@8
	DD	FLAT:??_R3CQuestUtil@@8
rdata$r	ENDS
;	COMDAT ??_7CQuestUtil@@6B@
CONST	SEGMENT
??_7CQuestUtil@@6B@ DD FLAT:??_R4CQuestUtil@@6B@	; CQuestUtil::`vftable'
	DD	FLAT:??_ECQuestUtil@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??0CQuestUtil@@QAE@XZ
_TEXT	SEGMENT
??0CQuestUtil@@QAE@XZ PROC				; CQuestUtil::CQuestUtil, COMDAT
; _this$ = ecx

; 16   : {

  00000	8b c1		 mov	 eax, ecx
  00002	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CQuestUtil@@6B@

; 17   : 
; 18   : }

  00008	c3		 ret	 0
??0CQuestUtil@@QAE@XZ ENDP				; CQuestUtil::CQuestUtil
_TEXT	ENDS
PUBLIC	??1CQuestUtil@@UAE@XZ				; CQuestUtil::~CQuestUtil
; Function compile flags: /Ogtp
;	COMDAT ??1CQuestUtil@@UAE@XZ
_TEXT	SEGMENT
??1CQuestUtil@@UAE@XZ PROC				; CQuestUtil::~CQuestUtil, COMDAT
; _this$ = ecx

; 21   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7CQuestUtil@@6B@

; 22   : 
; 23   : }

  00006	c3		 ret	 0
??1CQuestUtil@@UAE@XZ ENDP				; CQuestUtil::~CQuestUtil
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?Quest3rdRequestInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z ; CQuestUtil::Quest3rdRequestInfo
EXTRN	?Send@DBSockMng@@QAEHPADH@Z:PROC		; DBSockMng::Send
EXTRN	?cDBSMng@@3VDBSockMng@@A:BYTE			; cDBSMng
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?Quest3rdRequestInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_pMsg$ = -24						; size = 20
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?Quest3rdRequestInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z PROC ; CQuestUtil::Quest3rdRequestInfo, COMDAT
; _this$ = ecx

; 27   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 18	 sub	 esp, 24			; 00000018H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]

; 28   : 	PMSG_004A2100 pMsg;
; 29   : 
; 30   : 	if(lpObj->m_i3rdQuestState == 1)

  00013	83 b8 5c 10 00
	00 01		 cmp	 DWORD PTR [eax+4188], 1
  0001a	74 37		 je	 SHORT $LN2@Quest3rdRe

; 31   : 	{
; 32   : 		return;
; 33   : 	}
; 34   : 
; 35   : 	pMsg.h.set((LPBYTE)&pMsg, 0x13, sizeof(pMsg));
; 36   : 	pMsg.iUserIndex = lpObj->m_Index;

  0001c	8b 08		 mov	 ecx, DWORD PTR [eax]

; 37   : 	memcpy(pMsg.chCharacterName, lpObj->Name, 10);

  0001e	8b 50 77	 mov	 edx, DWORD PTR [eax+119]
  00021	89 4d ec	 mov	 DWORD PTR _pMsg$[ebp+4], ecx
  00024	8b 48 7b	 mov	 ecx, DWORD PTR [eax+123]
  00027	89 55 f0	 mov	 DWORD PTR _pMsg$[ebp+8], edx
  0002a	66 8b 50 7f	 mov	 dx, WORD PTR [eax+127]

; 38   : 	pMsg.chCharacterName[10] = '\0';
; 39   : 	cDBSMng.Send((char*)&pMsg, pMsg.h.size);

  0002e	6a 14		 push	 20			; 00000014H
  00030	8d 45 e8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00033	89 4d f4	 mov	 DWORD PTR _pMsg$[ebp+12], ecx
  00036	50		 push	 eax
  00037	b9 00 00 00 00	 mov	 ecx, OFFSET ?cDBSMng@@3VDBSockMng@@A ; cDBSMng
  0003c	66 c7 45 e8 c1
	14		 mov	 WORD PTR _pMsg$[ebp], 5313 ; 000014c1H
  00042	c6 45 ea 13	 mov	 BYTE PTR _pMsg$[ebp+2], 19 ; 00000013H
  00046	66 89 55 f8	 mov	 WORD PTR _pMsg$[ebp+16], dx
  0004a	c6 45 fa 00	 mov	 BYTE PTR _pMsg$[ebp+18], 0
  0004e	e8 00 00 00 00	 call	 ?Send@DBSockMng@@QAEHPADH@Z ; DBSockMng::Send
$LN2@Quest3rdRe:

; 40   : }

  00053	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00056	33 cd		 xor	 ecx, ebp
  00058	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0005d	8b e5		 mov	 esp, ebp
  0005f	5d		 pop	 ebp
  00060	c2 04 00	 ret	 4
?Quest3rdRequestInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z ENDP ; CQuestUtil::Quest3rdRequestInfo
_TEXT	ENDS
PUBLIC	??_C@_0FC@NKLIHJLF@?$FLQuest?$FN?5Set?5MonsterKillInfo?5?$FL?$CFs?$FN@ ; `string'
PUBLIC	?Quest3rdLoadInfo@CQuestUtil@@QAEXPAE@Z		; CQuestUtil::Quest3rdLoadInfo
EXTRN	?LogAddTD@@3P6AXPADZZA:DWORD			; LogAddTD
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	?gObjIsConnectedGP@@YAHH@Z:PROC			; gObjIsConnectedGP
;	COMDAT ??_C@_0FC@NKLIHJLF@?$FLQuest?$FN?5Set?5MonsterKillInfo?5?$FL?$CFs?$FN@
CONST	SEGMENT
??_C@_0FC@NKLIHJLF@?$FLQuest?$FN?5Set?5MonsterKillInfo?5?$FL?$CFs?$FN@ DB '['
	DB	'Quest] Set MonsterKillInfo [%s][%s](%d) (%d : %d/%d, %d/%d, %'
	DB	'd/%d, %d/%d, %d/%d)', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Quest3rdLoadInfo@CQuestUtil@@QAEXPAE@Z
_TEXT	SEGMENT
_aRecv$ = 8						; size = 4
?Quest3rdLoadInfo@CQuestUtil@@QAEXPAE@Z PROC		; CQuestUtil::Quest3rdLoadInfo, COMDAT
; _this$ = ecx

; 44   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 45   : 	PMSG_ANS_MONSTERKILLINFO * pRecv = (PMSG_ANS_MONSTERKILLINFO *)aRecv;
; 46   : 
; 47   : 	if(!gObjIsConnectedGP(pRecv->Index))

  00004	8b 75 08	 mov	 esi, DWORD PTR _aRecv$[ebp]
  00007	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  0000a	50		 push	 eax
  0000b	e8 00 00 00 00	 call	 ?gObjIsConnectedGP@@YAHH@Z ; gObjIsConnectedGP
  00010	83 c4 04	 add	 esp, 4
  00013	85 c0		 test	 eax, eax
  00015	0f 84 e3 00 00
	00		 je	 $LN1@Quest3rdLo

; 48   : 	{
; 49   : 		return;
; 50   : 	}
; 51   : 
; 52   : 	int aIndex = pRecv->Index;
; 53   : 
; 54   : 	LPOBJ lpObj = &gObj[aIndex];

  0001b	8b 46 04	 mov	 eax, DWORD PTR [esi+4]
  0001e	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00024	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 55   : 
; 56   : 	if(lpObj->m_i3rdQuestState == 0)

  0002a	83 b8 5c 10 00
	00 00		 cmp	 DWORD PTR [eax+4188], 0
  00031	0f 85 c7 00 00
	00		 jne	 $LN1@Quest3rdLo

; 57   : 	{
; 58   : 		lpObj->m_i3rdQuestIndex = pRecv->QuestIndex;

  00037	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  0003a	89 88 60 10 00
	00		 mov	 DWORD PTR [eax+4192], ecx

; 59   : 
; 60   : 		lpObj->MonsterKillInfo[0].MonIndex = pRecv->KillInfo[0].MonIndex;

  00040	8b 56 18	 mov	 edx, DWORD PTR [esi+24]
  00043	89 90 64 10 00
	00		 mov	 DWORD PTR [eax+4196], edx

; 61   : 		lpObj->MonsterKillInfo[0].KillCount = pRecv->KillInfo[0].KillCount;

  00049	8b 4e 1c	 mov	 ecx, DWORD PTR [esi+28]
  0004c	89 88 68 10 00
	00		 mov	 DWORD PTR [eax+4200], ecx

; 62   : 
; 63   : 		lpObj->MonsterKillInfo[1].MonIndex = pRecv->KillInfo[1].MonIndex;

  00052	8b 56 20	 mov	 edx, DWORD PTR [esi+32]
  00055	89 90 6c 10 00
	00		 mov	 DWORD PTR [eax+4204], edx

; 64   : 		lpObj->MonsterKillInfo[1].KillCount = pRecv->KillInfo[1].KillCount;

  0005b	8b 4e 24	 mov	 ecx, DWORD PTR [esi+36]
  0005e	89 88 70 10 00
	00		 mov	 DWORD PTR [eax+4208], ecx

; 65   : 
; 66   : 		lpObj->MonsterKillInfo[2].MonIndex = pRecv->KillInfo[2].MonIndex;

  00064	8b 56 28	 mov	 edx, DWORD PTR [esi+40]
  00067	89 90 74 10 00
	00		 mov	 DWORD PTR [eax+4212], edx

; 67   : 		lpObj->MonsterKillInfo[2].KillCount = pRecv->KillInfo[2].KillCount;

  0006d	8b 4e 2c	 mov	 ecx, DWORD PTR [esi+44]
  00070	89 88 78 10 00
	00		 mov	 DWORD PTR [eax+4216], ecx

; 68   : 
; 69   : 		lpObj->MonsterKillInfo[3].MonIndex = pRecv->KillInfo[3].MonIndex;

  00076	8b 56 30	 mov	 edx, DWORD PTR [esi+48]
  00079	89 90 7c 10 00
	00		 mov	 DWORD PTR [eax+4220], edx

; 70   : 		lpObj->MonsterKillInfo[3].KillCount = pRecv->KillInfo[3].KillCount;

  0007f	8b 4e 34	 mov	 ecx, DWORD PTR [esi+52]
  00082	89 88 80 10 00
	00		 mov	 DWORD PTR [eax+4224], ecx

; 71   : 
; 72   : 		lpObj->MonsterKillInfo[4].MonIndex = pRecv->KillInfo[4].MonIndex;

  00088	8b 56 38	 mov	 edx, DWORD PTR [esi+56]
  0008b	89 90 84 10 00
	00		 mov	 DWORD PTR [eax+4228], edx

; 73   : 		lpObj->MonsterKillInfo[4].KillCount = pRecv->KillInfo[4].KillCount;

  00091	8b 4e 3c	 mov	 ecx, DWORD PTR [esi+60]

; 74   : 
; 75   : 		lpObj->m_i3rdQuestState = 1;
; 76   : 
; 77   : 		LogAddTD("[Quest] Set MonsterKillInfo [%s][%s](%d) (%d : %d/%d, %d/%d, %d/%d, %d/%d, %d/%d)", lpObj->AccountID, lpObj->Name, lpObj->m_Index, lpObj->m_i3rdQuestIndex,
; 78   : 		lpObj->MonsterKillInfo[0].MonIndex, lpObj->MonsterKillInfo[0].KillCount, 
; 79   : 		lpObj->MonsterKillInfo[1].MonIndex, lpObj->MonsterKillInfo[1].KillCount,
; 80   : 		lpObj->MonsterKillInfo[2].MonIndex, lpObj->MonsterKillInfo[2].KillCount,
; 81   : 		lpObj->MonsterKillInfo[3].MonIndex, lpObj->MonsterKillInfo[3].KillCount,
; 82   : 		lpObj->MonsterKillInfo[4].MonIndex, lpObj->MonsterKillInfo[4].KillCount);

  00094	51		 push	 ecx
  00095	52		 push	 edx
  00096	8b 90 80 10 00
	00		 mov	 edx, DWORD PTR [eax+4224]
  0009c	52		 push	 edx
  0009d	8b 90 78 10 00
	00		 mov	 edx, DWORD PTR [eax+4216]
  000a3	89 88 88 10 00
	00		 mov	 DWORD PTR [eax+4232], ecx
  000a9	8b 88 7c 10 00
	00		 mov	 ecx, DWORD PTR [eax+4220]
  000af	51		 push	 ecx
  000b0	8b 88 74 10 00
	00		 mov	 ecx, DWORD PTR [eax+4212]
  000b6	52		 push	 edx
  000b7	8b 90 70 10 00
	00		 mov	 edx, DWORD PTR [eax+4208]
  000bd	51		 push	 ecx
  000be	8b 88 6c 10 00
	00		 mov	 ecx, DWORD PTR [eax+4204]
  000c4	52		 push	 edx
  000c5	8b 90 68 10 00
	00		 mov	 edx, DWORD PTR [eax+4200]
  000cb	51		 push	 ecx
  000cc	8b 88 64 10 00
	00		 mov	 ecx, DWORD PTR [eax+4196]
  000d2	52		 push	 edx
  000d3	8b 90 60 10 00
	00		 mov	 edx, DWORD PTR [eax+4192]
  000d9	51		 push	 ecx
  000da	8b 08		 mov	 ecx, DWORD PTR [eax]
  000dc	52		 push	 edx
  000dd	51		 push	 ecx
  000de	8d 50 77	 lea	 edx, DWORD PTR [eax+119]
  000e1	c7 80 5c 10 00
	00 01 00 00 00	 mov	 DWORD PTR [eax+4188], 1
  000eb	52		 push	 edx
  000ec	83 c0 6c	 add	 eax, 108		; 0000006cH
  000ef	50		 push	 eax
  000f0	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@NKLIHJLF@?$FLQuest?$FN?5Set?5MonsterKillInfo?5?$FL?$CFs?$FN@
  000f5	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000fb	83 c4 3c	 add	 esp, 60			; 0000003cH
$LN1@Quest3rdLo:
  000fe	5e		 pop	 esi

; 83   : 	}
; 84   : }

  000ff	5d		 pop	 ebp
  00100	c2 04 00	 ret	 4
?Quest3rdLoadInfo@CQuestUtil@@QAEXPAE@Z ENDP		; CQuestUtil::Quest3rdLoadInfo
_TEXT	ENDS
PUBLIC	??_C@_0EP@JGJNAFCF@?$FLQuest?$FN?5Save?5MonsterKillInfo?5?$FL?$CFs@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Quest3rdSaveInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z ; CQuestUtil::Quest3rdSaveInfo
EXTRN	?PHeadSetB@@YAXPAEEH@Z:PROC			; PHeadSetB
;	COMDAT ??_C@_0EP@JGJNAFCF@?$FLQuest?$FN?5Save?5MonsterKillInfo?5?$FL?$CFs@
CONST	SEGMENT
??_C@_0EP@JGJNAFCF@?$FLQuest?$FN?5Save?5MonsterKillInfo?5?$FL?$CFs@ DB '['
	DB	'Quest] Save MonsterKillInfo [%s][%s] (%d : %d/%d, %d/%d, %d/%'
	DB	'd, %d/%d, %d/%d)', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Quest3rdSaveInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z
_TEXT	SEGMENT
_pMsg$ = -68						; size = 64
__$ArrayPad$ = -4					; size = 4
_lpObj$ = 8						; size = 4
?Quest3rdSaveInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z PROC ; CQuestUtil::Quest3rdSaveInfo, COMDAT
; _this$ = ecx

; 88   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]

; 89   : 	PMSG_SAVE_MONSTERKILLINFO pMsg;
; 90   : 
; 91   : 	if(lpObj->m_i3rdQuestState == 0)

  00014	83 be 5c 10 00
	00 00		 cmp	 DWORD PTR [esi+4188], 0
  0001b	0f 84 d3 00 00
	00		 je	 $LN2@Quest3rdSa

; 92   : 	{
; 93   : 		return;
; 94   : 	}
; 95   : 
; 96   : 	PHeadSetB( (LPBYTE)&pMsg, 0x14, sizeof(pMsg)); //check packet with load

  00021	53		 push	 ebx
  00022	57		 push	 edi
  00023	6a 40		 push	 64			; 00000040H
  00025	8d 45 bc	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00028	6a 14		 push	 20			; 00000014H
  0002a	50		 push	 eax
  0002b	e8 00 00 00 00	 call	 ?PHeadSetB@@YAXPAEEH@Z	; PHeadSetB

; 97   : 	
; 98   : 	memcpy(pMsg.szName, lpObj->Name, 10);
; 99   : 	pMsg.Index = lpObj->m_Index;
; 100  : 	pMsg.QuestIndex = lpObj->m_i3rdQuestIndex;
; 101  : 
; 102  : 	pMsg.KillInfo[0].MonIndex = lpObj->MonsterKillInfo[0].MonIndex;
; 103  : 	pMsg.KillInfo[0].KillCount = lpObj->MonsterKillInfo[0].KillCount;
; 104  : 
; 105  : 	pMsg.KillInfo[1].MonIndex = lpObj->MonsterKillInfo[1].MonIndex;

  00030	8b 9e 6c 10 00
	00		 mov	 ebx, DWORD PTR [esi+4204]
  00036	89 5d dc	 mov	 DWORD PTR _pMsg$[ebp+32], ebx

; 106  : 	pMsg.KillInfo[1].KillCount = lpObj->MonsterKillInfo[1].KillCount;

  00039	8b 9e 70 10 00
	00		 mov	 ebx, DWORD PTR [esi+4208]
  0003f	89 5d e0	 mov	 DWORD PTR _pMsg$[ebp+36], ebx

; 107  : 
; 108  : 	pMsg.KillInfo[2].MonIndex = lpObj->MonsterKillInfo[2].MonIndex;

  00042	8b 9e 74 10 00
	00		 mov	 ebx, DWORD PTR [esi+4212]
  00048	89 5d e4	 mov	 DWORD PTR _pMsg$[ebp+40], ebx

; 109  : 	pMsg.KillInfo[2].KillCount = lpObj->MonsterKillInfo[2].KillCount;

  0004b	8b 9e 78 10 00
	00		 mov	 ebx, DWORD PTR [esi+4216]
  00051	89 5d e8	 mov	 DWORD PTR _pMsg$[ebp+44], ebx

; 110  : 
; 111  : 	pMsg.KillInfo[3].MonIndex = lpObj->MonsterKillInfo[3].MonIndex;

  00054	8b 9e 7c 10 00
	00		 mov	 ebx, DWORD PTR [esi+4220]
  0005a	89 5d ec	 mov	 DWORD PTR _pMsg$[ebp+48], ebx

; 112  : 	pMsg.KillInfo[3].KillCount = lpObj->MonsterKillInfo[3].KillCount;

  0005d	8b 9e 80 10 00
	00		 mov	 ebx, DWORD PTR [esi+4224]
  00063	8b 56 7b	 mov	 edx, DWORD PTR [esi+123]
  00066	8b 4e 77	 mov	 ecx, DWORD PTR [esi+119]
  00069	89 5d f0	 mov	 DWORD PTR _pMsg$[ebp+52], ebx

; 113  : 
; 114  : 	pMsg.KillInfo[4].MonIndex = lpObj->MonsterKillInfo[4].MonIndex;

  0006c	8b 9e 84 10 00
	00		 mov	 ebx, DWORD PTR [esi+4228]
  00072	8b be 68 10 00
	00		 mov	 edi, DWORD PTR [esi+4200]
  00078	89 5d f4	 mov	 DWORD PTR _pMsg$[ebp+56], ebx

; 115  : 	pMsg.KillInfo[4].KillCount = lpObj->MonsterKillInfo[4].KillCount;

  0007b	8b 9e 88 10 00
	00		 mov	 ebx, DWORD PTR [esi+4232]

; 116  : 	
; 117  : 	LogAddTD("[Quest] Save MonsterKillInfo [%s][%s] (%d : %d/%d, %d/%d, %d/%d, %d/%d, %d/%d)", lpObj->AccountID, lpObj->Name, pMsg.QuestIndex,
; 118  : 		pMsg.KillInfo[0].MonIndex, pMsg.KillInfo[0].KillCount, 
; 119  : 		pMsg.KillInfo[1].MonIndex, pMsg.KillInfo[1].KillCount,
; 120  : 		pMsg.KillInfo[2].MonIndex, pMsg.KillInfo[2].KillCount,
; 121  : 		pMsg.KillInfo[3].MonIndex, pMsg.KillInfo[3].KillCount,
; 122  : 		pMsg.KillInfo[4].MonIndex, pMsg.KillInfo[4].KillCount);

  00081	53		 push	 ebx
  00082	89 5d f8	 mov	 DWORD PTR _pMsg$[ebp+60], ebx
  00085	8b 5d f4	 mov	 ebx, DWORD PTR _pMsg$[ebp+56]
  00088	53		 push	 ebx
  00089	8b 5d f0	 mov	 ebx, DWORD PTR _pMsg$[ebp+52]
  0008c	53		 push	 ebx
  0008d	8b 5d ec	 mov	 ebx, DWORD PTR _pMsg$[ebp+48]
  00090	53		 push	 ebx
  00091	8b 5d e8	 mov	 ebx, DWORD PTR _pMsg$[ebp+44]
  00094	53		 push	 ebx
  00095	8b 5d e4	 mov	 ebx, DWORD PTR _pMsg$[ebp+40]
  00098	53		 push	 ebx
  00099	8b 5d e0	 mov	 ebx, DWORD PTR _pMsg$[ebp+36]
  0009c	8d 46 77	 lea	 eax, DWORD PTR [esi+119]
  0009f	53		 push	 ebx
  000a0	8b 5d dc	 mov	 ebx, DWORD PTR _pMsg$[ebp+32]
  000a3	53		 push	 ebx
  000a4	89 55 c8	 mov	 DWORD PTR _pMsg$[ebp+12], edx
  000a7	8b 16		 mov	 edx, DWORD PTR [esi]
  000a9	89 4d c4	 mov	 DWORD PTR _pMsg$[ebp+8], ecx
  000ac	66 8b 48 08	 mov	 cx, WORD PTR [eax+8]
  000b0	57		 push	 edi
  000b1	89 55 c0	 mov	 DWORD PTR _pMsg$[ebp+4], edx
  000b4	8b 96 64 10 00
	00		 mov	 edx, DWORD PTR [esi+4196]
  000ba	52		 push	 edx
  000bb	66 89 4d cc	 mov	 WORD PTR _pMsg$[ebp+16], cx
  000bf	8b 8e 60 10 00
	00		 mov	 ecx, DWORD PTR [esi+4192]
  000c5	51		 push	 ecx
  000c6	50		 push	 eax
  000c7	83 c6 6c	 add	 esi, 108		; 0000006cH
  000ca	56		 push	 esi
  000cb	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@JGJNAFCF@?$FLQuest?$FN?5Save?5MonsterKillInfo?5?$FL?$CFs@
  000d0	89 4d d0	 mov	 DWORD PTR _pMsg$[ebp+20], ecx
  000d3	89 55 d4	 mov	 DWORD PTR _pMsg$[ebp+24], edx
  000d6	89 7d d8	 mov	 DWORD PTR _pMsg$[ebp+28], edi
  000d9	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddTD@@3P6AXPADZZA ; LogAddTD
  000df	83 c4 44	 add	 esp, 68			; 00000044H

; 123  : 
; 124  : 	cDBSMng.Send((char*)&pMsg, sizeof(pMsg));

  000e2	6a 40		 push	 64			; 00000040H
  000e4	8d 45 bc	 lea	 eax, DWORD PTR _pMsg$[ebp]
  000e7	50		 push	 eax
  000e8	b9 00 00 00 00	 mov	 ecx, OFFSET ?cDBSMng@@3VDBSockMng@@A ; cDBSMng
  000ed	e8 00 00 00 00	 call	 ?Send@DBSockMng@@QAEHPADH@Z ; DBSockMng::Send
  000f2	5f		 pop	 edi
  000f3	5b		 pop	 ebx
$LN2@Quest3rdSa:

; 125  : }

  000f4	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000f7	33 cd		 xor	 ecx, ebp
  000f9	5e		 pop	 esi
  000fa	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ff	8b e5		 mov	 esp, ebp
  00101	5d		 pop	 ebp
  00102	c2 04 00	 ret	 4
?Quest3rdSaveInfo@CQuestUtil@@QAEXPAUOBJECTSTRUCT@@@Z ENDP ; CQuestUtil::Quest3rdSaveInfo
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GCQuestUtil@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCQuestUtil@@UAEPAXI@Z PROC				; CQuestUtil::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1CQuestUtil@@UAE@XZ	; CQuestUtil::~CQuestUtil
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GCQuestUtil@@UAEPAXI@Z ENDP				; CQuestUtil::`scalar deleting destructor'
_TEXT	ENDS
EXTRN	_atexit:PROC
; Function compile flags: /Ogtp
;	COMDAT ??__Eg_QuestUtil@@YAXXZ
text$yc	SEGMENT
??__Eg_QuestUtil@@YAXXZ PROC				; `dynamic initializer for 'g_QuestUtil'', COMDAT

; 13   : CQuestUtil g_QuestUtil;

  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_QuestUtil@@3VCQuestUtil@@A ; g_QuestUtil
  00005	e8 00 00 00 00	 call	 ??0CQuestUtil@@QAE@XZ	; CQuestUtil::CQuestUtil
  0000a	68 00 00 00 00	 push	 OFFSET ??__Fg_QuestUtil@@YAXXZ ; `dynamic atexit destructor for 'g_QuestUtil''
  0000f	e8 00 00 00 00	 call	 _atexit
  00014	59		 pop	 ecx
  00015	c3		 ret	 0
??__Eg_QuestUtil@@YAXXZ ENDP				; `dynamic initializer for 'g_QuestUtil''
; Function compile flags: /Ogtp
text$yc	ENDS
;	COMDAT ??__Fg_QuestUtil@@YAXXZ
text$yd	SEGMENT
??__Fg_QuestUtil@@YAXXZ PROC				; `dynamic atexit destructor for 'g_QuestUtil'', COMDAT
  00000	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_QuestUtil@@3VCQuestUtil@@A ; g_QuestUtil
  00005	e9 00 00 00 00	 jmp	 ??1CQuestUtil@@UAE@XZ	; CQuestUtil::~CQuestUtil
??__Fg_QuestUtil@@YAXXZ ENDP				; `dynamic atexit destructor for 'g_QuestUtil''
text$yd	ENDS
PUBLIC	?g_QuestUtil@@3VCQuestUtil@@A			; g_QuestUtil
_BSS	SEGMENT
?g_QuestUtil@@3VCQuestUtil@@A DD 01H DUP (?)		; g_QuestUtil
_BSS	ENDS
CRT$XCU	SEGMENT
_g_QuestUtil$initializer$ DD FLAT:??__Eg_QuestUtil@@YAXXZ
CRT$XCU	ENDS
END
