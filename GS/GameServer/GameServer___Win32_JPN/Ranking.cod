; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\Ranking.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?gRanking@@3VcRanking@@A			; gRanking
_BSS	SEGMENT
?gRanking@@3VcRanking@@A DB 01130H DUP (?)		; gRanking
_BSS	ENDS
PUBLIC	?set@PBMSG_HEAD2@@QAEXPAEEEE@Z			; PBMSG_HEAD2::set
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\include\prodef.h
;	COMDAT ?set@PBMSG_HEAD2@@QAEXPAEEEE@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_sub$ = 16						; size = 1
_size$ = 20						; size = 1
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z PROC			; PBMSG_HEAD2::set, COMDAT
; _this$ = ecx

; 104  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 105  : 		lpBuf[0] = 0xC1;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 106  : 		lpBuf[1] = size;

  00006	8a 4d 14	 mov	 cl, BYTE PTR _size$[ebp]

; 107  : 		lpBuf[2] = head;

  00009	8a 55 0c	 mov	 dl, BYTE PTR _head$[ebp]
  0000c	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 108  : 		lpBuf[3] = sub;

  0000f	8a 4d 10	 mov	 cl, BYTE PTR _sub$[ebp]
  00012	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H
  00015	88 50 02	 mov	 BYTE PTR [eax+2], dl
  00018	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 109  : 	};

  0001b	5d		 pop	 ebp
  0001c	c2 10 00	 ret	 16			; 00000010H
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z ENDP			; PBMSG_HEAD2::set
_TEXT	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?SendDS@cRanking@@QAEXXZ			; cRanking::SendDS
EXTRN	?Send@DBSockMng@@QAEHPADH@Z:PROC		; DBSockMng::Send
EXTRN	?cDBSMng@@3VDBSockMng@@A:BYTE			; cDBSMng
EXTRN	?ZtConfig@@3VcZtConfigs@@A:BYTE			; ZtConfig
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\ranking.cpp
;	COMDAT ?SendDS@cRanking@@QAEXXZ
_TEXT	SEGMENT
_pMsg$ = -8						; size = 5
?SendDS@cRanking@@QAEXXZ PROC				; cRanking::SendDS, COMDAT
; _this$ = ecx

; 14   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8

; 15   : 	if(!ZtConfig.ZtCustom.Top100)return;

  00006	80 3d 09 00 00
	00 00		 cmp	 BYTE PTR ?ZtConfig@@3VcZtConfigs@@A+9, 0
  0000d	74 1b		 je	 SHORT $LN2@SendDS

; 16   : 	GDTop pMsg;
; 17   : 	pMsg.h.set((LPBYTE)&pMsg, 0xE2, 0x03, sizeof(GDTop));
; 18   : 	pMsg.Result = 1;
; 19   : 	cDBSMng.Send((char*)&pMsg, pMsg.h.size);

  0000f	6a 05		 push	 5
  00011	8d 45 f8	 lea	 eax, DWORD PTR _pMsg$[ebp]
  00014	50		 push	 eax
  00015	b9 00 00 00 00	 mov	 ecx, OFFSET ?cDBSMng@@3VDBSockMng@@A ; cDBSMng
  0001a	c7 45 f8 c1 05
	e2 03		 mov	 DWORD PTR _pMsg$[ebp], 65144257 ; 03e205c1H
  00021	c6 45 fc 01	 mov	 BYTE PTR _pMsg$[ebp+4], 1
  00025	e8 00 00 00 00	 call	 ?Send@DBSockMng@@QAEHPADH@Z ; DBSockMng::Send
$LN2@SendDS:

; 20   : }

  0002a	8b e5		 mov	 esp, ebp
  0002c	5d		 pop	 ebp
  0002d	c3		 ret	 0
?SendDS@cRanking@@QAEXXZ ENDP				; cRanking::SendDS
_TEXT	ENDS
PUBLIC	?RecvDS@cRanking@@QAEXPAUDGCharTop@@@Z		; cRanking::RecvDS
EXTRN	_strncpy:PROC
; Function compile flags: /Ogtp
;	COMDAT ?RecvDS@cRanking@@QAEXPAUDGCharTop@@@Z
_TEXT	SEGMENT
tv1162 = 8						; size = 4
_Recv$ = 8						; size = 4
?RecvDS@cRanking@@QAEXPAUDGCharTop@@@Z PROC		; cRanking::RecvDS, COMDAT
; _this$ = ecx

; 23   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 24   : 	if(!ZtConfig.ZtCustom.Top100)return;

  00003	80 3d 09 00 00
	00 00		 cmp	 BYTE PTR ?ZtConfig@@3VcZtConfigs@@A+9, 0
  0000a	0f 84 90 00 00
	00		 je	 $LN1@RecvDS

; 25   : 
; 26   : 	for(int i=0;i<MAXTOP;i++)

  00010	8b 45 08	 mov	 eax, DWORD PTR _Recv$[ebp]
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	8b d9		 mov	 ebx, ecx
  00017	57		 push	 edi
  00018	8d 79 0c	 lea	 edi, DWORD PTR [ecx+12]
  0001b	8d 70 12	 lea	 esi, DWORD PTR [eax+18]
  0001e	2b d8		 sub	 ebx, eax
  00020	c7 45 08 64 00
	00 00		 mov	 DWORD PTR tv1162[ebp], 100 ; 00000064H
$LL3@RecvDS:

; 27   : 	{
; 28   : 		/*
; 29   : 	BYTE Class;
; 30   : 	unsigned short level;
; 31   : 	unsigned short Reset;
; 32   : 	unsigned short Grand;
; 33   : 	unsigned short Str;
; 34   : 	unsigned short Agi;
; 35   : 	unsigned short Vit;
; 36   : 	unsigned short Ene;
; 37   : 	unsigned Cmd;
; 38   : 	char Guild[8];
; 39   : 		*/
; 40   : 		strncpy(this->RankingChar[i].Name,Recv->tp[i].Name,10);

  00027	6a 0a		 push	 10			; 0000000aH
  00029	8d 46 f6	 lea	 eax, DWORD PTR [esi-10]
  0002c	50		 push	 eax
  0002d	8d 4f f4	 lea	 ecx, DWORD PTR [edi-12]
  00030	51		 push	 ecx
  00031	e8 00 00 00 00	 call	 _strncpy

; 41   : 
; 42   : 		this->RankingChar[i].Class = Recv->tp[i].Class;

  00036	0f b6 16	 movzx	 edx, BYTE PTR [esi]
  00039	88 57 fe	 mov	 BYTE PTR [edi-2], dl

; 43   : 		this->RankingChar[i].level = Recv->tp[i].level;

  0003c	0f b7 46 02	 movzx	 eax, WORD PTR [esi+2]
  00040	66 89 07	 mov	 WORD PTR [edi], ax

; 44   : 		this->RankingChar[i].Reset = Recv->tp[i].Reset;

  00043	0f b7 4e 04	 movzx	 ecx, WORD PTR [esi+4]
  00047	66 89 4f 02	 mov	 WORD PTR [edi+2], cx

; 45   : 		this->RankingChar[i].Grand = Recv->tp[i].Grand;

  0004b	0f b7 56 06	 movzx	 edx, WORD PTR [esi+6]
  0004f	66 89 57 04	 mov	 WORD PTR [edi+4], dx

; 46   : 		this->RankingChar[i].Str = Recv->tp[i].Str;

  00053	0f b7 46 08	 movzx	 eax, WORD PTR [esi+8]
  00057	66 89 04 33	 mov	 WORD PTR [ebx+esi], ax

; 47   : 		this->RankingChar[i].Agi = Recv->tp[i].Agi;

  0005b	0f b7 4e 0a	 movzx	 ecx, WORD PTR [esi+10]
  0005f	66 89 4f 08	 mov	 WORD PTR [edi+8], cx

; 48   : 		this->RankingChar[i].Vit = Recv->tp[i].Vit;

  00063	0f b7 56 0c	 movzx	 edx, WORD PTR [esi+12]
  00067	66 89 57 0a	 mov	 WORD PTR [edi+10], dx

; 49   : 		this->RankingChar[i].Ene = Recv->tp[i].Ene;

  0006b	0f b7 46 0e	 movzx	 eax, WORD PTR [esi+14]
  0006f	66 89 47 0c	 mov	 WORD PTR [edi+12], ax

; 50   : 		this->RankingChar[i].Cmd = Recv->tp[i].Cmd;

  00073	8b 4e 12	 mov	 ecx, DWORD PTR [esi+18]
  00076	89 4f 10	 mov	 DWORD PTR [edi+16], ecx

; 51   : 		this->RankingChar[i].Premium = Recv->tp[i].Premium;

  00079	0f b6 56 16	 movzx	 edx, BYTE PTR [esi+22]

; 52   : 
; 53   : 		strncpy(this->RankingChar[i].Guild,Recv->tp[i].Guild,8);

  0007d	6a 08		 push	 8
  0007f	8d 46 17	 lea	 eax, DWORD PTR [esi+23]
  00082	50		 push	 eax
  00083	8d 4f 15	 lea	 ecx, DWORD PTR [edi+21]
  00086	51		 push	 ecx
  00087	88 57 14	 mov	 BYTE PTR [edi+20], dl
  0008a	e8 00 00 00 00	 call	 _strncpy
  0008f	83 c4 18	 add	 esp, 24			; 00000018H
  00092	83 c6 2c	 add	 esi, 44			; 0000002cH
  00095	83 c7 2c	 add	 edi, 44			; 0000002cH
  00098	ff 4d 08	 dec	 DWORD PTR tv1162[ebp]
  0009b	75 8a		 jne	 SHORT $LL3@RecvDS
  0009d	5f		 pop	 edi
  0009e	5e		 pop	 esi
  0009f	5b		 pop	 ebx
$LN1@RecvDS:

; 54   : 
; 55   : 		//if(this->RankingChar[i].Name[0] != NULL)
; 56   : 		//LogAddC(2,"Name: %s",this->RankingChar[i].Name);
; 57   : 	}
; 58   : }

  000a0	5d		 pop	 ebp
  000a1	c2 04 00	 ret	 4
?RecvDS@cRanking@@QAEXPAUDGCharTop@@@Z ENDP		; cRanking::RecvDS
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?SendClient@cRanking@@QAEXXZ			; cRanking::SendClient
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?PHeadSubSetW@@YAXPAEEEH@Z:PROC			; PHeadSubSetW
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
EXTRN	__chkstk:PROC
EXTRN	_memset:PROC
; Function compile flags: /Ogtp
;	COMDAT ?SendClient@cRanking@@QAEXXZ
_TEXT	SEGMENT
tv690 = -4468						; size = 4
tv694 = -4464						; size = 4
tv887 = -4460						; size = 4
tv686 = -4456						; size = 4
tv882 = -4452						; size = 4
tv866 = -4448						; size = 4
tv878 = -4444						; size = 4
tv698 = -4440						; size = 4
tv874 = -4436						; size = 4
tv870 = -4432						; size = 4
tv702 = -4428						; size = 4
tv974 = -4424						; size = 4
tv940 = -4420						; size = 4
_n$203813 = -4416					; size = 4
_sClient$203819 = -4412					; size = 4408
__$ArrayPad$ = -4					; size = 4
?SendClient@cRanking@@QAEXXZ PROC			; cRanking::SendClient, COMDAT
; _this$ = ecx

; 61   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	b8 74 11 00 00	 mov	 eax, 4468		; 00001174H
  00008	e8 00 00 00 00	 call	 __chkstk
  0000d	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00012	33 c5		 xor	 eax, ebp
  00014	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 62   : 	if(!ZtConfig.ZtCustom.Top100)return;

  00017	80 3d 09 00 00
	00 00		 cmp	 BYTE PTR ?ZtConfig@@3VcZtConfigs@@A+9, 0
  0001e	57		 push	 edi
  0001f	8b f9		 mov	 edi, ecx
  00021	0f 84 1c 02 00
	00		 je	 $LN5@SendClient

; 63   : 
; 64   : 	for (int  n=OBJ_STARTUSERINDZT;n<OBJMAX;n++)

  00027	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0002d	b8 00 a7 40 09	 mov	 eax, 155232000		; 0940a700H
  00032	53		 push	 ebx
  00033	c7 85 c0 ee ff
	ff b0 36 00 00	 mov	 DWORD PTR _n$203813[ebp], 14000 ; 000036b0H
  0003d	89 85 b8 ee ff
	ff		 mov	 DWORD PTR tv974[ebp], eax
  00043	56		 push	 esi
$LL7@SendClient:

; 65   : 	{
; 66   : 		LPOBJ lpObj = &gObj[n];
; 67   : 		if(lpObj->Connected == PLAYER_PLAYING && lpObj->OffExp == 0 && lpObj->OffTrade == 0)

  00044	83 7c 08 04 03	 cmp	 DWORD PTR [eax+ecx+4], 3
  00049	0f 85 d6 01 00
	00		 jne	 $LN6@SendClient
  0004f	83 bc 08 98 22
	00 00 00	 cmp	 DWORD PTR [eax+ecx+8856], 0
  00057	0f 85 c8 01 00
	00		 jne	 $LN6@SendClient
  0005d	83 bc 08 ac 22
	00 00 00	 cmp	 DWORD PTR [eax+ecx+8876], 0
  00065	0f 85 ba 01 00
	00		 jne	 $LN6@SendClient

; 68   : 		{
; 69   : 			DGCharTop	sClient;
; 70   : 			ZeroMemory(&sClient,sizeof(sClient));

  0006b	68 38 11 00 00	 push	 4408			; 00001138H
  00070	8d 85 c4 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp]
  00076	6a 00		 push	 0
  00078	50		 push	 eax
  00079	e8 00 00 00 00	 call	 _memset

; 71   : 			PHeadSubSetW((LPBYTE)&sClient, 0xFA, 0x06, sizeof(sClient));

  0007e	68 38 11 00 00	 push	 4408			; 00001138H
  00083	6a 06		 push	 6
  00085	8d 8d c4 ee ff
	ff		 lea	 ecx, DWORD PTR _sClient$203819[ebp]
  0008b	68 fa 00 00 00	 push	 250			; 000000faH
  00090	51		 push	 ecx
  00091	e8 00 00 00 00	 call	 ?PHeadSubSetW@@YAXPAEEEH@Z ; PHeadSubSetW

; 76   : 
; 77   : 				sClient.tp[i].Class = this->RankingChar[i].Class;

  00096	8d 85 ca ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+6]
  0009c	2b c7		 sub	 eax, edi
  0009e	89 85 98 ee ff
	ff		 mov	 DWORD PTR tv686[ebp], eax
  000a4	8d 9d cc ee ff
	ff		 lea	 ebx, DWORD PTR _sClient$203819[ebp+8]
  000aa	8b c3		 mov	 eax, ebx
  000ac	2b c7		 sub	 eax, edi
  000ae	89 85 8c ee ff
	ff		 mov	 DWORD PTR tv690[ebp], eax
  000b4	8d 85 ce ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+10]
  000ba	2b c7		 sub	 eax, edi
  000bc	89 85 90 ee ff
	ff		 mov	 DWORD PTR tv694[ebp], eax
  000c2	8d 85 d0 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+12]
  000c8	2b c7		 sub	 eax, edi
  000ca	89 85 a8 ee ff
	ff		 mov	 DWORD PTR tv698[ebp], eax
  000d0	8d 85 d2 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+14]
  000d6	2b c7		 sub	 eax, edi
  000d8	89 85 b4 ee ff
	ff		 mov	 DWORD PTR tv702[ebp], eax
  000de	8d 85 d4 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+16]
  000e4	2b c7		 sub	 eax, edi
  000e6	89 85 a0 ee ff
	ff		 mov	 DWORD PTR tv866[ebp], eax
  000ec	8d 85 d6 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+18]
  000f2	2b c7		 sub	 eax, edi
  000f4	89 85 b0 ee ff
	ff		 mov	 DWORD PTR tv870[ebp], eax
  000fa	8d 85 d8 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+20]
  00100	2b c7		 sub	 eax, edi
  00102	89 85 ac ee ff
	ff		 mov	 DWORD PTR tv874[ebp], eax
  00108	8d 85 dc ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+24]
  0010e	2b c7		 sub	 eax, edi
  00110	89 85 a4 ee ff
	ff		 mov	 DWORD PTR tv878[ebp], eax
  00116	8d 85 e0 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+28]
  0011c	2b c7		 sub	 eax, edi
  0011e	89 85 9c ee ff
	ff		 mov	 DWORD PTR tv882[ebp], eax
  00124	8d 85 e1 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203819[ebp+29]
  0012a	83 c4 1c	 add	 esp, 28			; 0000001cH
  0012d	2b c7		 sub	 eax, edi
  0012f	8d 77 0c	 lea	 esi, DWORD PTR [edi+12]
  00132	89 85 94 ee ff
	ff		 mov	 DWORD PTR tv887[ebp], eax
  00138	c7 85 bc ee ff
	ff 64 00 00 00	 mov	 DWORD PTR tv940[ebp], 100 ; 00000064H
$LL3@SendClient:

; 72   : 
; 73   : 			for(int i=0;i<MAXTOP;i++)
; 74   : 			{
; 75   : 				strncpy(sClient.tp[i].Name,this->RankingChar[i].Name,10);

  00142	6a 0a		 push	 10			; 0000000aH
  00144	8d 56 f4	 lea	 edx, DWORD PTR [esi-12]
  00147	52		 push	 edx
  00148	53		 push	 ebx
  00149	e8 00 00 00 00	 call	 _strncpy

; 76   : 
; 77   : 				sClient.tp[i].Class = this->RankingChar[i].Class;

  0014e	0f b6 46 fe	 movzx	 eax, BYTE PTR [esi-2]
  00152	8b 8d 98 ee ff
	ff		 mov	 ecx, DWORD PTR tv686[ebp]

; 78   : 				sClient.tp[i].level = this->RankingChar[i].level;

  00158	0f b7 16	 movzx	 edx, WORD PTR [esi]
  0015b	88 04 31	 mov	 BYTE PTR [ecx+esi], al
  0015e	8b 85 8c ee ff
	ff		 mov	 eax, DWORD PTR tv690[ebp]

; 79   : 				sClient.tp[i].Reset = this->RankingChar[i].Reset;

  00164	0f b7 4e 02	 movzx	 ecx, WORD PTR [esi+2]
  00168	66 89 14 30	 mov	 WORD PTR [eax+esi], dx
  0016c	8b 95 90 ee ff
	ff		 mov	 edx, DWORD PTR tv694[ebp]

; 80   : 				sClient.tp[i].Grand = this->RankingChar[i].Grand;

  00172	0f b7 46 04	 movzx	 eax, WORD PTR [esi+4]
  00176	66 89 0c 32	 mov	 WORD PTR [edx+esi], cx
  0017a	8b 8d a8 ee ff
	ff		 mov	 ecx, DWORD PTR tv698[ebp]

; 81   : 				sClient.tp[i].Str = this->RankingChar[i].Str;

  00180	0f b7 56 06	 movzx	 edx, WORD PTR [esi+6]
  00184	66 89 04 31	 mov	 WORD PTR [ecx+esi], ax
  00188	8b 85 b4 ee ff
	ff		 mov	 eax, DWORD PTR tv702[ebp]

; 82   : 				sClient.tp[i].Agi = this->RankingChar[i].Agi;

  0018e	0f b7 4e 08	 movzx	 ecx, WORD PTR [esi+8]
  00192	66 89 14 30	 mov	 WORD PTR [eax+esi], dx
  00196	8b 95 a0 ee ff
	ff		 mov	 edx, DWORD PTR tv866[ebp]

; 83   : 				sClient.tp[i].Vit = this->RankingChar[i].Vit;

  0019c	0f b7 46 0a	 movzx	 eax, WORD PTR [esi+10]
  001a0	66 89 0c 32	 mov	 WORD PTR [edx+esi], cx
  001a4	8b 8d b0 ee ff
	ff		 mov	 ecx, DWORD PTR tv870[ebp]

; 84   : 				sClient.tp[i].Ene = this->RankingChar[i].Ene;

  001aa	0f b7 56 0c	 movzx	 edx, WORD PTR [esi+12]
  001ae	66 89 04 31	 mov	 WORD PTR [ecx+esi], ax
  001b2	8b 85 ac ee ff
	ff		 mov	 eax, DWORD PTR tv874[ebp]

; 85   : 				sClient.tp[i].Cmd = this->RankingChar[i].Cmd;

  001b8	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  001bb	66 89 14 30	 mov	 WORD PTR [eax+esi], dx
  001bf	8b 95 a4 ee ff
	ff		 mov	 edx, DWORD PTR tv878[ebp]

; 86   : 				sClient.tp[i].Premium = this->RankingChar[i].Premium;

  001c5	0f b6 46 14	 movzx	 eax, BYTE PTR [esi+20]
  001c9	89 0c 32	 mov	 DWORD PTR [edx+esi], ecx
  001cc	8b 8d 9c ee ff
	ff		 mov	 ecx, DWORD PTR tv882[ebp]
  001d2	88 04 31	 mov	 BYTE PTR [ecx+esi], al

; 87   : 
; 88   : 				strncpy(sClient.tp[i].Guild,this->RankingChar[i].Guild,8);

  001d5	8b 85 94 ee ff
	ff		 mov	 eax, DWORD PTR tv887[ebp]
  001db	6a 08		 push	 8
  001dd	8d 56 15	 lea	 edx, DWORD PTR [esi+21]
  001e0	52		 push	 edx
  001e1	03 c6		 add	 eax, esi
  001e3	50		 push	 eax
  001e4	e8 00 00 00 00	 call	 _strncpy
  001e9	83 c4 18	 add	 esp, 24			; 00000018H
  001ec	83 c3 2c	 add	 ebx, 44			; 0000002cH
  001ef	83 c6 2c	 add	 esi, 44			; 0000002cH
  001f2	ff 8d bc ee ff
	ff		 dec	 DWORD PTR tv940[ebp]
  001f8	0f 85 44 ff ff
	ff		 jne	 $LL3@SendClient

; 89   : 			}
; 90   : 
; 91   : 			DataSend(n,(LPBYTE)&sClient,sizeof(sClient));

  001fe	8b 95 c0 ee ff
	ff		 mov	 edx, DWORD PTR _n$203813[ebp]
  00204	68 38 11 00 00	 push	 4408			; 00001138H
  00209	8d 8d c4 ee ff
	ff		 lea	 ecx, DWORD PTR _sClient$203819[ebp]
  0020f	51		 push	 ecx
  00210	52		 push	 edx
  00211	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00216	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0021c	8b 85 b8 ee ff
	ff		 mov	 eax, DWORD PTR tv974[ebp]
  00222	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN6@SendClient:

; 63   : 
; 64   : 	for (int  n=OBJ_STARTUSERINDZT;n<OBJMAX;n++)

  00225	ff 85 c0 ee ff
	ff		 inc	 DWORD PTR _n$203813[ebp]
  0022b	05 50 2b 00 00	 add	 eax, 11088		; 00002b50H
  00230	89 85 b8 ee ff
	ff		 mov	 DWORD PTR tv974[ebp], eax
  00236	3d 80 d7 e9 09	 cmp	 eax, 166320000		; 09e9d780H
  0023b	0f 8c 03 fe ff
	ff		 jl	 $LL7@SendClient
  00241	5e		 pop	 esi
  00242	5b		 pop	 ebx
$LN5@SendClient:

; 92   : 		}
; 93   : 	}
; 94   : }

  00243	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00246	33 cd		 xor	 ecx, ebp
  00248	5f		 pop	 edi
  00249	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0024e	8b e5		 mov	 esp, ebp
  00250	5d		 pop	 ebp
  00251	c3		 ret	 0
?SendClient@cRanking@@QAEXXZ ENDP			; cRanking::SendClient
_TEXT	ENDS
PUBLIC	_aIndex$GSCopy$
PUBLIC	__$ArrayPad$
PUBLIC	?SendUser@cRanking@@QAEXH@Z			; cRanking::SendUser
; Function compile flags: /Ogtp
;	COMDAT ?SendUser@cRanking@@QAEXH@Z
_TEXT	SEGMENT
tv718 = -4460						; size = 4
tv726 = -4456						; size = 4
_aIndex$GSCopy$ = -4452					; size = 4
tv734 = -4448						; size = 4
tv883 = -4444						; size = 4
tv714 = -4440						; size = 4
tv878 = -4436						; size = 4
tv730 = -4432						; size = 4
tv874 = -4428						; size = 4
tv722 = -4424						; size = 4
tv870 = -4420						; size = 4
tv866 = -4416						; size = 4
_sClient$203833 = -4412					; size = 4408
__$ArrayPad$ = -4					; size = 4
_aIndex$ = 8						; size = 4
?SendUser@cRanking@@QAEXH@Z PROC			; cRanking::SendUser, COMDAT
; _this$ = ecx

; 97   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	b8 6c 11 00 00	 mov	 eax, 4460		; 0000116cH
  00008	e8 00 00 00 00	 call	 __chkstk
  0000d	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00012	33 c5		 xor	 eax, ebp
  00014	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 98   : 	if(!ZtConfig.ZtCustom.Top100) return;

  00017	80 3d 09 00 00
	00 00		 cmp	 BYTE PTR ?ZtConfig@@3VcZtConfigs@@A+9, 0
  0001e	8b 45 08	 mov	 eax, DWORD PTR _aIndex$[ebp]
  00021	57		 push	 edi
  00022	8b f9		 mov	 edi, ecx

; 108  : 
; 109  : 		for(int i=0;i<MAXTOP;i++)
; 110  : 		{
; 111  : 			strncpy(sClient.tp[i].Name,this->RankingChar[i].Name,10);

  00024	89 85 9c ee ff
	ff		 mov	 DWORD PTR _aIndex$GSCopy$[ebp], eax
  0002a	0f 84 d8 01 00
	00		 je	 $LN4@SendUser

; 99   : 
; 100  : 	LPOBJ lpObj = &gObj[aIndex];

  00030	69 c0 50 2b 00
	00		 imul	 eax, 11088		; 00002b50H
  00036	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj

; 101  : 
; 102  : 	if(lpObj->Connected == PLAYER_PLAYING && lpObj->OffExp == 0 && lpObj->OffTrade == 0)

  0003c	83 78 04 03	 cmp	 DWORD PTR [eax+4], 3
  00040	0f 85 c2 01 00
	00		 jne	 $LN4@SendUser
  00046	83 b8 98 22 00
	00 00		 cmp	 DWORD PTR [eax+8856], 0
  0004d	0f 85 b5 01 00
	00		 jne	 $LN4@SendUser
  00053	83 b8 ac 22 00
	00 00		 cmp	 DWORD PTR [eax+8876], 0
  0005a	0f 85 a8 01 00
	00		 jne	 $LN4@SendUser

; 103  : 	{
; 104  : 
; 105  : 		DGCharTop	sClient;
; 106  : 		ZeroMemory(&sClient,sizeof(sClient));

  00060	53		 push	 ebx
  00061	56		 push	 esi
  00062	68 38 11 00 00	 push	 4408			; 00001138H
  00067	8d 85 c4 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp]
  0006d	6a 00		 push	 0
  0006f	50		 push	 eax
  00070	e8 00 00 00 00	 call	 _memset

; 107  : 		PHeadSubSetW((LPBYTE)&sClient, 0xFA, 0x06, sizeof(sClient));

  00075	68 38 11 00 00	 push	 4408			; 00001138H
  0007a	6a 06		 push	 6
  0007c	8d 8d c4 ee ff
	ff		 lea	 ecx, DWORD PTR _sClient$203833[ebp]
  00082	68 fa 00 00 00	 push	 250			; 000000faH
  00087	51		 push	 ecx
  00088	e8 00 00 00 00	 call	 ?PHeadSubSetW@@YAXPAEEEH@Z ; PHeadSubSetW

; 112  : 			sClient.tp[i].Class = this->RankingChar[i].Class;

  0008d	8d 85 ca ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+6]
  00093	2b c7		 sub	 eax, edi
  00095	89 85 a8 ee ff
	ff		 mov	 DWORD PTR tv714[ebp], eax
  0009b	8d 9d cc ee ff
	ff		 lea	 ebx, DWORD PTR _sClient$203833[ebp+8]
  000a1	8b c3		 mov	 eax, ebx
  000a3	2b c7		 sub	 eax, edi
  000a5	89 85 94 ee ff
	ff		 mov	 DWORD PTR tv718[ebp], eax
  000ab	8d 85 ce ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+10]
  000b1	2b c7		 sub	 eax, edi
  000b3	89 85 b8 ee ff
	ff		 mov	 DWORD PTR tv722[ebp], eax
  000b9	8d 85 d0 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+12]
  000bf	2b c7		 sub	 eax, edi
  000c1	89 85 98 ee ff
	ff		 mov	 DWORD PTR tv726[ebp], eax
  000c7	8d 85 d2 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+14]
  000cd	2b c7		 sub	 eax, edi
  000cf	89 85 b0 ee ff
	ff		 mov	 DWORD PTR tv730[ebp], eax
  000d5	8d 85 d4 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+16]
  000db	2b c7		 sub	 eax, edi
  000dd	89 85 a0 ee ff
	ff		 mov	 DWORD PTR tv734[ebp], eax
  000e3	8d 85 d6 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+18]
  000e9	2b c7		 sub	 eax, edi
  000eb	89 85 c0 ee ff
	ff		 mov	 DWORD PTR tv866[ebp], eax
  000f1	8d 85 d8 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+20]
  000f7	2b c7		 sub	 eax, edi
  000f9	89 85 bc ee ff
	ff		 mov	 DWORD PTR tv870[ebp], eax
  000ff	8d 85 dc ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+24]
  00105	2b c7		 sub	 eax, edi
  00107	89 85 b4 ee ff
	ff		 mov	 DWORD PTR tv874[ebp], eax
  0010d	8d 85 e0 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+28]
  00113	2b c7		 sub	 eax, edi
  00115	89 85 ac ee ff
	ff		 mov	 DWORD PTR tv878[ebp], eax
  0011b	8d 85 e1 ee ff
	ff		 lea	 eax, DWORD PTR _sClient$203833[ebp+29]
  00121	83 c4 1c	 add	 esp, 28			; 0000001cH
  00124	2b c7		 sub	 eax, edi
  00126	8d 77 0c	 lea	 esi, DWORD PTR [edi+12]
  00129	89 85 a4 ee ff
	ff		 mov	 DWORD PTR tv883[ebp], eax
  0012f	bf 64 00 00 00	 mov	 edi, 100		; 00000064H
$LL3@SendUser:

; 108  : 
; 109  : 		for(int i=0;i<MAXTOP;i++)
; 110  : 		{
; 111  : 			strncpy(sClient.tp[i].Name,this->RankingChar[i].Name,10);

  00134	6a 0a		 push	 10			; 0000000aH
  00136	8d 56 f4	 lea	 edx, DWORD PTR [esi-12]
  00139	52		 push	 edx
  0013a	53		 push	 ebx
  0013b	e8 00 00 00 00	 call	 _strncpy

; 112  : 			sClient.tp[i].Class = this->RankingChar[i].Class;

  00140	0f b6 46 fe	 movzx	 eax, BYTE PTR [esi-2]
  00144	8b 8d a8 ee ff
	ff		 mov	 ecx, DWORD PTR tv714[ebp]

; 113  : 			sClient.tp[i].level = this->RankingChar[i].level;

  0014a	0f b7 16	 movzx	 edx, WORD PTR [esi]
  0014d	88 04 31	 mov	 BYTE PTR [ecx+esi], al
  00150	8b 85 94 ee ff
	ff		 mov	 eax, DWORD PTR tv718[ebp]

; 114  : 			sClient.tp[i].Reset = this->RankingChar[i].Reset;

  00156	0f b7 4e 02	 movzx	 ecx, WORD PTR [esi+2]
  0015a	66 89 14 30	 mov	 WORD PTR [eax+esi], dx
  0015e	8b 95 b8 ee ff
	ff		 mov	 edx, DWORD PTR tv722[ebp]

; 115  : 			sClient.tp[i].Grand = this->RankingChar[i].Grand;

  00164	0f b7 46 04	 movzx	 eax, WORD PTR [esi+4]
  00168	66 89 0c 32	 mov	 WORD PTR [edx+esi], cx
  0016c	8b 8d 98 ee ff
	ff		 mov	 ecx, DWORD PTR tv726[ebp]

; 116  : 			sClient.tp[i].Str = this->RankingChar[i].Str;

  00172	0f b7 56 06	 movzx	 edx, WORD PTR [esi+6]
  00176	66 89 04 31	 mov	 WORD PTR [ecx+esi], ax
  0017a	8b 85 b0 ee ff
	ff		 mov	 eax, DWORD PTR tv730[ebp]

; 117  : 			sClient.tp[i].Agi = this->RankingChar[i].Agi;

  00180	0f b7 4e 08	 movzx	 ecx, WORD PTR [esi+8]
  00184	66 89 14 30	 mov	 WORD PTR [eax+esi], dx
  00188	8b 95 a0 ee ff
	ff		 mov	 edx, DWORD PTR tv734[ebp]

; 118  : 			sClient.tp[i].Vit = this->RankingChar[i].Vit;

  0018e	0f b7 46 0a	 movzx	 eax, WORD PTR [esi+10]
  00192	66 89 0c 32	 mov	 WORD PTR [edx+esi], cx
  00196	8b 8d c0 ee ff
	ff		 mov	 ecx, DWORD PTR tv866[ebp]

; 119  : 			sClient.tp[i].Ene = this->RankingChar[i].Ene;

  0019c	0f b7 56 0c	 movzx	 edx, WORD PTR [esi+12]
  001a0	66 89 04 31	 mov	 WORD PTR [ecx+esi], ax
  001a4	8b 85 bc ee ff
	ff		 mov	 eax, DWORD PTR tv870[ebp]

; 120  : 			sClient.tp[i].Cmd = this->RankingChar[i].Cmd;

  001aa	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  001ad	66 89 14 30	 mov	 WORD PTR [eax+esi], dx
  001b1	8b 95 b4 ee ff
	ff		 mov	 edx, DWORD PTR tv874[ebp]

; 121  : 			sClient.tp[i].Premium = this->RankingChar[i].Premium;

  001b7	0f b6 46 14	 movzx	 eax, BYTE PTR [esi+20]
  001bb	89 0c 32	 mov	 DWORD PTR [edx+esi], ecx
  001be	8b 8d ac ee ff
	ff		 mov	 ecx, DWORD PTR tv878[ebp]
  001c4	88 04 31	 mov	 BYTE PTR [ecx+esi], al

; 122  : 			strncpy(sClient.tp[i].Guild,this->RankingChar[i].Guild,8);

  001c7	8b 85 a4 ee ff
	ff		 mov	 eax, DWORD PTR tv883[ebp]
  001cd	6a 08		 push	 8
  001cf	8d 56 15	 lea	 edx, DWORD PTR [esi+21]
  001d2	52		 push	 edx
  001d3	03 c6		 add	 eax, esi
  001d5	50		 push	 eax
  001d6	e8 00 00 00 00	 call	 _strncpy
  001db	83 c4 18	 add	 esp, 24			; 00000018H
  001de	83 c3 2c	 add	 ebx, 44			; 0000002cH
  001e1	83 c6 2c	 add	 esi, 44			; 0000002cH
  001e4	4f		 dec	 edi
  001e5	0f 85 49 ff ff
	ff		 jne	 $LL3@SendUser

; 123  : 		}
; 124  : 
; 125  : 		DataSend(aIndex,(LPBYTE)&sClient,sizeof(sClient));

  001eb	8b 95 9c ee ff
	ff		 mov	 edx, DWORD PTR _aIndex$GSCopy$[ebp]
  001f1	68 38 11 00 00	 push	 4408			; 00001138H
  001f6	8d 8d c4 ee ff
	ff		 lea	 ecx, DWORD PTR _sClient$203833[ebp]
  001fc	51		 push	 ecx
  001fd	52		 push	 edx
  001fe	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00203	83 c4 0c	 add	 esp, 12			; 0000000cH
  00206	5e		 pop	 esi
  00207	5b		 pop	 ebx
$LN4@SendUser:

; 126  : 	}
; 127  : }

  00208	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0020b	33 cd		 xor	 ecx, ebp
  0020d	5f		 pop	 edi
  0020e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00213	8b e5		 mov	 esp, ebp
  00215	5d		 pop	 ebp
  00216	c2 04 00	 ret	 4
?SendUser@cRanking@@QAEXH@Z ENDP			; cRanking::SendUser
_TEXT	ENDS
END
