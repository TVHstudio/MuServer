; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\TeleportShop.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?g_TeleportShop@@3VTeleportShop@@A		; g_TeleportShop
_BSS	SEGMENT
?g_TeleportShop@@3VTeleportShop@@A DB 0140H DUP (?)	; g_TeleportShop
_BSS	ENDS
PUBLIC	?set@PBMSG_HEAD2@@QAEXPAEEEE@Z			; PBMSG_HEAD2::set
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\include\prodef.h
;	COMDAT ?set@PBMSG_HEAD2@@QAEXPAEEEE@Z
_TEXT	SEGMENT
_lpBuf$ = 8						; size = 4
_head$ = 12						; size = 1
_sub$ = 16						; size = 1
_size$ = 20						; size = 1
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z PROC			; PBMSG_HEAD2::set, COMDAT
; _this$ = ecx

; 104  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 105  : 		lpBuf[0] = 0xC1;

  00003	8b 45 08	 mov	 eax, DWORD PTR _lpBuf$[ebp]

; 106  : 		lpBuf[1] = size;

  00006	8a 4d 14	 mov	 cl, BYTE PTR _size$[ebp]

; 107  : 		lpBuf[2] = head;

  00009	8a 55 0c	 mov	 dl, BYTE PTR _head$[ebp]
  0000c	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 108  : 		lpBuf[3] = sub;

  0000f	8a 4d 10	 mov	 cl, BYTE PTR _sub$[ebp]
  00012	c6 00 c1	 mov	 BYTE PTR [eax], 193	; 000000c1H
  00015	88 50 02	 mov	 BYTE PTR [eax+2], dl
  00018	88 48 03	 mov	 BYTE PTR [eax+3], cl

; 109  : 	};

  0001b	5d		 pop	 ebp
  0001c	c2 10 00	 ret	 16			; 00000010H
?set@PBMSG_HEAD2@@QAEXPAEEEE@Z ENDP			; PBMSG_HEAD2::set
_TEXT	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	?Init@TeleportShop@@QAEXXZ			; TeleportShop::Init
EXTRN	?gObjDel@@YAFH@Z:PROC				; gObjDel
EXTRN	_memset:PROC
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\teleportshop.cpp
;	COMDAT ?Init@TeleportShop@@QAEXXZ
_TEXT	SEGMENT
?Init@TeleportShop@@QAEXXZ PROC				; TeleportShop::Init, COMDAT
; _this$ = ecx

; 17   : {

  00000	53		 push	 ebx

; 18   : 	this->Enable = 0;

  00001	33 db		 xor	 ebx, ebx
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 19   : 	this->EventTime = 0;
; 20   : 	this->Tick = 0;
; 21   : 	this->Start = false;
; 22   : 	this->TimeLoaded = 0;
; 23   : 	if(this->IndexNPC >= 0)

  00006	8b 86 e0 00 00
	00		 mov	 eax, DWORD PTR [esi+224]
  0000c	88 1e		 mov	 BYTE PTR [esi], bl
  0000e	89 5e 04	 mov	 DWORD PTR [esi+4], ebx
  00011	89 9e e4 00 00
	00		 mov	 DWORD PTR [esi+228], ebx
  00017	88 9e e8 00 00
	00		 mov	 BYTE PTR [esi+232], bl
  0001d	89 9e 3c 01 00
	00		 mov	 DWORD PTR [esi+316], ebx
  00023	3b c3		 cmp	 eax, ebx
  00025	7c 09		 jl	 SHORT $LN1@Init

; 24   : 	{
; 25   : 		gObjDel(this->IndexNPC);

  00027	50		 push	 eax
  00028	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  0002d	83 c4 04	 add	 esp, 4
$LN1@Init:

; 26   : 	}
; 27   : 	this->IndexNPC = -1;
; 28   : 
; 29   : 	ZeroMemory(&this->DataTime, sizeof(DataTime));

  00030	6a 50		 push	 80			; 00000050H
  00032	c7 86 e0 00 00
	00 ff ff ff ff	 mov	 DWORD PTR [esi+224], -1
  0003c	53		 push	 ebx
  0003d	81 c6 ec 00 00
	00		 add	 esi, 236		; 000000ecH
  00043	56		 push	 esi
  00044	e8 00 00 00 00	 call	 _memset
  00049	83 c4 0c	 add	 esp, 12			; 0000000cH
  0004c	5e		 pop	 esi
  0004d	5b		 pop	 ebx

; 30   : }

  0004e	c3		 ret	 0
?Init@TeleportShop@@QAEXXZ ENDP				; TeleportShop::Init
_TEXT	ENDS
PUBLIC	??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@		; `string'
PUBLIC	??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@	; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	??_C@_0L@NDGLNMKE@MessageEnd?$AA@		; `string'
PUBLIC	??_C@_0N@JBCJKKCC@MessageStart?$AA@		; `string'
PUBLIC	??_C@_0L@DHJBJFLO@Teleport_Y?$AA@		; `string'
PUBLIC	??_C@_0L@COIKKEPP@Teleport_X?$AA@		; `string'
PUBLIC	??_C@_0N@EDHCMLEF@Teleport_Map?$AA@		; `string'
PUBLIC	??_C@_0N@IAAFIODM@Teleport_NPC?$AA@		; `string'
PUBLIC	??_C@_09OHFGCBJB@EventTime?$AA@			; `string'
PUBLIC	??_C@_06CNKIADGI@ZtTeam?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Load@TeleportShop@@QAEXXZ			; TeleportShop::Load
EXTRN	_fclose:PROC
EXTRN	_sscanf:PROC
EXTRN	?Zt_IsBadFileLine@@YA_NPADAAH@Z:PROC		; Zt_IsBadFileLine
EXTRN	_fgets:PROC
EXTRN	_feof:PROC
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	_fopen:PROC
EXTRN	__imp__GetPrivateProfileStringA@24:PROC
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@ DB '%d %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@
CONST	SEGMENT
??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@ DB 'LOAD FILE ERROR', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@NDGLNMKE@MessageEnd?$AA@
CONST	SEGMENT
??_C@_0L@NDGLNMKE@MessageEnd?$AA@ DB 'MessageEnd', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@JBCJKKCC@MessageStart?$AA@
CONST	SEGMENT
??_C@_0N@JBCJKKCC@MessageStart?$AA@ DB 'MessageStart', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@DHJBJFLO@Teleport_Y?$AA@
CONST	SEGMENT
??_C@_0L@DHJBJFLO@Teleport_Y?$AA@ DB 'Teleport_Y', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@COIKKEPP@Teleport_X?$AA@
CONST	SEGMENT
??_C@_0L@COIKKEPP@Teleport_X?$AA@ DB 'Teleport_X', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@EDHCMLEF@Teleport_Map?$AA@
CONST	SEGMENT
??_C@_0N@EDHCMLEF@Teleport_Map?$AA@ DB 'Teleport_Map', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@IAAFIODM@Teleport_NPC?$AA@
CONST	SEGMENT
??_C@_0N@IAAFIODM@Teleport_NPC?$AA@ DB 'Teleport_NPC', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_09OHFGCBJB@EventTime?$AA@
CONST	SEGMENT
??_C@_09OHFGCBJB@EventTime?$AA@ DB 'EventTime', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_06CNKIADGI@ZtTeam?$AA@
CONST	SEGMENT
??_C@_06CNKIADGI@ZtTeam?$AA@ DB 'ZtTeam', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
CONST	SEGMENT
??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@ DB '..\Data\Zt'
	DB	'Data\Events\TeleportShop.ini', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Load@TeleportShop@@QAEXXZ
_TEXT	SEGMENT
_n$202551 = -272					; size = 8
_Flag$ = -264						; size = 4
_Buff$ = -260						; size = 256
__$ArrayPad$ = -4					; size = 4
?Load@TeleportShop@@QAEXXZ PROC				; TeleportShop::Load, COMDAT
; _this$ = ecx

; 34   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 10 01 00
	00		 sub	 esp, 272		; 00000110H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi
  00016	8b f1		 mov	 esi, ecx

; 35   : 	this->Init();

  00018	e8 00 00 00 00	 call	 ?Init@TeleportShop@@QAEXXZ ; TeleportShop::Init

; 36   : 
; 37   : 	//if( g_ZtLicense.CheckUser(feqan) == false)
; 38   : 	//{
; 39   : 	//	return;
; 40   : 	//}
; 41   : 
; 42   : 	this->Enable = GetPrivateProfileInt("ZtTeam","Enable",0,TELEPORT_SHOP_DIR);

  0001d	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileIntA@16
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  00028	33 db		 xor	 ebx, ebx
  0002a	53		 push	 ebx
  0002b	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  00030	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00035	ff d7		 call	 edi

; 43   : 	this->EventTime = GetPrivateProfileInt("ZtTeam","EventTime",0,TELEPORT_SHOP_DIR) * 60;

  00037	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  0003c	53		 push	 ebx
  0003d	85 c0		 test	 eax, eax
  0003f	68 00 00 00 00	 push	 OFFSET ??_C@_09OHFGCBJB@EventTime?$AA@
  00044	0f 95 c0	 setne	 al
  00047	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0004c	88 06		 mov	 BYTE PTR [esi], al
  0004e	ff d7		 call	 edi
  00050	8b c8		 mov	 ecx, eax
  00052	c1 e1 04	 shl	 ecx, 4

; 44   : 	this->Teleport_NPC = GetPrivateProfileInt("ZtTeam","Teleport_NPC",379,TELEPORT_SHOP_DIR);

  00055	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  0005a	2b c8		 sub	 ecx, eax
  0005c	68 7b 01 00 00	 push	 379			; 0000017bH
  00061	03 c9		 add	 ecx, ecx
  00063	68 00 00 00 00	 push	 OFFSET ??_C@_0N@IAAFIODM@Teleport_NPC?$AA@
  00068	03 c9		 add	 ecx, ecx
  0006a	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  0006f	89 4e 04	 mov	 DWORD PTR [esi+4], ecx
  00072	ff d7		 call	 edi

; 45   : 	this->Teleport_Map = GetPrivateProfileInt("ZtTeam","Teleport_Map",0,TELEPORT_SHOP_DIR);

  00074	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  00079	53		 push	 ebx
  0007a	68 00 00 00 00	 push	 OFFSET ??_C@_0N@EDHCMLEF@Teleport_Map?$AA@
  0007f	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00084	89 46 08	 mov	 DWORD PTR [esi+8], eax
  00087	ff d7		 call	 edi

; 46   : 	this->Teleport_X = GetPrivateProfileInt("ZtTeam","Teleport_X",0,TELEPORT_SHOP_DIR);

  00089	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  0008e	53		 push	 ebx
  0008f	68 00 00 00 00	 push	 OFFSET ??_C@_0L@COIKKEPP@Teleport_X?$AA@
  00094	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  00099	89 46 0c	 mov	 DWORD PTR [esi+12], eax
  0009c	ff d7		 call	 edi

; 47   : 	this->Teleport_Y = GetPrivateProfileInt("ZtTeam","Teleport_Y",0,TELEPORT_SHOP_DIR);

  0009e	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  000a3	53		 push	 ebx
  000a4	68 00 00 00 00	 push	 OFFSET ??_C@_0L@DHJBJFLO@Teleport_Y?$AA@
  000a9	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000ae	89 46 10	 mov	 DWORD PTR [esi+16], eax
  000b1	ff d7		 call	 edi

; 48   : 
; 49   : 	GetPrivateProfileString("ZtTeam", "MessageStart","MessageStart",this->MessageStart,100,TELEPORT_SHOP_DIR);

  000b3	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileStringA@24
  000b9	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  000be	6a 64		 push	 100			; 00000064H
  000c0	8d 56 18	 lea	 edx, DWORD PTR [esi+24]
  000c3	52		 push	 edx
  000c4	68 00 00 00 00	 push	 OFFSET ??_C@_0N@JBCJKKCC@MessageStart?$AA@
  000c9	68 00 00 00 00	 push	 OFFSET ??_C@_0N@JBCJKKCC@MessageStart?$AA@
  000ce	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000d3	89 46 14	 mov	 DWORD PTR [esi+20], eax
  000d6	ff d7		 call	 edi

; 50   : 	GetPrivateProfileString("ZtTeam", "MessageEnd","MessageEnd",this->MessageEnd,100,TELEPORT_SHOP_DIR);

  000d8	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  000dd	6a 64		 push	 100			; 00000064H
  000df	8d 46 7c	 lea	 eax, DWORD PTR [esi+124]
  000e2	50		 push	 eax
  000e3	68 00 00 00 00	 push	 OFFSET ??_C@_0L@NDGLNMKE@MessageEnd?$AA@
  000e8	68 00 00 00 00	 push	 OFFSET ??_C@_0L@NDGLNMKE@MessageEnd?$AA@
  000ed	68 00 00 00 00	 push	 OFFSET ??_C@_06CNKIADGI@ZtTeam?$AA@
  000f2	ff d7		 call	 edi

; 51   : 
; 52   : 	FILE *file = fopen(TELEPORT_SHOP_DIR,"r");

  000f4	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  000f9	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  000fe	e8 00 00 00 00	 call	 _fopen
  00103	8b f8		 mov	 edi, eax
  00105	83 c4 08	 add	 esp, 8

; 53   : 
; 54   : 	/*char szBuf[256] = { 0 };
; 55   : 	sprintf(szBuf, "FILE SIZE: %d", file->_charbuf);
; 56   : 	MessageBoxA(0,szBuf,"LOAD FILE !!!",0);*/
; 57   : 
; 58   : 	if(file == NULL)

  00108	3b fb		 cmp	 edi, ebx
  0010a	75 23		 jne	 SHORT $LN6@Load

; 59   : 	{
; 60   : 		MessageBoxA(0,TELEPORT_SHOP_DIR,"LOAD FILE ERROR",0);

  0010c	53		 push	 ebx
  0010d	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@PIOFNAIM@LOAD?5FILE?5ERROR?$AA@
  00112	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@IBPCJOPD@?4?4?2Data?2ZtData?2Events?2TeleportSh@
  00117	53		 push	 ebx
  00118	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__MessageBoxA@16
  0011e	5f		 pop	 edi
  0011f	5e		 pop	 esi
  00120	5b		 pop	 ebx

; 89   : }

  00121	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00124	33 cd		 xor	 ecx, ebp
  00126	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0012b	8b e5		 mov	 esp, ebp
  0012d	5d		 pop	 ebp
  0012e	c3		 ret	 0
$LN6@Load:

; 61   : 		return;
; 62   : 	}
; 63   : 
; 64   : 	char Buff[256];
; 65   : 	int Flag = 0;
; 66   : 
; 67   : 	this->TimeLoaded = 0;
; 68   : 
; 69   : 	while(!feof(file)) 

  0012f	57		 push	 edi
  00130	89 9d f8 fe ff
	ff		 mov	 DWORD PTR _Flag$[ebp], ebx
  00136	89 9e 3c 01 00
	00		 mov	 DWORD PTR [esi+316], ebx
  0013c	e8 00 00 00 00	 call	 _feof
  00141	83 c4 04	 add	 esp, 4
  00144	85 c0		 test	 eax, eax
  00146	0f 85 a0 00 00
	00		 jne	 $LN11@Load
  0014c	8d 58 01	 lea	 ebx, DWORD PTR [eax+1]
  0014f	90		 npad	 1
$LL5@Load:

; 70   : 	{
; 71   : 		fgets(Buff,256,file);

  00150	57		 push	 edi
  00151	8d 8d fc fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  00157	68 00 01 00 00	 push	 256			; 00000100H
  0015c	51		 push	 ecx
  0015d	e8 00 00 00 00	 call	 _fgets

; 72   : 		if(Zt_IsBadFileLine(Buff, Flag))

  00162	8d 95 f8 fe ff
	ff		 lea	 edx, DWORD PTR _Flag$[ebp]
  00168	52		 push	 edx
  00169	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  0016f	50		 push	 eax
  00170	e8 00 00 00 00	 call	 ?Zt_IsBadFileLine@@YA_NPADAAH@Z ; Zt_IsBadFileLine
  00175	83 c4 14	 add	 esp, 20			; 00000014H
  00178	84 c0		 test	 al, al
  0017a	75 5f		 jne	 SHORT $LN2@Load

; 73   : 			continue;
; 74   : 
; 75   : 		if(Flag == 1)

  0017c	39 9d f8 fe ff
	ff		 cmp	 DWORD PTR _Flag$[ebp], ebx
  00182	75 57		 jne	 SHORT $LN2@Load

; 76   : 		{
; 77   : 			if(TimeLoaded >= 10)

  00184	83 be 3c 01 00
	00 0a		 cmp	 DWORD PTR [esi+316], 10	; 0000000aH
  0018b	7d 5f		 jge	 SHORT $LN11@Load

; 78   : 			{
; 79   : 				break;
; 80   : 			}
; 81   : 			int n[2];
; 82   : 			sscanf(Buff, "%d %d", &n[0], &n[1]);

  0018d	8d 8d f4 fe ff
	ff		 lea	 ecx, DWORD PTR _n$202551[ebp+4]
  00193	51		 push	 ecx
  00194	8d 95 f0 fe ff
	ff		 lea	 edx, DWORD PTR _n$202551[ebp]
  0019a	52		 push	 edx
  0019b	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  001a1	68 00 00 00 00	 push	 OFFSET ??_C@_05OKMLJOMC@?$CFd?5?$CFd?$AA@
  001a6	50		 push	 eax
  001a7	e8 00 00 00 00	 call	 _sscanf

; 83   : 			this->DataTime[this->TimeLoaded].Hour  = n[0];

  001ac	8b 8e 3c 01 00
	00		 mov	 ecx, DWORD PTR [esi+316]
  001b2	8b 95 f0 fe ff
	ff		 mov	 edx, DWORD PTR _n$202551[ebp]
  001b8	89 94 ce ec 00
	00 00		 mov	 DWORD PTR [esi+ecx*8+236], edx

; 84   : 			this->DataTime[this->TimeLoaded].Min   = n[1];

  001bf	8b 86 3c 01 00
	00		 mov	 eax, DWORD PTR [esi+316]
  001c5	8b 8d f4 fe ff
	ff		 mov	 ecx, DWORD PTR _n$202551[ebp+4]
  001cb	83 c4 10	 add	 esp, 16			; 00000010H
  001ce	89 8c c6 f0 00
	00 00		 mov	 DWORD PTR [esi+eax*8+240], ecx

; 85   : 			this->TimeLoaded++;

  001d5	01 9e 3c 01 00
	00		 add	 DWORD PTR [esi+316], ebx
$LN2@Load:

; 61   : 		return;
; 62   : 	}
; 63   : 
; 64   : 	char Buff[256];
; 65   : 	int Flag = 0;
; 66   : 
; 67   : 	this->TimeLoaded = 0;
; 68   : 
; 69   : 	while(!feof(file)) 

  001db	57		 push	 edi
  001dc	e8 00 00 00 00	 call	 _feof
  001e1	83 c4 04	 add	 esp, 4
  001e4	85 c0		 test	 eax, eax
  001e6	0f 84 64 ff ff
	ff		 je	 $LL5@Load
$LN11@Load:

; 86   : 		}
; 87   : 	}
; 88   : 	fclose(file);

  001ec	57		 push	 edi
  001ed	e8 00 00 00 00	 call	 _fclose

; 89   : }

  001f2	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001f5	83 c4 04	 add	 esp, 4
  001f8	5f		 pop	 edi
  001f9	5e		 pop	 esi
  001fa	33 cd		 xor	 ecx, ebp
  001fc	5b		 pop	 ebx
  001fd	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00202	8b e5		 mov	 esp, ebp
  00204	5d		 pop	 ebp
  00205	c3		 ret	 0
?Load@TeleportShop@@QAEXXZ ENDP				; TeleportShop::Load
_TEXT	ENDS
EXTRN	__time64:PROC
; Function compile flags: /Ogtp
; File d:\program files (x86)\microsoft visual studio 10.0\vc\include\time.inl
;	COMDAT _time
_TEXT	SEGMENT
_time	PROC						; COMDAT
; __Time$ = eax

; 133  :     return _time64(_Time);

  00000	50		 push	 eax
  00001	e8 00 00 00 00	 call	 __time64
  00006	83 c4 04	 add	 esp, 4

; 134  : }

  00009	c3		 ret	 0
_time	ENDP
_TEXT	ENDS
PUBLIC	?GC_CloseWindowShop@TeleportShop@@QAEXXZ	; TeleportShop::GC_CloseWindowShop
EXTRN	?DataSend@@YAHHPAEK@Z:PROC			; DataSend
EXTRN	?gObj@@3PAUOBJECTSTRUCT@@A:DWORD		; gObj
; Function compile flags: /Ogtp
; File e:\work\tranet_version\gs\gameserver\teleportshop.cpp
;	COMDAT ?GC_CloseWindowShop@TeleportShop@@QAEXXZ
_TEXT	SEGMENT
_rSend$202588 = -12					; size = 5
_this$ = -4						; size = 4
?GC_CloseWindowShop@TeleportShop@@QAEXXZ PROC		; TeleportShop::GC_CloseWindowShop, COMDAT
; _this$ = ecx

; 180  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH

; 181  : 	for(int n=OBJ_STARTUSERINDZT;n<OBJMAX;n++)

  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0000b	56		 push	 esi
  0000c	57		 push	 edi
  0000d	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00010	bf b0 36 00 00	 mov	 edi, 14000		; 000036b0H
  00015	be 00 a7 40 09	 mov	 esi, 155232000		; 0940a700H
  0001a	8d 9b 00 00 00
	00		 npad	 6
$LL12@GC_CloseWi:

; 182  : 	{
; 183  : 		LPOBJ lpSearch = &gObj[n];
; 184  : 		if(lpSearch->Connected < PLAYER_PLAYING) 

  00020	83 7c 06 04 03	 cmp	 DWORD PTR [esi+eax+4], 3
  00025	7c 36		 jl	 SHORT $LN4@GC_CloseWi

; 185  : 		{
; 186  : 			continue;
; 187  : 		}
; 188  : 		if(lpSearch->NPC == this->Teleport_NPC)

  00027	8b 8c 06 a4 22
	00 00		 mov	 ecx, DWORD PTR [esi+eax+8868]
  0002e	8b 55 fc	 mov	 edx, DWORD PTR _this$[ebp]
  00031	3b 4a 08	 cmp	 ecx, DWORD PTR [edx+8]
  00034	75 27		 jne	 SHORT $LN4@GC_CloseWi

; 189  : 		{
; 190  : 			// -> GC Close Wingosw packet 21
; 191  : 			GC_SHOP_CLOSE rSend;
; 192  : 			ZeroMemory(&rSend,sizeof(rSend));

  00036	33 c0		 xor	 eax, eax
  00038	89 45 f4	 mov	 DWORD PTR _rSend$202588[ebp], eax
  0003b	88 45 f8	 mov	 BYTE PTR _rSend$202588[ebp+4], al

; 193  : 			rSend.h.set((LPBYTE)&rSend, 0xFB, 21, sizeof(rSend));
; 194  : 			rSend.Close = 1;
; 195  : 			DataSend(n,(LPBYTE)&rSend,sizeof(rSend));

  0003e	6a 05		 push	 5
  00040	8d 45 f4	 lea	 eax, DWORD PTR _rSend$202588[ebp]
  00043	50		 push	 eax
  00044	57		 push	 edi
  00045	c7 45 f4 c1 05
	fb 15		 mov	 DWORD PTR _rSend$202588[ebp], 368772545 ; 15fb05c1H
  0004c	c6 45 f8 01	 mov	 BYTE PTR _rSend$202588[ebp+4], 1
  00050	e8 00 00 00 00	 call	 ?DataSend@@YAHHPAEK@Z	; DataSend
  00055	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005a	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN4@GC_CloseWi:

; 181  : 	for(int n=OBJ_STARTUSERINDZT;n<OBJMAX;n++)

  0005d	81 c6 50 2b 00
	00		 add	 esi, 11088		; 00002b50H
  00063	47		 inc	 edi
  00064	81 fe 80 d7 e9
	09		 cmp	 esi, 166320000		; 09e9d780H
  0006a	7c b4		 jl	 SHORT $LL12@GC_CloseWi
  0006c	5f		 pop	 edi
  0006d	5e		 pop	 esi

; 196  : 		}
; 197  : 	}
; 198  : }

  0006e	8b e5		 mov	 esp, ebp
  00070	5d		 pop	 ebp
  00071	c3		 ret	 0
?GC_CloseWindowShop@TeleportShop@@QAEXXZ ENDP		; TeleportShop::GC_CloseWindowShop
_TEXT	ENDS
PUBLIC	?EventStart@TeleportShop@@QAEXXZ		; TeleportShop::EventStart
EXTRN	?MessaageAllGlobal@@YAXPADZZ:PROC		; MessaageAllGlobal
EXTRN	?gObjSetMonster@@YAHHH@Z:PROC			; gObjSetMonster
EXTRN	__imp__GetTickCount@0:PROC
EXTRN	?gObjAddMonster@@YAFH@Z:PROC			; gObjAddMonster
EXTRN	_srand:PROC
; Function compile flags: /Ogtp
;	COMDAT ?EventStart@TeleportShop@@QAEXXZ
_TEXT	SEGMENT
_result$ = -8						; size = 4
_Y$ = -4						; size = 4
?EventStart@TeleportShop@@QAEXXZ PROC			; TeleportShop::EventStart, COMDAT
; _this$ = ecx

; 128  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 129  : 	srand(time(NULL));

  00009	6a 00		 push	 0
  0000b	8b f9		 mov	 edi, ecx
  0000d	e8 00 00 00 00	 call	 __time64
  00012	50		 push	 eax
  00013	e8 00 00 00 00	 call	 _srand

; 130  : 
; 131  : 	int X = this->Teleport_X;
; 132  : 	int Y = this->Teleport_Y;
; 133  : 
; 134  : 	int result = gObjAddMonster(this->Teleport_Map);

  00018	8b 4f 0c	 mov	 ecx, DWORD PTR [edi+12]
  0001b	8b 47 14	 mov	 eax, DWORD PTR [edi+20]
  0001e	8b 5f 10	 mov	 ebx, DWORD PTR [edi+16]
  00021	51		 push	 ecx
  00022	89 45 fc	 mov	 DWORD PTR _Y$[ebp], eax
  00025	e8 00 00 00 00	 call	 ?gObjAddMonster@@YAFH@Z	; gObjAddMonster
  0002a	0f bf f0	 movsx	 esi, ax
  0002d	83 c4 0c	 add	 esp, 12			; 0000000cH
  00030	89 75 f8	 mov	 DWORD PTR _result$[ebp], esi

; 135  : 
; 136  : 	if(result >= 0 && result < OBJ_MAXMONSTER)

  00033	81 fe c7 32 00
	00		 cmp	 esi, 12999		; 000032c7H
  00039	0f 87 06 01 00
	00		 ja	 $LN1@EventStart

; 137  : 	{
; 138  : 		gObj[result].m_PosNum = (WORD)-1;

  0003f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00044	69 f6 50 2b 00
	00		 imul	 esi, 11088		; 00002b50H
  0004a	83 ca ff	 or	 edx, -1
  0004d	66 89 94 06 b0
	03 00 00	 mov	 WORD PTR [esi+eax+944], dx

; 139  : 		gObj[result].MapNumber = this->Teleport_Map;

  00055	8a 4f 0c	 mov	 cl, BYTE PTR [edi+12]
  00058	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0005e	88 8c 16 49 01
	00 00		 mov	 BYTE PTR [esi+edx+329], cl

; 140  : 		gObj[result].X = X;

  00065	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0006a	66 89 9c 06 44
	01 00 00	 mov	 WORD PTR [esi+eax+324], bx

; 141  : 		gObj[result].Y = Y;

  00072	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00078	8b 45 fc	 mov	 eax, DWORD PTR _Y$[ebp]
  0007b	66 89 84 0e 46
	01 00 00	 mov	 WORD PTR [esi+ecx+326], ax

; 142  : 		gObj[result].TX = X;

  00083	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00089	66 89 9c 16 7c
	01 00 00	 mov	 WORD PTR [esi+edx+380], bx

; 143  : 		gObj[result].TY = Y;

  00091	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00097	66 89 84 0e 7e
	01 00 00	 mov	 WORD PTR [esi+ecx+382], ax

; 144  : 		gObj[result].m_OldX = X;

  0009f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000a5	66 89 9c 16 78
	01 00 00	 mov	 WORD PTR [esi+edx+376], bx

; 145  : 		gObj[result].m_OldY = Y;

  000ad	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000b3	66 89 84 0e 7a
	01 00 00	 mov	 WORD PTR [esi+ecx+378], ax

; 146  : 		gObj[result].StartX = X;

  000bb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000c1	88 9c 16 76 01
	00 00		 mov	 BYTE PTR [esi+edx+374], bl

; 147  : 		gObj[result].StartY = Y;

  000c8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000ce	88 84 0e 77 01
	00 00		 mov	 BYTE PTR [esi+ecx+375], al

; 148  : 		gObj[result].MaxRegenTime = 0;

  000d5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000db	c7 84 16 ac 03
	00 00 00 00 00
	00		 mov	 DWORD PTR [esi+edx+940], 0

; 149  : 		gObj[result].Dir = 3;//rand()%8;

  000e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000eb	c6 84 06 48 01
	00 00 03	 mov	 BYTE PTR [esi+eax+328], 3

; 150  : 		gObj[result].RegenTime = GetTickCount();

  000f3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetTickCount@0
  000f9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  000ff	89 84 0e a8 03
	00 00		 mov	 DWORD PTR [esi+ecx+936], eax

; 151  : 
; 152  : 		gObj[result].m_ActState.Emotion       = 1;

  00106	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  0010b	8b 94 06 18 02
	00 00		 mov	 edx, DWORD PTR [esi+eax+536]
  00112	81 e2 1f ff ff
	ff		 and	 edx, -225		; ffffff1fH
  00118	83 ca 10	 or	 edx, 16			; 00000010H
  0011b	89 94 06 18 02
	00 00		 mov	 DWORD PTR [esi+eax+536], edx

; 153  : 		gObj[result].m_ActState.EmotionCount  = 15;

  00122	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gObj@@3PAUOBJECTSTRUCT@@A ; gObj
  00127	c6 84 06 19 02
	00 00 0f	 mov	 BYTE PTR [esi+eax+537], 15 ; 0000000fH

; 154  : 
; 155  : 		gObjSetMonster(result,this->Teleport_NPC);

  0012f	8b 4f 08	 mov	 ecx, DWORD PTR [edi+8]
  00132	8b 75 f8	 mov	 esi, DWORD PTR _result$[ebp]
  00135	51		 push	 ecx
  00136	56		 push	 esi
  00137	e8 00 00 00 00	 call	 ?gObjSetMonster@@YAHHH@Z ; gObjSetMonster
  0013c	83 c4 08	 add	 esp, 8

; 156  : 
; 157  : 		this->IndexNPC = result;

  0013f	89 b7 e0 00 00
	00		 mov	 DWORD PTR [edi+224], esi
$LN1@EventStart:

; 158  : 	}
; 159  : 
; 160  : 	MessaageAllGlobal(this->MessageStart);

  00145	8d 57 18	 lea	 edx, DWORD PTR [edi+24]
  00148	52		 push	 edx
  00149	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  0014e	83 c4 04	 add	 esp, 4

; 161  : 	this->Start = true;

  00151	c6 87 e8 00 00
	00 01		 mov	 BYTE PTR [edi+232], 1
  00158	5f		 pop	 edi
  00159	5e		 pop	 esi
  0015a	5b		 pop	 ebx

; 162  : }

  0015b	8b e5		 mov	 esp, ebp
  0015d	5d		 pop	 ebp
  0015e	c3		 ret	 0
?EventStart@TeleportShop@@QAEXXZ ENDP			; TeleportShop::EventStart
_TEXT	ENDS
PUBLIC	?EventEnd@TeleportShop@@QAEXXZ			; TeleportShop::EventEnd
; Function compile flags: /Ogtp
;	COMDAT ?EventEnd@TeleportShop@@QAEXXZ
_TEXT	SEGMENT
?EventEnd@TeleportShop@@QAEXXZ PROC			; TeleportShop::EventEnd, COMDAT
; _this$ = ecx

; 166  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 167  : 	this->Start = false;
; 168  : 	this->Tick = 0;
; 169  : 	if(this->IndexNPC >= 0)

  00003	8b 86 e0 00 00
	00		 mov	 eax, DWORD PTR [esi+224]
  00009	33 c9		 xor	 ecx, ecx
  0000b	88 8e e8 00 00
	00		 mov	 BYTE PTR [esi+232], cl
  00011	89 8e e4 00 00
	00		 mov	 DWORD PTR [esi+228], ecx
  00017	3b c1		 cmp	 eax, ecx
  00019	7c 09		 jl	 SHORT $LN1@EventEnd

; 170  : 	{
; 171  : 		gObjDel(this->IndexNPC);

  0001b	50		 push	 eax
  0001c	e8 00 00 00 00	 call	 ?gObjDel@@YAFH@Z	; gObjDel
  00021	83 c4 04	 add	 esp, 4
$LN1@EventEnd:

; 172  : 	}
; 173  : 	this->IndexNPC = -1;
; 174  : 	MessaageAllGlobal(this->MessageEnd);

  00024	8d 46 7c	 lea	 eax, DWORD PTR [esi+124]
  00027	50		 push	 eax
  00028	c7 86 e0 00 00
	00 ff ff ff ff	 mov	 DWORD PTR [esi+224], -1
  00032	e8 00 00 00 00	 call	 ?MessaageAllGlobal@@YAXPADZZ ; MessaageAllGlobal
  00037	83 c4 04	 add	 esp, 4

; 175  : 	this->GC_CloseWindowShop();

  0003a	8b ce		 mov	 ecx, esi
  0003c	5e		 pop	 esi
  0003d	e9 00 00 00 00	 jmp	 ?GC_CloseWindowShop@TeleportShop@@QAEXXZ ; TeleportShop::GC_CloseWindowShop
?EventEnd@TeleportShop@@QAEXXZ ENDP			; TeleportShop::EventEnd
_TEXT	ENDS
PUBLIC	__$ArrayPad$
PUBLIC	?TickTime@TeleportShop@@QAEXXZ			; TeleportShop::TickTime
EXTRN	?GetSecond@CTimerZt@@QAEHXZ:PROC		; CTimerZt::GetSecond
EXTRN	?g_TimerZt@@3VCTimerZt@@A:DWORD			; g_TimerZt
EXTRN	__imp__GetLocalTime@4:PROC
; Function compile flags: /Ogtp
;	COMDAT ?TickTime@TeleportShop@@QAEXXZ
_TEXT	SEGMENT
_t$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
?TickTime@TeleportShop@@QAEXXZ PROC			; TeleportShop::TickTime, COMDAT
; _this$ = ecx

; 93   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b f1		 mov	 esi, ecx

; 94   : 	if(!this->Enable)

  00013	80 3e 00	 cmp	 BYTE PTR [esi], 0
  00016	0f 84 96 00 00
	00		 je	 $LN2@TickTime

; 95   : 		return;
; 96   : 
; 97   : 	if(this->Start == true)

  0001c	b8 01 00 00 00	 mov	 eax, 1
  00021	38 86 e8 00 00
	00		 cmp	 BYTE PTR [esi+232], al
  00027	75 25		 jne	 SHORT $LN7@TickTime

; 98   : 	{
; 99   : 		this->Tick++;

  00029	01 86 e4 00 00
	00		 add	 DWORD PTR [esi+228], eax
  0002f	8b 86 e4 00 00
	00		 mov	 eax, DWORD PTR [esi+228]

; 100  : 		if(this->Tick >= this->EventTime)

  00035	3b 46 04	 cmp	 eax, DWORD PTR [esi+4]
  00038	7c 78		 jl	 SHORT $LN2@TickTime

; 101  : 		{
; 102  : 			this->EventEnd();

  0003a	e8 00 00 00 00	 call	 ?EventEnd@TeleportShop@@QAEXXZ ; TeleportShop::EventEnd
  0003f	5e		 pop	 esi

; 120  : 				return;
; 121  : 			}
; 122  : 		}
; 123  : 	}
; 124  : }

  00040	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00043	33 cd		 xor	 ecx, ebp
  00045	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0004a	8b e5		 mov	 esp, ebp
  0004c	5d		 pop	 ebp
  0004d	c3		 ret	 0
$LN7@TickTime:

; 103  : 		}
; 104  : 		return;
; 105  : 	}
; 106  : 
; 107  : 	SYSTEMTIME t;
; 108  : 	GetLocalTime(&t);

  0004e	8d 45 ec	 lea	 eax, DWORD PTR _t$[ebp]
  00051	50		 push	 eax
  00052	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetLocalTime@4

; 109  : #if(NEWTIMEREX)
; 110  : 	if(g_TimerZt.GetSecond() == 00)

  00058	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_TimerZt@@3VCTimerZt@@A ; g_TimerZt
  0005d	e8 00 00 00 00	 call	 ?GetSecond@CTimerZt@@QAEHXZ ; CTimerZt::GetSecond
  00062	85 c0		 test	 eax, eax
  00064	75 4c		 jne	 SHORT $LN2@TickTime

; 111  : #else
; 112  : 	if(t.wSecond == 00)
; 113  : #endif
; 114  : 	{
; 115  : 		for(int i = 0; i < this->TimeLoaded; i++)

  00066	33 c9		 xor	 ecx, ecx
  00068	39 8e 3c 01 00
	00		 cmp	 DWORD PTR [esi+316], ecx
  0006e	7e 42		 jle	 SHORT $LN2@TickTime
  00070	0f b7 55 f4	 movzx	 edx, WORD PTR _t$[ebp+8]
  00074	57		 push	 edi
  00075	66 8b 7d f6	 mov	 di, WORD PTR _t$[ebp+10]
  00079	8d 86 f0 00 00
	00		 lea	 eax, DWORD PTR [esi+240]
  0007f	53		 push	 ebx
$LL4@TickTime:

; 116  : 		{
; 117  : 			if(this->DataTime[i].Hour == t.wHour && this->DataTime[i].Min == t.wMinute)

  00080	39 50 fc	 cmp	 DWORD PTR [eax-4], edx
  00083	75 07		 jne	 SHORT $LN3@TickTime
  00085	0f b7 df	 movzx	 ebx, di
  00088	39 18		 cmp	 DWORD PTR [eax], ebx
  0008a	74 1d		 je	 SHORT $LN12@TickTime
$LN3@TickTime:

; 111  : #else
; 112  : 	if(t.wSecond == 00)
; 113  : #endif
; 114  : 	{
; 115  : 		for(int i = 0; i < this->TimeLoaded; i++)

  0008c	41		 inc	 ecx
  0008d	83 c0 08	 add	 eax, 8
  00090	3b 8e 3c 01 00
	00		 cmp	 ecx, DWORD PTR [esi+316]
  00096	7c e8		 jl	 SHORT $LL4@TickTime
  00098	5b		 pop	 ebx
  00099	5f		 pop	 edi
  0009a	5e		 pop	 esi

; 120  : 				return;
; 121  : 			}
; 122  : 		}
; 123  : 	}
; 124  : }

  0009b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0009e	33 cd		 xor	 ecx, ebp
  000a0	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000a5	8b e5		 mov	 esp, ebp
  000a7	5d		 pop	 ebp
  000a8	c3		 ret	 0
$LN12@TickTime:

; 118  : 			{
; 119  : 				this->EventStart();

  000a9	8b ce		 mov	 ecx, esi
  000ab	e8 00 00 00 00	 call	 ?EventStart@TeleportShop@@QAEXXZ ; TeleportShop::EventStart
  000b0	5b		 pop	 ebx
  000b1	5f		 pop	 edi
$LN2@TickTime:

; 120  : 				return;
; 121  : 			}
; 122  : 		}
; 123  : 	}
; 124  : }

  000b2	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b5	33 cd		 xor	 ecx, ebp
  000b7	5e		 pop	 esi
  000b8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000bd	8b e5		 mov	 esp, ebp
  000bf	5d		 pop	 ebp
  000c0	c3		 ret	 0
?TickTime@TeleportShop@@QAEXXZ ENDP			; TeleportShop::TickTime
_TEXT	ENDS
END
