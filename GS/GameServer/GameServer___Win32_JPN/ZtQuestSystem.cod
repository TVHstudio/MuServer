; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

	TITLE	E:\work\tranet_version\GS\GameServer\ZtQuestSystem.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?ZtQuestSystem@@3VcZtQuest@@A			; ZtQuestSystem
_BSS	SEGMENT
?ZtQuestSystem@@3VcZtQuest@@A DB 036b40H DUP (?)	; ZtQuestSystem
_BSS	ENDS
_DATA	SEGMENT
_g_iNpcUpDfLevel_CGATE DD 01H
	DD	02H
	DD	02dc6c0H
	DD	02H
	DD	03H
	DD	02dc6c0H
	DD	03H
	DD	04H
	DD	02dc6c0H
_g_iNpcUpDfLevel_CSTATUE DD 01H
	DD	03H
	DD	02dc6c0H
	DD	02H
	DD	05H
	DD	02dc6c0H
	DD	03H
	DD	07H
	DD	02dc6c0H
_g_iNpcUpMaxHP_CGATE DD 02625a0H
	DD	02H
	DD	0f4240H
	DD	03567e0H
	DD	03H
	DD	0f4240H
	DD	04f5880H
	DD	04H
	DD	0f4240H
_g_iNpcUpMaxHP_CSTATUE DD 02191c0H
	DD	03H
	DD	0f4240H
	DD	033e140H
	DD	05H
	DD	0f4240H
	DD	04c4b40H
	DD	07H
	DD	0f4240H
_g_iNpcUpRgLevel_CSTATUE DD 01H
	DD	03H
	DD	04c4b40H
	DD	02H
	DD	05H
	DD	04c4b40H
	DD	03H
	DD	07H
	DD	04c4b40H
_g_iCsUserReSpawnArea DD 023H
	DD	011H
	DD	090H
	DD	030H
	DD	04aH
	DD	090H
	DD	073H
	DD	09aH
	DD	023H
	DD	011H
	DD	090H
	DD	030H
_g_iNpcDefense_CGATE DD 064H
	DD	0b4H
	DD	012cH
	DD	0208H
_g_iNpcDefense_CSTATUE DD 050H
	DD	0b4H
	DD	0154H
	DD	0226H
_g_iCastleWallStepAxisY DD 071H
	DD	0a0H
	DD	0cbH
_DATA	ENDS
PUBLIC	??_H@YGXPAXIHP6EPAX0@Z@Z			; `vector constructor iterator'
; Function compile flags: /Ogtp
;	COMDAT ??_H@YGXPAXIHP6EPAX0@Z@Z
_TEXT	SEGMENT
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIHP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	57		 push	 edi
  00004	8b 7d 10	 mov	 edi, DWORD PTR ___n$[ebp]
  00007	4f		 dec	 edi
  00008	78 14		 js	 SHORT $LN1@vector
  0000a	53		 push	 ebx
  0000b	8b 5d 14	 mov	 ebx, DWORD PTR ___f$[ebp]
  0000e	56		 push	 esi
  0000f	8b 75 08	 mov	 esi, DWORD PTR ___t$[ebp]
$LL2@vector:
  00012	8b ce		 mov	 ecx, esi
  00014	ff d3		 call	 ebx
  00016	03 75 0c	 add	 esi, DWORD PTR ___s$[ebp]
  00019	4f		 dec	 edi
  0001a	79 f6		 jns	 SHORT $LL2@vector
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
$LN1@vector:
  0001e	5f		 pop	 edi
  0001f	5d		 pop	 ebp
  00020	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIHP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
PUBLIC	??_C@_02DKCKIIND@?$CFs?$AA@			; `string'
PUBLIC	??_C@_0CC@CJBKJHKN@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CC?$CF?$FL?$FO?$CC?$FN?$CC?5?$CC?$CF?$FL?$FO?$CC?$FN@ ; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	??_C@_09KCICDKHC@NameQuest?$AA@			; `string'
PUBLIC	??_C@_05KJMBIHHL@Quest?$AA@			; `string'
PUBLIC	??_C@_03BCJIDNJL@NPC?$AA@			; `string'
PUBLIC	??_C@_06POMJKEPM@Common?$AA@			; `string'
PUBLIC	??_C@_06CKGENIKG@Enable?$AA@			; `string'
PUBLIC	??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@ ; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Loader@cZtQuest@@QAEXXZ			; cZtQuest::Loader
EXTRN	_fclose:PROC
EXTRN	_sprintf:PROC
EXTRN	_sscanf:PROC
EXTRN	?Zt_IsBadFileLine@@YA_NPADAAH@Z:PROC		; Zt_IsBadFileLine
EXTRN	_fgets:PROC
EXTRN	_feof:PROC
EXTRN	_fopen:PROC
EXTRN	__imp__GetPrivateProfileStringA@24:PROC
EXTRN	__imp__GetPrivateProfileIntA@16:PROC
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
;	COMDAT ??_C@_02DKCKIIND@?$CFs?$AA@
; File e:\work\tranet_version\gs\gameserver\ztquestsystem.cpp
CONST	SEGMENT
??_C@_02DKCKIIND@?$CFs?$AA@ DB '%s', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@CJBKJHKN@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CC?$CF?$FL?$FO?$CC?$FN?$CC?5?$CC?$CF?$FL?$FO?$CC?$FN@
CONST	SEGMENT
??_C@_0CC@CJBKJHKN@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CC?$CF?$FL?$FO?$CC?$FN?$CC?5?$CC?$CF?$FL?$FO?$CC?$FN@ DB '%'
	DB	'd %d %d %d %d %d "%[^"]" "%[^"]"', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_09KCICDKHC@NameQuest?$AA@
CONST	SEGMENT
??_C@_09KCICDKHC@NameQuest?$AA@ DB 'NameQuest', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_05KJMBIHHL@Quest?$AA@
CONST	SEGMENT
??_C@_05KJMBIHHL@Quest?$AA@ DB 'Quest', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_03BCJIDNJL@NPC?$AA@
CONST	SEGMENT
??_C@_03BCJIDNJL@NPC?$AA@ DB 'NPC', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_06POMJKEPM@Common?$AA@
CONST	SEGMENT
??_C@_06POMJKEPM@Common?$AA@ DB 'Common', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CKGENIKG@Enable?$AA@
CONST	SEGMENT
??_C@_06CKGENIKG@Enable?$AA@ DB 'Enable', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@
CONST	SEGMENT
??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@ DB '..\Data\Zt'
	DB	'Data\ZtQuestSystem.ini', 00H		; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Loader@cZtQuest@@QAEXXZ
_TEXT	SEGMENT
_Flag$ = -504						; size = 4
_n$209897 = -500					; size = 40
_Buff$ = -460						; size = 256
_mes2$209899 = -204					; size = 100
_mes$209898 = -104					; size = 100
__$ArrayPad$ = -4					; size = 4
?Loader@cZtQuest@@QAEXXZ PROC				; cZtQuest::Loader, COMDAT
; _this$ = ecx

; 16   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f8 01 00
	00		 sub	 esp, 504		; 000001f8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	53		 push	 ebx
  00014	56		 push	 esi
  00015	57		 push	 edi

; 17   : 	//CheckFile(DIR_ZT_QUEST_SYSTEM);
; 18   : 
; 19   : 	this->Enable = GetPrivateProfileInt("Common","Enable",0,DIR_ZT_QUEST_SYSTEM);

  00016	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__GetPrivateProfileIntA@16
  0001c	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@
  00021	33 db		 xor	 ebx, ebx
  00023	53		 push	 ebx
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_06CKGENIKG@Enable?$AA@
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  0002e	8b f1		 mov	 esi, ecx
  00030	ff d7		 call	 edi

; 20   : 	this->NPC = GetPrivateProfileInt("Common","NPC",0,DIR_ZT_QUEST_SYSTEM);

  00032	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@
  00037	53		 push	 ebx
  00038	68 00 00 00 00	 push	 OFFSET ??_C@_03BCJIDNJL@NPC?$AA@
  0003d	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00042	89 06		 mov	 DWORD PTR [esi], eax
  00044	ff d7		 call	 edi

; 21   : 
; 22   : 	GetPrivateProfileString("Common", "NameQuest","Quest",this->NameQuest,sizeof(this->NameQuest),DIR_ZT_QUEST_SYSTEM);

  00046	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@
  0004b	6a 32		 push	 50			; 00000032H
  0004d	89 46 04	 mov	 DWORD PTR [esi+4], eax
  00050	8d 46 08	 lea	 eax, DWORD PTR [esi+8]
  00053	50		 push	 eax
  00054	68 00 00 00 00	 push	 OFFSET ??_C@_05KJMBIHHL@Quest?$AA@
  00059	68 00 00 00 00	 push	 OFFSET ??_C@_09KCICDKHC@NameQuest?$AA@
  0005e	68 00 00 00 00	 push	 OFFSET ??_C@_06POMJKEPM@Common?$AA@
  00063	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetPrivateProfileStringA@24

; 23   : 
; 24   : 	for(int i=0;i<MAX_ZT_QUEST;i++)

  00069	8d 46 40	 lea	 eax, DWORD PTR [esi+64]
  0006c	b9 e8 03 00 00	 mov	 ecx, 1000		; 000003e8H
$LL8@Loader:

; 25   : 	{
; 26   : 		this->Quest[i].Monster	= 0;

  00071	89 58 fc	 mov	 DWORD PTR [eax-4], ebx

; 27   : 		this->Quest[i].Count	= 0;

  00074	89 18		 mov	 DWORD PTR [eax], ebx

; 28   : 		this->Quest[i].Procent	= 0;

  00076	89 58 04	 mov	 DWORD PTR [eax+4], ebx

; 29   : 		this->Quest[i].Reward	= 0;

  00079	89 58 08	 mov	 DWORD PTR [eax+8], ebx

; 30   : 		this->Quest[i].Gift		= 0;

  0007c	89 58 0c	 mov	 DWORD PTR [eax+12], ebx

; 31   : 		this->Quest[i].iLevel	= 0;

  0007f	89 58 10	 mov	 DWORD PTR [eax+16], ebx

; 32   : 		this->Quest[i].Msg1[0]	= NULL;

  00082	88 58 14	 mov	 BYTE PTR [eax+20], bl

; 33   : 		this->Quest[i].Msg2[0]	= NULL;

  00085	88 58 78	 mov	 BYTE PTR [eax+120], bl
  00088	05 e0 00 00 00	 add	 eax, 224		; 000000e0H
  0008d	49		 dec	 ecx
  0008e	75 e1		 jne	 SHORT $LL8@Loader

; 34   : 	}
; 35   : 
; 36   : 	FILE *file = fopen(DIR_ZT_QUEST_SYSTEM,"r");

  00090	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r?$AA@
  00095	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@ELCNDIHJ@?4?4?2Data?2ZtData?2ZtQuestSystem?4ini@
  0009a	e8 00 00 00 00	 call	 _fopen
  0009f	8b f8		 mov	 edi, eax
  000a1	83 c4 08	 add	 esp, 8

; 37   : 	if(file == NULL)

  000a4	3b fb		 cmp	 edi, ebx
  000a6	75 13		 jne	 SHORT $LN5@Loader

; 38   : 	{
; 39   : 		this->Enable = 0;

  000a8	5f		 pop	 edi
  000a9	89 1e		 mov	 DWORD PTR [esi], ebx
  000ab	5e		 pop	 esi
  000ac	5b		 pop	 ebx

; 74   : }

  000ad	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000b0	33 cd		 xor	 ecx, ebp
  000b2	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000b7	8b e5		 mov	 esp, ebp
  000b9	5d		 pop	 ebp
  000ba	c3		 ret	 0
$LN5@Loader:

; 40   : 		return;
; 41   : 	}
; 42   : 
; 43   : 	char Buff[256];
; 44   : 	int Flag = 0;

  000bb	89 9d 08 fe ff
	ff		 mov	 DWORD PTR _Flag$[ebp], ebx

; 45   : 	this->qNum = 1;	//Fix

  000c1	bb 01 00 00 00	 mov	 ebx, 1

; 46   : 
; 47   : 	while(!feof(file))

  000c6	57		 push	 edi
  000c7	89 9e 3c 6b 03
	00		 mov	 DWORD PTR [esi+224060], ebx
  000cd	e8 00 00 00 00	 call	 _feof
  000d2	83 c4 04	 add	 esp, 4
  000d5	85 c0		 test	 eax, eax
  000d7	0f 85 67 01 00
	00		 jne	 $LN3@Loader
  000dd	8d 49 00	 npad	 3
$LL4@Loader:

; 48   : 	{
; 49   : 		fgets(Buff,256,file);	

  000e0	57		 push	 edi
  000e1	8d 8d 34 fe ff
	ff		 lea	 ecx, DWORD PTR _Buff$[ebp]
  000e7	68 00 01 00 00	 push	 256			; 00000100H
  000ec	51		 push	 ecx
  000ed	e8 00 00 00 00	 call	 _fgets

; 50   : 		if(Zt_IsBadFileLine(Buff, Flag))	

  000f2	8d 95 08 fe ff
	ff		 lea	 edx, DWORD PTR _Flag$[ebp]
  000f8	52		 push	 edx
  000f9	8d 85 34 fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  000ff	50		 push	 eax
  00100	e8 00 00 00 00	 call	 ?Zt_IsBadFileLine@@YA_NPADAAH@Z ; Zt_IsBadFileLine
  00105	83 c4 14	 add	 esp, 20			; 00000014H
  00108	84 c0		 test	 al, al
  0010a	0f 85 23 01 00
	00		 jne	 $LN1@Loader

; 51   : 			continue;
; 52   : 
; 53   : 		if(Flag == 1)

  00110	39 9d 08 fe ff
	ff		 cmp	 DWORD PTR _Flag$[ebp], ebx
  00116	0f 85 17 01 00
	00		 jne	 $LN1@Loader

; 54   : 		{
; 55   : 			int n[10];
; 56   : 			char mes[100];
; 57   : 			char mes2[100];
; 58   : 
; 59   : 			sscanf(Buff,"%d %d %d %d %d %d \"%[^\"]\" \"%[^\"]\"",&n[0],&n[1],&n[2],&n[3],&n[4],&n[5],&mes,&mes2);

  0011c	8d 8d 34 ff ff
	ff		 lea	 ecx, DWORD PTR _mes2$209899[ebp]
  00122	51		 push	 ecx
  00123	8d 55 98	 lea	 edx, DWORD PTR _mes$209898[ebp]
  00126	52		 push	 edx
  00127	8d 85 20 fe ff
	ff		 lea	 eax, DWORD PTR _n$209897[ebp+20]
  0012d	50		 push	 eax
  0012e	8d 8d 1c fe ff
	ff		 lea	 ecx, DWORD PTR _n$209897[ebp+16]
  00134	51		 push	 ecx
  00135	8d 95 18 fe ff
	ff		 lea	 edx, DWORD PTR _n$209897[ebp+12]
  0013b	52		 push	 edx
  0013c	8d 85 14 fe ff
	ff		 lea	 eax, DWORD PTR _n$209897[ebp+8]
  00142	50		 push	 eax
  00143	8d 8d 10 fe ff
	ff		 lea	 ecx, DWORD PTR _n$209897[ebp+4]
  00149	51		 push	 ecx
  0014a	8d 95 0c fe ff
	ff		 lea	 edx, DWORD PTR _n$209897[ebp]
  00150	52		 push	 edx
  00151	8d 85 34 fe ff
	ff		 lea	 eax, DWORD PTR _Buff$[ebp]
  00157	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@CJBKJHKN@?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CFd?5?$CC?$CF?$FL?$FO?$CC?$FN?$CC?5?$CC?$CF?$FL?$FO?$CC?$FN@
  0015c	50		 push	 eax
  0015d	e8 00 00 00 00	 call	 _sscanf

; 60   : 
; 61   : 			this->Quest[this->qNum].Monster	= n[0];

  00162	8b 8e 3c 6b 03
	00		 mov	 ecx, DWORD PTR [esi+224060]
  00168	8b 95 0c fe ff
	ff		 mov	 edx, DWORD PTR _n$209897[ebp]
  0016e	69 c9 e0 00 00
	00		 imul	 ecx, 224		; 000000e0H
  00174	89 54 31 3c	 mov	 DWORD PTR [ecx+esi+60], edx

; 62   : 			this->Quest[this->qNum].Count		= n[1];

  00178	8b 86 3c 6b 03
	00		 mov	 eax, DWORD PTR [esi+224060]
  0017e	8b 8d 10 fe ff
	ff		 mov	 ecx, DWORD PTR _n$209897[ebp+4]
  00184	69 c0 e0 00 00
	00		 imul	 eax, 224		; 000000e0H
  0018a	89 4c 30 40	 mov	 DWORD PTR [eax+esi+64], ecx

; 63   : 			this->Quest[this->qNum].Procent	= n[2];

  0018e	8b 96 3c 6b 03
	00		 mov	 edx, DWORD PTR [esi+224060]
  00194	8b 85 14 fe ff
	ff		 mov	 eax, DWORD PTR _n$209897[ebp+8]
  0019a	69 d2 e0 00 00
	00		 imul	 edx, 224		; 000000e0H
  001a0	89 44 32 44	 mov	 DWORD PTR [edx+esi+68], eax

; 64   : 			this->Quest[this->qNum].Reward	= n[3];

  001a4	8b 8e 3c 6b 03
	00		 mov	 ecx, DWORD PTR [esi+224060]
  001aa	8b 95 18 fe ff
	ff		 mov	 edx, DWORD PTR _n$209897[ebp+12]
  001b0	69 c9 e0 00 00
	00		 imul	 ecx, 224		; 000000e0H
  001b6	89 54 31 48	 mov	 DWORD PTR [ecx+esi+72], edx

; 65   : 			this->Quest[this->qNum].Gift		= n[4];

  001ba	8b 86 3c 6b 03
	00		 mov	 eax, DWORD PTR [esi+224060]
  001c0	8b 8d 1c fe ff
	ff		 mov	 ecx, DWORD PTR _n$209897[ebp+16]
  001c6	69 c0 e0 00 00
	00		 imul	 eax, 224		; 000000e0H
  001cc	89 4c 30 4c	 mov	 DWORD PTR [eax+esi+76], ecx

; 66   : 			this->Quest[this->qNum].iLevel	= n[5];

  001d0	8b 96 3c 6b 03
	00		 mov	 edx, DWORD PTR [esi+224060]
  001d6	8b 85 20 fe ff
	ff		 mov	 eax, DWORD PTR _n$209897[ebp+20]
  001dc	69 d2 e0 00 00
	00		 imul	 edx, 224		; 000000e0H
  001e2	89 44 32 50	 mov	 DWORD PTR [edx+esi+80], eax

; 67   : 			sprintf(this->Quest[this->qNum].Msg1,"%s",mes);

  001e6	8b 96 3c 6b 03
	00		 mov	 edx, DWORD PTR [esi+224060]
  001ec	69 d2 e0 00 00
	00		 imul	 edx, 224		; 000000e0H
  001f2	8d 4d 98	 lea	 ecx, DWORD PTR _mes$209898[ebp]
  001f5	51		 push	 ecx
  001f6	8d 44 32 54	 lea	 eax, DWORD PTR [edx+esi+84]
  001fa	68 00 00 00 00	 push	 OFFSET ??_C@_02DKCKIIND@?$CFs?$AA@
  001ff	50		 push	 eax
  00200	e8 00 00 00 00	 call	 _sprintf

; 68   : 			sprintf(this->Quest[this->qNum].Msg2,"%s",mes2);

  00205	8b 96 3c 6b 03
	00		 mov	 edx, DWORD PTR [esi+224060]
  0020b	69 d2 e0 00 00
	00		 imul	 edx, 224		; 000000e0H
  00211	8d 8d 34 ff ff
	ff		 lea	 ecx, DWORD PTR _mes2$209899[ebp]
  00217	51		 push	 ecx
  00218	8d 84 32 b8 00
	00 00		 lea	 eax, DWORD PTR [edx+esi+184]
  0021f	68 00 00 00 00	 push	 OFFSET ??_C@_02DKCKIIND@?$CFs?$AA@
  00224	50		 push	 eax
  00225	e8 00 00 00 00	 call	 _sprintf
  0022a	83 c4 40	 add	 esp, 64			; 00000040H

; 69   : 
; 70   : 			this->qNum++;

  0022d	01 9e 3c 6b 03
	00		 add	 DWORD PTR [esi+224060], ebx
$LN1@Loader:

; 46   : 
; 47   : 	while(!feof(file))

  00233	57		 push	 edi
  00234	e8 00 00 00 00	 call	 _feof
  00239	83 c4 04	 add	 esp, 4
  0023c	85 c0		 test	 eax, eax
  0023e	0f 84 9c fe ff
	ff		 je	 $LL4@Loader
$LN3@Loader:

; 71   : 		}
; 72   : 	}
; 73   : 	fclose(file);

  00244	57		 push	 edi
  00245	e8 00 00 00 00	 call	 _fclose

; 74   : }

  0024a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0024d	83 c4 04	 add	 esp, 4
  00250	5f		 pop	 edi
  00251	5e		 pop	 esi
  00252	33 cd		 xor	 ecx, ebp
  00254	5b		 pop	 ebx
  00255	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0025a	8b e5		 mov	 esp, ebp
  0025c	5d		 pop	 ebp
  0025d	c3		 ret	 0
?Loader@cZtQuest@@QAEXXZ ENDP				; cZtQuest::Loader
_TEXT	ENDS
PUBLIC	??_C@_0BC@OIALNJLO@?$EA?$FL?$CFs?$FN?3?5?$CFs?5?$FL?$CFd?1?$CFd?$FN?$AA@ ; `string'
PUBLIC	?MonsterKill@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z	; cZtQuest::MonsterKill
EXTRN	?GetText@CZtText@@QAEPADH@Z:PROC		; CZtText::GetText
EXTRN	?g_ZtText@@3VCZtText@@A:BYTE			; g_ZtText
EXTRN	?MessageChat@@YAXHPADZZ:PROC			; MessageChat
EXTRN	_rand:PROC
;	COMDAT ??_C@_0BC@OIALNJLO@?$EA?$FL?$CFs?$FN?3?5?$CFs?5?$FL?$CFd?1?$CFd?$FN?$AA@
CONST	SEGMENT
??_C@_0BC@OIALNJLO@?$EA?$FL?$CFs?$FN?3?5?$CFs?5?$FL?$CFd?1?$CFd?$FN?$AA@ DB '@'
	DB	'[%s]: %s [%d/%d]', 00H			; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?MonsterKill@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_lpTargetObj$ = 12					; size = 4
?MonsterKill@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z PROC	; cZtQuest::MonsterKill, COMDAT
; _this$ = ecx

; 115  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	8b d9		 mov	 ebx, ecx

; 116  : 	if(!this->Enable)

  00006	83 3b 00	 cmp	 DWORD PTR [ebx], 0
  00009	0f 84 a6 00 00
	00		 je	 $LN5@MonsterKil

; 117  : 		return;
; 118  : 
; 119  : 	int Number = lpTargetObj->ZtQuestNum;

  0000f	56		 push	 esi
  00010	8b 75 0c	 mov	 esi, DWORD PTR _lpTargetObj$[ebp]
  00013	8b 86 b0 22 00
	00		 mov	 eax, DWORD PTR [esi+8880]

; 120  : 
; 121  : #ifdef DEBUG_CODE
; 122  : 	LogAddC(2,"[ZtQuest]: %d",Number);
; 123  : #endif
; 124  : 
; 125  : 	if(Number == 0 || Number >= this->qNum) return;

  00019	85 c0		 test	 eax, eax
  0001b	0f 84 93 00 00
	00		 je	 $LN10@MonsterKil
  00021	3b 83 3c 6b 03
	00		 cmp	 eax, DWORD PTR [ebx+224060]
  00027	0f 8d 87 00 00
	00		 jge	 $LN10@MonsterKil

; 126  : 
; 127  : 	if(lpObj->Class == this->Quest[Number].Monster)

  0002d	69 c0 e0 00 00
	00		 imul	 eax, 224		; 000000e0H
  00033	57		 push	 edi
  00034	8d 3c 18	 lea	 edi, DWORD PTR [eax+ebx]
  00037	8b 45 08	 mov	 eax, DWORD PTR _lpObj$[ebp]
  0003a	0f b7 88 b8 00
	00 00		 movzx	 ecx, WORD PTR [eax+184]
  00041	3b 4f 3c	 cmp	 ecx, DWORD PTR [edi+60]
  00044	75 6d		 jne	 SHORT $LN11@MonsterKil

; 128  : 	{
; 129  : 		if(this->Quest[Number].Count == lpTargetObj->ZtQuestKill)

  00046	8b 57 40	 mov	 edx, DWORD PTR [edi+64]
  00049	3b 96 b4 22 00
	00		 cmp	 edx, DWORD PTR [esi+8884]
  0004f	74 62		 je	 SHORT $LN11@MonsterKil

; 130  : 		{
; 131  : 			return;
; 132  : 		}
; 133  : 
; 134  : 		//srand(time(NULL));
; 135  : 		int iRate = rand()%100;

  00051	e8 00 00 00 00	 call	 _rand
  00056	99		 cdq
  00057	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  0005c	f7 f9		 idiv	 ecx

; 136  : 
; 137  : 		if(this->Quest[Number].Procent > iRate)

  0005e	39 57 44	 cmp	 DWORD PTR [edi+68], edx
  00061	7e 50		 jle	 SHORT $LN11@MonsterKil

; 138  : 		{
; 139  : 			lpTargetObj->ZtQuestKill++;

  00063	ff 86 b4 22 00
	00		 inc	 DWORD PTR [esi+8884]

; 140  : 			MessageChat(lpTargetObj->m_Index,"@[%s]: %s [%d/%d]",
; 141  : 				this->NameQuest,
; 142  : 				this->Quest[Number].Msg2,
; 143  : 				lpTargetObj->ZtQuestKill,
; 144  : 				this->Quest[Number].Count);

  00069	8b 57 40	 mov	 edx, DWORD PTR [edi+64]
  0006c	8b 86 b4 22 00
	00		 mov	 eax, DWORD PTR [esi+8884]
  00072	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00074	52		 push	 edx
  00075	50		 push	 eax
  00076	8d 87 b8 00 00
	00		 lea	 eax, DWORD PTR [edi+184]
  0007c	50		 push	 eax
  0007d	83 c3 08	 add	 ebx, 8
  00080	53		 push	 ebx
  00081	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@OIALNJLO@?$EA?$FL?$CFs?$FN?3?5?$CFs?5?$FL?$CFd?1?$CFd?$FN?$AA@
  00086	51		 push	 ecx
  00087	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 145  : 
; 146  : 			if(this->Quest[Number].Count == lpTargetObj->ZtQuestKill)

  0008c	8b 57 40	 mov	 edx, DWORD PTR [edi+64]
  0008f	83 c4 18	 add	 esp, 24			; 00000018H
  00092	3b 96 b4 22 00
	00		 cmp	 edx, DWORD PTR [esi+8884]
  00098	75 19		 jne	 SHORT $LN11@MonsterKil

; 147  : 			{
; 148  : 				MessageChat(lpTargetObj->m_Index,g_ZtText.GetText(103),this->NameQuest);

  0009a	53		 push	 ebx
  0009b	6a 67		 push	 103			; 00000067H
  0009d	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000a2	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000a7	50		 push	 eax
  000a8	8b 06		 mov	 eax, DWORD PTR [esi]
  000aa	50		 push	 eax
  000ab	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  000b0	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN11@MonsterKil:
  000b3	5f		 pop	 edi
$LN10@MonsterKil:
  000b4	5e		 pop	 esi
$LN5@MonsterKil:
  000b5	5b		 pop	 ebx

; 149  : 			}
; 150  : 		}
; 151  : 	}
; 152  : }

  000b6	5d		 pop	 ebp
  000b7	c2 08 00	 ret	 8
?MonsterKill@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z ENDP	; cZtQuest::MonsterKill
_TEXT	ENDS
PUBLIC	??_C@_0BD@IGJPMNMJ@?$EA?$FL?$CFs?$FN?3?5NSPoint?5?$CFd?$CB?$AA@ ; `string'
PUBLIC	?Pressent@cZtQuest@@QAEXPAUOBJECTSTRUCT@@HHH@Z	; cZtQuest::Pressent
EXTRN	?ZtFireCracker@@YAXHEE@Z:PROC			; ZtFireCracker
EXTRN	?GDSaveUserInfo@GameShop@@QAEXH@Z:PROC		; GameShop::GDSaveUserInfo
EXTRN	?gGameShop@@3VGameShop@@A:BYTE			; gGameShop
EXTRN	?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z:PROC	; ItemSerialCreateSend
EXTRN	?GCLevelUpMsgSend@@YAXHH@Z:PROC			; GCLevelUpMsgSend
EXTRN	?MoneyItemDrop@MapClass@@QAEHHHH@Z:PROC		; MapClass::MoneyItemDrop
EXTRN	?MapC@@3PAVMapClass@@A:BYTE			; MapC
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0BD@IGJPMNMJ@?$EA?$FL?$CFs?$FN?3?5NSPoint?5?$CFd?$CB?$AA@
CONST	SEGMENT
??_C@_0BD@IGJPMNMJ@?$EA?$FL?$CFs?$FN?3?5NSPoint?5?$CFd?$CB?$AA@ DB '@[%s]'
	DB	': NSPoint %d!', 00H				; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Pressent@cZtQuest@@QAEXPAUOBJECTSTRUCT@@HHH@Z
_TEXT	SEGMENT
_lpObj$ = 8						; size = 4
_Present$ = 12						; size = 4
_Gifts$ = 16						; size = 4
_Level$ = 20						; size = 4
?Pressent@cZtQuest@@QAEXPAUOBJECTSTRUCT@@HHH@Z PROC	; cZtQuest::Pressent, COMDAT
; _this$ = ecx

; 155  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 156  : 	//1- Zen, 2 - FreePoints, 3 - Items, 4 - ZtCred, 5 - Wcoin
; 157  : 	if(Present == 1)	//Zen

  00003	8b 45 0c	 mov	 eax, DWORD PTR _Present$[ebp]
  00006	56		 push	 esi
  00007	8b 75 08	 mov	 esi, DWORD PTR _lpObj$[ebp]
  0000a	83 f8 01	 cmp	 eax, 1
  0000d	75 31		 jne	 SHORT $LN15@Pressent

; 158  : 	{
; 159  : 		MapC[lpObj->MapNumber].MoneyItemDrop((int)Gifts, lpObj->X, lpObj->Y);

  0000f	0f bf 86 46 01
	00 00		 movsx	 eax, WORD PTR [esi+326]
  00016	0f bf 8e 44 01
	00 00		 movsx	 ecx, WORD PTR [esi+324]
  0001d	8b 55 10	 mov	 edx, DWORD PTR _Gifts$[ebp]
  00020	50		 push	 eax
  00021	51		 push	 ecx
  00022	0f b6 8e 49 01
	00 00		 movzx	 ecx, BYTE PTR [esi+329]
  00029	69 c9 48 3d 05
	00		 imul	 ecx, 343368		; 00053d48H
  0002f	52		 push	 edx
  00030	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?MapC@@3PAVMapClass@@A ; MapC
  00036	e8 00 00 00 00	 call	 ?MoneyItemDrop@MapClass@@QAEHHHH@Z ; MapClass::MoneyItemDrop
  0003b	e9 ab 01 00 00	 jmp	 $LN1@Pressent
$LN15@Pressent:
  00040	57		 push	 edi

; 160  : 	}
; 161  : 	else if(Present == 2)

  00041	83 f8 02	 cmp	 eax, 2
  00044	75 3b		 jne	 SHORT $LN13@Pressent

; 162  : 	{
; 163  : 		MessageChat(lpObj->m_Index,g_ZtText.GetText(104),this->NameQuest,Gifts);

  00046	8b 7d 10	 mov	 edi, DWORD PTR _Gifts$[ebp]
  00049	57		 push	 edi
  0004a	83 c1 08	 add	 ecx, 8
  0004d	51		 push	 ecx
  0004e	6a 68		 push	 104			; 00000068H
  00050	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00055	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  0005a	50		 push	 eax
  0005b	8b 06		 mov	 eax, DWORD PTR [esi]
  0005d	50		 push	 eax
  0005e	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 164  : 		lpObj->ZtFreePoints += Gifts;
; 165  : 		lpObj->LevelUpPoint += Gifts;
; 166  : 		GCLevelUpMsgSend(lpObj->m_Index, 0);

  00063	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00065	01 be 8c 22 00
	00		 add	 DWORD PTR [esi+8844], edi
  0006b	01 be c0 00 00
	00		 add	 DWORD PTR [esi+192], edi
  00071	6a 00		 push	 0
  00073	51		 push	 ecx
  00074	e8 00 00 00 00	 call	 ?GCLevelUpMsgSend@@YAXHH@Z ; GCLevelUpMsgSend
  00079	83 c4 18	 add	 esp, 24			; 00000018H
  0007c	e9 69 01 00 00	 jmp	 $LN18@Pressent
$LN13@Pressent:

; 167  : 	}
; 168  : 	else if(Present == 3)

  00081	83 f8 03	 cmp	 eax, 3
  00084	75 3d		 jne	 SHORT $LN11@Pressent

; 169  : 	{
; 170  : 		ItemSerialCreateSend(lpObj->m_Index,(BYTE)lpObj->MapNumber,(BYTE)lpObj->X,(BYTE)lpObj->Y,Gifts,(BYTE)Level,0,0,0,0,lpObj->m_Index,0,0);

  00086	8b 06		 mov	 eax, DWORD PTR [esi]
  00088	8b 55 14	 mov	 edx, DWORD PTR _Level$[ebp]
  0008b	8b 4d 10	 mov	 ecx, DWORD PTR _Gifts$[ebp]
  0008e	6a 00		 push	 0
  00090	6a 00		 push	 0
  00092	50		 push	 eax
  00093	6a 00		 push	 0
  00095	6a 00		 push	 0
  00097	6a 00		 push	 0
  00099	6a 00		 push	 0
  0009b	52		 push	 edx
  0009c	0f b6 96 46 01
	00 00		 movzx	 edx, BYTE PTR [esi+326]
  000a3	51		 push	 ecx
  000a4	0f b6 8e 44 01
	00 00		 movzx	 ecx, BYTE PTR [esi+324]
  000ab	52		 push	 edx
  000ac	0f b6 96 49 01
	00 00		 movzx	 edx, BYTE PTR [esi+329]
  000b3	51		 push	 ecx
  000b4	52		 push	 edx
  000b5	50		 push	 eax
  000b6	e8 00 00 00 00	 call	 ?ItemSerialCreateSend@@YAXHEEEHEEEEEHEE@Z ; ItemSerialCreateSend
  000bb	83 c4 34	 add	 esp, 52			; 00000034H
  000be	e9 27 01 00 00	 jmp	 $LN18@Pressent
$LN11@Pressent:

; 171  : 	}
; 172  : 	else if(Present == 4)

  000c3	83 f8 04	 cmp	 eax, 4
  000c6	75 34		 jne	 SHORT $LN9@Pressent

; 173  : 	{
; 174  : 		MessageChat(lpObj->m_Index,g_ZtText.GetText(105),this->NameQuest,Gifts);

  000c8	8b 45 10	 mov	 eax, DWORD PTR _Gifts$[ebp]
  000cb	50		 push	 eax
  000cc	83 c1 08	 add	 ecx, 8
  000cf	51		 push	 ecx
  000d0	6a 69		 push	 105			; 00000069H
  000d2	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000d7	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000dc	8b 0e		 mov	 ecx, DWORD PTR [esi]
  000de	50		 push	 eax
  000df	51		 push	 ecx
  000e0	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 175  : 		lpObj->ZtCred += Gifts;

  000e5	db 45 10	 fild	 DWORD PTR _Gifts$[ebp]
  000e8	83 c4 10	 add	 esp, 16			; 00000010H
  000eb	d8 86 a8 22 00
	00		 fadd	 DWORD PTR [esi+8872]
  000f1	d9 9e a8 22 00
	00		 fstp	 DWORD PTR [esi+8872]
  000f7	e9 ee 00 00 00	 jmp	 $LN18@Pressent
$LN9@Pressent:

; 176  : 	}
; 177  : 	else if(Present == 5)

  000fc	83 f8 05	 cmp	 eax, 5
  000ff	75 41		 jne	 SHORT $LN7@Pressent

; 178  : 	{
; 179  : 		MessageChat(lpObj->m_Index,g_ZtText.GetText(106),this->NameQuest,Gifts);

  00101	8b 55 10	 mov	 edx, DWORD PTR _Gifts$[ebp]
  00104	52		 push	 edx
  00105	83 c1 08	 add	 ecx, 8
  00108	51		 push	 ecx
  00109	6a 6a		 push	 106			; 0000006aH
  0010b	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00110	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  00115	50		 push	 eax
  00116	8b 06		 mov	 eax, DWORD PTR [esi]
  00118	50		 push	 eax
  00119	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 180  : 		lpObj->GameShop.WCoinC += Gifts;

  0011e	db 45 10	 fild	 DWORD PTR _Gifts$[ebp]

; 181  : 		gGameShop.GDSaveUserInfo(lpObj->m_Index);

  00121	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00123	83 c4 10	 add	 esp, 16			; 00000010H
  00126	dc 86 00 23 00
	00		 fadd	 QWORD PTR [esi+8960]
  0012c	51		 push	 ecx
  0012d	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00132	dd 9e 00 23 00
	00		 fstp	 QWORD PTR [esi+8960]
  00138	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo
  0013d	e9 a8 00 00 00	 jmp	 $LN18@Pressent
$LN7@Pressent:

; 182  : 	}
; 183  : 	else if(Present == 6)

  00142	83 f8 06	 cmp	 eax, 6
  00145	75 3e		 jne	 SHORT $LN5@Pressent

; 184  : 	{
; 185  : 		MessageChat(lpObj->m_Index,g_ZtText.GetText(107),this->NameQuest,Gifts);

  00147	8b 55 10	 mov	 edx, DWORD PTR _Gifts$[ebp]
  0014a	52		 push	 edx
  0014b	83 c1 08	 add	 ecx, 8
  0014e	51		 push	 ecx
  0014f	6a 6b		 push	 107			; 0000006bH
  00151	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00156	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  0015b	50		 push	 eax
  0015c	8b 06		 mov	 eax, DWORD PTR [esi]
  0015e	50		 push	 eax
  0015f	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 186  : 		lpObj->GameShop.WCoinP += Gifts;

  00164	db 45 10	 fild	 DWORD PTR _Gifts$[ebp]

; 187  : 		gGameShop.GDSaveUserInfo(lpObj->m_Index);

  00167	8b 0e		 mov	 ecx, DWORD PTR [esi]
  00169	83 c4 10	 add	 esp, 16			; 00000010H
  0016c	dc 86 f8 22 00
	00		 fadd	 QWORD PTR [esi+8952]
  00172	51		 push	 ecx
  00173	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  00178	dd 9e f8 22 00
	00		 fstp	 QWORD PTR [esi+8952]
  0017e	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo
  00183	eb 65		 jmp	 SHORT $LN18@Pressent
$LN5@Pressent:

; 188  : 	}
; 189  : 	else if(Present == 7)

  00185	83 f8 07	 cmp	 eax, 7
  00188	75 3e		 jne	 SHORT $LN3@Pressent

; 190  : 	{
; 191  : 		MessageChat(lpObj->m_Index,g_ZtText.GetText(108),this->NameQuest,Gifts);

  0018a	8b 55 10	 mov	 edx, DWORD PTR _Gifts$[ebp]
  0018d	52		 push	 edx
  0018e	83 c1 08	 add	 ecx, 8
  00191	51		 push	 ecx
  00192	6a 6c		 push	 108			; 0000006cH
  00194	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  00199	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  0019e	50		 push	 eax
  0019f	8b 06		 mov	 eax, DWORD PTR [esi]
  001a1	50		 push	 eax
  001a2	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 192  : 		lpObj->GameShop.GoblinPoint += Gifts;

  001a7	db 45 10	 fild	 DWORD PTR _Gifts$[ebp]

; 193  : 		gGameShop.GDSaveUserInfo(lpObj->m_Index);

  001aa	8b 0e		 mov	 ecx, DWORD PTR [esi]
  001ac	83 c4 10	 add	 esp, 16			; 00000010H
  001af	dc 86 08 23 00
	00		 fadd	 QWORD PTR [esi+8968]
  001b5	51		 push	 ecx
  001b6	b9 00 00 00 00	 mov	 ecx, OFFSET ?gGameShop@@3VGameShop@@A ; gGameShop
  001bb	dd 9e 08 23 00
	00		 fstp	 QWORD PTR [esi+8968]
  001c1	e8 00 00 00 00	 call	 ?GDSaveUserInfo@GameShop@@QAEXH@Z ; GameShop::GDSaveUserInfo
  001c6	eb 22		 jmp	 SHORT $LN18@Pressent
$LN3@Pressent:

; 194  : 	}
; 195  : 	else if(Present == 8)

  001c8	83 f8 08	 cmp	 eax, 8
  001cb	75 1d		 jne	 SHORT $LN18@Pressent

; 196  : 	{
; 197  : 		MessageChat(lpObj->m_Index,"@[%s]: NSPoint %d!",this->NameQuest,Gifts);

  001cd	8b 7d 10	 mov	 edi, DWORD PTR _Gifts$[ebp]
  001d0	8b 16		 mov	 edx, DWORD PTR [esi]
  001d2	57		 push	 edi
  001d3	03 c8		 add	 ecx, eax
  001d5	51		 push	 ecx
  001d6	68 00 00 00 00	 push	 OFFSET ??_C@_0BD@IGJPMNMJ@?$EA?$FL?$CFs?$FN?3?5NSPoint?5?$CFd?$CB?$AA@
  001db	52		 push	 edx
  001dc	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  001e1	83 c4 10	 add	 esp, 16			; 00000010H

; 198  : 		lpObj->PCPoint += Gifts;

  001e4	01 be 88 22 00
	00		 add	 DWORD PTR [esi+8840], edi
$LN18@Pressent:
  001ea	5f		 pop	 edi
$LN1@Pressent:

; 199  : 	}
; 200  : 	ZtFireCracker(lpObj->m_Index, lpObj->X, lpObj->Y);

  001eb	0f b6 86 46 01
	00 00		 movzx	 eax, BYTE PTR [esi+326]
  001f2	0f b6 8e 44 01
	00 00		 movzx	 ecx, BYTE PTR [esi+324]
  001f9	8b 16		 mov	 edx, DWORD PTR [esi]
  001fb	50		 push	 eax
  001fc	51		 push	 ecx
  001fd	52		 push	 edx
  001fe	e8 00 00 00 00	 call	 ?ZtFireCracker@@YAXHEE@Z ; ZtFireCracker
  00203	83 c4 0c	 add	 esp, 12			; 0000000cH
  00206	5e		 pop	 esi

; 201  : }

  00207	5d		 pop	 ebp
  00208	c2 10 00	 ret	 16			; 00000010H
?Pressent@cZtQuest@@QAEXPAUOBJECTSTRUCT@@HHH@Z ENDP	; cZtQuest::Pressent
_TEXT	ENDS
PUBLIC	??_C@_09NPPJFDAI@?$EA?$FL?$CFs?$FN?3?5?$CFs?$AA@ ; `string'
PUBLIC	??_C@_0P@NNLKOFMF@?$EA?$FL?$CFs?$FN?3?5Finish?$CB?$AA@ ; `string'
PUBLIC	?NPCClick@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z	; cZtQuest::NPCClick
;	COMDAT ??_C@_09NPPJFDAI@?$EA?$FL?$CFs?$FN?3?5?$CFs?$AA@
CONST	SEGMENT
??_C@_09NPPJFDAI@?$EA?$FL?$CFs?$FN?3?5?$CFs?$AA@ DB '@[%s]: %s', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@NNLKOFMF@?$EA?$FL?$CFs?$FN?3?5Finish?$CB?$AA@
CONST	SEGMENT
??_C@_0P@NNLKOFMF@?$EA?$FL?$CFs?$FN?3?5Finish?$CB?$AA@ DB '@[%s]: Finish!'
	DB	00H						; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?NPCClick@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z
_TEXT	SEGMENT
_lpNpc$ = 8						; size = 4
_lpObj$ = 12						; size = 4
?NPCClick@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z PROC	; cZtQuest::NPCClick, COMDAT
; _this$ = ecx

; 77   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 78   : 	if(!this->Enable)

  00003	83 39 00	 cmp	 DWORD PTR [ecx], 0
  00006	0f 84 e5 00 00
	00		 je	 $LN1@NPCClick

; 79   : 		return;
; 80   : 
; 81   : 	if(lpNpc->Class != this->NPC)

  0000c	8b 45 08	 mov	 eax, DWORD PTR _lpNpc$[ebp]
  0000f	0f b7 90 b8 00
	00 00		 movzx	 edx, WORD PTR [eax+184]
  00016	3b 51 04	 cmp	 edx, DWORD PTR [ecx+4]
  00019	0f 85 d2 00 00
	00		 jne	 $LN1@NPCClick

; 82   : 		return;
; 83   : 
; 84   : 	if(lpObj->ZtQuestNum == 0) lpObj->ZtQuestNum++;	//Fix

  0001f	53		 push	 ebx
  00020	56		 push	 esi
  00021	8b 75 0c	 mov	 esi, DWORD PTR _lpObj$[ebp]
  00024	83 be b0 22 00
	00 00		 cmp	 DWORD PTR [esi+8880], 0
  0002b	bb 01 00 00 00	 mov	 ebx, 1
  00030	75 06		 jne	 SHORT $LN4@NPCClick
  00032	89 9e b0 22 00
	00		 mov	 DWORD PTR [esi+8880], ebx
$LN4@NPCClick:

; 85   : 
; 86   : 	int Number = lpObj->ZtQuestNum;

  00038	8b 86 b0 22 00
	00		 mov	 eax, DWORD PTR [esi+8880]

; 87   : 
; 88   : 	if(Number >= this->qNum)

  0003e	3b 81 3c 6b 03
	00		 cmp	 eax, DWORD PTR [ecx+224060]
  00044	7c 1a		 jl	 SHORT $LN3@NPCClick

; 89   : 	{
; 90   : 		MessageChat(lpObj->m_Index,"@[%s]: Finish!",this->NameQuest);

  00046	8b 06		 mov	 eax, DWORD PTR [esi]
  00048	83 c1 08	 add	 ecx, 8
  0004b	51		 push	 ecx
  0004c	68 00 00 00 00	 push	 OFFSET ??_C@_0P@NNLKOFMF@?$EA?$FL?$CFs?$FN?3?5Finish?$CB?$AA@
  00051	50		 push	 eax
  00052	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  00057	83 c4 0c	 add	 esp, 12			; 0000000cH
  0005a	5e		 pop	 esi
  0005b	5b		 pop	 ebx

; 111  : 	}
; 112  : }

  0005c	5d		 pop	 ebp
  0005d	c2 08 00	 ret	 8
$LN3@NPCClick:

; 91   : 		return;
; 92   : 	}
; 93   : 
; 94   : 	if(lpObj->ZtQuestKill == this->Quest[Number].Count)

  00060	8b 96 b4 22 00
	00		 mov	 edx, DWORD PTR [esi+8884]
  00066	57		 push	 edi
  00067	8b f8		 mov	 edi, eax
  00069	69 ff e0 00 00
	00		 imul	 edi, 224		; 000000e0H
  0006f	03 f9		 add	 edi, ecx
  00071	3b 57 40	 cmp	 edx, DWORD PTR [edi+64]
  00074	75 29		 jne	 SHORT $LN2@NPCClick

; 95   : 	{
; 96   : 		this->Pressent(lpObj,this->Quest[Number].Reward,this->Quest[Number].Gift,this->Quest[Number].iLevel);

  00076	8b 47 50	 mov	 eax, DWORD PTR [edi+80]
  00079	8b 57 4c	 mov	 edx, DWORD PTR [edi+76]
  0007c	50		 push	 eax
  0007d	8b 47 48	 mov	 eax, DWORD PTR [edi+72]
  00080	52		 push	 edx
  00081	50		 push	 eax
  00082	56		 push	 esi
  00083	e8 00 00 00 00	 call	 ?Pressent@cZtQuest@@QAEXPAUOBJECTSTRUCT@@HHH@Z ; cZtQuest::Pressent

; 97   : 
; 98   : 		lpObj->ZtQuestNum++;

  00088	01 9e b0 22 00
	00		 add	 DWORD PTR [esi+8880], ebx
  0008e	5f		 pop	 edi

; 99   : 		lpObj->ZtQuestKill = 0;

  0008f	c7 86 b4 22 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+8884], 0
  00099	5e		 pop	 esi
  0009a	5b		 pop	 ebx

; 111  : 	}
; 112  : }

  0009b	5d		 pop	 ebp
  0009c	c2 08 00	 ret	 8
$LN2@NPCClick:

; 100  : 	}
; 101  : 	else
; 102  : 	{
; 103  : 		//LPMONSTER_ATTRIBUTE lpMA = gMAttr.GetAttr(this->Quest[Number].Monster);
; 104  : 		MessageChat(lpObj->m_Index,g_ZtText.GetText(102),this->NameQuest,Number);	//Fix

  0009f	8d 59 08	 lea	 ebx, DWORD PTR [ecx+8]
  000a2	50		 push	 eax
  000a3	53		 push	 ebx
  000a4	6a 66		 push	 102			; 00000066H
  000a6	b9 00 00 00 00	 mov	 ecx, OFFSET ?g_ZtText@@3VCZtText@@A ; g_ZtText
  000ab	e8 00 00 00 00	 call	 ?GetText@CZtText@@QAEPADH@Z ; CZtText::GetText
  000b0	8b 0e		 mov	 ecx, DWORD PTR [esi]
  000b2	50		 push	 eax
  000b3	51		 push	 ecx
  000b4	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 105  : 		MessageChat(lpObj->m_Index,"@[%s]: %s",this->NameQuest,this->Quest[Number].Msg1);

  000b9	8b 06		 mov	 eax, DWORD PTR [esi]
  000bb	8d 57 54	 lea	 edx, DWORD PTR [edi+84]
  000be	52		 push	 edx
  000bf	53		 push	 ebx
  000c0	68 00 00 00 00	 push	 OFFSET ??_C@_09NPPJFDAI@?$EA?$FL?$CFs?$FN?3?5?$CFs?$AA@
  000c5	50		 push	 eax
  000c6	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat

; 106  : 		MessageChat(lpObj->m_Index,"@[%s]: %s [%d/%d]",
; 107  : 			this->NameQuest,
; 108  : 			this->Quest[Number].Msg2,
; 109  : 			lpObj->ZtQuestKill,
; 110  : 			this->Quest[Number].Count);

  000cb	8b 4f 40	 mov	 ecx, DWORD PTR [edi+64]
  000ce	8b 96 b4 22 00
	00		 mov	 edx, DWORD PTR [esi+8884]
  000d4	8b 06		 mov	 eax, DWORD PTR [esi]
  000d6	51		 push	 ecx
  000d7	52		 push	 edx
  000d8	81 c7 b8 00 00
	00		 add	 edi, 184		; 000000b8H
  000de	57		 push	 edi
  000df	53		 push	 ebx
  000e0	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@OIALNJLO@?$EA?$FL?$CFs?$FN?3?5?$CFs?5?$FL?$CFd?1?$CFd?$FN?$AA@
  000e5	50		 push	 eax
  000e6	e8 00 00 00 00	 call	 ?MessageChat@@YAXHPADZZ	; MessageChat
  000eb	83 c4 38	 add	 esp, 56			; 00000038H
  000ee	5f		 pop	 edi
  000ef	5e		 pop	 esi
  000f0	5b		 pop	 ebx
$LN1@NPCClick:

; 111  : 	}
; 112  : }

  000f1	5d		 pop	 ebp
  000f2	c2 08 00	 ret	 8
?NPCClick@cZtQuest@@QAEXPAUOBJECTSTRUCT@@0@Z ENDP	; cZtQuest::NPCClick
_TEXT	ENDS
END
